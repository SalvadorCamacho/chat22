(self.webpackChunkapp=self.webpackChunkapp||[]).push([[179],{440:(Jt,ct,j)=>{"use strict";j.d(ct,{nm:()=>Q});var u=j(6351);j(5e3),j(5867);var ot=j(5861),Le=j(9681),rt=j(4859),_t=j(2090),St=j(1877);const qe=new Map,pe={activated:!1,tokenObservers:[]},Ve={initialized:!1,enabled:!1};function Ee(ze){return qe.get(ze)||pe}function Te(ze,We){qe.set(ze,We)}function Je(){return Ve}class nt{constructor(We,lt,Ot,zt,rn){if(this.operation=We,this.retryPolicy=lt,this.getWaitDuration=Ot,this.lowerBound=zt,this.upperBound=rn,this.pending=null,this.nextErrorWaitInterval=zt,zt>rn)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(We){var lt=this;return(0,ot.Z)(function*(){lt.stop();try{lt.pending=new _t.BH,yield function at(ze){return new Promise(We=>{setTimeout(We,ze)})}(lt.getNextRun(We)),lt.pending.resolve(),yield lt.pending.promise,lt.pending=new _t.BH,yield lt.operation(),lt.pending.resolve(),yield lt.pending.promise,lt.process(!0).catch(()=>{})}catch(Ot){lt.retryPolicy(Ot)?lt.process(!1).catch(()=>{}):lt.stop()}})()}getNextRun(We){if(We)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const lt=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),lt}}}const Xe=new _t.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function ft(ze){if(!Ee(ze).activated)throw Xe.create("use-before-activation",{appName:ze.name})}function ln(ze,We){return tn.apply(this,arguments)}function tn(){return(tn=(0,ot.Z)(function*({url:ze,body:We},lt){const Ot={"Content-Type":"application/json"},zt=lt.getImmediate({optional:!0});if(zt){const hs=yield zt.getHeartbeatsHeader();hs&&(Ot["X-Firebase-Client"]=hs)}const rn={method:"POST",body:JSON.stringify(We),headers:Ot};let Sr,ii;try{Sr=yield fetch(ze,rn)}catch(hs){throw Xe.create("fetch-network-error",{originalErrorMessage:hs.message})}if(200!==Sr.status)throw Xe.create("fetch-status-error",{httpStatus:Sr.status});try{ii=yield Sr.json()}catch(hs){throw Xe.create("fetch-parse-error",{originalErrorMessage:hs.message})}const Xn=ii.ttl.match(/^([\d.]+)(s)$/);if(!Xn||!Xn[2]||isNaN(Number(Xn[1])))throw Xe.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${ii.ttl}`});const Zr=1e3*Number(Xn[1]),Ji=Date.now();return{token:ii.attestationToken,expireTimeMillis:Ji+Zr,issuedAtTimeMillis:Ji}})).apply(this,arguments)}function Kn(ze,We){const{projectId:lt,appId:Ot,apiKey:zt}=ze.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${lt}/apps/${Ot}:exchangeDebugToken?key=${zt}`,body:{debug_token:We}}}const ir="firebase-app-check-store";let Jn=null;function cr(){return Jn||(Jn=new Promise((ze,We)=>{try{const lt=indexedDB.open("firebase-app-check-database",1);lt.onsuccess=Ot=>{ze(Ot.target.result)},lt.onerror=Ot=>{var zt;We(Xe.create("storage-open",{originalErrorMessage:null===(zt=Ot.target.error)||void 0===zt?void 0:zt.message}))},lt.onupgradeneeded=Ot=>{0===Ot.oldVersion&&Ot.target.result.createObjectStore(ir,{keyPath:"compositeKey"})}}catch(lt){We(Xe.create("storage-open",{originalErrorMessage:lt.message}))}}),Jn)}function kn(){return(kn=(0,ot.Z)(function*(ze,We){const Ot=(yield cr()).transaction(ir,"readwrite"),rn=Ot.objectStore(ir).put({compositeKey:ze,value:We});return new Promise((Sr,ii)=>{rn.onsuccess=Xn=>{Sr()},Ot.onerror=Xn=>{var Zr;ii(Xe.create("storage-set",{originalErrorMessage:null===(Zr=Xn.target.error)||void 0===Zr?void 0:Zr.message}))}})})).apply(this,arguments)}const Oi=new St.Yd("@firebase/app-check");function ai(ze,We){return(0,_t.hl)()?function on(ze,We){return function ni(ze,We){return kn.apply(this,arguments)}(function jr(ze){return`${ze.options.appId}-${ze.name}`}(ze),We)}(ze,We).catch(lt=>{Oi.warn(`Failed to write token to IndexedDB. Error: ${lt}`)}):Promise.resolve()}function li(){return Je().enabled}function er(){return nn.apply(this,arguments)}function nn(){return(nn=(0,ot.Z)(function*(){const ze=Je();if(ze.enabled&&ze.token)return ze.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const en={error:"UNKNOWN_ERROR"};function yn(ze){return _t.US.encodeString(JSON.stringify(ze),!1)}function _n(ze){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,ot.Z)(function*(ze,We=!1){const lt=ze.app;ft(lt);const Ot=Ee(lt);let rn,zt=Ot.token;if(!zt){const Xn=yield Ot.cachedTokenPromise;Xn&&qt(Xn)&&(zt=Xn)}if(!We&&zt&&qt(zt))return{token:zt.token};let ii,Sr=!1;if(li()){Ot.exchangeTokenPromise||(Ot.exchangeTokenPromise=ln(Kn(lt,yield er()),ze.heartbeatServiceProvider).then(Zr=>(Ot.exchangeTokenPromise=void 0,Zr)),Sr=!0);const Xn=yield Ot.exchangeTokenPromise;return yield ai(lt,Xn),Te(lt,Object.assign(Object.assign({},Ot),{token:Xn})),{token:Xn.token}}try{Ot.exchangeTokenPromise||(Ot.exchangeTokenPromise=Ot.provider.getToken().then(Xn=>(Ot.exchangeTokenPromise=void 0,Xn)),Sr=!0),zt=yield Ot.exchangeTokenPromise}catch(Xn){"appCheck/throttled"===Xn.code?Oi.warn(Xn.message):Oi.error(Xn),rn=Xn}return zt?(ii={token:zt.token},Te(lt,Object.assign(Object.assign({},Ot),{token:zt})),yield ai(lt,zt)):ii=In(rn),Sr&&ut(lt,ii),ii})).apply(this,arguments)}function Ce(ze,We){const lt=Ee(ze),Ot=lt.tokenObservers.filter(zt=>zt.next!==We);0===Ot.length&&lt.tokenRefresher&&lt.tokenRefresher.isRunning()&&lt.tokenRefresher.stop(),Te(ze,Object.assign(Object.assign({},lt),{tokenObservers:Ot}))}function je(ze){const{app:We}=ze,lt=Ee(We);let Ot=lt.tokenRefresher;Ot||(Ot=function Et(ze){const{app:We}=ze;return new nt((0,ot.Z)(function*(){let Ot;if(Ot=Ee(We).token?yield _n(ze,!0):yield _n(ze),Ot.error)throw Ot.error}),()=>!0,()=>{const lt=Ee(We);if(lt.token){let Ot=lt.token.issuedAtTimeMillis+.5*(lt.token.expireTimeMillis-lt.token.issuedAtTimeMillis)+3e5;return Ot=Math.min(Ot,lt.token.expireTimeMillis-3e5),Math.max(0,Ot-Date.now())}return 0},3e4,96e4)}(ze),Te(We,Object.assign(Object.assign({},lt),{tokenRefresher:Ot}))),!Ot.isRunning()&&lt.isTokenAutoRefreshEnabled&&Ot.start()}function ut(ze,We){const lt=Ee(ze).tokenObservers;for(const Ot of lt)try{"EXTERNAL"===Ot.type&&null!=We.error?Ot.error(We.error):Ot.next(We)}catch(zt){}}function qt(ze){return ze.expireTimeMillis-Date.now()>0}function In(ze){return{token:yn(en),error:ze}}class Qn{constructor(We,lt){this.app=We,this.heartbeatServiceProvider=lt}_delete(){const{tokenObservers:We}=Ee(this.app);for(const lt of We)Ce(this.app,lt.next);return Promise.resolve()}}const Ni="app-check-internal";!function Tr(){(0,Le._registerComponent)(new rt.wA("app-check",ze=>function Yr(ze,We){return new Qn(ze,We)}(ze.getProvider("app").getImmediate(),ze.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((ze,We,lt)=>{ze.getProvider(Ni).initialize()})),(0,Le._registerComponent)(new rt.wA(Ni,ze=>function Bn(ze){return{getToken:We=>_n(ze,We),addTokenListener:We=>function Fe(ze,We,lt,Ot){const{app:zt}=ze,rn=Ee(zt),Sr={next:lt,error:Ot,type:We};if(Te(zt,Object.assign(Object.assign({},rn),{tokenObservers:[...rn.tokenObservers,Sr]})),rn.token&&qt(rn.token)){const ii=rn.token;Promise.resolve().then(()=>{lt({token:ii.token}),je(ze)}).catch(()=>{})}rn.cachedTokenPromise.then(()=>je(ze))}(ze,"INTERNAL",We),removeTokenListener:We=>Ce(ze.app,We)}}(ze.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Le.registerVersion)("@firebase/app-check","0.5.5")}();class Q{constructor(){return(0,u.vb)("app-check")}}"undefined"!=typeof window&&window},4941:(Jt,ct,j)=>{"use strict";j.d(ct,{zQ:()=>pt,ww:()=>st,rT:()=>Je,f7:()=>Ut,L6:()=>Ee,_Q:()=>Te,lh:()=>Ze,Qv:()=>Ve,nw:()=>Xt});var u=j(5e3),re=j(8929),Z=j(1086),Ne=j(2916),Se=j(5254),ae=j(6787),Ie=j(341),we=j(2654),ye=j(2102),de=j(5279),me=j(5283);class te extends re.xQ{constructor(nt=Number.POSITIVE_INFINITY,at=Number.POSITIVE_INFINITY,Re){super(),this.scheduler=Re,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=nt<1?1:nt,this._windowTime=at<1?1:at,at===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(nt){if(!this.isStopped){const at=this._events;at.push(nt),at.length>this._bufferSize&&at.shift()}super.next(nt)}nextTimeWindow(nt){this.isStopped||(this._events.push(new he(this._getNow(),nt)),this._trimBufferThenGetEvents()),super.next(nt)}_subscribe(nt){const at=this._infiniteTimeWindow,Re=at?this._events:this._trimBufferThenGetEvents(),Xe=this.scheduler,Tt=Re.length;let ft;if(this.closed)throw new de.N;if(this.isStopped||this.hasError?ft=we.w.EMPTY:(this.observers.push(nt),ft=new me.W(this,nt)),Xe&&nt.add(nt=new ye.ht(nt,Xe)),at)for(let Zt=0;Zt<Tt&&!nt.closed;Zt++)nt.next(Re[Zt]);else for(let Zt=0;Zt<Tt&&!nt.closed;Zt++)nt.next(Re[Zt].value);return this.hasError?nt.error(this.thrownError):this.isStopped&&nt.complete(),ft}_getNow(){return(this.scheduler||Ie.c).now()}_trimBufferThenGetEvents(){const nt=this._getNow(),at=this._bufferSize,Re=this._windowTime,Xe=this._events,Tt=Xe.length;let ft=0;for(;ft<Tt&&!(nt-Xe[ft].time<Re);)ft++;return Tt>at&&(ft=Math.max(ft,Tt-at)),ft>0&&Xe.splice(0,ft),Xe}}class he{constructor(nt,at){this.time=nt,this.value=at}}function Ue(Qe,nt,at){let Re;return Re=Qe&&"object"==typeof Qe?Qe:{bufferSize:Qe,windowTime:nt,refCount:!1,scheduler:at},Xe=>Xe.lift(function Oe({bufferSize:Qe=Number.POSITIVE_INFINITY,windowTime:nt=Number.POSITIVE_INFINITY,refCount:at,scheduler:Re}){let Xe,ft,Tt=0,Zt=!1,gn=!1;return function(ln){let tn;Tt++,!Xe||Zt?(Zt=!1,Xe=new te(Qe,nt,Re),tn=Xe.subscribe(this),ft=ln.subscribe({next(mr){Xe.next(mr)},error(mr){Zt=!0,Xe.error(mr)},complete(){gn=!0,ft=void 0,Xe.complete()}}),gn&&(ft=void 0)):tn=Xe.subscribe(this),this.add(()=>{Tt--,tn.unsubscribe(),tn=void 0,ft&&!gn&&at&&0===Tt&&(ft.unsubscribe(),ft=void 0,Xe=void 0)})}}(Re))}var _e=j(7545);function Pe(Qe,nt){return nt?(0,_e.w)(()=>Qe,nt):(0,_e.w)(()=>Qe)}var ke=j(4850),ht=j(7224),ve=j(8915),ot=j(2198),Le=j(6351),rt=j(2011),_t=j(9808),St=j(440),qe=j(127);const Ve=new u.OlP("angularfire2.auth.use-emulator"),Ee=new u.OlP("angularfire2.auth.settings"),Te=new u.OlP("angularfire2.auth.tenant-id"),Je=new u.OlP("angularfire2.auth.langugage-code"),Ze=new u.OlP("angularfire2.auth.use-device-language"),Ut=new u.OlP("angularfire.auth.persistence"),Xt=(Qe,nt,at,Re,Xe,Tt,ft,Zt)=>(0,rt.cc)(`${Qe.name}.auth`,"AngularFireAuth",Qe.name,()=>{const gn=nt.runOutsideAngular(()=>Qe.auth());if(at&&gn.useEmulator(...at),Re&&(gn.tenantId=Re),gn.languageCode=Xe,Tt&&gn.useDeviceLanguage(),ft)for(const[An,ln]of Object.entries(ft))gn.settings[An]=ln;return Zt&&gn.setPersistence(Zt),gn},[at,Re,Xe,Tt,ft,Zt]);let pt=(()=>{class Qe{constructor(at,Re,Xe,Tt,ft,Zt,gn,An,ln,tn,mr,xr){const Kn=new re.xQ,Yn=(0,Z.of)(void 0).pipe((0,ye.QV)(ft.outsideAngular),(0,_e.w)(()=>Tt.runOutsideAngular(()=>Promise.resolve().then(j.bind(j,4087)))),(0,ke.U)(()=>(0,rt.on)(at,Tt,Re)),(0,ke.U)(jt=>Xt(jt,Tt,Zt,An,ln,tn,gn,mr)),Ue({bufferSize:1,refCount:!1}));if((0,_t.PM)(Xe))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Z.of)(null);else{Yn.pipe((0,ht.P)()).subscribe();const ir=Yn.pipe((0,_e.w)(cr=>cr.getRedirectResult().then(Ur=>Ur,()=>null)),Le.iC,Ue({bufferSize:1,refCount:!1})),Hr=Yn.pipe((0,_e.w)(cr=>new Ne.y(Ur=>({unsubscribe:Tt.runOutsideAngular(()=>cr.onAuthStateChanged(on=>Ur.next(on),on=>Ur.error(on),()=>Ur.complete()))})))),Jn=Yn.pipe((0,_e.w)(cr=>new Ne.y(Ur=>({unsubscribe:Tt.runOutsideAngular(()=>cr.onIdTokenChanged(on=>Ur.next(on),on=>Ur.error(on),()=>Ur.complete()))}))));this.authState=ir.pipe(Pe(Hr),(0,ve.R)(ft.outsideAngular),(0,ye.QV)(ft.insideAngular)),this.user=ir.pipe(Pe(Jn),(0,ve.R)(ft.outsideAngular),(0,ye.QV)(ft.insideAngular)),this.idToken=this.user.pipe((0,_e.w)(cr=>cr?(0,Se.D)(cr.getIdToken()):(0,Z.of)(null))),this.idTokenResult=this.user.pipe((0,_e.w)(cr=>cr?(0,Se.D)(cr.getIdTokenResult()):(0,Z.of)(null))),this.credential=(0,ae.T)(ir,Kn,this.authState.pipe((0,ot.h)(cr=>!cr))).pipe((0,ke.U)(cr=>(null==cr?void 0:cr.user)?cr:null),(0,ve.R)(ft.outsideAngular),(0,ye.QV)(ft.insideAngular))}return(0,rt.pX)(this,Yn,Tt,{spy:{apply:(jt,ir,Hr)=>{(jt.startsWith("signIn")||jt.startsWith("createUser"))&&Hr.then(Jn=>Kn.next(Jn))}}})}}return Qe.\u0275fac=function(at){return new(at||Qe)(u.LFG(rt.Dh),u.LFG(rt.xv,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(Le.HU),u.LFG(Ve,8),u.LFG(Ee,8),u.LFG(Te,8),u.LFG(Je,8),u.LFG(Ze,8),u.LFG(Ut,8),u.LFG(St.nm,8))},Qe.\u0275prov=u.Yz7({token:Qe,factory:Qe.\u0275fac,providedIn:"any"}),Qe})(),st=(()=>{class Qe{constructor(){qe.Z.registerVersion("angularfire",Le.q4.full,"auth-compat")}}return Qe.\u0275fac=function(at){return new(at||Qe)},Qe.\u0275mod=u.oAB({type:Qe}),Qe.\u0275inj=u.cJS({providers:[pt]}),Qe})()},2796:(Jt,ct,j)=>{"use strict";j.d(ct,{ST:()=>km,yb:()=>Zy});var u=j(5e3),re=j(353),Z=j(2916),Ne=j(5254),Se=j(1086),ae=j(6351),Ie=j(3489);function we(){return i=>i.lift(new ye)}class ye{call(e,t){return t.subscribe(new de(e))}}class de extends Ie.L{constructor(e){super(e),this.hasPrev=!1}_next(e){let t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)}}var pe,me=j(1059),te=j(4850),he=j(2014),Ue=j(5778),Oe=j(2198),_e=j(2011),Pe=j(9808),ht=(j(4087),j(3942)),ve=j(5861),ot=j(9681),Le=j(4859),rt=j(1877),_t=j(2090),St="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},qe={},Ve=Ve||{},Ee=St||self;function Te(){}function Je(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function Ze(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var Xt="closure_uid_"+(1e9*Math.random()>>>0),pt=0;function st(i,e,t){return i.call.apply(i.bind,arguments)}function Qe(i,e,t){if(!i)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var d=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(d,o),i.apply(e,d)}}return function(){return i.apply(e,arguments)}}function nt(i,e,t){return(nt=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?st:Qe).apply(null,arguments)}function at(i,e){var t=Array.prototype.slice.call(arguments,1);return function(){var o=t.slice();return o.push.apply(o,arguments),i.apply(this,o)}}function Re(i,e){function t(){}t.prototype=e.prototype,i.Z=e.prototype,i.prototype=new t,i.prototype.constructor=i,i.Vb=function(o,d,_){for(var C=Array(arguments.length-2),R=2;R<arguments.length;R++)C[R-2]=arguments[R];return e.prototype[d].apply(o,C)}}function Xe(){this.s=this.s,this.o=this.o}var ft={};Xe.prototype.s=!1,Xe.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var i=function Ut(i){return Object.prototype.hasOwnProperty.call(i,Xt)&&i[Xt]||(i[Xt]=++pt)}(this);delete ft[i]}},Xe.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Zt=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let t=0;t<i.length;t++)if(t in i&&i[t]===e)return t;return-1},gn=Array.prototype.forEach?function(i,e,t){Array.prototype.forEach.call(i,e,t)}:function(i,e,t){const o=i.length,d="string"==typeof i?i.split(""):i;for(let _=0;_<o;_++)_ in d&&e.call(t,d[_],_,i)};function ln(i){return Array.prototype.concat.apply([],arguments)}function tn(i){const e=i.length;if(0<e){const t=Array(e);for(let o=0;o<e;o++)t[o]=i[o];return t}return[]}function mr(i){return/^[\s\xa0]*$/.test(i)}var jt,xr=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function Kn(i,e){return-1!=i.indexOf(e)}function Yn(i,e){return i<e?-1:i>e?1:0}e:{var ir=Ee.navigator;if(ir){var Hr=ir.userAgent;if(Hr){jt=Hr;break e}}jt=""}function Jn(i,e,t){for(const o in i)e.call(t,i[o],o,i)}function cr(i){const e={};for(const t in i)e[t]=i[t];return e}var Ur="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function on(i,e){let t,o;for(let d=1;d<arguments.length;d++){for(t in o=arguments[d],o)i[t]=o[t];for(let _=0;_<Ur.length;_++)t=Ur[_],Object.prototype.hasOwnProperty.call(o,t)&&(i[t]=o[t])}}function qr(i){return qr[" "](i),i}qr[" "]=Te;var Pn,i,ni=Kn(jt,"Opera"),kn=Kn(jt,"Trident")||Kn(jt,"MSIE"),hn=Kn(jt,"Edge"),Dn=hn||kn,jr=Kn(jt,"Gecko")&&!(Kn(jt.toLowerCase(),"webkit")&&!Kn(jt,"Edge"))&&!(Kn(jt,"Trident")||Kn(jt,"MSIE"))&&!Kn(jt,"Edge"),Oi=Kn(jt.toLowerCase(),"webkit")&&!Kn(jt,"Edge");function Vn(){var i=Ee.document;return i?i.documentMode:void 0}e:{var ai="",Nr=(i=jt,jr?/rv:([^\);]+)(\)|;)/.exec(i):hn?/Edge\/([\d\.]+)/.exec(i):kn?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):Oi?/WebKit\/(\S+)/.exec(i):ni?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(Nr&&(ai=Nr?Nr[1]:""),kn){var wn=Vn();if(null!=wn&&wn>parseFloat(ai)){Pn=String(wn);break e}}Pn=ai}var li={};var en=Ee.document&&kn&&(Vn()||parseInt(Pn,10))||void 0,yn=function(){if(!Ee.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{Ee.addEventListener("test",Te,e),Ee.removeEventListener("test",Te,e)}catch(t){}return i}();function _n(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}function Rn(i,e){if(_n.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var t=this.type=i.type,o=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(jr){e:{try{qr(e.nodeName);var d=!0;break e}catch(_){}d=!1}d||(e=null)}}else"mouseover"==t?e=i.fromElement:"mouseout"==t&&(e=i.toElement);this.relatedTarget=e,o?(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:Fe[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&Rn.Z.h.call(this)}}_n.prototype.h=function(){this.defaultPrevented=!0},Re(Rn,_n);var Fe={2:"touch",3:"pen",4:"mouse"};Rn.prototype.h=function(){Rn.Z.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var Ce="closure_listenable_"+(1e6*Math.random()|0),je=0;function Et(i,e,t,o,d){this.listener=i,this.proxy=null,this.src=e,this.type=t,this.capture=!!o,this.ia=d,this.key=++je,this.ca=this.fa=!1}function ut(i){i.ca=!0,i.listener=null,i.proxy=null,i.src=null,i.ia=null}function qt(i){this.src=i,this.g={},this.h=0}function In(i,e){var t=e.type;if(t in i.g){var _,o=i.g[t],d=Zt(o,e);(_=0<=d)&&Array.prototype.splice.call(o,d,1),_&&(ut(e),0==i.g[t].length&&(delete i.g[t],i.h--))}}function Qn(i,e,t,o){for(var d=0;d<i.length;++d){var _=i[d];if(!_.ca&&_.listener==e&&_.capture==!!t&&_.ia==o)return d}return-1}qt.prototype.add=function(i,e,t,o,d){var _=i.toString();(i=this.g[_])||(i=this.g[_]=[],this.h++);var C=Qn(i,e,o,d);return-1<C?(e=i[C],t||(e.fa=!1)):((e=new Et(e,this.src,_,!!o,d)).fa=t,i.push(e)),e};var Yr="closure_lm_"+(1e6*Math.random()|0),Bn={};function Er(i,e,t,o,d){if(o&&o.once)return Rr(i,e,t,o,d);if(Array.isArray(e)){for(var _=0;_<e.length;_++)Er(i,e[_],t,o,d);return null}return t=Vr(t),i&&i[Ce]?i.N(e,t,Ze(o)?!!o.capture:!!o,d):Un(i,e,t,!1,o,d)}function Un(i,e,t,o,d,_){if(!e)throw Error("Invalid event type");var C=Ze(d)?!!d.capture:!!d,R=Or(i);if(R||(i[Yr]=R=new qt(i)),(t=R.add(e,t,o,C,_)).proxy)return t;if(o=function br(){var e=Mr;return function i(t){return e.call(i.src,i.listener,t)}}(),t.proxy=o,o.src=i,o.listener=t,i.addEventListener)yn||(d=C),void 0===d&&(d=!1),i.addEventListener(e.toString(),o,d);else if(i.attachEvent)i.attachEvent(as(e.toString()),o);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(o)}return t}function Rr(i,e,t,o,d){if(Array.isArray(e)){for(var _=0;_<e.length;_++)Rr(i,e[_],t,o,d);return null}return t=Vr(t),i&&i[Ce]?i.O(e,t,Ze(o)?!!o.capture:!!o,d):Un(i,e,t,!0,o,d)}function Fn(i,e,t,o,d){if(Array.isArray(e))for(var _=0;_<e.length;_++)Fn(i,e[_],t,o,d);else o=Ze(o)?!!o.capture:!!o,t=Vr(t),i&&i[Ce]?(i=i.i,(e=String(e).toString())in i.g&&-1<(t=Qn(_=i.g[e],t,o,d))&&(ut(_[t]),Array.prototype.splice.call(_,t,1),0==_.length&&(delete i.g[e],i.h--))):i&&(i=Or(i))&&(e=i.g[e.toString()],i=-1,e&&(i=Qn(e,t,o,d)),(t=-1<i?e[i]:null)&&Li(t))}function Li(i){if("number"!=typeof i&&i&&!i.ca){var e=i.src;if(e&&e[Ce])In(e.i,i);else{var t=i.type,o=i.proxy;e.removeEventListener?e.removeEventListener(t,o,i.capture):e.detachEvent?e.detachEvent(as(t),o):e.addListener&&e.removeListener&&e.removeListener(o),(t=Or(e))?(In(t,i),0==t.h&&(t.src=null,e[Yr]=null)):ut(i)}}}function as(i){return i in Bn?Bn[i]:Bn[i]="on"+i}function Mr(i,e){if(i.ca)i=!0;else{e=new Rn(e,this);var t=i.listener,o=i.ia||i.src;i.fa&&Li(i),i=t.call(o,e)}return i}function Or(i){return(i=i[Yr])instanceof qt?i:null}var bi="__closure_events_fn_"+(1e9*Math.random()>>>0);function Vr(i){return"function"==typeof i?i:(i[bi]||(i[bi]=function(e){return i.handleEvent(e)}),i[bi])}function Mt(){Xe.call(this),this.i=new qt(this),this.P=this,this.I=null}function mn(i,e){var t,o=i.I;if(o)for(t=[];o;o=o.I)t.push(o);if(i=i.P,o=e.type||e,"string"==typeof e)e=new _n(e,i);else if(e instanceof _n)e.target=e.target||i;else{var d=e;on(e=new _n(o,i),d)}if(d=!0,t)for(var _=t.length-1;0<=_;_--){var C=e.g=t[_];d=sr(C,o,!0,e)&&d}if(d=sr(C=e.g=i,o,!0,e)&&d,d=sr(C,o,!1,e)&&d,t)for(_=0;_<t.length;_++)d=sr(C=e.g=t[_],o,!1,e)&&d}function sr(i,e,t,o){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var d=!0,_=0;_<e.length;++_){var C=e[_];if(C&&!C.ca&&C.capture==t){var R=C.listener,K=C.ia||C.src;C.fa&&In(i.i,C),d=!1!==R.call(K,o)&&d}}return d&&!o.defaultPrevented}Re(Mt,Xe),Mt.prototype[Ce]=!0,Mt.prototype.removeEventListener=function(i,e,t,o){Fn(this,i,e,t,o)},Mt.prototype.M=function(){if(Mt.Z.M.call(this),this.i){var e,i=this.i;for(e in i.g){for(var t=i.g[e],o=0;o<t.length;o++)ut(t[o]);delete i.g[e],i.h--}}this.I=null},Mt.prototype.N=function(i,e,t,o){return this.i.add(String(i),e,!1,t,o)},Mt.prototype.O=function(i,e,t,o){return this.i.add(String(i),e,!0,t,o)};var yr=Ee.JSON.stringify;function Kr(){var i=Pi;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var Ln,yi=new class{constructor(i,e){this.i=i,this.j=e,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}(()=>new dr,i=>i.reset());class dr{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Br(i){Ee.setTimeout(()=>{throw i},0)}function Vi(i,e){Ln||function Zi(){var i=Ee.Promise.resolve(void 0);Ln=function(){i.then(Ni)}}(),Qi||(Ln(),Qi=!0),Pi.add(i,e)}var Qi=!1,Pi=new class Gr{constructor(){this.h=this.g=null}add(e,t){const o=yi.get();o.set(e,t),this.h?this.h.next=o:this.g=o,this.h=o}};function Ni(){for(var i;i=Kr();){try{i.h.call(i.g)}catch(t){Br(t)}var e=yi;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}Qi=!1}function Tr(i,e){Mt.call(this),this.h=i||1,this.g=e||Ee,this.j=nt(this.kb,this),this.l=Date.now()}function Bi(i){i.da=!1,i.S&&(i.g.clearTimeout(i.S),i.S=null)}function Ai(i,e,t){if("function"==typeof i)t&&(i=nt(i,t));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=nt(i.handleEvent,i)}return 2147483647<Number(e)?-1:Ee.setTimeout(i,e||0)}function Q(i){i.g=Ai(()=>{i.g=null,i.i&&(i.i=!1,Q(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}Re(Tr,Mt),(pe=Tr.prototype).da=!1,pe.S=null,pe.kb=function(){if(this.da){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-i):(this.S&&(this.g.clearTimeout(this.S),this.S=null),mn(this,"tick"),this.da&&(Bi(this),this.start()))}},pe.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},pe.M=function(){Tr.Z.M.call(this),Bi(this),delete this.g};class ge extends Xe{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Q(this)}M(){super.M(),this.g&&(Ee.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(i){Xe.call(this),this.h=i,this.g={}}Re(le,Xe);var H=[];function He(i,e,t,o){Array.isArray(t)||(t&&(H[0]=t.toString()),t=H);for(var d=0;d<t.length;d++){var _=Er(e,t[d],o||i.handleEvent,!1,i.h||i);if(!_)break;i.g[_.key]=_}}function tt(i){Jn(i.g,function(e,t){this.g.hasOwnProperty(t)&&Li(e)},i),i.g={}}function bt(){this.g=!0}function Rt(i,e,t,o){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function xn(i,e){if(!i.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(i=0;i<t.length;i++)if(Array.isArray(t[i])){var o=t[i];if(!(2>o.length)){var d=o[1];if(Array.isArray(d)&&!(1>d.length)){var _=d[0];if("noop"!=_&&"stop"!=_&&"close"!=_)for(var C=1;C<d.length;C++)d[C]=""}}}return yr(t)}catch(R){return e}}(i,t)+(o?" "+o:"")})}le.prototype.M=function(){le.Z.M.call(this),tt(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},bt.prototype.Aa=function(){this.g=!1},bt.prototype.info=function(){};var Tn={},zn=null;function ri(){return zn=zn||new Mt}function Xi(i){_n.call(this,Tn.Ma,i)}function ze(i){const e=ri();mn(e,new Xi(e,i))}function We(i,e){_n.call(this,Tn.STAT_EVENT,i),this.stat=e}function lt(i){const e=ri();mn(e,new We(e,i))}function Ot(i,e){_n.call(this,Tn.Na,i),this.size=e}function zt(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return Ee.setTimeout(function(){i()},e)}Tn.Ma="serverreachability",Re(Xi,_n),Tn.STAT_EVENT="statevent",Re(We,_n),Tn.Na="timingevent",Re(Ot,_n);var rn={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Sr={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function ii(){}function Zr(){}ii.prototype.h=null;var ki,Ji={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function hs(){_n.call(this,"d")}function Js(){_n.call(this,"c")}function zi(){}function ls(i,e,t,o){this.l=i,this.j=e,this.m=t,this.X=o||1,this.V=new le(this),this.P=xi,this.W=new Tr(i=Dn?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Hs}function Hs(){this.i=null,this.g="",this.h=!1}Re(hs,_n),Re(Js,_n),Re(zi,ii),zi.prototype.g=function(){return new XMLHttpRequest},zi.prototype.i=function(){return{}},ki=new zi;var xi=45e3,us={},vs={};function si(i,e,t){i.K=1,i.v=Ft(B(e)),i.s=t,i.U=!0,uo(i,null)}function uo(i,e){i.F=Date.now(),es(i),i.A=B(i.v);var t=i.A,o=i.X;Array.isArray(o)||(o=[String(o)]),P(t.h,"t",o),i.C=0,t=i.l.H,i.h=new Hs,i.g=ua(i.l,t?e:null,!i.s),0<i.O&&(i.L=new ge(nt(i.Ia,i,i.g),i.O)),He(i.V,i.g,"readystatechange",i.gb),e=i.H?cr(i.H):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.ea(i.A,i.u,i.s,e)):(i.u="GET",i.g.ea(i.A,i.u,null,e)),ze(1),function At(i,e,t,o,d,_){i.info(function(){if(i.g)if(_)for(var C="",R=_.split("&"),K=0;K<R.length;K++){var J=R[K].split("=");if(1<J.length){var Me=J[0];J=J[1];var Ye=Me.split("_");C=2<=Ye.length&&"type"==Ye[1]?C+(Me+"=")+J+"&":C+(Me+"=redacted&")}}else C=null;else C=_;return"XMLHTTP REQ ("+o+") [attempt "+d+"]: "+e+"\n"+t+"\n"+C})}(i.j,i.u,i.A,i.m,i.X,i.s)}function Zo(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Ba}function Gs(i,e,t){let d,o=!0;for(;!i.I&&i.C<t.length;){if(d=Ts(i,t),d==vs){4==e&&(i.o=4,lt(14),o=!1),Rt(i.j,i.m,null,"[Incomplete Response]");break}if(d==us){i.o=4,lt(15),Rt(i.j,i.m,t,"[Invalid Chunk]"),o=!1;break}Rt(i.j,i.m,d,null),Ps(i,d)}Zo(i)&&d!=vs&&d!=us&&(i.h.g="",i.C=0),4!=e||0!=t.length||i.h.h||(i.o=1,lt(16),o=!1),i.i=i.i&&o,o?0<t.length&&!i.aa&&(i.aa=!0,(e=i.l).g==i&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Yi(e),e.L=!0,lt(11))):(Rt(i.j,i.m,t,"[Invalid Chunked Response]"),Qr(i),$r(i))}function Ts(i,e){var t=i.C,o=e.indexOf("\n",t);return-1==o?vs:(t=Number(e.substring(t,o)),isNaN(t)?us:(o+=1)+t>e.length?vs:(e=e.substr(o,t),i.C=o+t,e))}function es(i){i.Y=Date.now()+i.P,Do(i,i.P)}function Do(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=zt(nt(i.eb,i),e)}function $i(i){i.B&&(Ee.clearTimeout(i.B),i.B=null)}function $r(i){0==i.l.G||i.I||So(i.l,i)}function Qr(i){$i(i);var e=i.L;e&&"function"==typeof e.na&&e.na(),i.L=null,Bi(i.W),tt(i.V),i.g&&(e=i.g,i.g=null,e.abort(),e.na())}function Ps(i,e){try{var t=i.l;if(0!=t.G&&(t.g==i||Kt(t.i,i)))if(t.I=i.N,!i.J&&Kt(t.i,i)&&3==t.G){try{var o=t.Ca.g.parse(e)}catch(J){o=null}if(Array.isArray(o)&&3==o.length){var d=o;if(0==d[0])e:if(t.u)t.ta=d[1],0<t.ta-t.U&&37500>d[2]&&t.N&&0==t.A&&!t.v&&(t.v=zt(nt(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<i.F))break e;xl(t),pi(t)}la(t),lt(18)}if(1>=dt(t.i)&&t.ka){try{t.ka()}catch(J){}t.ka=void 0}}else Vo(t,11)}else if((i.J||t.g==i)&&xl(t),!mr(e))for(d=t.Ca.g.parse(e),e=0;e<d.length;e++){let J=d[e];if(t.U=J[0],J=J[1],2==t.G)if("c"==J[0]){t.J=J[1],t.la=J[2];const Me=J[3];null!=Me&&(t.ma=Me,t.h.info("VER="+t.ma));const Ye=J[4];null!=Ye&&(t.za=Ye,t.h.info("SVER="+t.za));const Ct=J[5];null!=Ct&&"number"==typeof Ct&&0<Ct&&(t.K=o=1.5*Ct,t.h.info("backChannelRequestTimeoutMs_="+o)),o=t;const $t=i.g;if($t){const Qt=$t.g?$t.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Qt){var _=o.i;!_.g&&(Kn(Qt,"spdy")||Kn(Qt,"quic")||Kn(Qt,"h2"))&&(_.j=_.l,_.g=new Set,_.h&&(En(_,_.h),_.h=null))}if(o.D){const $n=$t.g?$t.g.getResponseHeader("X-HTTP-Session-Id"):null;$n&&(o.sa=$n,mt(o.F,o.D,$n))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-i.F,t.h.info("Handshake RTT: "+t.O+"ms"));var C=i;if((o=t).oa=ji(o,o.H?o.la:null,o.W),C.J){Nn(o.i,C);var R=C,K=o.K;K&&R.setTimeout(K),R.B&&($i(R),es(R)),o.g=C}else qi(o);0<t.l.length&&_u(t)}else"stop"!=J[0]&&"close"!=J[0]||Vo(t,7);else 3==t.G&&("stop"==J[0]||"close"==J[0]?"stop"==J[0]?Vo(t,7):pr(t):"noop"!=J[0]&&t.j&&t.j.wa(J),t.A=0)}ze(4)}catch(J){}}function cs(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(Je(i)||"string"==typeof i)gn(i,e,void 0);else{if(i.T&&"function"==typeof i.T)var t=i.T();else if(i.R&&"function"==typeof i.R)t=void 0;else if(Je(i)||"string"==typeof i){t=[];for(var o=i.length,d=0;d<o;d++)t.push(d)}else for(d in t=[],o=0,i)t[o++]=d;o=function Ns(i){if(i.R&&"function"==typeof i.R)return i.R();if("string"==typeof i)return i.split("");if(Je(i)){for(var e=[],t=i.length,o=0;o<t;o++)e.push(i[o]);return e}for(o in e=[],t=0,i)e[t++]=i[o];return e}(i),d=o.length;for(var _=0;_<d;_++)e.call(void 0,o[_],t&&t[_],i)}}function zs(i,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var o=0;o<t;o+=2)this.set(arguments[o],arguments[o+1])}else if(i)if(i instanceof zs)for(t=i.T(),o=0;o<t.length;o++)this.set(t[o],i.get(t[o]));else for(o in i)this.set(o,i[o])}function Ss(i){if(i.i!=i.g.length){for(var e=0,t=0;e<i.g.length;){var o=i.g[e];Ei(i.h,o)&&(i.g[t++]=o),e++}i.g.length=t}if(i.i!=i.g.length){var d={};for(t=e=0;e<i.g.length;)Ei(d,o=i.g[e])||(i.g[t++]=o,d[o]=1),e++;i.g.length=t}}function Ei(i,e){return Object.prototype.hasOwnProperty.call(i,e)}(pe=ls.prototype).setTimeout=function(i){this.P=i},pe.gb=function(i){i=i.target;const e=this.L;e&&3==To(i)?e.l():this.Ia(i)},pe.Ia=function(i){try{if(i==this.g)e:{const Me=To(this.g);var e=this.g.Da();const Ye=this.g.ba();if(!(3>Me)&&(3!=Me||Dn||this.g&&(this.h.h||this.g.ga()||oa(this.g)))){this.I||4!=Me||7==e||ze(8==e||0>=Ye?3:2),$i(this);var t=this.g.ba();this.N=t;t:if(Zo(this)){var o=oa(this.g);i="";var d=o.length,_=4==To(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Qr(this),$r(this);var C="";break t}this.h.i=new Ee.TextDecoder}for(e=0;e<d;e++)this.h.h=!0,i+=this.h.i.decode(o[e],{stream:_&&e==d-1});o.splice(0,d),this.h.g+=i,this.C=0,C=this.h.g}else C=this.g.ga();if(this.i=200==t,function Nt(i,e,t,o,d,_,C){i.info(function(){return"XMLHTTP RESP ("+o+") [ attempt "+d+"]: "+e+"\n"+t+"\n"+_+" "+C})}(this.j,this.u,this.A,this.m,this.X,Me,t),this.i){if(this.$&&!this.J){t:{if(this.g){var R,K=this.g;if((R=K.g?K.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!mr(R)){var J=R;break t}}J=null}if(!(t=J)){this.i=!1,this.o=3,lt(12),Qr(this),$r(this);break e}Rt(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Ps(this,t)}this.U?(Gs(this,Me,C),Dn&&this.i&&3==Me&&(He(this.V,this.W,"tick",this.fb),this.W.start())):(Rt(this.j,this.m,C,null),Ps(this,C)),4==Me&&Qr(this),this.i&&!this.I&&(4==Me?So(this.l,this):(this.i=!1,es(this)))}else 400==t&&0<C.indexOf("Unknown SID")?(this.o=3,lt(12)):(this.o=0,lt(13)),Qr(this),$r(this)}}}catch(Me){}},pe.fb=function(){if(this.g){var i=To(this.g),e=this.g.ga();this.C<e.length&&($i(this),Gs(this,i,e),this.i&&4!=i&&es(this))}},pe.cancel=function(){this.I=!0,Qr(this)},pe.eb=function(){this.B=null;const i=Date.now();0<=i-this.Y?(function pn(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(ze(3),lt(17)),Qr(this),this.o=2,$r(this)):Do(this,this.Y-i)},(pe=zs.prototype).R=function(){Ss(this);for(var i=[],e=0;e<this.g.length;e++)i.push(this.h[this.g[e]]);return i},pe.T=function(){return Ss(this),this.g.concat()},pe.get=function(i,e){return Ei(this.h,i)?this.h[i]:e},pe.set=function(i,e){Ei(this.h,i)||(this.i++,this.g.push(i)),this.h[i]=e},pe.forEach=function(i,e){for(var t=this.T(),o=0;o<t.length;o++){var d=t[o],_=this.get(d);i.call(e,_,d,this)}};var Es=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function wr(i,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,i instanceof wr){this.g=void 0!==e?e:i.g,ee(this,i.j),this.s=i.s,$(this,i.i),ce(this,i.m),this.l=i.l,e=i.h;var t=new On;t.i=e.i,e.g&&(t.g=new zs(e.g),t.h=e.h),Ge(this,t),this.o=i.o}else i&&(t=String(i).match(Es))?(this.g=!!e,ee(this,t[1]||"",!0),this.s=Ir(t[2]||""),$(this,t[3]||"",!0),ce(this,t[4]),this.l=Ir(t[5]||"",!0),Ge(this,t[6]||"",!0),this.o=Ir(t[7]||"")):(this.g=!!e,this.h=new On(null,this.g))}function B(i){return new wr(i)}function ee(i,e,t){i.j=t?Ir(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function $(i,e,t){i.i=t?Ir(e,!0):e}function ce(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function Ge(i,e,t){e instanceof On?(i.h=e,function v(i,e){e&&!i.j&&(fs(i),i.i=null,i.g.forEach(function(t,o){var d=o.toLowerCase();o!=d&&(G(this,o),P(this,d,t))},i)),i.j=e}(i.h,i.g)):(t||(e=or(e,yo)),i.h=new On(e,i.g))}function mt(i,e,t){i.h.set(e,t)}function Ft(i){return mt(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function Ir(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function or(i,e,t){return"string"==typeof i?(i=encodeURI(i).replace(e,_r),t&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function _r(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}wr.prototype.toString=function(){var i=[],e=this.j;e&&i.push(or(e,fi,!0),":");var t=this.i;return(t||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(or(e,fi,!0),"@"),i.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&i.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&i.push("/"),i.push(or(t,"/"==t.charAt(0)?ui:Xr,!0))),(t=this.h.toString())&&i.push("?",t),(t=this.o)&&i.push("#",or(t,rs)),i.join("")};var fi=/[#\/\?@]/g,Xr=/[#\?:]/g,ui=/[#\?]/g,yo=/[#\?@]/g,rs=/#/g;function On(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function fs(i){i.g||(i.g=new zs,i.h=0,i.i&&function Fo(i,e){if(i){i=i.split("&");for(var t=0;t<i.length;t++){var o=i[t].indexOf("="),d=null;if(0<=o){var _=i[t].substring(0,o);d=i[t].substring(o+1)}else _=i[t];e(_,d?decodeURIComponent(d.replace(/\+/g," ")):"")}}}(i.i,function(e,t){i.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function G(i,e){fs(i),e=ie(i,e),Ei(i.g.h,e)&&(i.i=null,i.h-=i.g.get(e).length,Ei((i=i.g).h,e)&&(delete i.h[e],i.i--,i.g.length>2*i.i&&Ss(i)))}function k(i,e){return fs(i),e=ie(i,e),Ei(i.g.h,e)}function P(i,e,t){G(i,e),0<t.length&&(i.i=null,i.g.set(ie(i,e),tn(t)),i.h+=t.length)}function ie(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function E(i){this.l=i||F,i=Ee.PerformanceNavigationTiming?0<(i=Ee.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(Ee.g&&Ee.g.Ea&&Ee.g.Ea()&&Ee.g.Ea().Zb),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(pe=On.prototype).add=function(i,e){fs(this),this.i=null,i=ie(this,i);var t=this.g.get(i);return t||this.g.set(i,t=[]),t.push(e),this.h+=1,this},pe.forEach=function(i,e){fs(this),this.g.forEach(function(t,o){gn(t,function(d){i.call(e,d,o,this)},this)},this)},pe.T=function(){fs(this);for(var i=this.g.R(),e=this.g.T(),t=[],o=0;o<e.length;o++)for(var d=i[o],_=0;_<d.length;_++)t.push(e[o]);return t},pe.R=function(i){fs(this);var e=[];if("string"==typeof i)k(this,i)&&(e=ln(e,this.g.get(ie(this,i))));else{i=this.g.R();for(var t=0;t<i.length;t++)e=ln(e,i[t])}return e},pe.set=function(i,e){return fs(this),this.i=null,k(this,i=ie(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},pe.get=function(i,e){return i&&0<(i=this.R(i)).length?String(i[0]):e},pe.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var i=[],e=this.g.T(),t=0;t<e.length;t++){var o=e[t],d=encodeURIComponent(String(o));o=this.R(o);for(var _=0;_<o.length;_++){var C=d;""!==o[_]&&(C+="="+encodeURIComponent(String(o[_]))),i.push(C)}}return this.i=i.join("&")};var F=10;function ue(i){return!!i.h||!!i.g&&i.g.size>=i.j}function dt(i){return i.h?1:i.g?i.g.size:0}function Kt(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function En(i,e){i.g?i.g.add(e):i.h=e}function Nn(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function Jr(i){if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const t of i.g.values())e=e.concat(t.D);return e}return tn(i.i)}function ci(){}function wi(){this.g=new ci}function eo(i,e,t){const o=t||"";try{cs(i,function(d,_){let C=d;Ze(d)&&(C=yr(d)),e.push(o+_+"="+encodeURIComponent(C))})}catch(d){throw e.push(o+"type="+encodeURIComponent("_badmap")),d}}function ts(i,e,t,o,d){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,d(o)}catch(_){}}function ei(i){this.l=i.$b||null,this.j=i.ib||!1}function Wi(i,e){Mt.call(this),this.D=i,this.u=e,this.m=void 0,this.readyState=ia,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}E.prototype.cancel=function(){if(this.i=Jr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},ci.prototype.stringify=function(i){return Ee.JSON.stringify(i,void 0)},ci.prototype.parse=function(i){return Ee.JSON.parse(i,void 0)},Re(ei,ii),ei.prototype.g=function(){return new Wi(this.l,this.j)},ei.prototype.i=function(i){return function(){return i}}({}),Re(Wi,Mt);var ia=0;function Qo(i){i.j.read().then(i.Sa.bind(i)).catch(i.ha.bind(i))}function Ws(i){i.readyState=4,i.l=null,i.j=null,i.A=null,ba(i)}function ba(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(pe=Wi.prototype).open=function(i,e){if(this.readyState!=ia)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,ba(this)},pe.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.D||Ee).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},pe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ws(this)),this.readyState=ia},pe.Va=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,ba(this)),this.g&&(this.readyState=3,ba(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Ee.ReadableStream&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Qo(this)}else i.text().then(this.Ua.bind(this),this.ha.bind(this))},pe.Sa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?Ws(this):ba(this),3==this.readyState&&Qo(this)}},pe.Ua=function(i){this.g&&(this.response=this.responseText=i,Ws(this))},pe.Ta=function(i){this.g&&(this.response=i,Ws(this))},pe.ha=function(){this.g&&Ws(this)},pe.setRequestHeader=function(i,e){this.v.append(i,e)},pe.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},pe.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var t=e.next();!t.done;)i.push((t=t.value)[0]+": "+t[1]),t=e.next();return i.join("\r\n")},Object.defineProperty(Wi.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var Fa=Ee.JSON.parse;function Ui(i){Mt.call(this),this.headers=new zs,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Tl,this.K=this.L=!1}Re(Ui,Mt);var Tl="",La=/^https?$/i,el=["POST","PUT"];function Sl(i){return"content-type"==i.toLowerCase()}function tl(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,Ba(i),$a(i)}function Ba(i){i.D||(i.D=!0,mn(i,"complete"),mn(i,"error"))}function sa(i){if(i.h&&void 0!==Ve&&(!i.C[1]||4!=To(i)||2!=i.ba()))if(i.v&&4==To(i))Ai(i.Fa,0,i);else if(mn(i,"readystatechange"),4==To(i)){i.h=!1;try{const R=i.ba();e:switch(R){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var o;if(o=0===R){var d=String(i.H).match(Es)[1]||null;if(!d&&Ee.self&&Ee.self.location){var _=Ee.self.location.protocol;d=_.substr(0,_.length-1)}o=!La.test(d?d.toLowerCase():"")}t=o}if(t)mn(i,"complete"),mn(i,"success");else{i.m=6;try{var C=2<To(i)?i.g.statusText:""}catch(K){C=""}i.j=C+" ["+i.ba()+"]",Ba(i)}}finally{$a(i)}}}function $a(i,e){if(i.g){Lo(i);const t=i.g,o=i.C[0]?Te:null;i.g=null,i.C=null,e||mn(i,"ready");try{t.onreadystatechange=o}catch(d){}}}function Lo(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(Ee.clearTimeout(i.A),i.A=null)}function To(i){return i.g?i.g.readyState:0}function oa(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case Tl:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch(e){return null}}function nl(i,e,t){e:{for(o in t){var o=!1;break e}o=!0}o||(t=function aa(i){let e="";return Jn(i,function(t,o){e+=o,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof i?null!=t&&encodeURIComponent(String(t)):mt(i,e,t))}function kr(i,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[i]||e}function hr(i){this.za=0,this.l=[],this.h=new bt,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=kr("failFast",!1,i),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=kr("baseRetryDelayMs",5e3,i),this.$a=kr("retryDelaySeedMs",1e4,i),this.Ya=kr("forwardChannelMaxRetries",2,i),this.ra=kr("forwardChannelRequestTimeoutMs",2e4,i),this.qa=i&&i.xmlHttpFactory||void 0,this.Ba=i&&i.Yb||!1,this.K=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.J="",this.i=new E(i&&i.concurrentRequestLimit),this.Ca=new wi,this.ja=i&&i.fastHandshake||!1,this.Ra=i&&i.Wb||!1,i&&i.Aa&&this.h.Aa(),i&&i.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&i&&i.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!i||!1!==i.Xb}function pr(i){if(_i(i),3==i.G){var e=i.V++,t=B(i.F);mt(t,"SID",i.J),mt(t,"RID",e),mt(t,"TYPE","terminate"),gi(i,t),(e=new ls(i,i.h,e,void 0)).K=2,e.v=Ft(B(t)),t=!1,Ee.navigator&&Ee.navigator.sendBeacon&&(t=Ee.navigator.sendBeacon(e.v.toString(),"")),!t&&Ee.Image&&((new Image).src=e.v,t=!0),t||(e.g=ua(e.l,null),e.g.ea(e.v)),e.F=Date.now(),es(e)}Ao(i)}function pi(i){i.g&&(Yi(i),i.g.cancel(),i.g=null)}function _i(i){pi(i),i.u&&(Ee.clearTimeout(i.u),i.u=null),xl(i),i.i.cancel(),i.m&&("number"==typeof i.m&&Ee.clearTimeout(i.m),i.m=null)}function Al(i,e){i.l.push(new class{constructor(i,e){this.h=i,this.g=e}}(i.Za++,e)),3==i.G&&_u(i)}function _u(i){ue(i.i)||i.m||(i.m=!0,Vi(i.Ha,i),i.C=0)}function Yl(i,e){var t;t=e?e.m:i.V++;const o=B(i.F);mt(o,"SID",i.J),mt(o,"RID",t),mt(o,"AID",i.U),gi(i,o),i.o&&i.s&&nl(o,i.o,i.s),t=new ls(i,i.h,t,i.C+1),null===i.o&&(t.H=i.s),e&&(i.l=e.D.concat(i.l)),e=ar(i,t,1e3),t.setTimeout(Math.round(.5*i.ra)+Math.round(.5*i.ra*Math.random())),En(i.i,t),si(t,o,e)}function gi(i,e){i.j&&cs({},function(t,o){mt(e,o,t)})}function ar(i,e,t){t=Math.min(i.l.length,t);var o=i.j?nt(i.j.Oa,i.j,i):null;e:{var d=i.l;let _=-1;for(;;){const C=["count="+t];-1==_?0<t?(_=d[0].h,C.push("ofs="+_)):_=0:C.push("ofs="+_);let R=!0;for(let K=0;K<t;K++){let J=d[K].h;const Me=d[K].g;if(J-=_,0>J)_=Math.max(0,d[K].h-100),R=!1;else try{eo(Me,C,"req"+J+"_")}catch(Ye){o&&o(Me)}}if(R){o=C.join("&");break e}}}return i=i.l.splice(0,t),e.D=i,o}function qi(i){i.g||i.u||(i.Y=1,Vi(i.Ga,i),i.A=0)}function la(i){return!(i.g||i.u||3<=i.A||(i.Y++,i.u=zt(nt(i.Ga,i),Jo(i,i.A)),i.A++,0))}function Yi(i){null!=i.B&&(Ee.clearTimeout(i.B),i.B=null)}function qs(i){i.g=new ls(i,i.h,"rpc",i.Y),null===i.o&&(i.g.H=i.s),i.g.O=0;var e=B(i.oa);mt(e,"RID","rpc"),mt(e,"SID",i.J),mt(e,"CI",i.N?"0":"1"),mt(e,"AID",i.U),gi(i,e),mt(e,"TYPE","xmlhttp"),i.o&&i.s&&nl(e,i.o,i.s),i.K&&i.g.setTimeout(i.K);var t=i.g;i=i.la,t.K=1,t.v=Ft(B(e)),t.s=null,t.U=!0,uo(t,i)}function xl(i){null!=i.v&&(Ee.clearTimeout(i.v),i.v=null)}function So(i,e){var t=null;if(i.g==e){xl(i),Yi(i),i.g=null;var o=2}else{if(!Kt(i.i,e))return;t=e.D,Nn(i.i,e),o=1}if(i.I=e.N,0!=i.G)if(e.i)if(1==o){t=e.s?e.s.length:0,e=Date.now()-e.F;var d=i.C;mn(o=ri(),new Ot(o,t,e,d)),_u(i)}else qi(i);else if(3==(d=e.o)||0==d&&0<i.I||!(1==o&&function Xo(i,e){return!(dt(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.l=e.D.concat(i.l),0):1==i.G||2==i.G||i.C>=(i.Xa?0:i.Ya)||(i.m=zt(nt(i.Ha,i,e),Jo(i,i.C)),i.C++,0)))}(i,e)||2==o&&la(i)))switch(t&&0<t.length&&(e=i.i,e.i=e.i.concat(t)),d){case 1:Vo(i,5);break;case 4:Vo(i,10);break;case 3:Vo(i,6);break;default:Vo(i,2)}}function Jo(i,e){let t=i.Pa+Math.floor(Math.random()*i.$a);return i.j||(t*=2),t*e}function Vo(i,e){if(i.h.info("Error code "+e),2==e){var t=null;i.j&&(t=null);var o=nt(i.jb,i);t||(t=new wr("//www.google.com/images/cleardot.gif"),Ee.location&&"http"==Ee.location.protocol||ee(t,"https"),Ft(t)),function bs(i,e){const t=new bt;if(Ee.Image){const o=new Image;o.onload=at(ts,t,o,"TestLoadImage: loaded",!0,e),o.onerror=at(ts,t,o,"TestLoadImage: error",!1,e),o.onabort=at(ts,t,o,"TestLoadImage: abort",!1,e),o.ontimeout=at(ts,t,o,"TestLoadImage: timeout",!1,e),Ee.setTimeout(function(){o.ontimeout&&o.ontimeout()},1e4),o.src=i}else e(!1)}(t.toString(),o)}else lt(2);i.G=0,i.j&&i.j.va(e),Ao(i),_i(i)}function Ao(i){i.G=0,i.I=-1,i.j&&((0!=Jr(i.i).length||0!=i.l.length)&&(i.i.i.length=0,tn(i.l),i.l.length=0),i.j.ua())}function ji(i,e,t){let o=function Yt(i){return i instanceof wr?B(i):new wr(i,void 0)}(t);if(""!=o.i)e&&$(o,e+"."+o.i),ce(o,o.m);else{const d=Ee.location;o=function zr(i,e,t,o){var d=new wr(null,void 0);return i&&ee(d,i),e&&$(d,e),t&&ce(d,t),o&&(d.l=o),d}(d.protocol,e?e+"."+d.hostname:d.hostname,+d.port,t)}return i.aa&&Jn(i.aa,function(d,_){mt(o,_,d)}),t=i.sa,(e=i.D)&&t&&mt(o,e,t),mt(o,"VER",i.ma),gi(i,o),o}function ua(i,e,t){if(e&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Ui(t&&i.Ba&&!i.qa?new ei({ib:!0}):i.qa)).L=i.H,e}function Kl(){}function wa(){if(kn&&!(10<=Number(en)))throw Error("Environmental error: no available transport.")}function to(i,e){Mt.call(this),this.g=new hr(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(i?i["X-WebChannel-Client-Profile"]=e.ya:i={"X-WebChannel-Client-Profile":e.ya}),this.g.P=i,(i=e&&e.httpHeadersOverwriteParam)&&!mr(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!mr(e)&&(this.g.D=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new no(this)}function is(i){hs.call(this);var e=i.__sm__;if(e){e:{for(const t in e){i=t;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function Ml(){Js.call(this),this.status=1}function no(i){this.g=i}(pe=Ui.prototype).ea=function(i,e,t,o){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);e=e?e.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():ki.g(),this.C=function Xn(i){return i.h||(i.h=i.i())}(this.u?this.u:ki),this.g.onreadystatechange=nt(this.Fa,this);try{this.F=!0,this.g.open(e,String(i),!0),this.F=!1}catch(_){return void tl(this,_)}i=t||"";const d=new zs(this.headers);o&&cs(o,function(_,C){d.set(C,_)}),o=function An(i){e:{var e=Sl;const t=i.length,o="string"==typeof i?i.split(""):i;for(let d=0;d<t;d++)if(d in o&&e.call(void 0,o[d],d,i)){e=d;break e}e=-1}return 0>e?null:"string"==typeof i?i.charAt(e):i[e]}(d.T()),t=Ee.FormData&&i instanceof Ee.FormData,!(0<=Zt(el,e))||o||t||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),d.forEach(function(_,C){this.g.setRequestHeader(C,_)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Lo(this),0<this.B&&((this.K=function Va(i){return kn&&function er(){return function Gt(i){var e=li;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=i(9)}(function(){let i=0;const e=xr(String(Pn)).split("."),t=xr("9").split("."),o=Math.max(e.length,t.length);for(let C=0;0==i&&C<o;C++){var d=e[C]||"",_=t[C]||"";do{if(d=/(\d*)(\D*)(.*)/.exec(d)||["","","",""],_=/(\d*)(\D*)(.*)/.exec(_)||["","","",""],0==d[0].length&&0==_[0].length)break;i=Yn(0==d[1].length?0:parseInt(d[1],10),0==_[1].length?0:parseInt(_[1],10))||Yn(0==d[2].length,0==_[2].length)||Yn(d[2],_[2]),d=d[3],_=_[3]}while(0==i)}return 0<=i})}()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=nt(this.pa,this)):this.A=Ai(this.pa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(_){tl(this,_)}},pe.pa=function(){void 0!==Ve&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,mn(this,"timeout"),this.abort(8))},pe.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,mn(this,"complete"),mn(this,"abort"),$a(this))},pe.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),$a(this,!0)),Ui.Z.M.call(this)},pe.Fa=function(){this.s||(this.F||this.v||this.l?sa(this):this.cb())},pe.cb=function(){sa(this)},pe.ba=function(){try{return 2<To(this)?this.g.status:-1}catch(i){return-1}},pe.ga=function(){try{return this.g?this.g.responseText:""}catch(i){return""}},pe.Qa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),Fa(e)}},pe.Da=function(){return this.m},pe.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(pe=hr.prototype).ma=8,pe.G=1,pe.hb=function(i){try{this.h.info("Origin Trials invoked: "+i)}catch(e){}},pe.Ha=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.V=Math.floor(1e5*Math.random()),i=this.V++;const d=new ls(this,this.h,i,void 0);let _=this.s;if(this.P&&(_?(_=cr(_),on(_,this.P)):_=this.P),null===this.o&&(d.H=_),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var o=this.l[t];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=ar(this,d,e),mt(t=B(this.F),"RID",i),mt(t,"CVER",22),this.D&&mt(t,"X-HTTP-Session-Id",this.D),gi(this,t),this.o&&_&&nl(t,this.o,_),En(this.i,d),this.Ra&&mt(t,"TYPE","init"),this.ja?(mt(t,"$req",e),mt(t,"SID","null"),d.$=!0,si(d,t,null)):si(d,t,e),this.G=2}}else 3==this.G&&(i?Yl(this,i):0==this.l.length||ue(this.i)||Yl(this))},pe.Ga=function(){if(this.u=null,qs(this),this.$&&!(this.L||null==this.g||0>=this.O)){var i=2*this.O;this.h.info("BP detection timer enabled: "+i),this.B=zt(nt(this.bb,this),i)}},pe.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,lt(10),pi(this),qs(this))},pe.ab=function(){null!=this.v&&(this.v=null,pi(this),la(this),lt(19))},pe.jb=function(i){i?(this.h.info("Successfully pinged google.com"),lt(2)):(this.h.info("Failed to ping google.com"),lt(1))},(pe=Kl.prototype).xa=function(){},pe.wa=function(){},pe.va=function(){},pe.ua=function(){},pe.Oa=function(){},wa.prototype.g=function(i,e){return new to(i,e)},Re(to,Mt),to.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var i=this.g,e=this.l,t=this.h||void 0;i.Wa&&(i.h.info("Origin Trials enabled."),Vi(nt(i.hb,i,e))),lt(0),i.W=e,i.aa=t||{},i.N=i.X,i.F=ji(i,null,i.W),_u(i)},to.prototype.close=function(){pr(this.g)},to.prototype.u=function(i){if("string"==typeof i){var e={};e.__data__=i,Al(this.g,e)}else this.v?((e={}).__data__=yr(i),Al(this.g,e)):Al(this.g,i)},to.prototype.M=function(){this.g.j=null,delete this.j,pr(this.g),delete this.g,to.Z.M.call(this)},Re(is,hs),Re(Ml,Js),Re(no,Kl),no.prototype.xa=function(){mn(this.g,"a")},no.prototype.wa=function(i){mn(this.g,new is(i))},no.prototype.va=function(i){mn(this.g,new Ml(i))},no.prototype.ua=function(){mn(this.g,"b")},wa.prototype.createWebChannel=wa.prototype.g,to.prototype.send=to.prototype.u,to.prototype.open=to.prototype.m,to.prototype.close=to.prototype.close,rn.NO_ERROR=0,rn.TIMEOUT=8,rn.HTTP_ERROR=6,Sr.COMPLETE="complete",Zr.EventType=Ji,Ji.OPEN="a",Ji.CLOSE="b",Ji.ERROR="c",Ji.MESSAGE="d",Mt.prototype.listen=Mt.prototype.N,Ui.prototype.listenOnce=Ui.prototype.O,Ui.prototype.getLastError=Ui.prototype.La,Ui.prototype.getLastErrorCode=Ui.prototype.Da,Ui.prototype.getStatus=Ui.prototype.ba,Ui.prototype.getResponseJson=Ui.prototype.Qa,Ui.prototype.getResponseText=Ui.prototype.ga,Ui.prototype.send=Ui.prototype.ea;var rl=qe.createWebChannelTransport=function(){return new wa},_o=qe.getStatEventTarget=function(){return ri()},gr=qe.ErrorCode=rn,Ua=qe.EventType=Sr,di=qe.Event=Tn,vu=qe.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Fi=qe.FetchXmlHttpFactory=ei,xo=qe.WebChannel=Zr,ws=qe.XhrIo=Ui;const Gu="@firebase/firestore";class hi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}hi.UNAUTHENTICATED=new hi(null),hi.GOOGLE_CREDENTIALS=new hi("google-credentials-uid"),hi.FIRST_PARTY=new hi("first-party-uid"),hi.MOCK_USER=new hi("mock-user");let ca="9.6.10";const Bo=new rt.Yd("@firebase/firestore");function $o(){return Bo.logLevel}function Wt(i,...e){if(Bo.logLevel<=rt.in.DEBUG){const t=e.map(ks);Bo.debug(`Firestore (${ca}): ${i}`,...t)}}function Mi(i,...e){if(Bo.logLevel<=rt.in.ERROR){const t=e.map(ks);Bo.error(`Firestore (${ca}): ${i}`,...t)}}function As(i,...e){if(Bo.logLevel<=rt.in.WARN){const t=e.map(ks);Bo.warn(`Firestore (${ca}): ${i}`,...t)}}function ks(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch(t){return i}}function Sn(i="Unexpected state"){const e=`FIRESTORE (${ca}) INTERNAL ASSERTION FAILED: `+i;throw Mi(e),new Error(e)}function Wn(i,e){i||Sn()}function cn(i,e){return i}const Dt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class T extends _t.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class S{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class D{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class V{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(hi.UNAUTHENTICATED))}shutdown(){}}class W{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class se{constructor(e){this.t=e,this.currentUser=hi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var o=this;let d=this.i;const _=J=>this.i!==d?(d=this.i,t(J)):Promise.resolve();let C=new S;this.o=()=>{this.i++,this.currentUser=this.u(),C.resolve(),C=new S,e.enqueueRetryable(()=>_(this.currentUser))};const R=()=>{const J=C;e.enqueueRetryable((0,ve.Z)(function*(){yield J.promise,yield _(o.currentUser)}))},K=J=>{Wt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=J,this.auth.addAuthTokenListener(this.o),R()};this.t.onInit(J=>K(J)),setTimeout(()=>{if(!this.auth){const J=this.t.getImmediate({optional:!0});J?K(J):(Wt("FirebaseAuthCredentialsProvider","Auth not yet detected"),C.resolve(),C=new S)}},0),R()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(o=>this.i!==e?(Wt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(Wn("string"==typeof o.accessToken),new D(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Wn(null===e||"string"==typeof e),new hi(e)}}class Ae{constructor(e,t,o){this.type="FirstParty",this.user=hi.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const d=e.auth.getAuthHeaderValueForFirstParty([]);d&&this.headers.set("Authorization",d),o&&this.headers.set("X-Goog-Iam-Authorization-Token",o)}}class $e{constructor(e,t,o){this.h=e,this.l=t,this.m=o}getToken(){return Promise.resolve(new Ae(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(hi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class gt{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class vn{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const o=_=>{null!=_.error&&Wt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${_.error.message}`);const C=_.token!==this.p;return this.p=_.token,Wt("FirebaseAppCheckTokenProvider",`Received ${C?"new":"existing"} token.`),C?t(_.token):Promise.resolve()};this.o=_=>{e.enqueueRetryable(()=>o(_))};const d=_=>{Wt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=_,this.appCheck.addTokenListener(this.o)};this.g.onInit(_=>d(_)),setTimeout(()=>{if(!this.appCheck){const _=this.g.getImmediate({optional:!0});_?d(_):Wt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Wn("string"==typeof t.token),this.p=t.token,new gt(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class fn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=o=>this.I(o),this.T=o=>t.writeSequenceNumber(o))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function jn(i){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let o=0;o<i;o++)t[o]=Math.floor(256*Math.random());return t}fn.A=-1;class Cr{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let o="";for(;o.length<20;){const d=jn(40);for(let _=0;_<d.length;++_)o.length<20&&d[_]<t&&(o+=e.charAt(d[_]%e.length))}return o}}function fr(i,e){return i<e?-1:i>e?1:0}function Fs(i,e,t){return i.length===e.length&&i.every((o,d)=>t(o,e[d]))}function ro(i){return i+"\0"}class Ii{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new T(Dt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new T(Dt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new T(Dt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new T(Dt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ii.fromMillis(Date.now())}static fromDate(e){return Ii.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),o=Math.floor(1e6*(e-1e3*t));return new Ii(t,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?fr(this.nanoseconds,e.nanoseconds):fr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class qn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new qn(e)}static min(){return new qn(new Ii(0,0))}static max(){return new qn(new Ii(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function ns(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function Ol(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function vd(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class Zl{constructor(e,t,o){void 0===t?t=0:t>e.length&&Sn(),void 0===o?o=e.length-t:o>e.length-t&&Sn(),this.segments=e,this.offset=t,this.len=o}get length(){return this.len}isEqual(e){return 0===Zl.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Zl?e.forEach(o=>{t.push(o)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,o=this.limit();t<o;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const o=Math.min(e.length,t.length);for(let d=0;d<o;d++){const _=e.get(d),C=t.get(d);if(_<C)return-1;if(_>C)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Wr extends Zl{construct(e,t,o){return new Wr(e,t,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const o of e){if(o.indexOf("//")>=0)throw new T(Dt.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);t.push(...o.split("/").filter(d=>d.length>0))}return new Wr(t)}static emptyPath(){return new Wr([])}}const Pl=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ps extends Zl{construct(e,t,o){return new ps(e,t,o)}static isValidIdentifier(e){return Pl.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ps.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ps(["__name__"])}static fromServerFormat(e){const t=[];let o="",d=0;const _=()=>{if(0===o.length)throw new T(Dt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(o),o=""};let C=!1;for(;d<e.length;){const R=e[d];if("\\"===R){if(d+1===e.length)throw new T(Dt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const K=e[d+1];if("\\"!==K&&"."!==K&&"`"!==K)throw new T(Dt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=K,d+=2}else"`"===R?(C=!C,d++):"."!==R||C?(o+=R,d++):(_(),d++)}if(_(),C)throw new T(Dt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ps(t)}static emptyPath(){return new ps([])}}class Ca{constructor(e){this.fields=e,e.sort(ps.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Fs(this.fields,e.fields,(t,o)=>t.isEqual(o))}}class Is{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Is(t)}static fromUint8Array(e){const t=function(o){let d="";for(let _=0;_<o.length;++_)d+=String.fromCharCode(o[_]);return d}(e);return new Is(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let o=0;o<e.length;o++)t[o]=e.charCodeAt(o);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return fr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Is.EMPTY_BYTE_STRING=new Is("");const Ki=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function da(i){if(Wn(!!i),"string"==typeof i){let e=0;const t=Ki.exec(i);if(Wn(!!t),t[1]){let d=t[1];d=(d+"000000000").substr(0,9),e=Number(d)}const o=new Date(i);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:vi(i.seconds),nanos:vi(i.nanos)}}function vi(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function ja(i){return"string"==typeof i?Is.fromBase64String(i):Is.fromUint8Array(i)}function sl(i){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==i?void 0:i.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Ls(i){const e=i.mapValue.fields.__previous_value__;return sl(e)?Ls(e):e}function Cs(i){const e=da(i.mapValue.fields.__local_write_time__.timestampValue);return new Ii(e.seconds,e.nanos)}class Eu{constructor(e,t,o,d,_,C,R,K){this.databaseId=e,this.appId=t,this.persistenceKey=o,this.host=d,this.ssl=_,this.forceLongPolling=C,this.autoDetectLongPolling=R,this.useFetchStreams=K}}class Vs{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Vs("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Vs&&e.projectId===this.projectId&&e.database===this.database}}function Ys(i){return null==i}function vo(i){return 0===i&&1/i==-1/0}function bu(i){return"number"==typeof i&&Number.isInteger(i)&&!vo(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}class dn{constructor(e){this.path=e}static fromPath(e){return new dn(Wr.fromString(e))}static fromName(e){return new dn(Wr.fromString(e).popFirst(5))}static empty(){return new dn(Wr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Wr.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Wr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new dn(new Wr(e.slice()))}}const wu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Ed={nullValue:"NULL_VALUE"};function Bs(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?sl(i)?4:z(i)?9:10:Sn()}function Ci(i,e){if(i===e)return!0;const t=Bs(i);if(t!==Bs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Cs(i).isEqual(Cs(e));case 3:return function(o,d){if("string"==typeof o.timestampValue&&"string"==typeof d.timestampValue&&o.timestampValue.length===d.timestampValue.length)return o.timestampValue===d.timestampValue;const _=da(o.timestampValue),C=da(d.timestampValue);return _.seconds===C.seconds&&_.nanos===C.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return d=e,ja(i.bytesValue).isEqual(ja(d.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(o,d){return vi(o.geoPointValue.latitude)===vi(d.geoPointValue.latitude)&&vi(o.geoPointValue.longitude)===vi(d.geoPointValue.longitude)}(i,e);case 2:return function(o,d){if("integerValue"in o&&"integerValue"in d)return vi(o.integerValue)===vi(d.integerValue);if("doubleValue"in o&&"doubleValue"in d){const _=vi(o.doubleValue),C=vi(d.doubleValue);return _===C?vo(_)===vo(C):isNaN(_)&&isNaN(C)}return!1}(i,e);case 9:return Fs(i.arrayValue.values||[],e.arrayValue.values||[],Ci);case 10:return function(o,d){const _=o.mapValue.fields||{},C=d.mapValue.fields||{};if(ns(_)!==ns(C))return!1;for(const R in _)if(_.hasOwnProperty(R)&&(void 0===C[R]||!Ci(_[R],C[R])))return!1;return!0}(i,e);default:return Sn()}var d}function Da(i,e){return void 0!==(i.values||[]).find(t=>Ci(t,e))}function co(i,e){if(i===e)return 0;const t=Bs(i),o=Bs(e);if(t!==o)return fr(t,o);switch(t){case 0:case 9007199254740991:return 0;case 1:return fr(i.booleanValue,e.booleanValue);case 2:return function(d,_){const C=vi(d.integerValue||d.doubleValue),R=vi(_.integerValue||_.doubleValue);return C<R?-1:C>R?1:C===R?0:isNaN(C)?isNaN(R)?0:-1:1}(i,e);case 3:return Ta(i.timestampValue,e.timestampValue);case 4:return Ta(Cs(i),Cs(e));case 5:return fr(i.stringValue,e.stringValue);case 6:return function(d,_){const C=ja(d),R=ja(_);return C.compareTo(R)}(i.bytesValue,e.bytesValue);case 7:return function(d,_){const C=d.split("/"),R=_.split("/");for(let K=0;K<C.length&&K<R.length;K++){const J=fr(C[K],R[K]);if(0!==J)return J}return fr(C.length,R.length)}(i.referenceValue,e.referenceValue);case 8:return function(d,_){const C=fr(vi(d.latitude),vi(_.latitude));return 0!==C?C:fr(vi(d.longitude),vi(_.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(d,_){const C=d.values||[],R=_.values||[];for(let K=0;K<C.length&&K<R.length;++K){const J=co(C[K],R[K]);if(J)return J}return fr(C.length,R.length)}(i.arrayValue,e.arrayValue);case 10:return function(d,_){const C=d.fields||{},R=Object.keys(C),K=_.fields||{},J=Object.keys(K);R.sort(),J.sort();for(let Me=0;Me<R.length&&Me<J.length;++Me){const Ye=fr(R[Me],J[Me]);if(0!==Ye)return Ye;const Ct=co(C[R[Me]],K[J[Me]]);if(0!==Ct)return Ct}return fr(R.length,J.length)}(i.mapValue,e.mapValue);default:throw Sn()}}function Ta(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return fr(i,e);const t=da(i),o=da(e),d=fr(t.seconds,o.seconds);return 0!==d?d:fr(t.nanos,o.nanos)}function ol(i){return Uo(i)}function Uo(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(o){const d=da(o);return`time(${d.seconds},${d.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?ja(i.bytesValue).toBase64():"referenceValue"in i?dn.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(o){let d="[",_=!0;for(const C of o.values||[])_?_=!1:d+=",",d+=Uo(C);return d+"]"}(i.arrayValue):"mapValue"in i?function(o){const d=Object.keys(o.fields||{}).sort();let _="{",C=!0;for(const R of d)C?C=!1:_+=",",_+=`${R}:${Uo(o.fields[R])}`;return _+"}"}(i.mapValue):Sn();var e}function Ql(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Iu(i){return!!i&&"integerValue"in i}function Ha(i){return!!i&&"arrayValue"in i}function Mo(i){return!!i&&"nullValue"in i}function Ga(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function al(i){return!!i&&"mapValue"in i}function N(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Ol(i.mapValue.fields,(t,o)=>e.mapValue.fields[t]=N(o)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=N(i.arrayValue.values[t]);return e}return Object.assign({},i)}function z(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function oe(i,e){return void 0===i?e:void 0===e||co(i,e)>0?i:e}function xe(i,e){return void 0===i?e:void 0===e||co(i,e)<0?i:e}class it{constructor(e){this.value=e}static empty(){return new it({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let o=0;o<e.length-1;++o)if(t=(t.mapValue.fields||{})[e.get(o)],!al(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=N(t)}setAll(e){let t=ps.emptyPath(),o={},d=[];e.forEach((C,R)=>{if(!t.isImmediateParentOf(R)){const K=this.getFieldsMap(t);this.applyChanges(K,o,d),o={},d=[],t=R.popLast()}C?o[R.lastSegment()]=N(C):d.push(R.lastSegment())});const _=this.getFieldsMap(t);this.applyChanges(_,o,d)}delete(e){const t=this.field(e.popLast());al(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ci(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let o=0;o<e.length;++o){let d=t.mapValue.fields[e.get(o)];al(d)&&d.mapValue.fields||(d={mapValue:{fields:{}}},t.mapValue.fields[e.get(o)]=d),t=d}return t.mapValue.fields}applyChanges(e,t,o){Ol(t,(d,_)=>e[d]=_);for(const d of o)delete e[d]}clone(){return new it(N(this.value))}}function vt(i){const e=[];return Ol(i.fields,(t,o)=>{const d=new ps([t]);if(al(o)){const _=vt(o.mapValue).fields;if(0===_.length)e.push(d);else for(const C of _)e.push(d.child(C))}else e.push(d)}),new Ca(e)}class Lt{constructor(e,t,o,d,_,C){this.key=e,this.documentType=t,this.version=o,this.readTime=d,this.data=_,this.documentState=C}static newInvalidDocument(e){return new Lt(e,0,qn.min(),qn.min(),it.empty(),0)}static newFoundDocument(e,t,o){return new Lt(e,1,t,qn.min(),o,0)}static newNoDocument(e,t){return new Lt(e,2,t,qn.min(),it.empty(),0)}static newUnknownDocument(e,t){return new Lt(e,3,t,qn.min(),it.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=it.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=it.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Lt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Lt(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Mn{constructor(e,t,o,d){this.indexId=e,this.collectionGroup=t,this.fields=o,this.indexState=d}}function lr(i){return i.fields.find(e=>2===e.kind)}function tr(i){return i.fields.filter(e=>2!==e.kind)}Mn.UNKNOWN_ID=-1;class Fr{constructor(e,t){this.fieldPath=e,this.kind=t}}class ur{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new ur(0,io.min())}}function xs(i,e){const t=i.toTimestamp().seconds,o=i.toTimestamp().nanoseconds+1,d=qn.fromTimestamp(1e9===o?new Ii(t+1,0):new Ii(t,o));return new io(d,dn.empty(),e)}function ti(i){return new io(i.readTime,i.key,-1)}class io{constructor(e,t,o){this.readTime=e,this.documentKey=t,this.largestBatchId=o}static min(){return new io(qn.min(),dn.empty(),-1)}static max(){return new io(qn.max(),dn.empty(),-1)}}function ea(i,e){let t=i.readTime.compareTo(e.readTime);return 0!==t?t:(t=dn.comparator(i.documentKey,e.documentKey),0!==t?t:fr(i.largestBatchId,e.largestBatchId))}class Sa{constructor(e,t=null,o=[],d=[],_=null,C=null,R=null){this.path=e,this.collectionGroup=t,this.orderBy=o,this.filters=d,this.limit=_,this.startAt=C,this.endAt=R,this.P=null}}function Eo(i,e=null,t=[],o=[],d=null,_=null,C=null){return new Sa(i,e,t,o,d,_,C)}function Pr(i){const e=cn(i);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(o=>{return(d=o).field.canonicalString()+d.op.toString()+ol(d.value);var d}).join(","),t+="|ob:",t+=e.orderBy.map(o=>{return(d=o).field.canonicalString()+d.dir;var d}).join(","),Ys(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(o=>ol(o)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(o=>ol(o)).join(",")),e.P=t}return e.P}function za(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let d=0;d<i.orderBy.length;d++)if(!lf(i.orderBy[d],e.orderBy[d]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let d=0;d<i.filters.length;d++)if((t=i.filters[d]).op!==(o=e.filters[d]).op||!t.field.isEqual(o.field)||!Ci(t.value,o.value))return!1;var t,o;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Id(i.startAt,e.startAt)&&Id(i.endAt,e.endAt)}function Aa(i){return dn.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function ll(i,e){return i.filters.filter(t=>t instanceof Ms&&t.field.isEqual(e))}class Ms extends class{}{constructor(e,t,o){super(),this.field=e,this.op=t,this.value=o}static create(e,t,o){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,o):new ha(e,t,o):"array-contains"===t?new xa(e,o):"in"===t?new wd(e,o):"not-in"===t?new Rc(e,o):"array-contains-any"===t?new af(e,o):new Ms(e,t,o)}static V(e,t,o){return"in"===t?new bd(e,o):new ul(e,o)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(co(t,this.value)):null!==t&&Bs(this.value)===Bs(t)&&this.v(co(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Sn()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class ha extends Ms{constructor(e,t,o){super(e,t,o),this.key=dn.fromName(o.referenceValue)}matches(e){const t=dn.comparator(e.key,this.key);return this.v(t)}}class bd extends Ms{constructor(e,t){super(e,"in",t),this.keys=Xl(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class ul extends Ms{constructor(e,t){super(e,"not-in",t),this.keys=Xl(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Xl(i,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(o=>dn.fromName(o.referenceValue))}class xa extends Ms{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ha(t)&&Da(t.arrayValue,this.value)}}class wd extends Ms{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Da(this.value.arrayValue,t)}}class Rc extends Ms{constructor(e,t){super(e,"not-in",t)}matches(e){if(Da(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Da(this.value.arrayValue,t)}}class af extends Ms{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ha(t)||!t.arrayValue.values)&&t.arrayValue.values.some(o=>Da(this.value.arrayValue,o))}}class Ro{constructor(e,t){this.position=e,this.inclusive=t}}class Wa{constructor(e,t="asc"){this.field=e,this.dir=t}}function lf(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}function ch(i,e,t){let o=0;for(let d=0;d<i.position.length;d++){const _=e[d],C=i.position[d];if(o=_.field.isKeyField()?dn.comparator(dn.fromName(C.referenceValue),t.key):co(C,t.data.field(_.field)),"desc"===_.dir&&(o*=-1),0!==o)break}return o}function Id(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!Ci(i.position[t],e.position[t]))return!1;return!0}class fa{constructor(e,t=null,o=[],d=[],_=null,C="F",R=null,K=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=o,this.filters=d,this.limit=_,this.limitType=C,this.startAt=R,this.endAt=K,this.D=null,this.C=null}}function dh(i,e,t,o,d,_,C,R){return new fa(i,e,t,o,d,_,C,R)}function Jl(i){return new fa(i)}function Oc(i){return!Ys(i.limit)&&"F"===i.limitType}function Pc(i){return!Ys(i.limit)&&"L"===i.limitType}function Cu(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function zu(i){for(const e of i.filters)if(e.S())return e.field;return null}function Nl(i){return null!==i.collectionGroup}function Du(i){const e=cn(i);if(null===e.D){e.D=[];const t=zu(e),o=Cu(e);if(null!==t&&null===o)t.isKeyField()||e.D.push(new Wa(t)),e.D.push(new Wa(ps.keyField(),"asc"));else{let d=!1;for(const _ of e.explicitOrderBy)e.D.push(_),_.field.isKeyField()&&(d=!0);if(!d){const _=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new Wa(ps.keyField(),_))}}}return e.D}function ho(i){const e=cn(i);if(!e.C)if("F"===e.limitType)e.C=Eo(e.path,e.collectionGroup,Du(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const _ of Du(e))t.push(new Wa(_.field,"desc"===_.dir?"asc":"desc"));const o=e.endAt?new Ro(e.endAt.position,!e.endAt.inclusive):null,d=e.startAt?new Ro(e.startAt.position,!e.startAt.inclusive):null;e.C=Eo(e.path,e.collectionGroup,t,e.filters,e.limit,o,d)}return e.C}function Cd(i,e,t){return new fa(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function cl(i,e){return za(ho(i),ho(e))&&i.limitType===e.limitType}function eu(i){return`${Pr(ho(i))}|lt:${i.limitType}`}function Nc(i){return`Query(target=${function bo(i){let e=i.path.canonicalString();return null!==i.collectionGroup&&(e+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(e+=`, filters: [${i.filters.map(t=>{return`${(o=t).field.canonicalString()} ${o.op} ${ol(o.value)}`;var o}).join(", ")}]`),Ys(i.limit)||(e+=", limit: "+i.limit),i.orderBy.length>0&&(e+=`, orderBy: [${i.orderBy.map(t=>{return`${(o=t).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),i.startAt&&(e+=", startAt: ",e+=i.startAt.inclusive?"b:":"a:",e+=i.startAt.position.map(t=>ol(t)).join(",")),i.endAt&&(e+=", endAt: ",e+=i.endAt.inclusive?"a:":"b:",e+=i.endAt.position.map(t=>ol(t)).join(",")),`Target(${e})`}(ho(i))}; limitType=${i.limitType})`}function Tu(i,e){return e.isFoundDocument()&&function(t,o){const d=o.key.path;return null!==t.collectionGroup?o.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(d):dn.isDocumentKey(t.path)?t.path.isEqual(d):t.path.isImmediateParentOf(d)}(i,e)&&function(t,o){for(const d of t.explicitOrderBy)if(!d.field.isKeyField()&&null===o.data.field(d.field))return!1;return!0}(i,e)&&function(t,o){for(const d of t.filters)if(!d.matches(o))return!1;return!0}(i,e)&&(o=e,!((t=i).startAt&&!function(d,_,C){const R=ch(d,_,C);return d.inclusive?R<=0:R<0}(t.startAt,Du(t),o)||t.endAt&&!function(d,_,C){const R=ch(d,_,C);return d.inclusive?R>=0:R>0}(t.endAt,Du(t),o)));var t,o}function Wu(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function kc(i){return(e,t)=>{let o=!1;for(const d of Du(i)){const _=uf(d,e,t);if(0!==_)return _;o=o||d.field.isKeyField()}return 0}}function uf(i,e,t){const o=i.field.isKeyField()?dn.comparator(e.key,t.key):function(d,_,C){const R=_.data.field(d),K=C.data.field(d);return null!==R&&null!==K?co(R,K):Sn()}(i.field,e,t);switch(i.dir){case"asc":return o;case"desc":return-1*o;default:return Sn()}}function hh(i,e){if(i.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vo(e)?"-0":e}}function Dd(i){return{integerValue:""+i}}function Su(i,e){return bu(e)?Dd(e):hh(i,e)}class Fc{constructor(){this._=void 0}}function qa(i,e,t){return i instanceof Au?function(o,d){const _={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return d&&(_.fields.__previous_value__=d),{mapValue:_}}(t,e):i instanceof Ma?Sd(i,e):i instanceof kl?fh(i,e):function(o,d){const _=Td(o,d),C=Lc(_)+Lc(o.k);return Iu(_)&&Iu(o.k)?Dd(C):hh(o.M,C)}(i,e)}function qu(i,e,t){return i instanceof Ma?Sd(i,e):i instanceof kl?fh(i,e):t}function Td(i,e){return i instanceof Fl?Iu(t=e)||(o=t)&&"doubleValue"in o?e:{integerValue:0}:null;var o,t}class Au extends Fc{}class Ma extends Fc{constructor(e){super(),this.elements=e}}function Sd(i,e){const t=ph(e);for(const o of i.elements)t.some(d=>Ci(d,o))||t.push(o);return{arrayValue:{values:t}}}class kl extends Fc{constructor(e){super(),this.elements=e}}function fh(i,e){let t=ph(e);for(const o of i.elements)t=t.filter(d=>!Ci(d,o));return{arrayValue:{values:t}}}class Fl extends Fc{constructor(e,t){super(),this.M=e,this.k=t}}function Lc(i){return vi(i.integerValue||i.doubleValue)}function ph(i){return Ha(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class Vc{constructor(e,t){this.field=e,this.transform=t}}class ip{constructor(e,t){this.version=e,this.transformResults=t}}class $s{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new $s}static exists(e){return new $s(void 0,e)}static updateTime(e){return new $s(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function dl(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class Yu{}function ta(i,e,t){i instanceof Ku?function(o,d,_){const C=o.value.clone(),R=Bc(o.fieldTransforms,d,_.transformResults);C.setAll(R),d.convertToFoundDocument(_.version,C).setHasCommittedMutations()}(i,e,t):i instanceof Ra?function(o,d,_){if(!dl(o.precondition,d))return void d.convertToUnknownDocument(_.version);const C=Bc(o.fieldTransforms,d,_.transformResults),R=d.data;R.setAll(gh(o)),R.setAll(C),d.convertToFoundDocument(_.version,R).setHasCommittedMutations()}(i,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function nu(i,e,t){var d;i instanceof Ku?function(o,d,_){if(!dl(o.precondition,d))return;const C=o.value.clone(),R=$c(o.fieldTransforms,_,d);C.setAll(R),d.convertToFoundDocument(xd(d),C).setHasLocalMutations()}(i,e,t):i instanceof Ra?function(o,d,_){if(!dl(o.precondition,d))return;const C=$c(o.fieldTransforms,_,d),R=d.data;R.setAll(gh(o)),R.setAll(C),d.convertToFoundDocument(xd(d),R).setHasLocalMutations()}(i,e,t):dl(i.precondition,d=e)&&d.convertToNoDocument(qn.min())}function Ad(i,e){let t=null;for(const o of i.fieldTransforms){const d=e.data.field(o.field),_=Td(o.transform,d||null);null!=_&&(null==t&&(t=it.empty()),t.set(o.field,_))}return t||null}function xu(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(o=e.fieldTransforms,!!(void 0===(t=i.fieldTransforms)&&void 0===o||t&&o&&Fs(t,o,(d,_)=>function tu(i,e){return i.field.isEqual(e.field)&&(o=e.transform,(t=i.transform)instanceof Ma&&o instanceof Ma||t instanceof kl&&o instanceof kl?Fs(t.elements,o.elements,Ci):t instanceof Fl&&o instanceof Fl?Ci(t.k,o.k):t instanceof Au&&o instanceof Au);var t,o}(d,_))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var t,o}function xd(i){return i.isFoundDocument()?i.version:qn.min()}class Ku extends Yu{constructor(e,t,o,d=[]){super(),this.key=e,this.value=t,this.precondition=o,this.fieldTransforms=d,this.type=0}}class Ra extends Yu{constructor(e,t,o,d,_=[]){super(),this.key=e,this.data=t,this.fieldMask=o,this.precondition=d,this.fieldTransforms=_,this.type=1}}function gh(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const o=i.data.field(t);e.set(t,o)}}),e}function Bc(i,e,t){const o=new Map;Wn(i.length===t.length);for(let d=0;d<t.length;d++){const _=i[d],C=_.transform,R=e.data.field(_.field);o.set(_.field,qu(C,R,t[d]))}return o}function $c(i,e,t){const o=new Map;for(const d of i){const _=d.transform,C=t.data.field(d.field);o.set(d.field,qa(_,C,e))}return o}class ru extends Yu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Uc extends Yu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class mh{constructor(e){this.count=e}}var gs,mi;function Md(i){switch(i){default:return Sn();case Dt.CANCELLED:case Dt.UNKNOWN:case Dt.DEADLINE_EXCEEDED:case Dt.RESOURCE_EXHAUSTED:case Dt.INTERNAL:case Dt.UNAVAILABLE:case Dt.UNAUTHENTICATED:return!1;case Dt.INVALID_ARGUMENT:case Dt.NOT_FOUND:case Dt.ALREADY_EXISTS:case Dt.PERMISSION_DENIED:case Dt.FAILED_PRECONDITION:case Dt.ABORTED:case Dt.OUT_OF_RANGE:case Dt.UNIMPLEMENTED:case Dt.DATA_LOSS:return!0}}function Oa(i){if(void 0===i)return Mi("GRPC error has no .code"),Dt.UNKNOWN;switch(i){case gs.OK:return Dt.OK;case gs.CANCELLED:return Dt.CANCELLED;case gs.UNKNOWN:return Dt.UNKNOWN;case gs.DEADLINE_EXCEEDED:return Dt.DEADLINE_EXCEEDED;case gs.RESOURCE_EXHAUSTED:return Dt.RESOURCE_EXHAUSTED;case gs.INTERNAL:return Dt.INTERNAL;case gs.UNAVAILABLE:return Dt.UNAVAILABLE;case gs.UNAUTHENTICATED:return Dt.UNAUTHENTICATED;case gs.INVALID_ARGUMENT:return Dt.INVALID_ARGUMENT;case gs.NOT_FOUND:return Dt.NOT_FOUND;case gs.ALREADY_EXISTS:return Dt.ALREADY_EXISTS;case gs.PERMISSION_DENIED:return Dt.PERMISSION_DENIED;case gs.FAILED_PRECONDITION:return Dt.FAILED_PRECONDITION;case gs.ABORTED:return Dt.ABORTED;case gs.OUT_OF_RANGE:return Dt.OUT_OF_RANGE;case gs.UNIMPLEMENTED:return Dt.UNIMPLEMENTED;case gs.DATA_LOSS:return Dt.DATA_LOSS;default:return Sn()}}(mi=gs||(gs={}))[mi.OK=0]="OK",mi[mi.CANCELLED=1]="CANCELLED",mi[mi.UNKNOWN=2]="UNKNOWN",mi[mi.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",mi[mi.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",mi[mi.NOT_FOUND=5]="NOT_FOUND",mi[mi.ALREADY_EXISTS=6]="ALREADY_EXISTS",mi[mi.PERMISSION_DENIED=7]="PERMISSION_DENIED",mi[mi.UNAUTHENTICATED=16]="UNAUTHENTICATED",mi[mi.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",mi[mi.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",mi[mi.ABORTED=10]="ABORTED",mi[mi.OUT_OF_RANGE=11]="OUT_OF_RANGE",mi[mi.UNIMPLEMENTED=12]="UNIMPLEMENTED",mi[mi.INTERNAL=13]="INTERNAL",mi[mi.UNAVAILABLE=14]="UNAVAILABLE",mi[mi.DATA_LOSS=15]="DATA_LOSS";class Pa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0!==o)for(const[d,_]of o)if(this.equalsFn(d,e))return _}has(e){return void 0!==this.get(e)}set(e,t){const o=this.mapKeyFn(e),d=this.inner[o];if(void 0===d)return this.inner[o]=[[e,t]],void this.innerSize++;for(let _=0;_<d.length;_++)if(this.equalsFn(d[_][0],e))return void(d[_]=[e,t]);d.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0===o)return!1;for(let d=0;d<o.length;d++)if(this.equalsFn(o[d][0],e))return 1===o.length?delete this.inner[t]:o.splice(d,1),this.innerSize--,!0;return!1}forEach(e){Ol(this.inner,(t,o)=>{for(const[d,_]of o)e(d,_)})}isEmpty(){return vd(this.inner)}size(){return this.innerSize}}class ms{constructor(e,t){this.comparator=e,this.root=t||ys.EMPTY}insert(e,t){return new ms(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ys.BLACK,null,null))}remove(e){return new ms(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ys.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const o=this.comparator(e,t.key);if(0===o)return t.value;o<0?t=t.left:o>0&&(t=t.right)}return null}indexOf(e){let t=0,o=this.root;for(;!o.isEmpty();){const d=this.comparator(e,o.key);if(0===d)return t+o.left.size;d<0?o=o.left:(t+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,o)=>(e(t,o),!1))}toString(){const e=[];return this.inorderTraversal((t,o)=>(e.push(`${t}:${o}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new jo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new jo(this.root,e,this.comparator,!1)}getReverseIterator(){return new jo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new jo(this.root,e,this.comparator,!0)}}class jo{constructor(e,t,o,d){this.isReverse=d,this.nodeStack=[];let _=1;for(;!e.isEmpty();)if(_=t?o(e.key,t):1,t&&d&&(_*=-1),_<0)e=this.isReverse?e.left:e.right;else{if(0===_){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ys{constructor(e,t,o,d,_){this.key=e,this.value=t,this.color=null!=o?o:ys.RED,this.left=null!=d?d:ys.EMPTY,this.right=null!=_?_:ys.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,o,d,_){return new ys(null!=e?e:this.key,null!=t?t:this.value,null!=o?o:this.color,null!=d?d:this.left,null!=_?_:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,o){let d=this;const _=o(e,d.key);return d=_<0?d.copy(null,null,null,d.left.insert(e,t,o),null):0===_?d.copy(null,t,null,null,null):d.copy(null,null,null,null,d.right.insert(e,t,o)),d.fixUp()}removeMin(){if(this.left.isEmpty())return ys.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let o,d=this;if(t(e,d.key)<0)d.left.isEmpty()||d.left.isRed()||d.left.left.isRed()||(d=d.moveRedLeft()),d=d.copy(null,null,null,d.left.remove(e,t),null);else{if(d.left.isRed()&&(d=d.rotateRight()),d.right.isEmpty()||d.right.isRed()||d.right.left.isRed()||(d=d.moveRedRight()),0===t(e,d.key)){if(d.right.isEmpty())return ys.EMPTY;o=d.right.min(),d=d.copy(o.key,o.value,null,null,d.right.removeMin())}d=d.copy(null,null,null,null,d.right.remove(e,t))}return d.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ys.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ys.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Sn();const e=this.left.check();if(e!==this.right.check())throw Sn();return e+(this.isRed()?0:1)}}ys.EMPTY=null,ys.RED=!0,ys.BLACK=!1,ys.EMPTY=new class{constructor(){this.size=0}get key(){throw Sn()}get value(){throw Sn()}get color(){throw Sn()}get left(){throw Sn()}get right(){throw Sn()}copy(i,e,t,o,d){return this}insert(i,e,t){return new ys(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ri{constructor(e){this.comparator=e,this.data=new ms(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,o)=>(e(t),!1))}forEachInRange(e,t){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const d=o.getNext();if(this.comparator(d.key,e[1])>=0)return;t(d.key)}}forEachWhile(e,t){let o;for(o=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new yh(this.data.getIterator())}getIteratorFrom(e){return new yh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(o=>{t=t.add(o)}),t}isEqual(e){if(!(e instanceof Ri)||this.size!==e.size)return!1;const t=this.data.getIterator(),o=e.data.getIterator();for(;t.hasNext();){const d=t.getNext().key,_=o.getNext().key;if(0!==this.comparator(d,_))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ri(this.comparator);return t.data=e,t}}class yh{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ss(i){return i.hasNext()?i.getNext():void 0}const _h=new ms(dn.comparator);function na(){return _h}const Zu=new ms(dn.comparator);function jc(){return Zu}function pa(){return new Pa(i=>i.toString(),(i,e)=>i.isEqual(e))}const Ll=new ms(dn.comparator),cf=new Ri(dn.comparator);function Di(...i){let e=cf;for(const t of i)e=e.add(t);return e}const df=new Ri(fr);function Qu(){return df}class Hc{constructor(e,t,o,d,_){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=o,this.documentUpdates=d,this.resolvedLimboDocuments=_}static createSynthesizedRemoteEventForCurrentChange(e,t){const o=new Map;return o.set(e,hl.createSynthesizedTargetChangeForCurrentChange(e,t)),new Hc(qn.min(),o,Qu(),na(),Di())}}class hl{constructor(e,t,o,d,_){this.resumeToken=e,this.current=t,this.addedDocuments=o,this.modifiedDocuments=d,this.removedDocuments=_}static createSynthesizedTargetChangeForCurrentChange(e,t){return new hl(Is.EMPTY_BYTE_STRING,t,Di(),Di(),Di())}}class Us{constructor(e,t,o,d){this.O=e,this.removedTargetIds=t,this.key=o,this.F=d}}class fl{constructor(e,t){this.targetId=e,this.$=t}}class Xu{constructor(e,t,o=Is.EMPTY_BYTE_STRING,d=null){this.state=e,this.targetIds=t,this.resumeToken=o,this.cause=d}}class pl{constructor(){this.B=0,this.L=Ju(),this.U=Is.EMPTY_BYTE_STRING,this.q=!1,this.G=!0}get current(){return this.q}get resumeToken(){return this.U}get K(){return 0!==this.B}get j(){return this.G}W(e){e.approximateByteSize()>0&&(this.G=!0,this.U=e)}H(){let e=Di(),t=Di(),o=Di();return this.L.forEach((d,_)=>{switch(_){case 0:e=e.add(d);break;case 2:t=t.add(d);break;case 1:o=o.add(d);break;default:Sn()}}),new hl(this.U,this.q,e,t,o)}J(){this.G=!1,this.L=Ju()}Y(e,t){this.G=!0,this.L=this.L.insert(e,t)}X(e){this.G=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.G=!0,this.q=!0}}class fo{constructor(e){this.nt=e,this.st=new Map,this.it=na(),this.rt=gl(),this.ot=new Ri(fr)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const o=this.lt(t);switch(e.state){case 0:this.ft(t)&&o.W(e.resumeToken);break;case 1:o.tt(),o.K||o.J(),o.W(e.resumeToken);break;case 2:o.tt(),o.K||this.removeTarget(t);break;case 3:this.ft(t)&&(o.et(),o.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),o.W(e.resumeToken));break;default:Sn()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((o,d)=>{this.ft(d)&&t(d)})}_t(e){const t=e.targetId,o=e.$.count,d=this.wt(t);if(d){const _=d.target;if(Aa(_))if(0===o){const C=new dn(_.path);this.ct(t,C,Lt.newNoDocument(C,qn.min()))}else Wn(1===o);else this.gt(t)!==o&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((_,C)=>{const R=this.wt(C);if(R){if(_.current&&Aa(R.target)){const K=new dn(R.target.path);null!==this.it.get(K)||this.It(C,K)||this.ct(C,K,Lt.newNoDocument(K,e))}_.j&&(t.set(C,_.H()),_.J())}});let o=Di();this.rt.forEach((_,C)=>{let R=!0;C.forEachWhile(K=>{const J=this.wt(K);return!J||2===J.purpose||(R=!1,!1)}),R&&(o=o.add(_))}),this.it.forEach((_,C)=>C.setReadTime(e));const d=new Hc(e,t,this.ot,this.it,o);return this.it=na(),this.rt=gl(),this.ot=new Ri(fr),d}at(e,t){if(!this.ft(e))return;const o=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,o),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,o){if(!this.ft(e))return;const d=this.lt(e);this.It(e,t)?d.Y(t,1):d.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),o&&(this.it=this.it.insert(t,o))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new pl,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new Ri(fr),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Wt("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.K?null:this.nt.Et(e)}dt(e){this.st.set(e,new pl),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function gl(){return new ms(dn.comparator)}function Ju(){return new ms(dn.comparator)}const wo={asc:"ASCENDING",desc:"DESCENDING"},Vl={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class ec{constructor(e,t){this.databaseId=e,this.N=t}}function iu(i,e){return i.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function su(i,e){return i.N?e.toBase64():e.toUint8Array()}function Rd(i,e){return iu(i,e.toTimestamp())}function _s(i){return Wn(!!i),qn.fromTimestamp(function(e){const t=da(e);return new Ii(t.seconds,t.nanos)}(i))}function Gc(i,e){return(t=i,new Wr(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function vh(i){const e=Wr.fromString(i);return Wn(fe(e)),e}function Ho(i,e){return Gc(i.databaseId,e.path)}function ra(i,e){const t=vh(e);if(t.get(1)!==i.databaseId.projectId)throw new T(Dt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new T(Dt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new dn(Od(t))}function tc(i,e){return Gc(i.databaseId,e)}function zc(i){const e=vh(i);return 4===e.length?Wr.emptyPath():Od(e)}function Mu(i){return new Wr(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function Od(i){return Wn(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function so(i,e,t){return{name:Ho(i,e),fields:t.value.mapValue.fields}}function nc(i,e,t){const o=ra(i,e.name),d=_s(e.updateTime),_=new it({mapValue:{fields:e.fields}}),C=Lt.newFoundDocument(o,d,_);return t&&C.setHasCommittedMutations(),t?C.setHasCommittedMutations():C}function Oo(i,e){let t;if(e instanceof Ku)t={update:so(i,e.key,e.value)};else if(e instanceof ru)t={delete:Ho(i,e.key)};else if(e instanceof Ra)t={update:so(i,e.key,e.data),updateMask:q(e.fieldMask)};else{if(!(e instanceof Uc))return Sn();t={verify:Ho(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(o=>function(d,_){const C=_.transform;if(C instanceof Au)return{fieldPath:_.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(C instanceof Ma)return{fieldPath:_.field.canonicalString(),appendMissingElements:{values:C.elements}};if(C instanceof kl)return{fieldPath:_.field.canonicalString(),removeAllFromArray:{values:C.elements}};if(C instanceof Fl)return{fieldPath:_.field.canonicalString(),increment:C.k};throw Sn()}(0,o))),e.precondition.isNone||(t.currentDocument=void 0!==(d=e.precondition).updateTime?{updateTime:Rd(i,d.updateTime)}:void 0!==d.exists?{exists:d.exists}:Sn()),t;var d}function Ya(i,e){const t=e.currentDocument?void 0!==(d=e.currentDocument).updateTime?$s.updateTime(_s(d.updateTime)):void 0!==d.exists?$s.exists(d.exists):$s.none():$s.none(),o=e.updateTransforms?e.updateTransforms.map(d=>function(_,C){let R=null;"setToServerValue"in C?(Wn("REQUEST_TIME"===C.setToServerValue),R=new Au):"appendMissingElements"in C?R=new Ma(C.appendMissingElements.values||[]):"removeAllFromArray"in C?R=new kl(C.removeAllFromArray.values||[]):"increment"in C?R=new Fl(_,C.increment):Sn();const K=ps.fromServerFormat(C.fieldPath);return new Vc(K,R)}(i,d)):[];var d;if(e.update){const d=ra(i,e.update.name),_=new it({mapValue:{fields:e.update.fields}});if(e.updateMask){const C=new Ca((e.updateMask.fieldPaths||[]).map(J=>ps.fromServerFormat(J)));return new Ra(d,_,C,t,o)}return new Ku(d,_,t,o)}if(e.delete){const d=ra(i,e.delete);return new ru(d,t)}if(e.verify){const d=ra(i,e.verify);return new Uc(d,t)}return Sn()}function ic(i,e){return{documents:[tc(i,e.path)]}}function Nd(i,e){const t={structuredQuery:{}},o=e.path;null!==e.collectionGroup?(t.parent=tc(i,o),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=tc(i,o.popLast()),t.structuredQuery.from=[{collectionId:o.lastSegment()}]);const d=function(K){if(0===K.length)return;const J=K.map(Me=>function(Ye){if("=="===Ye.op){if(Ga(Ye.value))return{unaryFilter:{field:w(Ye.field),op:"IS_NAN"}};if(Mo(Ye.value))return{unaryFilter:{field:w(Ye.field),op:"IS_NULL"}}}else if("!="===Ye.op){if(Ga(Ye.value))return{unaryFilter:{field:w(Ye.field),op:"IS_NOT_NAN"}};if(Mo(Ye.value))return{unaryFilter:{field:w(Ye.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:w(Ye.field),op:sc(Ye.op),value:Ye.value}}}(Me));return 1===J.length?J[0]:{compositeFilter:{op:"AND",filters:J}}}(e.filters);d&&(t.structuredQuery.where=d);const _=function(K){if(0!==K.length)return K.map(J=>{return{field:w((Me=J).field),direction:hf(Me.dir)};var Me})}(e.orderBy);_&&(t.structuredQuery.orderBy=_);const C=(J=e.limit,i.N||Ys(J)?J:{value:J});var J,R,K;return null!==C&&(t.structuredQuery.limit=C),e.startAt&&(t.structuredQuery.startAt={before:(R=e.startAt).inclusive,values:R.position}),e.endAt&&(t.structuredQuery.endAt={before:!(K=e.endAt).inclusive,values:K.position}),t}function Wc(i){let e=zc(i.parent);const t=i.structuredQuery,o=t.from?t.from.length:0;let d=null;if(o>0){Wn(1===o);const Me=t.from[0];Me.allDescendants?d=Me.collectionId:e=e.child(Me.collectionId)}let _=[];t.where&&(_=kd(t.where));let C=[];t.orderBy&&(C=t.orderBy.map(Me=>{return new Wa(g((Ye=Me).field),function(Ct){switch(Ct){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Ye.direction));var Ye}));let R=null;t.limit&&(R=function(Me){let Ye;return Ye="object"==typeof Me?Me.value:Me,Ys(Ye)?null:Ye}(t.limit));let K=null;var Me;t.startAt&&(K=new Ro((Me=t.startAt).values||[],!!Me.before));let J=null;return t.endAt&&(J=function(Me){return new Ro(Me.values||[],!Me.before)}(t.endAt)),dh(e,d,C,_,R,"F",K,J)}function kd(i){return i?void 0!==i.unaryFilter?[A(i)]:void 0!==i.fieldFilter?[y(i)]:void 0!==i.compositeFilter?i.compositeFilter.filters.map(e=>kd(e)).reduce((e,t)=>e.concat(t)):Sn():[]}function hf(i){return wo[i]}function sc(i){return Vl[i]}function w(i){return{fieldPath:i.canonicalString()}}function g(i){return ps.fromServerFormat(i.fieldPath)}function y(i){return Ms.create(g(i.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Sn()}}(i.fieldFilter.op),i.fieldFilter.value)}function A(i){switch(i.unaryFilter.op){case"IS_NAN":const e=g(i.unaryFilter.field);return Ms.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=g(i.unaryFilter.field);return Ms.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=g(i.unaryFilter.field);return Ms.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=g(i.unaryFilter.field);return Ms.create(d,"!=",{nullValue:"NULL_VALUE"});default:return Sn()}}function q(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function fe(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function et(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=sn(e)),e=xt(i.get(t),e);return sn(e)}function xt(i,e){let t=e;const o=i.length;for(let d=0;d<o;d++){const _=i.charAt(d);switch(_){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=_}}return t}function sn(i){return i+"\x01\x01"}function un(i){const e=i.length;if(Wn(e>=2),2===e)return Wn("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),Wr.emptyPath();const t=e-2,o=[];let d="";for(let _=0;_<e;){const C=i.indexOf("\x01",_);switch((C<0||C>t)&&Sn(),i.charAt(C+1)){case"\x01":const R=i.substring(_,C);let K;0===d.length?K=R:(d+=R,K=d,d=""),o.push(K);break;case"\x10":d+=i.substring(_,C),d+="\0";break;case"\x11":d+=i.substring(_,C+1);break;default:Sn()}_=C+2}return new Wr(o)}const Zn=["userId","batchId"];function Gn(i,e){return[i,et(e)]}function os(i,e,t){return[i,et(e),t]}const Go={},yl=["prefixPath","collectionGroup","readTime","documentId"],Bl=["prefixPath","collectionGroup","documentId"],oc=["collectionGroup","readTime","prefixPath","documentId"],zo=["canonicalId","targetId"],Eh=["targetId","path"],$l=["path","targetId"],ou=["collectionId","parent"],ac=["indexId","uid"],Wo=["uid","sequenceNumber"],lc=["indexId","uid","arrayValue","directionalValue","documentKey"],ff=["indexId","uid","documentKey"],Yc=["userId","collectionPath","documentId"],pf=["userId","collectionPath","largestBatchId"],gg=["userId","collectionGroup","largestBatchId"],sp=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],op=[...sp,"documentOverlays"],uc=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],bh=[...uc,"indexConfiguration","indexState","indexEntries"],wh="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ih{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class Pt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Sn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Pt((o,d)=>{this.nextCallback=_=>{this.wrapSuccess(e,_).next(o,d)},this.catchCallback=_=>{this.wrapFailure(t,_).next(o,d)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Pt?t:Pt.resolve(t)}catch(t){return Pt.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Pt.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Pt.reject(t)}static resolve(e){return new Pt((t,o)=>{t(e)})}static reject(e){return new Pt((t,o)=>{o(e)})}static waitFor(e){return new Pt((t,o)=>{let d=0,_=0,C=!1;e.forEach(R=>{++d,R.next(()=>{++_,C&&_===d&&t()},K=>o(K))}),C=!0,_===d&&t()})}static or(e){let t=Pt.resolve(!1);for(const o of e)t=t.next(d=>d?Pt.resolve(d):o());return t}static forEach(e,t){const o=[];return e.forEach((d,_)=>{o.push(t.call(this,d,_))}),this.waitFor(o)}}class cc{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new S,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new _l(e,t.error)):this.At.resolve()},this.transaction.onerror=o=>{const d=gf(o.target.error);this.At.reject(new _l(e,d))}}static open(e,t,o,d){try{return new cc(t,e.transaction(d,o))}catch(_){throw new _l(t,_)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Wt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new ap(t)}}class Ka{constructor(e,t,o){this.name=e,this.version=t,this.Pt=o,12.2===Ka.Vt((0,_t.z$)())&&Mi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Wt("SimpleDb","Removing database:",e),Ou(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,_t.hl)())return!1;if(Ka.St())return!0;const e=(0,_t.z$)(),t=Ka.Vt(e),o=0<t&&t<10,d=Ka.Dt(e),_=0<d&&d<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||o||_)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(o)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),o=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(o)}Nt(e){var t=this;return(0,ve.Z)(function*(){return t.db||(Wt("SimpleDb","Opening database:",t.name),t.db=yield new Promise((o,d)=>{const _=indexedDB.open(t.name,t.version);_.onsuccess=C=>{o(C.target.result)},_.onblocked=()=>{d(new _l(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},_.onerror=C=>{const R=C.target.error;d("VersionError"===R.name?new T(Dt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===R.name?new T(Dt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+R):new _l(e,R))},_.onupgradeneeded=C=>{Wt("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',C.oldVersion),t.Pt.kt(C.target.result,_.transaction,C.oldVersion,t.version).next(()=>{Wt("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=o=>t.Mt(o)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,o,d){var _=this;return(0,ve.Z)(function*(){const C="readonly"===t;let R=0;for(;;){++R;try{_.db=yield _.Nt(e);const K=cc.open(_.db,e,C?"readonly":"readwrite",o),J=d(K).next(Me=>(K.bt(),Me)).catch(Me=>(K.abort(Me),Pt.reject(Me))).toPromise();return J.catch(()=>{}),yield K.Rt,J}catch(K){const J="FirebaseError"!==K.name&&R<3;if(Wt("SimpleDb","Transaction failed with error:",K.message,"Retrying:",J),_.close(),!J)return Promise.reject(K)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Ch{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return Ou(this.Ft.delete())}}class _l extends T{constructor(e,t){super(Dt.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ru(i){return"IndexedDbTransactionError"===i.name}class ap{constructor(e){this.store=e}put(e,t){let o;return void 0!==t?(Wt("SimpleDb","PUT",this.store.name,e,t),o=this.store.put(t,e)):(Wt("SimpleDb","PUT",this.store.name,"<auto-key>",e),o=this.store.put(e)),Ou(o)}add(e){return Wt("SimpleDb","ADD",this.store.name,e,e),Ou(this.store.add(e))}get(e){return Ou(this.store.get(e)).next(t=>(void 0===t&&(t=null),Wt("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Wt("SimpleDb","DELETE",this.store.name,e),Ou(this.store.delete(e))}count(){return Wt("SimpleDb","COUNT",this.store.name),Ou(this.store.count())}qt(e,t){const o=this.options(e,t);if(o.index||"function"!=typeof this.store.getAll){const d=this.cursor(o),_=[];return this.Gt(d,(C,R)=>{_.push(R)}).next(()=>_)}{const d=this.store.getAll(o.range);return new Pt((_,C)=>{d.onerror=R=>{C(R.target.error)},d.onsuccess=R=>{_(R.target.result)}})}}Kt(e,t){const o=this.store.getAll(e,null===t?void 0:t);return new Pt((d,_)=>{o.onerror=C=>{_(C.target.error)},o.onsuccess=C=>{d(C.target.result)}})}Qt(e,t){Wt("SimpleDb","DELETE ALL",this.store.name);const o=this.options(e,t);o.jt=!1;const d=this.cursor(o);return this.Gt(d,(_,C,R)=>R.delete())}Wt(e,t){let o;t?o=e:(o={},t=e);const d=this.cursor(o);return this.Gt(d,t)}zt(e){const t=this.cursor({});return new Pt((o,d)=>{t.onerror=_=>{const C=gf(_.target.error);d(C)},t.onsuccess=_=>{const C=_.target.result;C?e(C.primaryKey,C.value).next(R=>{R?C.continue():o()}):o()}})}Gt(e,t){const o=[];return new Pt((d,_)=>{e.onerror=C=>{_(C.target.error)},e.onsuccess=C=>{const R=C.target.result;if(!R)return void d();const K=new Ch(R),J=t(R.primaryKey,R.value,K);if(J instanceof Pt){const Me=J.catch(Ye=>(K.done(),Pt.reject(Ye)));o.push(Me)}K.isDone?d():null===K.Lt?R.continue():R.continue(K.Lt)}}).next(()=>Pt.waitFor(o))}options(e,t){let o;return void 0!==e&&("string"==typeof e?o=e:t=e),{index:o,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const o=this.store.index(e.index);return e.jt?o.openKeyCursor(e.range,t):o.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ou(i){return new Pt((e,t)=>{i.onsuccess=o=>{e(o.target.result)},i.onerror=o=>{const d=gf(o.target.error);t(d)}})}let Fd=!1;function gf(i){const e=Ka.Vt((0,_t.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const o=new T("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Fd||(Fd=!0,setTimeout(()=>{throw o},0)),o}}return i}class mf extends Ih{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function Ks(i,e){const t=cn(i);return Ka.xt(t.Ht,e)}class Ld{constructor(e,t,o,d){this.batchId=e,this.localWriteTime=t,this.baseMutations=o,this.mutations=d}applyToRemoteDocument(e,t){const o=t.mutationResults;for(let d=0;d<this.mutations.length;d++){const _=this.mutations[d];_.key.isEqual(e.key)&&ta(_,e,o[d])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&nu(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&nu(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const o=e.get(t.key),d=o;this.applyToLocalView(d),o.isValidDocument()||d.convertToNoDocument(qn.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Di())}isEqual(e){return this.batchId===e.batchId&&Fs(this.mutations,e.mutations,(t,o)=>xu(t,o))&&Fs(this.baseMutations,e.baseMutations,(t,o)=>xu(t,o))}}class Vd{constructor(e,t,o,d){this.batch=e,this.commitVersion=t,this.mutationResults=o,this.docVersions=d}static from(e,t,o){Wn(e.mutations.length===o.length);let d=Ll;const _=e.mutations;for(let C=0;C<_.length;C++)d=d.insert(_[C].key,o[C].version);return new Vd(e,t,o,d)}}class au{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Io{constructor(e,t,o,d,_=qn.min(),C=qn.min(),R=Is.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=o,this.sequenceNumber=d,this.snapshotVersion=_,this.lastLimboFreeSnapshotVersion=C,this.resumeToken=R}withSequenceNumber(e){return new Io(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Io(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Io(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Bd{constructor(e){this.Jt=e}}function dc(i,e){const t=e.key,o={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:$d(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())o.document={name:Ho(d=i.Jt,(_=e).key),fields:_.data.value.mapValue.fields,updateTime:iu(d,_.version.toTimestamp())};else if(e.isNoDocument())o.noDocument={path:t.path.toArray(),readTime:ga(e.version)};else{if(!e.isUnknownDocument())return Sn();o.unknownDocument={path:t.path.toArray(),version:ga(e.version)}}var d,_;return o}function $d(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function ga(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function vl(i){const e=new Ii(i.seconds,i.nanoseconds);return qn.fromTimestamp(e)}function hc(i,e){const t=(e.baseMutations||[]).map(_=>Ya(i.Jt,_));for(let _=0;_<e.mutations.length-1;++_){const C=e.mutations[_];_+1<e.mutations.length&&void 0!==e.mutations[_+1].transform&&(C.updateTransforms=e.mutations[_+1].transform.fieldTransforms,e.mutations.splice(_+1,1),++_)}const o=e.mutations.map(_=>Ya(i.Jt,_)),d=Ii.fromMillis(e.localWriteTimeMs);return new Ld(e.batchId,d,t,o)}function fc(i){const e=vl(i.readTime),t=void 0!==i.lastLimboFreeSnapshotVersion?vl(i.lastLimboFreeSnapshotVersion):qn.min();let o;var d;return void 0!==i.query.documents?(Wn(1===(d=i.query).documents.length),o=ho(Jl(zc(d.documents[0])))):o=ho(Wc(i.query)),new Io(o,i.targetId,0,i.lastListenSequenceNumber,e,t,Is.fromBase64String(i.resumeToken))}function yf(i,e){const t=ga(e.snapshotVersion),o=ga(e.lastLimboFreeSnapshotVersion);let d;d=Aa(e.target)?ic(i.Jt,e.target):Nd(i.Jt,e.target);const _=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Pr(e.target),readTime:t,resumeToken:_,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:o,query:d}}function Kc(i){const e=Wc({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?Cd(e,e.limit,"L"):e}function Zc(i,e){return new au(e.largestBatchId,Ya(i.Jt,e.overlayMutation))}function Qc(i,e){const t=e.path.lastSegment();return[i,et(e.path.popLast()),t]}class lp{getBundleMetadata(e,t){return mg(e).get(t).next(o=>{if(o)return{id:(d=o).bundleId,createTime:vl(d.createTime),version:d.version};var d})}saveBundleMetadata(e,t){return mg(e).put({bundleId:(o=t).id,createTime:ga(_s(o.createTime)),version:o.version});var o}getNamedQuery(e,t){return Ud(e).get(t).next(o=>{if(o)return{name:(d=o).name,query:Kc(d.bundledQuery),readTime:vl(d.readTime)};var d})}saveNamedQuery(e,t){return Ud(e).put({name:(o=t).name,readTime:ga(_s(o.readTime)),bundledQuery:o.bundledQuery});var o}}function mg(i){return Ks(i,"bundles")}function Ud(i){return Ks(i,"namedQueries")}class _f{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new _f(e,t.uid||"")}getOverlay(e,t){return pc(e).get(Qc(this.userId,t)).next(o=>o?Zc(this.M,o):null)}saveOverlays(e,t,o){const d=[];return o.forEach((_,C)=>{const R=new au(t,C);d.push(this.Xt(e,R))}),Pt.waitFor(d)}removeOverlaysForBatchId(e,t,o){const d=new Set;t.forEach(C=>d.add(et(C.getCollectionPath())));const _=[];return d.forEach(C=>{const R=IDBKeyRange.bound([this.userId,C,o],[this.userId,C,o+1],!1,!0);_.push(pc(e).Qt("collectionPathOverlayIndex",R))}),Pt.waitFor(_)}getOverlaysForCollection(e,t,o){const d=pa(),_=et(t),C=IDBKeyRange.bound([this.userId,_,o],[this.userId,_,Number.POSITIVE_INFINITY],!0);return pc(e).qt("collectionPathOverlayIndex",C).next(R=>{for(const K of R){const J=Zc(this.M,K);d.set(J.getKey(),J)}return d})}getOverlaysForCollectionGroup(e,t,o,d){const _=pa();let C;const R=IDBKeyRange.bound([this.userId,t,o],[this.userId,t,Number.POSITIVE_INFINITY],!0);return pc(e).Wt({index:"collectionGroupOverlayIndex",range:R},(K,J,Me)=>{const Ye=Zc(this.M,J);_.size()<d||Ye.largestBatchId===C?(_.set(Ye.getKey(),Ye),C=Ye.largestBatchId):Me.done()}).next(()=>_)}Xt(e,t){return pc(e).put(function(o,d,_){const[C,R,K]=Qc(d,_.mutation.key);return{userId:d,collectionPath:R,documentId:K,collectionGroup:_.mutation.key.getCollectionGroup(),largestBatchId:_.largestBatchId,overlayMutation:Oo(o.Jt,_.mutation)}}(this.M,this.userId,t))}}function pc(i){return Ks(i,"documentOverlays")}class gc{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(vi(e.integerValue));else if("doubleValue"in e){const o=vi(e.doubleValue);isNaN(o)?this.ne(t,13):(this.ne(t,15),vo(o)?t.se(0):t.se(o))}else if("timestampValue"in e){const o=e.timestampValue;this.ne(t,20),"string"==typeof o?t.ie(o):(t.ie(`${o.seconds||""}`),t.se(o.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(ja(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const o=e.geoPointValue;this.ne(t,45),t.se(o.latitude||0),t.se(o.longitude||0)}else"mapValue"in e?z(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):Sn()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const o=e.fields||{};this.ne(t,55);for(const d of Object.keys(o))this.re(d,t),this.te(o[d],t)}he(e,t){const o=e.values||[];this.ne(t,50);for(const d of o)this.te(d,t)}ae(e,t){this.ne(t,37),dn.fromName(e).path.forEach(o=>{this.ne(t,60),this.le(o,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function up(i){if(0===i)return 8;let e=0;return i>>4==0&&(e+=4,i<<=4),i>>6==0&&(e+=2,i<<=2),i>>7==0&&(e+=1),e}function Na(i){const e=64-function(t){let o=0;for(let d=0;d<8;++d){const _=up(255&t[d]);if(o+=_,8!==_)break}return o}(i);return Math.ceil(e/8)}gc.fe=new gc;class ma{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this._e(o.value),o=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this.ge(o.value),o=t.next();this.ye()}pe(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this._e(o);else if(o<2048)this._e(960|o>>>6),this._e(128|63&o);else if(t<"\ud800"||"\udbff"<t)this._e(480|o>>>12),this._e(128|63&o>>>6),this._e(128|63&o);else{const d=t.codePointAt(0);this._e(240|d>>>18),this._e(128|63&d>>>12),this._e(128|63&d>>>6),this._e(128|63&d)}}this.we()}Ie(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this.ge(o);else if(o<2048)this.ge(960|o>>>6),this.ge(128|63&o);else if(t<"\ud800"||"\udbff"<t)this.ge(480|o>>>12),this.ge(128|63&o>>>6),this.ge(128|63&o);else{const d=t.codePointAt(0);this.ge(240|d>>>18),this.ge(128|63&d>>>12),this.ge(128|63&d>>>6),this.ge(128|63&d)}}this.ye()}Te(e){const t=this.Ee(e),o=Na(t);this.Ae(1+o),this.buffer[this.position++]=255&o;for(let d=t.length-o;d<t.length;++d)this.buffer[this.position++]=255&t[d]}Re(e){const t=this.Ee(e),o=Na(t);this.Ae(1+o),this.buffer[this.position++]=~(255&o);for(let d=t.length-o;d<t.length;++d)this.buffer[this.position++]=~(255&t[d])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(d){const _=new DataView(new ArrayBuffer(8));return _.setFloat64(0,d,!1),new Uint8Array(_.buffer)}(e),o=0!=(128&t[0]);t[0]^=o?255:128;for(let d=1;d<t.length;++d)t[d]^=o?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let o=2*this.buffer.length;o<t&&(o=t);const d=new Uint8Array(o);d.set(this.buffer),this.buffer=d}}class jd{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class Pu{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class mc{constructor(){this.De=new ma,this.Ce=new jd(this.De),this.xe=new Pu(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class po{constructor(e,t,o,d){this.indexId=e,this.documentKey=t,this.arrayValue=o,this.directionalValue=d}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,o=new Uint8Array(t);return o.set(this.directionalValue,0),t!==e?o.set([0],this.directionalValue.length):++o[o.length-1],new po(this.indexId,this.documentKey,this.arrayValue,o)}}function ka(i,e){let t=i.indexId-e.indexId;return 0!==t?t:(t=Th(i.arrayValue,e.arrayValue),0!==t?t:(t=Th(i.directionalValue,e.directionalValue),0!==t?t:dn.comparator(i.documentKey,e.documentKey)))}function Th(i,e){for(let t=0;t<i.length&&t<e.length;++t){const o=i[t]-e[t];if(0!==o)return o}return i.length-e.length}class cp{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const o=t;o.S()?this.Fe=o:this.Oe.push(o)}}$e(e){const t=lr(e);if(void 0!==t&&!this.Be(t))return!1;const o=tr(e);let d=0,_=0;for(;d<o.length&&this.Be(o[d]);++d);if(d===o.length)return!0;if(void 0!==this.Fe){const C=o[d];if(!this.Le(this.Fe,C)||!this.Ue(this.Me[_++],C))return!1;++d}for(;d<o.length;++d){const C=o[d];if(_>=this.Me.length||!this.Ue(this.Me[_++],C))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class yc{constructor(){this.qe=new dp}addToCollectionParentIndex(e,t){return this.qe.add(t),Pt.resolve()}getCollectionParents(e,t){return Pt.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return Pt.resolve()}deleteFieldIndex(e,t){return Pt.resolve()}getDocumentsMatchingTarget(e,t){return Pt.resolve(null)}getFieldIndex(e,t){return Pt.resolve(null)}getFieldIndexes(e,t){return Pt.resolve([])}getNextCollectionGroupToUpdate(e){return Pt.resolve(null)}updateCollectionGroup(e,t,o){return Pt.resolve()}updateIndexEntries(e,t){return Pt.resolve()}}class dp{constructor(){this.index={}}add(e){const t=e.lastSegment(),o=e.popLast(),d=this.index[t]||new Ri(Wr.comparator),_=!d.has(o);return this.index[t]=d.add(o),_}has(e){const t=e.lastSegment(),o=e.popLast(),d=this.index[t];return d&&d.has(o)}getEntries(e){return(this.index[e]||new Ri(Wr.comparator)).toArray()}}const Ar=new Uint8Array(0);class hp{constructor(e){this.user=e,this.Ge=new dp,this.Ke=new Pa(t=>Pr(t),(t,o)=>za(t,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ge.has(t)){const o=t.lastSegment(),d=t.popLast();e.addOnCommittedListener(()=>{this.Ge.add(t)});const _={collectionId:o,parent:et(d)};return Hd(e).put(_)}return Pt.resolve()}getCollectionParents(e,t){const o=[],d=IDBKeyRange.bound([t,""],[ro(t),""],!1,!0);return Hd(e).qt(d).next(_=>{for(const C of _){if(C.collectionId!==t)break;o.push(un(C.parent))}return o})}addFieldIndex(e,t){const o=_c(e),d={indexId:(_=t).indexId,collectionGroup:_.collectionGroup,fields:_.fields.map(C=>[C.fieldPath.canonicalString(),C.kind])};var _;return delete d.indexId,o.add(d).next()}deleteFieldIndex(e,t){const o=_c(e),d=ya(e),_=Xc(e);return o.delete(t.indexId).next(()=>d.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>_.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const o=Xc(e);let d=!0;const _=new Map;return Pt.forEach(this.Qe(t),C=>this.getFieldIndex(e,C).next(R=>{d&&(d=!!R),_.set(C,R)})).next(()=>{if(d){let C=Di();return Pt.forEach(_,(R,K)=>{var J;Wt("IndexedDbIndexManager",`Using index ${J=R,`id=${J.indexId}|cg=${J.collectionGroup}|f=${J.fields.map(oi=>`${oi.fieldPath}:${oi.kind}`).join(",")}`} to execute ${Pr(t)}`);const Me=function(oi,lo){const Os=lr(lo);if(void 0===Os)return null;for(const Ds of ll(oi,Os.fieldPath))switch(Ds.op){case"array-contains-any":return Ds.value.arrayValue.values||[];case"array-contains":return[Ds.value]}return null}(K,R),Ye=function(oi,lo){const Os=new Map;for(const Ds of tr(lo))for(const Gi of ll(oi,Ds.fieldPath))switch(Gi.op){case"==":case"in":Os.set(Ds.fieldPath.canonicalString(),Gi.value);break;case"not-in":case"!=":return Os.set(Ds.fieldPath.canonicalString(),Gi.value),Array.from(Os.values())}return null}(K,R),Ct=function(oi,lo){const Os=[];let Ds=!0;for(const Ja of tr(lo)){let Cl,uh=!0;for(const ko of ll(oi,Ja.fieldPath)){let Xs,of=!0;switch(ko.op){case"<":case"<=":Xs="nullValue"in(Gi=ko.value)?Ed:"booleanValue"in Gi?{booleanValue:!1}:"integerValue"in Gi||"doubleValue"in Gi?{doubleValue:NaN}:"timestampValue"in Gi?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in Gi?{stringValue:""}:"bytesValue"in Gi?{bytesValue:""}:"referenceValue"in Gi?Ql(Vs.empty(),dn.empty()):"geoPointValue"in Gi?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in Gi?{arrayValue:{}}:"mapValue"in Gi?{mapValue:{}}:Sn();break;case"==":case"in":case">=":Xs=ko.value;break;case">":Xs=ko.value,of=!1;break;case"!=":case"not-in":Xs=Ed}oe(Cl,Xs)===Xs&&(Cl=Xs,uh=of)}if(null!==oi.startAt)for(let ko=0;ko<oi.orderBy.length;++ko)if(oi.orderBy[ko].field.isEqual(Ja.fieldPath)){const Xs=oi.startAt.position[ko];oe(Cl,Xs)===Xs&&(Cl=Xs,uh=oi.startAt.inclusive);break}if(void 0===Cl)return null;Os.push(Cl),Ds&&(Ds=uh)}var Gi;return new Ro(Os,Ds)}(K,R),$t=function(oi,lo){const Os=[];let Ds=!0;for(const Ja of tr(lo)){let Cl,uh=!0;for(const ko of ll(oi,Ja.fieldPath)){let Xs,of=!0;switch(ko.op){case">=":case">":Xs="nullValue"in(Gi=ko.value)?{booleanValue:!1}:"booleanValue"in Gi?{doubleValue:NaN}:"integerValue"in Gi||"doubleValue"in Gi?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in Gi?{stringValue:""}:"stringValue"in Gi?{bytesValue:""}:"bytesValue"in Gi?Ql(Vs.empty(),dn.empty()):"referenceValue"in Gi?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in Gi?{arrayValue:{}}:"arrayValue"in Gi?{mapValue:{}}:"mapValue"in Gi?wu:Sn(),of=!1;break;case"==":case"in":case"<=":Xs=ko.value;break;case"<":Xs=ko.value,of=!1;break;case"!=":case"not-in":Xs=wu}xe(Cl,Xs)===Xs&&(Cl=Xs,uh=of)}if(null!==oi.endAt)for(let ko=0;ko<oi.orderBy.length;++ko)if(oi.orderBy[ko].field.isEqual(Ja.fieldPath)){const Xs=oi.endAt.position[ko];xe(Cl,Xs)===Xs&&(Cl=Xs,uh=oi.endAt.inclusive);break}if(void 0===Cl)return null;Os.push(Cl),Ds&&(Ds=uh)}var Gi;return new Ro(Os,Ds)}(K,R),Qt=this.je(R,K,Ct),$n=this.je(R,K,$t),Lr=this.We(R,K,Ye),Qs=this.ze(R.indexId,Me,Qt,!!Ct&&Ct.inclusive,$n,!!$t&&$t.inclusive,Lr);return Pt.forEach(Qs,oi=>o.Kt(oi,t.limit).next(lo=>{lo.forEach(Os=>{C=C.add(new dn(un(Os.documentKey)))})}))}).next(()=>C)}return Pt.resolve(null)})}Qe(e){let t=this.Ke.get(e);return t||(t=[e],this.Ke.set(e,t),t)}ze(e,t,o,d,_,C,R){const K=(null!=t?t.length:1)*Math.max(null!=o?o.length:1,null!=_?_.length:1),J=K/(null!=t?t.length:1),Me=[];for(let Ye=0;Ye<K;++Ye){const Ct=t?this.He(t[Ye/J]):Ar,$t=o?this.Je(e,Ct,o[Ye%J],d):this.Ye(e),Qt=_?this.Xe(e,Ct,_[Ye%J],C):this.Ye(e+1);Me.push(...this.createRange($t,Qt,R.map($n=>this.Je(e,Ct,$n,!0))))}return Me}Je(e,t,o,d){const _=new po(e,dn.empty(),t,o);return d?_:_.ke()}Xe(e,t,o,d){const _=new po(e,dn.empty(),t,o);return d?_.ke():_}Ye(e){return new po(e,dn.empty(),Ar,Ar)}getFieldIndex(e,t){const o=new cp(t),d=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,d).next(_=>{const C=_.filter(R=>o.$e(R));return C.sort((R,K)=>K.fields.length-R.fields.length),C.length>0?C[0]:null})}Ze(e,t){const o=new mc;for(const d of tr(e)){const _=t.data.field(d.fieldPath);if(null==_)return null;const C=o.Ne(d.kind);gc.fe.Zt(_,C)}return o.Se()}He(e){const t=new mc;return gc.fe.Zt(e,t.Ne(0)),t.Se()}We(e,t,o){if(null===o)return[];let d=[];d.push(new mc);let _=0;for(const C of tr(e)){const R=o[_++];for(const K of d)if(this.tn(t,C.fieldPath)&&Ha(R))d=this.en(d,C,R);else{const J=K.Ne(C.kind);gc.fe.Zt(R,J)}}return this.nn(d)}je(e,t,o){return null==o?null:this.We(e,t,o.position)}nn(e){const t=[];for(let o=0;o<e.length;++o)t[o]=e[o].Se();return t}en(e,t,o){const d=[...e],_=[];for(const C of o.arrayValue.values||[])for(const R of d){const K=new mc;K.seed(R.Se()),gc.fe.Zt(C,K.Ne(t.kind)),_.push(K)}return _}tn(e,t){return!!e.filters.find(o=>o instanceof Ms&&o.field.isEqual(t)&&("in"===o.op||"not-in"===o.op))}getFieldIndexes(e,t){const o=_c(e),d=ya(e);return(t?o.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):o.qt()).next(_=>{const C=[];return Pt.forEach(_,R=>d.get([R.indexId,this.uid]).next(K=>{C.push(function(J,Me){const Ye=Me?new ur(Me.sequenceNumber,new io(vl(Me.readTime),new dn(un(Me.documentKey)),Me.largestBatchId)):ur.empty(),Ct=J.fields.map(([$t,Qt])=>new Fr(ps.fromServerFormat($t),Qt));return new Mn(J.indexId,J.collectionGroup,Ct,Ye)}(R,K))})).next(()=>C)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((o,d)=>{const _=o.indexState.sequenceNumber-d.indexState.sequenceNumber;return 0!==_?_:fr(o.collectionGroup,d.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,o){const d=_c(e),_=ya(e);return this.sn(e).next(C=>d.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(R=>Pt.forEach(R,K=>{return _.put({indexId:K.indexId,uid:this.user.uid||"",sequenceNumber:C,readTime:ga((Ct=o).readTime),documentKey:et(Ct.documentKey.path),largestBatchId:Ct.largestBatchId});var Ct})))}updateIndexEntries(e,t){const o=new Map;return Pt.forEach(t,(d,_)=>{const C=o.get(d.collectionGroup);return(C?Pt.resolve(C):this.getFieldIndexes(e,d.collectionGroup)).next(R=>(o.set(d.collectionGroup,R),Pt.forEach(R,K=>this.rn(e,d,K).next(J=>{const Me=this.on(_,K);return J.isEqual(Me)?Pt.resolve():this.un(e,_,J,Me)}))))})}an(e,t,o){return Xc(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,documentKey:et(t.key.path)})}cn(e,t,o){return Xc(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,et(t.key.path)])}rn(e,t,o){const d=Xc(e);let _=new Ri(ka);return d.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([o.indexId,this.uid,et(t.path)])},(C,R)=>{_=_.add(new po(o.indexId,t,R.arrayValue,R.directionalValue))}).next(()=>_)}on(e,t){let o=new Ri(ka);const d=this.Ze(t,e);if(null==d)return o;const _=lr(t);if(null!=_){const C=e.data.field(_.fieldPath);if(Ha(C))for(const R of C.arrayValue.values||[])o=o.add(new po(t.indexId,e.key,this.He(R),d))}else o=o.add(new po(t.indexId,e.key,Ar,d));return o}un(e,t,o,d){Wt("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const _=[];return function(C,R,K,J,Me){const Ye=C.getIterator(),Ct=R.getIterator();let $t=ss(Ye),Qt=ss(Ct);for(;$t||Qt;){let $n=!1,Lr=!1;if($t&&Qt){const Qs=K($t,Qt);Qs<0?Lr=!0:Qs>0&&($n=!0)}else null!=$t?Lr=!0:$n=!0;$n?(J(Qt),Qt=ss(Ct)):Lr?(Me($t),$t=ss(Ye)):($t=ss(Ye),Qt=ss(Ct))}}(o,d,ka,C=>{_.push(this.an(e,t,C))},C=>{_.push(this.cn(e,t,C))}),Pt.waitFor(_)}sn(e){let t=1;return ya(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(o,d,_)=>{_.done(),t=d.sequenceNumber+1}).next(()=>t)}createRange(e,t,o){o=o.sort((C,R)=>ka(C,R)).filter((C,R,K)=>!R||0!==ka(C,K[R-1]));const d=[];d.push(e);for(const C of o){const R=ka(C,e),K=ka(C,t);if(0===R)d[0]=e.ke();else if(R>0&&K<0)d.push(C),d.push(C.ke());else if(K>0)break}d.push(t);const _=[];for(let C=0;C<d.length;C+=2)_.push(IDBKeyRange.bound([d[C].indexId,this.uid,d[C].arrayValue,d[C].directionalValue,""],[d[C+1].indexId,this.uid,d[C+1].arrayValue,d[C+1].directionalValue,""]));return _}}function Hd(i){return Ks(i,"collectionParents")}function Xc(i){return Ks(i,"indexEntries")}function _c(i){return Ks(i,"indexConfiguration")}function ya(i){return Ks(i,"indexState")}const vf={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Po{constructor(e,t,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=o}static withCacheSize(e){return new Po(e,Po.DEFAULT_COLLECTION_PERCENTILE,Po.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function vc(i,e,t){const o=i.store("mutations"),d=i.store("documentMutations"),_=[],C=IDBKeyRange.only(t.batchId);let R=0;const K=o.Wt({range:C},(Me,Ye,Ct)=>(R++,Ct.delete()));_.push(K.next(()=>{Wn(1===R)}));const J=[];for(const Me of t.mutations){const Ye=os(e,Me.key.path,t.batchId);_.push(d.delete(Ye)),J.push(Me.key)}return Pt.waitFor(_).next(()=>J)}function qo(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw Sn();e=i.noDocument}return JSON.stringify(e).length}Po.DEFAULT_COLLECTION_PERCENTILE=10,Po.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Po.DEFAULT=new Po(41943040,Po.DEFAULT_COLLECTION_PERCENTILE,Po.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Po.DISABLED=new Po(-1,0,0);class Ec{constructor(e,t,o,d){this.userId=e,this.M=t,this.indexManager=o,this.referenceDelegate=d,this.hn={}}static Yt(e,t,o,d){Wn(""!==e.uid);const _=e.isAuthenticated()?e.uid:"";return new Ec(_,t,o,d)}checkEmpty(e){let t=!0;const o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return El(e).Wt({index:"userMutationsIndex",range:o},(d,_,C)=>{t=!1,C.done()}).next(()=>t)}addMutationBatch(e,t,o,d){const _=Jc(e),C=El(e);return C.add({}).next(R=>{Wn("number"==typeof R);const K=new Ld(R,t,o,d),J=function(Ct,$t,Qt){const $n=Qt.baseMutations.map(Qs=>Oo(Ct.Jt,Qs)),Lr=Qt.mutations.map(Qs=>Oo(Ct.Jt,Qs));return{userId:$t,batchId:Qt.batchId,localWriteTimeMs:Qt.localWriteTime.toMillis(),baseMutations:$n,mutations:Lr}}(this.M,this.userId,K),Me=[];let Ye=new Ri((Ct,$t)=>fr(Ct.canonicalString(),$t.canonicalString()));for(const Ct of d){const $t=os(this.userId,Ct.key.path,R);Ye=Ye.add(Ct.key.path.popLast()),Me.push(C.put(J)),Me.push(_.put($t,Go))}return Ye.forEach(Ct=>{Me.push(this.indexManager.addToCollectionParentIndex(e,Ct))}),e.addOnCommittedListener(()=>{this.hn[R]=K.keys()}),Pt.waitFor(Me).next(()=>K)})}lookupMutationBatch(e,t){return El(e).get(t).next(o=>o?(Wn(o.userId===this.userId),hc(this.M,o)):null)}ln(e,t){return this.hn[t]?Pt.resolve(this.hn[t]):this.lookupMutationBatch(e,t).next(o=>{if(o){const d=o.keys();return this.hn[t]=d,d}return null})}getNextMutationBatchAfterBatchId(e,t){const o=t+1,d=IDBKeyRange.lowerBound([this.userId,o]);let _=null;return El(e).Wt({index:"userMutationsIndex",range:d},(C,R,K)=>{R.userId===this.userId&&(Wn(R.batchId>=o),_=hc(this.M,R)),K.done()}).next(()=>_)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let o=-1;return El(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(d,_,C)=>{o=_.batchId,C.done()}).next(()=>o)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return El(e).qt("userMutationsIndex",t).next(o=>o.map(d=>hc(this.M,d)))}getAllMutationBatchesAffectingDocumentKey(e,t){const o=Gn(this.userId,t.path),d=IDBKeyRange.lowerBound(o),_=[];return Jc(e).Wt({range:d},(C,R,K)=>{const[J,Me,Ye]=C,Ct=un(Me);if(J===this.userId&&t.path.isEqual(Ct))return El(e).get(Ye).next($t=>{if(!$t)throw Sn();Wn($t.userId===this.userId),_.push(hc(this.M,$t))});K.done()}).next(()=>_)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new Ri(fr);const d=[];return t.forEach(_=>{const C=Gn(this.userId,_.path),R=IDBKeyRange.lowerBound(C),K=Jc(e).Wt({range:R},(J,Me,Ye)=>{const[Ct,$t,Qt]=J,$n=un($t);Ct===this.userId&&_.path.isEqual($n)?o=o.add(Qt):Ye.done()});d.push(K)}),Pt.waitFor(d).next(()=>this.fn(e,o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,d=o.length+1,_=Gn(this.userId,o),C=IDBKeyRange.lowerBound(_);let R=new Ri(fr);return Jc(e).Wt({range:C},(K,J,Me)=>{const[Ye,Ct,$t]=K,Qt=un(Ct);Ye===this.userId&&o.isPrefixOf(Qt)?Qt.length===d&&(R=R.add($t)):Me.done()}).next(()=>this.fn(e,R))}fn(e,t){const o=[],d=[];return t.forEach(_=>{d.push(El(e).get(_).next(C=>{if(null===C)throw Sn();Wn(C.userId===this.userId),o.push(hc(this.M,C))}))}),Pt.waitFor(d).next(()=>o)}removeMutationBatch(e,t){return vc(e.Ht,this.userId,t).next(o=>(e.addOnCommittedListener(()=>{this.dn(t.batchId)}),Pt.forEach(o,d=>this.referenceDelegate.markPotentiallyOrphaned(e,d))))}dn(e){delete this.hn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Pt.resolve();const o=IDBKeyRange.lowerBound([this.userId]),d=[];return Jc(e).Wt({range:o},(_,C,R)=>{if(_[0]===this.userId){const K=un(_[1]);d.push(K)}else R.done()}).next(()=>{Wn(0===d.length)})})}containsKey(e,t){return Sh(e,this.userId,t)}_n(e){return Ah(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Sh(i,e,t){const o=Gn(e,t.path),d=o[1],_=IDBKeyRange.lowerBound(o);let C=!1;return Jc(i).Wt({range:_,jt:!0},(R,K,J)=>{const[Me,Ye,Ct]=R;Me===e&&Ye===d&&(C=!0),J.done()}).next(()=>C)}function El(i){return Ks(i,"mutations")}function Jc(i){return Ks(i,"documentMutations")}function Ah(i){return Ks(i,"mutationQueues")}class bc{constructor(e){this.wn=e}next(){return this.wn+=2,this.wn}static mn(){return new bc(0)}static gn(){return new bc(-1)}}class _a{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.yn(e).next(t=>{const o=new bc(t.highestTargetId);return t.highestTargetId=o.next(),this.pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.yn(e).next(t=>qn.fromTimestamp(new Ii(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.yn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,o){return this.yn(e).next(d=>(d.highestListenSequenceNumber=t,o&&(d.lastRemoteSnapshotVersion=o.toTimestamp()),t>d.highestListenSequenceNumber&&(d.highestListenSequenceNumber=t),this.pn(e,d)))}addTargetData(e,t){return this.In(e,t).next(()=>this.yn(e).next(o=>(o.targetCount+=1,this.Tn(t,o),this.pn(e,o))))}updateTargetData(e,t){return this.In(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Ul(e).delete(t.targetId)).next(()=>this.yn(e)).next(o=>(Wn(o.targetCount>0),o.targetCount-=1,this.pn(e,o)))}removeTargets(e,t,o){let d=0;const _=[];return Ul(e).Wt((C,R)=>{const K=fc(R);K.sequenceNumber<=t&&null===o.get(K.targetId)&&(d++,_.push(this.removeTargetData(e,K)))}).next(()=>Pt.waitFor(_)).next(()=>d)}forEachTarget(e,t){return Ul(e).Wt((o,d)=>{const _=fc(d);t(_)})}yn(e){return xh(e).get("targetGlobalKey").next(t=>(Wn(null!==t),t))}pn(e,t){return xh(e).put("targetGlobalKey",t)}In(e,t){return Ul(e).put(yf(this.M,t))}Tn(e,t){let o=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,o=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,o=!0),o}getTargetCount(e){return this.yn(e).next(t=>t.targetCount)}getTargetData(e,t){const o=Pr(t),d=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]);let _=null;return Ul(e).Wt({range:d,index:"queryTargetsIndex"},(C,R,K)=>{const J=fc(R);za(t,J.target)&&(_=J,K.done())}).next(()=>_)}addMatchingKeys(e,t,o){const d=[],_=jl(e);return t.forEach(C=>{const R=et(C.path);d.push(_.put({targetId:o,path:R})),d.push(this.referenceDelegate.addReference(e,o,C))}),Pt.waitFor(d)}removeMatchingKeys(e,t,o){const d=jl(e);return Pt.forEach(t,_=>{const C=et(_.path);return Pt.waitFor([d.delete([o,C]),this.referenceDelegate.removeReference(e,o,_)])})}removeMatchingKeysForTargetId(e,t){const o=jl(e),d=IDBKeyRange.bound([t],[t+1],!1,!0);return o.delete(d)}getMatchingKeysForTargetId(e,t){const o=IDBKeyRange.bound([t],[t+1],!1,!0),d=jl(e);let _=Di();return d.Wt({range:o,jt:!0},(C,R,K)=>{const J=un(C[1]),Me=new dn(J);_=_.add(Me)}).next(()=>_)}containsKey(e,t){const o=et(t.path),d=IDBKeyRange.bound([o],[ro(o)],!1,!0);let _=0;return jl(e).Wt({index:"documentTargetsIndex",jt:!0,range:d},([C,R],K,J)=>{0!==C&&(_++,J.done())}).next(()=>_>0)}Et(e,t){return Ul(e).get(t).next(o=>o?fc(o):null)}}function Ul(i){return Ks(i,"targets")}function xh(i){return Ks(i,"targetGlobal")}function jl(i){return Ks(i,"targetDocuments")}function lu(i){return Ef.apply(this,arguments)}function Ef(){return Ef=(0,ve.Z)(function*(i){if(i.code!==Dt.FAILED_PRECONDITION||i.message!==wh)throw i;Wt("LocalStore","Unexpectedly lost primary lease")}),Ef.apply(this,arguments)}function fp([i,e],[t,o]){const d=fr(i,t);return 0===d?fr(e,o):d}class yg{constructor(e){this.En=e,this.buffer=new Ri(fp),this.An=0}Rn(){return++this.An}bn(e){const t=[e,this.Rn()];if(this.buffer.size<this.En)this.buffer=this.buffer.add(t);else{const o=this.buffer.last();fp(t,o)<0&&(this.buffer=this.buffer.delete(o).add(t))}}get maxValue(){return this.buffer.last()[0]}}class _g{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Pn=!1,this.Vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.vn(e)}stop(){this.Vn&&(this.Vn.cancel(),this.Vn=null)}get started(){return null!==this.Vn}vn(e){var t=this;const o=this.Pn?3e5:6e4;Wt("LruGarbageCollector",`Garbage collection scheduled in ${o}ms`),this.Vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",o,(0,ve.Z)(function*(){t.Vn=null,t.Pn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(d){Ru(d)?Wt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",d):yield lu(d)}yield t.vn(e)}))}}class vg{constructor(e,t){this.Sn=e,this.params=t}calculateTargetCount(e,t){return this.Sn.Dn(e).next(o=>Math.floor(t/100*o))}nthSequenceNumber(e,t){if(0===t)return Pt.resolve(fn.A);const o=new yg(t);return this.Sn.forEachTarget(e,d=>o.bn(d.sequenceNumber)).next(()=>this.Sn.Cn(e,d=>o.bn(d))).next(()=>o.maxValue)}removeTargets(e,t,o){return this.Sn.removeTargets(e,t,o)}removeOrphanedDocuments(e,t){return this.Sn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Wt("LruGarbageCollector","Garbage collection skipped; disabled"),Pt.resolve(vf)):this.getCacheSize(e).next(o=>o<this.params.cacheSizeCollectionThreshold?(Wt("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),vf):this.xn(e,t))}getCacheSize(e){return this.Sn.getCacheSize(e)}xn(e,t){let o,d,_,C,R,K,J;const Me=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(Ye=>(Ye>this.params.maximumSequenceNumbersToCollect?(Wt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${Ye}`),d=this.params.maximumSequenceNumbersToCollect):d=Ye,C=Date.now(),this.nthSequenceNumber(e,d))).next(Ye=>(o=Ye,R=Date.now(),this.removeTargets(e,o,t))).next(Ye=>(_=Ye,K=Date.now(),this.removeOrphanedDocuments(e,o))).next(Ye=>(J=Date.now(),$o()<=rt.in.DEBUG&&Wt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${C-Me}ms\n\tDetermined least recently used ${d} in `+(R-C)+`ms\n\tRemoved ${_} targets in `+(K-R)+`ms\n\tRemoved ${Ye} documents in `+(J-K)+`ms\nTotal Duration: ${J-Me}ms`),Pt.resolve({didRun:!0,sequenceNumbersCollected:d,targetsRemoved:_,documentsRemoved:Ye})))}}class pp{constructor(e,t){this.db=e,this.garbageCollector=new vg(this,t)}Dn(e){const t=this.Nn(e);return this.db.getTargetCache().getTargetCount(e).next(o=>t.next(d=>o+d))}Nn(e){let t=0;return this.Cn(e,o=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Cn(e,t){return this.kn(e,(o,d)=>t(d))}addReference(e,t,o){return bf(e,o)}removeReference(e,t,o){return bf(e,o)}removeTargets(e,t,o){return this.db.getTargetCache().removeTargets(e,t,o)}markPotentiallyOrphaned(e,t){return bf(e,t)}Mn(e,t){return function(o,d){let _=!1;return Ah(o).zt(C=>Sh(o,C,d).next(R=>(R&&(_=!0),Pt.resolve(!R)))).next(()=>_)}(e,t)}removeOrphanedDocuments(e,t){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),d=[];let _=0;return this.kn(e,(C,R)=>{if(R<=t){const K=this.Mn(e,C).next(J=>{if(!J)return _++,o.getEntry(e,C).next(()=>(o.removeEntry(C,qn.min()),jl(e).delete([0,et(C.path)])))});d.push(K)}}).next(()=>Pt.waitFor(d)).next(()=>o.apply(e)).next(()=>_)}removeTarget(e,t){const o=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,o)}updateLimboDocument(e,t){return bf(e,t)}kn(e,t){const o=jl(e);let d,_=fn.A;return o.Wt({index:"documentTargetsIndex"},([C,R],{path:K,sequenceNumber:J})=>{0===C?(_!==fn.A&&t(new dn(un(d)),_),_=J,d=K):_=fn.A}).next(()=>{_!==fn.A&&t(new dn(un(d)),_)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function bf(i,e){return jl(i).put((o=i.currentSequenceNumber,{targetId:0,path:et(e.path),sequenceNumber:o}));var o}class gp{constructor(){this.changes=new Pa(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Lt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const o=this.changes.get(t);return void 0!==o?Pt.resolve(o):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class jm{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,o){return wc(e).put(o)}removeEntry(e,t,o){return wc(e).delete(function(d,_){const C=d.path.toArray();return[C.slice(0,C.length-2),C[C.length-2],$d(_),C[C.length-1]]}(t,o))}updateMetadata(e,t){return this.getMetadata(e).next(o=>(o.byteSize+=t,this.On(e,o)))}getEntry(e,t){let o=Lt.newInvalidDocument(t);return wc(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Ic(t))},(d,_)=>{o=this.Fn(t,_)}).next(()=>o)}$n(e,t){let o={size:0,document:Lt.newInvalidDocument(t)};return wc(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Ic(t))},(d,_)=>{o={document:this.Fn(t,_),size:qo(_)}}).next(()=>o)}getEntries(e,t){let o=na();return this.Bn(e,t,(d,_)=>{const C=this.Fn(d,_);o=o.insert(d,C)}).next(()=>o)}Ln(e,t){let o=na(),d=new ms(dn.comparator);return this.Bn(e,t,(_,C)=>{const R=this.Fn(_,C);o=o.insert(_,R),d=d.insert(_,qo(C))}).next(()=>({documents:o,Un:d}))}Bn(e,t,o){if(t.isEmpty())return Pt.resolve();let d=new Ri(bg);t.forEach(K=>d=d.add(K));const _=IDBKeyRange.bound(Ic(d.first()),Ic(d.last())),C=d.getIterator();let R=C.getNext();return wc(e).Wt({index:"documentKeyIndex",range:_},(K,J,Me)=>{const Ye=dn.fromSegments([...J.prefixPath,J.collectionGroup,J.documentId]);for(;R&&bg(R,Ye)<0;)o(R,null),R=C.getNext();R&&R.isEqual(Ye)&&(o(R,J),R=C.hasNext()?C.getNext():null),R?Me.Ut(Ic(R)):Me.done()}).next(()=>{for(;R;)o(R,null),R=C.hasNext()?C.getNext():null})}getAllFromCollection(e,t,o){const d=[t.popLast().toArray(),t.lastSegment(),$d(o.readTime),o.documentKey.path.isEmpty()?"":o.documentKey.path.lastSegment()],_=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return wc(e).qt(IDBKeyRange.bound(d,_,!0)).next(C=>{let R=na();for(const K of C){const J=this.Fn(dn.fromSegments(K.prefixPath.concat(K.collectionGroup,K.documentId)),K);R=R.insert(J.key,J)}return R})}getAllFromCollectionGroup(e,t,o,d){let _=na();const C=Eg(t,o),R=Eg(t,io.max());return wc(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(C,R,!0)},(K,J,Me)=>{const Ye=this.Fn(dn.fromSegments(J.prefixPath.concat(J.collectionGroup,J.documentId)),J);_=_.insert(Ye.key,Ye),_.size===d&&Me.done()}).next(()=>_)}newChangeBuffer(e){return new mp(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return wf(e).get("remoteDocumentGlobalKey").next(t=>(Wn(!!t),t))}On(e,t){return wf(e).put("remoteDocumentGlobalKey",t)}Fn(e,t){if(t){const o=function Dh(i,e){let t;if(e.document)t=nc(i.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const o=dn.fromSegments(e.noDocument.path),d=vl(e.noDocument.readTime);t=Lt.newNoDocument(o,d),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Sn();{const o=dn.fromSegments(e.unknownDocument.path),d=vl(e.unknownDocument.version);t=Lt.newUnknownDocument(o,d)}}return e.readTime&&t.setReadTime(function(o){const d=new Ii(o[0],o[1]);return qn.fromTimestamp(d)}(e.readTime)),t}(this.M,t);if(!o.isNoDocument()||!o.version.isEqual(qn.min()))return o}return Lt.newInvalidDocument(e)}}class mp extends gp{constructor(e,t){super(),this.qn=e,this.trackRemovals=t,this.Gn=new Pa(o=>o.toString(),(o,d)=>o.isEqual(d))}applyChanges(e){const t=[];let o=0,d=new Ri((_,C)=>fr(_.canonicalString(),C.canonicalString()));return this.changes.forEach((_,C)=>{const R=this.Gn.get(_);if(t.push(this.qn.removeEntry(e,_,R.readTime)),C.isValidDocument()){const K=dc(this.qn.M,C);d=d.add(_.path.popLast()),o+=qo(K)-R.size,t.push(this.qn.addEntry(e,_,K))}else if(o-=R.size,this.trackRemovals){const K=dc(this.qn.M,C.convertToNoDocument(qn.min()));t.push(this.qn.addEntry(e,_,K))}}),d.forEach(_=>{t.push(this.qn.indexManager.addToCollectionParentIndex(e,_))}),t.push(this.qn.updateMetadata(e,o)),Pt.waitFor(t)}getFromCache(e,t){return this.qn.$n(e,t).next(o=>(this.Gn.set(t,{size:o.size,readTime:o.document.readTime}),o.document))}getAllFromCache(e,t){return this.qn.Ln(e,t).next(({documents:o,Un:d})=>(d.forEach((_,C)=>{this.Gn.set(_,{size:C,readTime:o.get(_).readTime})}),o))}}function wf(i){return Ks(i,"remoteDocumentGlobal")}function wc(i){return Ks(i,"remoteDocumentsV14")}function Ic(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Eg(i,e){const t=e.documentKey.path.toArray();return[i,$d(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function bg(i,e){const t=i.path.length-e.path.length;return 0!==t?t:dn.comparator(i,e)}class Hm{constructor(e){this.M=e}kt(e,t,o,d){const _=new cc("createOrUpgrade",t);var R;o<1&&d>=1&&(e.createObjectStore("owner"),(R=e).createObjectStore("mutationQueues",{keyPath:"userId"}),R.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Zn,{unique:!0}),R.createObjectStore("documentMutations"),wg(e),function(R){R.createObjectStore("remoteDocuments")}(e));let C=Pt.resolve();return o<3&&d>=3&&(0!==o&&(function(R){R.deleteObjectStore("targetDocuments"),R.deleteObjectStore("targets"),R.deleteObjectStore("targetGlobal")}(e),wg(e)),C=C.next(()=>function(R){const K=R.store("targetGlobal"),J={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:qn.min().toTimestamp(),targetCount:0};return K.put("targetGlobalKey",J)}(_))),o<4&&d>=4&&(0!==o&&(C=C.next(()=>function(R,K){return K.store("mutations").qt().next(J=>{R.deleteObjectStore("mutations"),R.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Zn,{unique:!0});const Me=K.store("mutations"),Ye=J.map(Ct=>Me.put(Ct));return Pt.waitFor(Ye)})}(e,_))),C=C.next(()=>{!function(R){R.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),o<5&&d>=5&&(C=C.next(()=>this.Kn(_))),o<6&&d>=6&&(C=C.next(()=>(function(R){R.createObjectStore("remoteDocumentGlobal")}(e),this.Qn(_)))),o<7&&d>=7&&(C=C.next(()=>this.jn(_))),o<8&&d>=8&&(C=C.next(()=>this.Wn(e,_))),o<9&&d>=9&&(C=C.next(()=>{!function(R){R.objectStoreNames.contains("remoteDocumentChanges")&&R.deleteObjectStore("remoteDocumentChanges")}(e)})),o<10&&d>=10&&(C=C.next(()=>this.zn(_))),o<11&&d>=11&&(C=C.next(()=>{(function(R){R.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(R){R.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),o<12&&d>=12&&(C=C.next(()=>{!function(R){const K=R.createObjectStore("documentOverlays",{keyPath:Yc});K.createIndex("collectionPathOverlayIndex",pf,{unique:!1}),K.createIndex("collectionGroupOverlayIndex",gg,{unique:!1})}(e)})),o<13&&d>=13&&(C=C.next(()=>function(R){const K=R.createObjectStore("remoteDocumentsV14",{keyPath:yl});K.createIndex("documentKeyIndex",Bl),K.createIndex("collectionGroupIndex",oc)}(e)).next(()=>this.Hn(e,_)).next(()=>e.deleteObjectStore("remoteDocuments"))),o<14&&d>=14&&(C=C.next(()=>{!function(R){R.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),R.createObjectStore("indexState",{keyPath:ac}).createIndex("sequenceNumberIndex",Wo,{unique:!1}),R.createObjectStore("indexEntries",{keyPath:lc}).createIndex("documentKeyIndex",ff,{unique:!1})}(e)})),C}Qn(e){let t=0;return e.store("remoteDocuments").Wt((o,d)=>{t+=qo(d)}).next(()=>{const o={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",o)})}Kn(e){const t=e.store("mutationQueues"),o=e.store("mutations");return t.qt().next(d=>Pt.forEach(d,_=>{const C=IDBKeyRange.bound([_.userId,-1],[_.userId,_.lastAcknowledgedBatchId]);return o.qt("userMutationsIndex",C).next(R=>Pt.forEach(R,K=>{Wn(K.userId===_.userId);const J=hc(this.M,K);return vc(e,_.userId,J).next(()=>{})}))}))}jn(e){const t=e.store("targetDocuments"),o=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(d=>{const _=[];return o.Wt((C,R)=>{const K=new Wr(C),J=[0,et(K)];_.push(t.get(J).next(Me=>Me?Pt.resolve():t.put({targetId:0,path:et(K),sequenceNumber:d.highestListenSequenceNumber})))}).next(()=>Pt.waitFor(_))})}Wn(e,t){e.createObjectStore("collectionParents",{keyPath:ou});const o=t.store("collectionParents"),d=new dp,_=C=>{if(d.add(C)){const R=C.lastSegment(),K=C.popLast();return o.put({collectionId:R,parent:et(K)})}};return t.store("remoteDocuments").Wt({jt:!0},(C,R)=>{const K=new Wr(C);return _(K.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([C,R,K],J)=>{const Me=un(R);return _(Me.popLast())}))}zn(e){const t=e.store("targets");return t.Wt((o,d)=>{const _=fc(d),C=yf(this.M,_);return t.put(C)})}Hn(e,t){const o=t.store("remoteDocuments"),d=[];return o.Wt((_,C)=>{const R=t.store("remoteDocumentsV14"),K=(J=C,J.document?new dn(Wr.fromString(J.document.name).popFirst(5)):J.noDocument?dn.fromSegments(J.noDocument.path):J.unknownDocument?dn.fromSegments(J.unknownDocument.path):Sn()).path.toArray();var J;const Me={prefixPath:K.slice(0,K.length-2),collectionGroup:K[K.length-2],documentId:K[K.length-1],readTime:C.readTime||[0,0],unknownDocument:C.unknownDocument,noDocument:C.noDocument,document:C.document,hasCommittedMutations:!!C.hasCommittedMutations};d.push(R.put(Me))}).next(()=>Pt.waitFor(d))}}function wg(i){i.createObjectStore("targetDocuments",{keyPath:Eh}).createIndex("documentTargetsIndex",$l,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",zo,{unique:!0}),i.createObjectStore("targetGlobal")}const yp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Za{constructor(e,t,o,d,_,C,R,K,J,Me,Ye=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=o,this.Jn=_,this.window=C,this.document=R,this.Yn=J,this.Xn=Me,this.Zn=Ye,this.ts=null,this.es=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ns=null,this.inForeground=!1,this.ss=null,this.rs=null,this.os=Number.NEGATIVE_INFINITY,this.us=Ct=>Promise.resolve(),!Za.vt())throw new T(Dt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new pp(this,d),this.cs=t+"main",this.M=new Bd(K),this.hs=new Ka(this.cs,this.Zn,new Hm(this.M)),this.ls=new _a(this.referenceDelegate,this.M),this.fs=new jm(this.M),this.ds=new lp,this.window&&this.window.localStorage?this._s=this.window.localStorage:(this._s=null,!1===Me&&Mi("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ws().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new T(Dt.FAILED_PRECONDITION,yp);return this.gs(),this.ys(),this.ps(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.ls.getHighestSequenceNumber(e))}).then(e=>{this.ts=new fn(e,this.Yn)}).then(()=>{this.es=!0}).catch(e=>(this.hs&&this.hs.close(),Promise.reject(e)))}Is(e){var t=this;return this.us=function(){var o=(0,ve.Z)(function*(d){if(t.started)return e(d)});return function(d){return o.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.hs.Ot(function(){var t=(0,ve.Z)(function*(o){null===o.newVersion&&(yield e())});return function(o){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Jn.enqueueAndForget((0,ve.Z)(function*(){t.started&&(yield t.ws())})))}ws(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Gd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ts(e).next(t=>{t||(this.isPrimary=!1,this.Jn.enqueueRetryable(()=>this.us(!1)))})}).next(()=>this.Es(e)).next(t=>this.isPrimary&&!t?this.As(e).next(()=>!1):!!t&&this.Rs(e).next(()=>!0))).catch(e=>{if(Ru(e))return Wt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Wt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Jn.enqueueRetryable(()=>this.us(e)),this.isPrimary=e})}Ts(e){return Mh(e).get("owner").next(t=>Pt.resolve(this.bs(t)))}Ps(e){return Gd(e).delete(this.clientId)}Vs(){var e=this;return(0,ve.Z)(function*(){if(e.isPrimary&&!e.vs(e.os,18e5)){e.os=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=>{const d=Ks(o,"clientMetadata");return d.qt().next(_=>{const C=e.Ss(_,18e5),R=_.filter(K=>-1===C.indexOf(K));return Pt.forEach(R,K=>d.delete(K.clientId)).next(()=>R)})}).catch(()=>[]);if(e._s)for(const o of t)e._s.removeItem(e.Ds(o.clientId))}})()}ps(){this.rs=this.Jn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ws().then(()=>this.Vs()).then(()=>this.ps()))}bs(e){return!!e&&e.ownerId===this.clientId}Es(e){return this.Xn?Pt.resolve(!0):Mh(e).get("owner").next(t=>{if(null!==t&&this.vs(t.leaseTimestampMs,5e3)&&!this.Cs(t.ownerId)){if(this.bs(t)&&this.networkEnabled)return!0;if(!this.bs(t)){if(!t.allowTabSynchronization)throw new T(Dt.FAILED_PRECONDITION,yp);return!1}}return!(!this.networkEnabled||!this.inForeground)||Gd(e).qt().next(o=>void 0===this.Ss(o,5e3).find(d=>{if(this.clientId!==d.clientId){const C=!this.inForeground&&d.inForeground,R=this.networkEnabled===d.networkEnabled;if(!this.networkEnabled&&d.networkEnabled||C&&R)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Wt("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ve.Z)(function*(){e.es=!1,e.xs(),e.rs&&(e.rs.cancel(),e.rs=null),e.Ns(),e.ks(),yield e.hs.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const o=new mf(t,fn.A);return e.As(o).next(()=>e.Ps(o))}),e.hs.close(),e.Ms()})()}Ss(e,t){return e.filter(o=>this.vs(o.updateTimeMs,t)&&!this.Cs(o.clientId))}Os(){return this.runTransaction("getActiveClients","readonly",e=>Gd(e).qt().next(t=>this.Ss(t,18e5).map(o=>o.clientId)))}get started(){return this.es}getMutationQueue(e,t){return Ec.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.ls}getRemoteDocumentCache(){return this.fs}getIndexManager(e){return new hp(e)}getDocumentOverlayCache(e){return _f.Yt(this.M,e)}getBundleCache(){return this.ds}runTransaction(e,t,o){Wt("IndexedDbPersistence","Starting transaction:",e);const d="readonly"===t?"readonly":"readwrite",_=14===(C=this.Zn)?bh:13===C?uc:12===C?op:11===C?sp:void Sn();var C;let R;return this.hs.runTransaction(e,d,_,K=>(R=new mf(K,this.ts?this.ts.next():fn.A),"readwrite-primary"===t?this.Ts(R).next(J=>!!J||this.Es(R)).next(J=>{if(!J)throw Mi(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Jn.enqueueRetryable(()=>this.us(!1)),new T(Dt.FAILED_PRECONDITION,wh);return o(R)}).next(J=>this.Rs(R).next(()=>J)):this.Fs(R).next(()=>o(R)))).then(K=>(R.raiseOnCommittedEvent(),K))}Fs(e){return Mh(e).get("owner").next(t=>{if(null!==t&&this.vs(t.leaseTimestampMs,5e3)&&!this.Cs(t.ownerId)&&!this.bs(t)&&!(this.Xn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new T(Dt.FAILED_PRECONDITION,yp)})}Rs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Mh(e).put("owner",t)}static vt(){return Ka.vt()}As(e){const t=Mh(e);return t.get("owner").next(o=>this.bs(o)?(Wt("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Pt.resolve())}vs(e,t){const o=Date.now();return!(e<o-t||e>o&&(Mi(`Detected an update time that is in the future: ${e} > ${o}`),1))}gs(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ss=()=>{this.Jn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ws()))},this.document.addEventListener("visibilitychange",this.ss),this.inForeground="visible"===this.document.visibilityState)}Ns(){this.ss&&(this.document.removeEventListener("visibilitychange",this.ss),this.ss=null)}ys(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ns=()=>{this.xs(),(0,_t.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Jn.enterRestrictedMode(!0),this.Jn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ns))}ks(){this.ns&&(this.window.removeEventListener("pagehide",this.ns),this.ns=null)}Cs(e){var t;try{const o=null!==(null===(t=this._s)||void 0===t?void 0:t.getItem(this.Ds(e)));return Wt("IndexedDbPersistence",`Client '${e}' ${o?"is":"is not"} zombied in LocalStorage`),o}catch(o){return Mi("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}xs(){if(this._s)try{this._s.setItem(this.Ds(this.clientId),String(Date.now()))}catch(e){Mi("Failed to set zombie client id.",e)}}Ms(){if(this._s)try{this._s.removeItem(this.Ds(this.clientId))}catch(e){}}Ds(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Mh(i){return Ks(i,"owner")}function Gd(i){return Ks(i,"clientMetadata")}function If(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}class Gm{constructor(e,t,o){this.fs=e,this.$s=t,this.indexManager=o}Bs(e,t){return this.$s.getAllMutationBatchesAffectingDocumentKey(e,t).next(o=>this.Ls(e,t,o))}Ls(e,t,o){return this.fs.getEntry(e,t).next(d=>{for(const _ of o)_.applyToLocalView(d);return d})}Us(e,t){e.forEach((o,d)=>{for(const _ of t)_.applyToLocalView(d)})}qs(e,t){return this.fs.getEntries(e,t).next(o=>this.Gs(e,o).next(()=>o))}Gs(e,t){return this.$s.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>this.Us(t,o))}Ks(e,t,o){return dn.isDocumentKey((d=t).path)&&null===d.collectionGroup&&0===d.filters.length?this.Qs(e,t.path):Nl(t)?this.js(e,t,o):this.Ws(e,t,o);var d}Qs(e,t){return this.Bs(e,new dn(t)).next(o=>{let d=jc();return o.isFoundDocument()&&(d=d.insert(o.key,o)),d})}js(e,t,o){const d=t.collectionGroup;let _=jc();return this.indexManager.getCollectionParents(e,d).next(C=>Pt.forEach(C,R=>{const K=(J=t,Me=R.child(d),new fa(Me,null,J.explicitOrderBy.slice(),J.filters.slice(),J.limit,J.limitType,J.startAt,J.endAt));var J,Me;return this.Ws(e,K,o).next(J=>{J.forEach((Me,Ye)=>{_=_.insert(Me,Ye)})})}).next(()=>_))}Ws(e,t,o){let d;return this.fs.getAllFromCollection(e,t.path,o).next(_=>(d=_,this.$s.getAllMutationBatchesAffectingQuery(e,t))).next(_=>{for(const C of _)for(const R of C.mutations){const K=R.key;let J=d.get(K);null==J&&(J=Lt.newInvalidDocument(K),d=d.insert(K,J)),nu(R,J,C.localWriteTime),J.isFoundDocument()||(d=d.remove(K))}}).next(()=>(d.forEach((_,C)=>{Tu(t,C)||(d=d.remove(_))}),d))}}class bl{constructor(e,t,o,d){this.targetId=e,this.fromCache=t,this.zs=o,this.Hs=d}static Js(e,t){let o=Di(),d=Di();for(const _ of t.docChanges)switch(_.type){case 0:o=o.add(_.doc.key);break;case 1:d=d.add(_.doc.key)}return new bl(e,t.fromCache,o,d)}}class Rh{Ys(e){this.Xs=e}Ks(e,t,o,d){return 0===(_=t).filters.length&&null===_.limit&&null==_.startAt&&null==_.endAt&&(0===_.explicitOrderBy.length||1===_.explicitOrderBy.length&&_.explicitOrderBy[0].field.isKeyField())||o.isEqual(qn.min())?this.Zs(e,t):this.Xs.qs(e,d).next(_=>{const C=this.ti(t,_);return(Oc(t)||Pc(t))&&this.ei(t.limitType,C,d,o)?this.Zs(e,t):($o()<=rt.in.DEBUG&&Wt("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Nc(t)),this.Xs.Ks(e,t,xs(o,-1)).next(R=>(C.forEach(K=>{R=R.insert(K.key,K)}),R)))});var _}ti(e,t){let o=new Ri(kc(e));return t.forEach((d,_)=>{Tu(e,_)&&(o=o.add(_))}),o}ei(e,t,o,d){if(o.size!==t.size)return!0;const _="F"===e?t.last():t.first();return!!_&&(_.hasPendingWrites||_.version.compareTo(d)>0)}Zs(e,t){return $o()<=rt.in.DEBUG&&Wt("QueryEngine","Using full collection scan to execute query:",Nc(t)),this.Xs.Ks(e,t,io.min())}}class Ig{constructor(e,t,o,d){this.persistence=e,this.ni=t,this.M=d,this.si=new ms(fr),this.ii=new Pa(_=>Pr(_),za),this.ri=new Map,this.oi=e.getRemoteDocumentCache(),this.ls=e.getTargetCache(),this.ds=e.getBundleCache(),this.ui(o)}ui(e){this.indexManager=this.persistence.getIndexManager(e),this.$s=this.persistence.getMutationQueue(e,this.indexManager),this.ai=new Gm(this.oi,this.$s,this.indexManager),this.oi.setIndexManager(this.indexManager),this.ni.Ys(this.ai)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.si))}}function Cf(i,e,t,o){return new Ig(i,e,t,o)}function Oh(i,e){return Df.apply(this,arguments)}function Df(){return Df=(0,ve.Z)(function*(i,e){const t=cn(i);return yield t.persistence.runTransaction("Handle user change","readonly",o=>{let d;return t.$s.getAllMutationBatches(o).next(_=>(d=_,t.ui(e),t.$s.getAllMutationBatches(o))).next(_=>{const C=[],R=[];let K=Di();for(const J of d){C.push(J.batchId);for(const Me of J.mutations)K=K.add(Me.key)}for(const J of _){R.push(J.batchId);for(const Me of J.mutations)K=K.add(Me.key)}return t.ai.qs(o,K).next(J=>({ci:J,removedBatchIds:C,addedBatchIds:R}))})})}),Df.apply(this,arguments)}function Tf(i,e){const t=cn(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const d=e.batch.keys(),_=t.oi.newChangeBuffer({trackRemovals:!0});return function(C,R,K,J){const Me=K.batch,Ye=Me.keys();let Ct=Pt.resolve();return Ye.forEach($t=>{Ct=Ct.next(()=>J.getEntry(R,$t)).next(Qt=>{const $n=K.docVersions.get($t);Wn(null!==$n),Qt.version.compareTo($n)<0&&(Me.applyToRemoteDocument(Qt,K),Qt.isValidDocument()&&(Qt.setReadTime(K.commitVersion),J.addEntry(Qt)))})}),Ct.next(()=>C.$s.removeMutationBatch(R,Me))}(t,o,e,_).next(()=>_.apply(o)).next(()=>t.$s.performConsistencyCheck(o)).next(()=>t.ai.qs(o,d))})}function _p(i){const e=cn(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ls.getLastRemoteSnapshotVersion(t))}function Nu(i,e){const t=cn(i),o=e.snapshotVersion;let d=t.si;return t.persistence.runTransaction("Apply remote event","readwrite-primary",_=>{const C=t.oi.newChangeBuffer({trackRemovals:!0});d=t.si;const R=[];e.targetChanges.forEach((J,Me)=>{const Ye=d.get(Me);if(!Ye)return;R.push(t.ls.removeMatchingKeys(_,J.removedDocuments,Me).next(()=>t.ls.addMatchingKeys(_,J.addedDocuments,Me)));let Ct=Ye.withSequenceNumber(_.currentSequenceNumber);var $t,Qt,$n;e.targetMismatches.has(Me)?Ct=Ct.withResumeToken(Is.EMPTY_BYTE_STRING,qn.min()).withLastLimboFreeSnapshotVersion(qn.min()):J.resumeToken.approximateByteSize()>0&&(Ct=Ct.withResumeToken(J.resumeToken,o)),d=d.insert(Me,Ct),Qt=Ct,$n=J,(0===($t=Ye).resumeToken.approximateByteSize()||Qt.snapshotVersion.toMicroseconds()-$t.snapshotVersion.toMicroseconds()>=3e8||$n.addedDocuments.size+$n.modifiedDocuments.size+$n.removedDocuments.size>0)&&R.push(t.ls.updateTargetData(_,Ct))});let K=na();if(e.documentUpdates.forEach(J=>{e.resolvedLimboDocuments.has(J)&&R.push(t.persistence.referenceDelegate.updateLimboDocument(_,J))}),R.push(Sf(_,C,e.documentUpdates).next(J=>{K=J})),!o.isEqual(qn.min())){const J=t.ls.getLastRemoteSnapshotVersion(_).next(Me=>t.ls.setTargetsMetadata(_,_.currentSequenceNumber,o));R.push(J)}return Pt.waitFor(R).next(()=>C.apply(_)).next(()=>t.ai.Gs(_,K)).next(()=>K)}).then(_=>(t.si=d,_))}function Sf(i,e,t){let o=Di();return t.forEach(d=>o=o.add(d)),e.getEntries(i,o).next(d=>{let _=na();return t.forEach((C,R)=>{const K=d.get(C);R.isNoDocument()&&R.version.isEqual(qn.min())?(e.removeEntry(C,R.readTime),_=_.insert(C,R)):!K.isValidDocument()||R.version.compareTo(K.version)>0||0===R.version.compareTo(K.version)&&K.hasPendingWrites?(e.addEntry(R),_=_.insert(C,R)):Wt("LocalStore","Ignoring outdated watch update for ",C,". Current version:",K.version," Watch version:",R.version)}),_})}function Cg(i,e){const t=cn(i);return t.persistence.runTransaction("Get next mutation batch","readonly",o=>(void 0===e&&(e=-1),t.$s.getNextMutationBatchAfterBatchId(o,e)))}function ku(i,e){const t=cn(i);return t.persistence.runTransaction("Allocate target","readwrite",o=>{let d;return t.ls.getTargetData(o,e).next(_=>_?(d=_,Pt.resolve(d)):t.ls.allocateTargetId(o).next(C=>(d=new Io(e,C,0,o.currentSequenceNumber),t.ls.addTargetData(o,d).next(()=>d))))}).then(o=>{const d=t.si.get(o.targetId);return(null===d||o.snapshotVersion.compareTo(d.snapshotVersion)>0)&&(t.si=t.si.insert(o.targetId,o),t.ii.set(e,o.targetId)),o})}function ed(i,e,t){return Ph.apply(this,arguments)}function Ph(){return Ph=(0,ve.Z)(function*(i,e,t){const o=cn(i),d=o.si.get(e),_=t?"readwrite":"readwrite-primary";try{t||(yield o.persistence.runTransaction("Release target",_,C=>o.persistence.referenceDelegate.removeTarget(C,d)))}catch(C){if(!Ru(C))throw C;Wt("LocalStore",`Failed to update sequence numbers for target ${e}: ${C}`)}o.si=o.si.remove(e),o.ii.delete(d.target)}),Ph.apply(this,arguments)}function Nh(i,e,t){const o=cn(i);let d=qn.min(),_=Di();return o.persistence.runTransaction("Execute query","readonly",C=>function(R,K,J){const Me=cn(R),Ye=Me.ii.get(J);return void 0!==Ye?Pt.resolve(Me.si.get(Ye)):Me.ls.getTargetData(K,J)}(o,C,ho(e)).next(R=>{if(R)return d=R.lastLimboFreeSnapshotVersion,o.ls.getMatchingKeysForTargetId(C,R.targetId).next(K=>{_=K})}).next(()=>o.ni.Ks(C,e,t?d:qn.min(),t?_:Di())).next(R=>(td(o,Wu(e),R),{documents:R,hi:_})))}function vp(i,e){const t=cn(i),o=cn(t.ls),d=t.si.get(e);return d?Promise.resolve(d.target):t.persistence.runTransaction("Get target data","readonly",_=>o.Et(_,e).next(C=>C?C.target:null))}function zd(i,e){const t=cn(i),o=t.ri.get(e)||qn.min();return t.persistence.runTransaction("Get new document changes","readonly",d=>t.oi.getAllFromCollectionGroup(d,e,xs(o,-1),Number.MAX_SAFE_INTEGER)).then(d=>(td(t,e,d),d))}function td(i,e,t){let o=qn.min();t.forEach((d,_)=>{_.readTime.compareTo(o)>0&&(o=_.readTime)}),i.ri.set(e,o)}function Fu(){return Fu=(0,ve.Z)(function*(i,e,t,o){const d=cn(i);let _=Di(),C=na();for(const J of t){const Me=e.li(J.metadata.name);J.document&&(_=_.add(Me));const Ye=e.fi(J);Ye.setReadTime(e.di(J.metadata.readTime)),C=C.insert(Me,Ye)}const R=d.oi.newChangeBuffer({trackRemovals:!0}),K=yield ku(d,(J=o,ho(Jl(Wr.fromString(`__bundle__/docs/${J}`)))));var J;return d.persistence.runTransaction("Apply bundle documents","readwrite",J=>Sf(J,R,C).next(Me=>(R.apply(J),Me)).next(Me=>d.ls.removeMatchingKeysForTargetId(J,K.targetId).next(()=>d.ls.addMatchingKeys(J,_,K.targetId)).next(()=>d.ai.Gs(J,Me)).next(()=>Me)))}),Fu.apply(this,arguments)}function Wd(i,e){return uu.apply(this,arguments)}function uu(){return uu=(0,ve.Z)(function*(i,e,t=Di()){const o=yield ku(i,ho(Kc(e.bundledQuery))),d=cn(i);return d.persistence.runTransaction("Save named query","readwrite",_=>{const C=_s(e.readTime);if(o.snapshotVersion.compareTo(C)>=0)return d.ds.saveNamedQuery(_,e);const R=o.withResumeToken(Is.EMPTY_BYTE_STRING,C);return d.si=d.si.insert(R.targetId,R),d.ls.updateTargetData(_,R).next(()=>d.ls.removeMatchingKeysForTargetId(_,o.targetId)).next(()=>d.ls.addMatchingKeys(_,t,o.targetId)).next(()=>d.ds.saveNamedQuery(_,e))})}),uu.apply(this,arguments)}class Dg{constructor(e){this.M=e,this._i=new Map,this.wi=new Map}getBundleMetadata(e,t){return Pt.resolve(this._i.get(t))}saveBundleMetadata(e,t){var o;return this._i.set(t.id,{id:(o=t).id,version:o.version,createTime:_s(o.createTime)}),Pt.resolve()}getNamedQuery(e,t){return Pt.resolve(this.wi.get(t))}saveNamedQuery(e,t){return this.wi.set(t.name,{name:(o=t).name,query:Kc(o.bundledQuery),readTime:_s(o.readTime)}),Pt.resolve();var o}}class Ep{constructor(){this.overlays=new ms(dn.comparator),this.mi=new Map}getOverlay(e,t){return Pt.resolve(this.overlays.get(t))}saveOverlays(e,t,o){return o.forEach((d,_)=>{this.Xt(e,t,_)}),Pt.resolve()}removeOverlaysForBatchId(e,t,o){const d=this.mi.get(o);return void 0!==d&&(d.forEach(_=>this.overlays=this.overlays.remove(_)),this.mi.delete(o)),Pt.resolve()}getOverlaysForCollection(e,t,o){const d=pa(),_=t.length+1,C=new dn(t.child("")),R=this.overlays.getIteratorFrom(C);for(;R.hasNext();){const K=R.getNext().value,J=K.getKey();if(!t.isPrefixOf(J.path))break;J.path.length===_&&K.largestBatchId>o&&d.set(K.getKey(),K)}return Pt.resolve(d)}getOverlaysForCollectionGroup(e,t,o,d){let _=new ms((J,Me)=>J-Me);const C=this.overlays.getIterator();for(;C.hasNext();){const J=C.getNext().value;if(J.getKey().getCollectionGroup()===t&&J.largestBatchId>o){let Me=_.get(J.largestBatchId);null===Me&&(Me=pa(),_=_.insert(J.largestBatchId,Me)),Me.set(J.getKey(),J)}}const R=pa(),K=_.getIterator();for(;K.hasNext()&&(K.getNext().value.forEach((J,Me)=>R.set(J,Me)),!(R.size()>=d)););return Pt.resolve(R)}Xt(e,t,o){if(null===o)return;const d=this.overlays.get(o.key);if(null!==d){const C=this.mi.get(d.largestBatchId).delete(o.key);this.mi.set(d.largestBatchId,C)}this.overlays=this.overlays.insert(o.key,new au(t,o));let _=this.mi.get(t);void 0===_&&(_=Di(),this.mi.set(t,_)),this.mi.set(t,_.add(o.key))}}class kh{constructor(){this.gi=new Ri(oo.yi),this.pi=new Ri(oo.Ii)}isEmpty(){return this.gi.isEmpty()}addReference(e,t){const o=new oo(e,t);this.gi=this.gi.add(o),this.pi=this.pi.add(o)}Ti(e,t){e.forEach(o=>this.addReference(o,t))}removeReference(e,t){this.Ei(new oo(e,t))}Ai(e,t){e.forEach(o=>this.removeReference(o,t))}Ri(e){const t=new dn(new Wr([])),o=new oo(t,e),d=new oo(t,e+1),_=[];return this.pi.forEachInRange([o,d],C=>{this.Ei(C),_.push(C.key)}),_}bi(){this.gi.forEach(e=>this.Ei(e))}Ei(e){this.gi=this.gi.delete(e),this.pi=this.pi.delete(e)}Pi(e){const t=new dn(new Wr([])),o=new oo(t,e),d=new oo(t,e+1);let _=Di();return this.pi.forEachInRange([o,d],C=>{_=_.add(C.key)}),_}containsKey(e){const t=new oo(e,0),o=this.gi.firstAfterOrEqual(t);return null!==o&&e.isEqual(o.key)}}class oo{constructor(e,t){this.key=e,this.Vi=t}static yi(e,t){return dn.comparator(e.key,t.key)||fr(e.Vi,t.Vi)}static Ii(e,t){return fr(e.Vi,t.Vi)||dn.comparator(e.key,t.key)}}class Hl{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.$s=[],this.vi=1,this.Si=new Ri(oo.yi)}checkEmpty(e){return Pt.resolve(0===this.$s.length)}addMutationBatch(e,t,o,d){const _=this.vi;this.vi++;const C=new Ld(_,t,o,d);this.$s.push(C);for(const R of d)this.Si=this.Si.add(new oo(R.key,_)),this.indexManager.addToCollectionParentIndex(e,R.key.path.popLast());return Pt.resolve(C)}lookupMutationBatch(e,t){return Pt.resolve(this.Di(t))}getNextMutationBatchAfterBatchId(e,t){const d=this.Ci(t+1),_=d<0?0:d;return Pt.resolve(this.$s.length>_?this.$s[_]:null)}getHighestUnacknowledgedBatchId(){return Pt.resolve(0===this.$s.length?-1:this.vi-1)}getAllMutationBatches(e){return Pt.resolve(this.$s.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const o=new oo(t,0),d=new oo(t,Number.POSITIVE_INFINITY),_=[];return this.Si.forEachInRange([o,d],C=>{const R=this.Di(C.Vi);_.push(R)}),Pt.resolve(_)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new Ri(fr);return t.forEach(d=>{const _=new oo(d,0),C=new oo(d,Number.POSITIVE_INFINITY);this.Si.forEachInRange([_,C],R=>{o=o.add(R.Vi)})}),Pt.resolve(this.xi(o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,d=o.length+1;let _=o;dn.isDocumentKey(_)||(_=_.child(""));const C=new oo(new dn(_),0);let R=new Ri(fr);return this.Si.forEachWhile(K=>{const J=K.key.path;return!!o.isPrefixOf(J)&&(J.length===d&&(R=R.add(K.Vi)),!0)},C),Pt.resolve(this.xi(R))}xi(e){const t=[];return e.forEach(o=>{const d=this.Di(o);null!==d&&t.push(d)}),t}removeMutationBatch(e,t){Wn(0===this.Ni(t.batchId,"removed")),this.$s.shift();let o=this.Si;return Pt.forEach(t.mutations,d=>{const _=new oo(d.key,t.batchId);return o=o.delete(_),this.referenceDelegate.markPotentiallyOrphaned(e,d.key)}).next(()=>{this.Si=o})}dn(e){}containsKey(e,t){const o=new oo(t,0),d=this.Si.firstAfterOrEqual(o);return Pt.resolve(t.isEqual(d&&d.key))}performConsistencyCheck(e){return Pt.resolve()}Ni(e,t){return this.Ci(e)}Ci(e){return 0===this.$s.length?0:e-this.$s[0].batchId}Di(e){const t=this.Ci(e);return t<0||t>=this.$s.length?null:this.$s[t]}}class Co{constructor(e){this.ki=e,this.docs=new ms(dn.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const o=t.key,d=this.docs.get(o),_=d?d.size:0,C=this.ki(t);return this.docs=this.docs.insert(o,{document:t.mutableCopy(),size:C}),this.size+=C-_,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const o=this.docs.get(t);return Pt.resolve(o?o.document.mutableCopy():Lt.newInvalidDocument(t))}getEntries(e,t){let o=na();return t.forEach(d=>{const _=this.docs.get(d);o=o.insert(d,_?_.document.mutableCopy():Lt.newInvalidDocument(d))}),Pt.resolve(o)}getAllFromCollection(e,t,o){let d=na();const _=new dn(t.child("")),C=this.docs.getIteratorFrom(_);for(;C.hasNext();){const{key:R,value:{document:K}}=C.getNext();if(!t.isPrefixOf(R.path))break;R.path.length>t.length+1||ea(ti(K),o)<=0||(d=d.insert(K.key,K.mutableCopy()))}return Pt.resolve(d)}getAllFromCollectionGroup(e,t,o,d){Sn()}Mi(e,t){return Pt.forEach(this.docs,o=>t(o))}newChangeBuffer(e){return new Yo(this)}getSize(e){return Pt.resolve(this.size)}}class Yo extends gp{constructor(e){super(),this.qn=e}applyChanges(e){const t=[];return this.changes.forEach((o,d)=>{d.isValidDocument()?t.push(this.qn.addEntry(e,d)):this.qn.removeEntry(o)}),Pt.waitFor(t)}getFromCache(e,t){return this.qn.getEntry(e,t)}getAllFromCache(e,t){return this.qn.getEntries(e,t)}}class qd{constructor(e){this.persistence=e,this.Oi=new Pa(t=>Pr(t),za),this.lastRemoteSnapshotVersion=qn.min(),this.highestTargetId=0,this.Fi=0,this.$i=new kh,this.targetCount=0,this.Bi=bc.mn()}forEachTarget(e,t){return this.Oi.forEach((o,d)=>t(d)),Pt.resolve()}getLastRemoteSnapshotVersion(e){return Pt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Pt.resolve(this.Fi)}allocateTargetId(e){return this.highestTargetId=this.Bi.next(),Pt.resolve(this.highestTargetId)}setTargetsMetadata(e,t,o){return o&&(this.lastRemoteSnapshotVersion=o),t>this.Fi&&(this.Fi=t),Pt.resolve()}In(e){this.Oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Bi=new bc(t),this.highestTargetId=t),e.sequenceNumber>this.Fi&&(this.Fi=e.sequenceNumber)}addTargetData(e,t){return this.In(t),this.targetCount+=1,Pt.resolve()}updateTargetData(e,t){return this.In(t),Pt.resolve()}removeTargetData(e,t){return this.Oi.delete(t.target),this.$i.Ri(t.targetId),this.targetCount-=1,Pt.resolve()}removeTargets(e,t,o){let d=0;const _=[];return this.Oi.forEach((C,R)=>{R.sequenceNumber<=t&&null===o.get(R.targetId)&&(this.Oi.delete(C),_.push(this.removeMatchingKeysForTargetId(e,R.targetId)),d++)}),Pt.waitFor(_).next(()=>d)}getTargetCount(e){return Pt.resolve(this.targetCount)}getTargetData(e,t){const o=this.Oi.get(t)||null;return Pt.resolve(o)}addMatchingKeys(e,t,o){return this.$i.Ti(t,o),Pt.resolve()}removeMatchingKeys(e,t,o){this.$i.Ai(t,o);const d=this.persistence.referenceDelegate,_=[];return d&&t.forEach(C=>{_.push(d.markPotentiallyOrphaned(e,C))}),Pt.waitFor(_)}removeMatchingKeysForTargetId(e,t){return this.$i.Ri(t),Pt.resolve()}getMatchingKeysForTargetId(e,t){const o=this.$i.Pi(t);return Pt.resolve(o)}containsKey(e,t){return Pt.resolve(this.$i.containsKey(t))}}class bp{constructor(e,t){this.Li={},this.overlays={},this.ts=new fn(0),this.es=!1,this.es=!0,this.referenceDelegate=e(this),this.ls=new qd(this),this.indexManager=new yc,this.fs=new Co(o=>this.referenceDelegate.Ui(o)),this.M=new Bd(t),this.ds=new Dg(this.M)}start(){return Promise.resolve()}shutdown(){return this.es=!1,Promise.resolve()}get started(){return this.es}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Ep,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let o=this.Li[e.toKey()];return o||(o=new Hl(t,this.referenceDelegate),this.Li[e.toKey()]=o),o}getTargetCache(){return this.ls}getRemoteDocumentCache(){return this.fs}getBundleCache(){return this.ds}runTransaction(e,t,o){Wt("MemoryPersistence","Starting transaction:",e);const d=new zm(this.ts.next());return this.referenceDelegate.qi(),o(d).next(_=>this.referenceDelegate.Gi(d).next(()=>_)).toPromise().then(_=>(d.raiseOnCommittedEvent(),_))}Ki(e,t){return Pt.or(Object.values(this.Li).map(o=>()=>o.containsKey(e,t)))}}class zm extends Ih{constructor(e){super(),this.currentSequenceNumber=e}}class Fh{constructor(e){this.persistence=e,this.Qi=new kh,this.ji=null}static Wi(e){return new Fh(e)}get zi(){if(this.ji)return this.ji;throw Sn()}addReference(e,t,o){return this.Qi.addReference(o,t),this.zi.delete(o.toString()),Pt.resolve()}removeReference(e,t,o){return this.Qi.removeReference(o,t),this.zi.add(o.toString()),Pt.resolve()}markPotentiallyOrphaned(e,t){return this.zi.add(t.toString()),Pt.resolve()}removeTarget(e,t){this.Qi.Ri(t.targetId).forEach(d=>this.zi.add(d.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,t.targetId).next(d=>{d.forEach(_=>this.zi.add(_.toString()))}).next(()=>o.removeTargetData(e,t))}qi(){this.ji=new Set}Gi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Pt.forEach(this.zi,o=>{const d=dn.fromPath(o);return this.Hi(e,d).next(_=>{_||t.removeEntry(d,qn.min())})}).next(()=>(this.ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hi(e,t).next(o=>{o?this.zi.delete(t.toString()):this.zi.add(t.toString())})}Ui(e){return 0}Hi(e,t){return Pt.or([()=>Pt.resolve(this.Qi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ki(e,t)])}}function xf(i,e){return`firestore_clients_${i}_${e}`}function wp(i,e,t){let o=`firestore_mutations_${i}_${t}`;return e.isAuthenticated()&&(o+=`_${e.uid}`),o}function Lh(i,e){return`firestore_targets_${i}_${e}`}class Vh{constructor(e,t,o,d){this.user=e,this.batchId=t,this.state=o,this.error=d}static Ji(e,t,o){const d=JSON.parse(o);let _,C="object"==typeof d&&-1!==["pending","acknowledged","rejected"].indexOf(d.state)&&(void 0===d.error||"object"==typeof d.error);return C&&d.error&&(C="string"==typeof d.error.message&&"string"==typeof d.error.code,C&&(_=new T(d.error.code,d.error.message))),C?new Vh(e,t,d.state,_):(Mi("SharedClientState",`Failed to parse mutation state for ID '${t}': ${o}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Yd{constructor(e,t,o){this.targetId=e,this.state=t,this.error=o}static Ji(e,t){const o=JSON.parse(t);let d,_="object"==typeof o&&-1!==["not-current","current","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return _&&o.error&&(_="string"==typeof o.error.message&&"string"==typeof o.error.code,_&&(d=new T(o.error.code,o.error.message))),_?new Yd(e,o.state,d):(Mi("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class No{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const o=JSON.parse(t);let d="object"==typeof o&&o.activeTargetIds instanceof Array,_=Qu();for(let C=0;d&&C<o.activeTargetIds.length;++C)d=bu(o.activeTargetIds[C]),_=_.add(o.activeTargetIds[C]);return d?new No(e,_):(Mi("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Bh{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Bh(t.clientId,t.onlineState):(Mi("SharedClientState",`Failed to parse online state: ${e}`),null)}}class $h{constructor(){this.activeTargetIds=Qu()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Mf{constructor(e,t,o,d,_){this.window=e,this.Jn=t,this.persistenceKey=o,this.tr=d,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new ms(fr),this.started=!1,this.ir=[];const C=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=_,this.rr=xf(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new $h),this.ar=new RegExp(`^firestore_clients_${C}_([^_]*)$`),this.cr=new RegExp(`^firestore_mutations_${C}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${C}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(R){return`firestore_bundle_loaded_v2_${R}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ve.Z)(function*(){const t=yield e.syncEngine.Os();for(const d of t){if(d===e.tr)continue;const _=e.getItem(xf(e.persistenceKey,d));if(_){const C=No.Ji(d,_);C&&(e.sr=e.sr.insert(C.clientId,C))}}e._r();const o=e.storage.getItem(e.lr);if(o){const d=e.wr(o);d&&e.mr(d)}for(const d of e.ir)e.nr(d);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((o,d)=>{d.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,o){this.yr(e,t,o),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const o=this.storage.getItem(Lh(this.persistenceKey,e));if(o){const d=Yd.Ji(e,o);d&&(t=d.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Lh(this.persistenceKey,e))}updateQueryState(e,t,o){this.Tr(e,t,o)}handleUserChange(e,t,o){t.forEach(d=>{this.pr(d)}),this.currentUser=e,o.forEach(d=>{this.addPendingMutation(d)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Wt("SharedClientState","READ",e,t),t}setItem(e,t){Wt("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Wt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const o=e;if(o.storageArea===this.storage){if(Wt("SharedClientState","EVENT",o.key,o.newValue),o.key===this.rr)return void Mi("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Jn.enqueueRetryable((0,ve.Z)(function*(){if(t.started){if(null!==o.key)if(t.ar.test(o.key)){if(null==o.newValue){const d=t.Rr(o.key);return t.br(d,null)}{const d=t.Pr(o.key,o.newValue);if(d)return t.br(d.clientId,d)}}else if(t.cr.test(o.key)){if(null!==o.newValue){const d=t.Vr(o.key,o.newValue);if(d)return t.vr(d)}}else if(t.hr.test(o.key)){if(null!==o.newValue){const d=t.Sr(o.key,o.newValue);if(d)return t.Dr(d)}}else if(o.key===t.lr){if(null!==o.newValue){const d=t.wr(o.newValue);if(d)return t.mr(d)}}else if(o.key===t.ur){const d=function(_){let C=fn.A;if(null!=_)try{const R=JSON.parse(_);Wn("number"==typeof R),C=R}catch(R){Mi("SharedClientState","Failed to read sequence number from WebStorage",R)}return C}(o.newValue);d!==fn.A&&t.sequenceNumberHandler(d)}else if(o.key===t.dr){const d=t.Cr(o.newValue);yield Promise.all(d.map(_=>t.syncEngine.Nr(_)))}}else t.ir.push(o)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,o){const d=new Vh(this.currentUser,e,t,o),_=wp(this.persistenceKey,this.currentUser,e);this.setItem(_,d.Yi())}pr(e){const t=wp(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,o){const d=Lh(this.persistenceKey,e),_=new Yd(e,t,o);this.setItem(d,_.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.ar.exec(e);return t?t[1]:null}Pr(e,t){const o=this.Rr(e);return No.Ji(o,t)}Vr(e,t){const o=this.cr.exec(e),d=Number(o[1]);return Vh.Ji(new hi(void 0!==o[2]?o[2]:null),d,t)}Sr(e,t){const o=this.hr.exec(e),d=Number(o[1]);return Yd.Ji(d,t)}wr(e){return Bh.Ji(e)}Cr(e){return JSON.parse(e)}vr(e){var t=this;return(0,ve.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);Wt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}br(e,t){const o=t?this.sr.insert(e,t):this.sr.remove(e),d=this.gr(this.sr),_=this.gr(o),C=[],R=[];return _.forEach(K=>{d.has(K)||C.push(K)}),d.forEach(K=>{_.has(K)||R.push(K)}),this.syncEngine.Or(C,R).then(()=>{this.sr=o})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=Qu();return e.forEach((o,d)=>{t=t.unionWith(d.activeTargetIds)}),t}}class Kd{constructor(){this.Fr=new $h,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,o){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,o){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new $h,Promise.resolve()}handleUserChange(e,t,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Ip{Br(e){}shutdown(){}}class Cp{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Gr(),this.Kr=[],this.Qr()}Br(e){this.Kr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){Wt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Kr)e(0)}Gr(){Wt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Kr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Tg={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Rf{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class Of extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,o,d,_){const C=this.oo(e,t);Wt("RestConnection","Sending: ",C,o);const R={};return this.uo(R,d,_),this.ao(e,C,R,o).then(K=>(Wt("RestConnection","Received: ",K),K),K=>{throw As("RestConnection",`${e} failed with error: `,K,"url: ",C,"request:",o),K})}co(e,t,o,d,_){return this.ro(e,t,o,d,_)}uo(e,t,o){e["X-Goog-Api-Client"]="gl-js/ fire/"+ca,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((d,_)=>e[_]=d),o&&o.headers.forEach((d,_)=>e[_]=d)}oo(e,t){return`${this.so}/v1/${t}:${Tg[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}ao(e,t,o,d){return new Promise((_,C)=>{const R=new ws;R.listenOnce(Ua.COMPLETE,()=>{try{switch(R.getLastErrorCode()){case gr.NO_ERROR:const J=R.getResponseJson();Wt("Connection","XHR received:",JSON.stringify(J)),_(J);break;case gr.TIMEOUT:Wt("Connection",'RPC "'+e+'" timed out'),C(new T(Dt.DEADLINE_EXCEEDED,"Request time out"));break;case gr.HTTP_ERROR:const Me=R.getStatus();if(Wt("Connection",'RPC "'+e+'" failed with status:',Me,"response text:",R.getResponseText()),Me>0){const Ye=R.getResponseJson().error;if(Ye&&Ye.status&&Ye.message){const Ct=function($t){const Qt=$t.toLowerCase().replace(/_/g,"-");return Object.values(Dt).indexOf(Qt)>=0?Qt:Dt.UNKNOWN}(Ye.status);C(new T(Ct,Ye.message))}else C(new T(Dt.UNKNOWN,"Server responded with status "+R.getStatus()))}else C(new T(Dt.UNAVAILABLE,"Connection failed."));break;default:Sn()}}finally{Wt("Connection",'RPC "'+e+'" completed.')}});const K=JSON.stringify(d);R.send(t,"POST",K,o,15)})}ho(e,t,o){const d=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],_=rl(),C=_o(),R={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(R.xmlHttpFactory=new Fi({})),this.uo(R.initMessageHeaders,t,o),(0,_t.uI)()||(0,_t.b$)()||(0,_t.d)()||(0,_t.w1)()||(0,_t.Mn)()||(0,_t.ru)()||(R.httpHeadersOverwriteParam="$httpHeaders");const K=d.join("");Wt("Connection","Creating WebChannel: "+K,R);const J=_.createWebChannel(K,R);let Me=!1,Ye=!1;const Ct=new Rf({jr:Qt=>{Ye?Wt("Connection","Not sending because WebChannel is closed:",Qt):(Me||(Wt("Connection","Opening WebChannel transport."),J.open(),Me=!0),Wt("Connection","WebChannel sending:",Qt),J.send(Qt))},Wr:()=>J.close()}),$t=(Qt,$n,Lr)=>{Qt.listen($n,Qs=>{try{Lr(Qs)}catch(oi){setTimeout(()=>{throw oi},0)}})};return $t(J,xo.EventType.OPEN,()=>{Ye||Wt("Connection","WebChannel transport opened.")}),$t(J,xo.EventType.CLOSE,()=>{Ye||(Ye=!0,Wt("Connection","WebChannel transport closed"),Ct.eo())}),$t(J,xo.EventType.ERROR,Qt=>{Ye||(Ye=!0,As("Connection","WebChannel transport errored:",Qt),Ct.eo(new T(Dt.UNAVAILABLE,"The operation could not be completed")))}),$t(J,xo.EventType.MESSAGE,Qt=>{var $n;if(!Ye){const Lr=Qt.data[0];Wn(!!Lr);const Qs=Lr,oi=Qs.error||(null===($n=Qs[0])||void 0===$n?void 0:$n.error);if(oi){Wt("Connection","WebChannel received error:",oi);const lo=oi.status;let Os=function(Gi){const Ja=gs[Gi];if(void 0!==Ja)return Oa(Ja)}(lo),Ds=oi.message;void 0===Os&&(Os=Dt.INTERNAL,Ds="Unknown error status: "+lo+" with message "+oi.message),Ye=!0,Ct.eo(new T(Os,Ds)),J.close()}else Wt("Connection","WebChannel received:",Lr),Ct.no(Lr)}}),$t(C,di.STAT_EVENT,Qt=>{Qt.stat===vu.PROXY?Wt("Connection","Detected buffering proxy"):Qt.stat===vu.NOPROXY&&Wt("Connection","Detected no buffering proxy")}),setTimeout(()=>{Ct.Zr()},0),Ct}}function Pf(){return"undefined"!=typeof window?window:null}function Zd(){return"undefined"!=typeof document?document:null}function Qd(i){return new ec(i,!0)}class Uh{constructor(e,t,o=1e3,d=1.5,_=6e4){this.Jn=e,this.timerId=t,this.lo=o,this.fo=d,this._o=_,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),o=Math.max(0,Date.now()-this.yo),d=Math.max(0,t-o);d>0&&Wt("ExponentialBackoff",`Backing off for ${d} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${o} ms ago)`),this.mo=this.Jn.enqueueAfterDelay(this.timerId,d,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class Dp{constructor(e,t,o,d,_,C,R,K){this.Jn=e,this.Ao=o,this.Ro=d,this.bo=_,this.authCredentialsProvider=C,this.appCheckCredentialsProvider=R,this.listener=K,this.state=0,this.Po=0,this.Vo=null,this.vo=null,this.stream=null,this.So=new Uh(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,ve.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.Vo&&(this.Vo=this.Jn.enqueueAfterDelay(this.Ao,6e4,()=>this.Mo()))}Oo(e){this.Fo(),this.stream.send(e)}Mo(){var e=this;return(0,ve.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}close(e,t){var o=this;return(0,ve.Z)(function*(){o.Fo(),o.$o(),o.So.cancel(),o.Po++,4!==e?o.So.reset():t&&t.code===Dt.RESOURCE_EXHAUSTED?(Mi(t.toString()),Mi("Using maximum backoff delay to prevent overloading the backend."),o.So.po()):t&&t.code===Dt.UNAUTHENTICATED&&3!==o.state&&(o.authCredentialsProvider.invalidateToken(),o.appCheckCredentialsProvider.invalidateToken()),null!==o.stream&&(o.Bo(),o.stream.close(),o.stream=null),o.state=e,yield o.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,d])=>{this.Po===t&&this.Uo(o,d)},o=>{e(()=>{const d=new T(Dt.UNKNOWN,"Fetching auth token failed: "+o.message);return this.qo(d)})})}Uo(e,t){const o=this.Lo(this.Po);this.stream=this.Go(e,t),this.stream.zr(()=>{o(()=>(this.state=2,this.vo=this.Jn.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(d=>{o(()=>this.qo(d))}),this.stream.onMessage(d=>{o(()=>this.onMessage(d))})}xo(){var e=this;this.state=5,this.So.Io((0,ve.Z)(function*(){e.state=0,e.start()}))}qo(e){return Wt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.Jn.enqueueAndForget(()=>this.Po===e?t():(Wt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Nf extends Dp{constructor(e,t,o,d,_,C){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,o,d,C),this.M=_}Go(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function Pd(i,e){let t;if("targetChange"in e){const o="NO_CHANGE"===(K=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===K?1:"REMOVE"===K?2:"CURRENT"===K?3:"RESET"===K?4:Sn(),d=e.targetChange.targetIds||[],_=function(K,J){return K.N?(Wn(void 0===J||"string"==typeof J),Is.fromBase64String(J||"")):(Wn(void 0===J||J instanceof Uint8Array),Is.fromUint8Array(J||new Uint8Array))}(i,e.targetChange.resumeToken),C=e.targetChange.cause,R=C&&function(K){const J=void 0===K.code?Dt.UNKNOWN:Oa(K.code);return new T(J,K.message||"")}(C);t=new Xu(o,d,_,R||null)}else if("documentChange"in e){const o=e.documentChange,d=ra(i,o.document.name),_=_s(o.document.updateTime),C=new it({mapValue:{fields:o.document.fields}}),R=Lt.newFoundDocument(d,_,C);t=new Us(o.targetIds||[],o.removedTargetIds||[],R.key,R)}else if("documentDelete"in e){const o=e.documentDelete,d=ra(i,o.document),_=o.readTime?_s(o.readTime):qn.min(),C=Lt.newNoDocument(d,_);t=new Us([],o.removedTargetIds||[],C.key,C)}else if("documentRemove"in e){const o=e.documentRemove,d=ra(i,o.document);t=new Us([],o.removedTargetIds||[],d,null)}else{if(!("filter"in e))return Sn();{const o=e.filter,_=new mh(o.count||0);t=new fl(o.targetId,_)}}var K;return t}(this.M,e),o=function(d){if(!("targetChange"in d))return qn.min();const _=d.targetChange;return _.targetIds&&_.targetIds.length?qn.min():_.readTime?_s(_.readTime):qn.min()}(e);return this.listener.Ko(t,o)}Qo(e){const t={};t.database=Mu(this.M),t.addTarget=function(d,_){let C;const R=_.target;return C=Aa(R)?{documents:ic(d,R)}:{query:Nd(d,R)},C.targetId=_.targetId,_.resumeToken.approximateByteSize()>0?C.resumeToken=su(d,_.resumeToken):_.snapshotVersion.compareTo(qn.min())>0&&(C.readTime=iu(d,_.snapshotVersion.toTimestamp())),C}(this.M,e);const o=function qc(i,e){const t=function(o,d){switch(d){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Sn()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);o&&(t.labels=o),this.Oo(t)}jo(e){const t={};t.database=Mu(this.M),t.removeTarget=e,this.Oo(t)}}class Sg extends Dp{constructor(e,t,o,d,_,C){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,o,d,C),this.M=_,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Go(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(Wn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function ml(i,e){return i&&i.length>0?(Wn(void 0!==e),i.map(t=>function(o,d){let _=_s(o.updateTime?o.updateTime:d);return _.isEqual(qn.min())&&(_=_s(d)),new ip(_,o.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),o=_s(e.commitTime);return this.listener.Jo(o,t)}return Wn(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=Mu(this.M),this.Oo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(o=>Oo(this.M,o))};this.Oo(t)}}class Ag extends class{}{constructor(e,t,o,d){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=o,this.M=d,this.Zo=!1}tu(){if(this.Zo)throw new T(Dt.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,o){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,_])=>this.bo.ro(e,t,o,d,_)).catch(d=>{throw"FirebaseError"===d.name?(d.code===Dt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new T(Dt.UNKNOWN,d.toString())})}co(e,t,o){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,_])=>this.bo.co(e,t,o,d,_)).catch(d=>{throw"FirebaseError"===d.name?(d.code===Dt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new T(Dt.UNKNOWN,d.toString())})}terminate(){this.Zo=!0}}class kf{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.au(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.au(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(Mi(t),this.su=!1):Wt("OnlineStateTracker",t)}au(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class Tp{constructor(e,t,o,d,_){var C=this;this.localStore=e,this.datastore=t,this.asyncQueue=o,this.remoteSyncer={},this.cu=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=_,this.du.Br(R=>{o.enqueueAndForget((0,ve.Z)(function*(){var K;a(C)&&(Wt("RemoteStore","Restarting streams for network reachability change."),yield(K=(0,ve.Z)(function*(J){const Me=cn(J);Me.lu.add(4),yield Lu(Me),Me._u.set("Unknown"),Me.lu.delete(4),yield Xd(Me)}),function(J){return K.apply(this,arguments)})(C))}))}),this._u=new kf(o,d)}}function Xd(i){return Qa.apply(this,arguments)}function Qa(){return Qa=(0,ve.Z)(function*(i){if(a(i))for(const e of i.fu)yield e(!0)}),Qa.apply(this,arguments)}function Lu(i){return Ff.apply(this,arguments)}function Ff(){return Ff=(0,ve.Z)(function*(i){for(const e of i.fu)yield e(!1)}),Ff.apply(this,arguments)}function jh(i,e){const t=cn(i);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),l(t)?h(t):nd(t).Co()&&Gh(t,e))}function Hh(i,e){const t=cn(i),o=nd(t);t.hu.delete(e),o.Co()&&Sp(t,e),0===t.hu.size&&(o.Co()?o.ko():a(t)&&t._u.set("Unknown"))}function Gh(i,e){i.wu.Z(e.targetId),nd(i).Qo(e)}function Sp(i,e){i.wu.Z(e),nd(i).jo(e)}function h(i){i.wu=new fo({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>i.hu.get(e)||null}),nd(i).start(),i._u.iu()}function l(i){return a(i)&&!nd(i).Do()&&i.hu.size>0}function a(i){return 0===cn(i).lu.size}function p(i){i.wu=void 0}function b(i){return M.apply(this,arguments)}function M(){return M=(0,ve.Z)(function*(i){i.hu.forEach((e,t)=>{Gh(i,e)})}),M.apply(this,arguments)}function U(i,e){return ne.apply(this,arguments)}function ne(){return ne=(0,ve.Z)(function*(i,e){p(i),l(i)?(i._u.uu(e),h(i)):i._u.set("Unknown")}),ne.apply(this,arguments)}function be(i,e,t){return Be.apply(this,arguments)}function Be(){return Be=(0,ve.Z)(function*(i,e,t){if(i._u.set("Online"),e instanceof Xu&&2===e.state&&e.cause)try{yield(o=(0,ve.Z)(function*(d,_){const C=_.cause;for(const R of _.targetIds)d.hu.has(R)&&(yield d.remoteSyncer.rejectListen(R,C),d.hu.delete(R),d.wu.removeTarget(R))}),function(d,_){return o.apply(this,arguments)})(i,e)}catch(o){Wt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),o),yield It(i,o)}else if(e instanceof Us?i.wu.ut(e):e instanceof fl?i.wu._t(e):i.wu.ht(e),!t.isEqual(qn.min()))try{const o=yield _p(i.localStore);t.compareTo(o)>=0&&(yield function(d,_){const C=d.wu.yt(_);return C.targetChanges.forEach((R,K)=>{if(R.resumeToken.approximateByteSize()>0){const J=d.hu.get(K);J&&d.hu.set(K,J.withResumeToken(R.resumeToken,_))}}),C.targetMismatches.forEach(R=>{const K=d.hu.get(R);if(!K)return;d.hu.set(R,K.withResumeToken(Is.EMPTY_BYTE_STRING,K.snapshotVersion)),Sp(d,R);const J=new Io(K.target,R,1,K.sequenceNumber);Gh(d,J)}),d.remoteSyncer.applyRemoteEvent(C)}(i,t))}catch(o){Wt("RemoteStore","Failed to raise snapshot:",o),yield It(i,o)}var o}),Be.apply(this,arguments)}function It(i,e,t){return wt.apply(this,arguments)}function wt(){return wt=(0,ve.Z)(function*(i,e,t){if(!Ru(e))throw e;i.lu.add(1),yield Lu(i),i._u.set("Offline"),t||(t=()=>_p(i.localStore)),i.asyncQueue.enqueueRetryable((0,ve.Z)(function*(){Wt("RemoteStore","Retrying IndexedDB access"),yield t(),i.lu.delete(1),yield Xd(i)}))}),wt.apply(this,arguments)}function Bt(i,e){return e().catch(t=>It(i,t,e))}function Cn(i){return nr.apply(this,arguments)}function nr(){return nr=(0,ve.Z)(function*(i){const e=cn(i),t=Tc(e);let o=e.cu.length>0?e.cu[e.cu.length-1].batchId:-1;for(;Hi(e);)try{const d=yield Cg(e.localStore,o);if(null===d){0===e.cu.length&&t.ko();break}o=d.batchId,go(e,d)}catch(d){yield It(e,d)}cu(e)&&wl(e)}),nr.apply(this,arguments)}function Hi(i){return a(i)&&i.cu.length<10}function go(i,e){i.cu.push(e);const t=Tc(i);t.Co()&&t.zo&&t.Ho(e.mutations)}function cu(i){return a(i)&&!Tc(i).Do()&&i.cu.length>0}function wl(i){Tc(i).start()}function Cc(i){return zh.apply(this,arguments)}function zh(){return zh=(0,ve.Z)(function*(i){Tc(i).Xo()}),zh.apply(this,arguments)}function Dc(i){return Wh.apply(this,arguments)}function Wh(){return Wh=(0,ve.Z)(function*(i){const e=Tc(i);for(const t of i.cu)e.Ho(t.mutations)}),Wh.apply(this,arguments)}function o_(i,e,t){return xg.apply(this,arguments)}function xg(){return xg=(0,ve.Z)(function*(i,e,t){const o=i.cu.shift(),d=Vd.from(o,e,t);yield Bt(i,()=>i.remoteSyncer.applySuccessfulWrite(d)),yield Cn(i)}),xg.apply(this,arguments)}function Hv(i,e){return Lf.apply(this,arguments)}function Lf(){return Lf=(0,ve.Z)(function*(i,e){var t;e&&Tc(i).zo&&(yield(t=(0,ve.Z)(function*(o,d){if(Md(_=d.code)&&_!==Dt.ABORTED){const C=o.cu.shift();Tc(o).No(),yield Bt(o,()=>o.remoteSyncer.rejectFailedWrite(C.batchId,d)),yield Cn(o)}var _}),function(o,d){return t.apply(this,arguments)})(i,e)),cu(i)&&wl(i)}),Lf.apply(this,arguments)}function Mg(i,e){return Vf.apply(this,arguments)}function Vf(){return Vf=(0,ve.Z)(function*(i,e){const t=cn(i);t.asyncQueue.verifyOperationInProgress(),Wt("RemoteStore","RemoteStore received new credentials");const o=a(t);t.lu.add(3),yield Lu(t),o&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield Xd(t)}),Vf.apply(this,arguments)}function Jd(i,e){return Rg.apply(this,arguments)}function Rg(){return Rg=(0,ve.Z)(function*(i,e){const t=cn(i);e?(t.lu.delete(2),yield Xd(t)):e||(t.lu.add(2),yield Lu(t),t._u.set("Unknown"))}),Rg.apply(this,arguments)}function nd(i){return i.mu||(i.mu=function(e,t,o){const d=cn(e);return d.tu(),new Nf(t,d.bo,d.authCredentials,d.appCheckCredentials,d.M,o)}(i.datastore,i.asyncQueue,{zr:b.bind(null,i),Jr:U.bind(null,i),Ko:be.bind(null,i)}),i.fu.push(function(){var e=(0,ve.Z)(function*(t){t?(i.mu.No(),l(i)?h(i):i._u.set("Unknown")):(yield i.mu.stop(),p(i))});return function(t){return e.apply(this,arguments)}}())),i.mu}function Tc(i){return i.gu||(i.gu=function(e,t,o){const d=cn(e);return d.tu(),new Sg(t,d.bo,d.authCredentials,d.appCheckCredentials,d.M,o)}(i.datastore,i.asyncQueue,{zr:Cc.bind(null,i),Jr:Hv.bind(null,i),Yo:Dc.bind(null,i),Jo:o_.bind(null,i)}),i.fu.push(function(){var e=(0,ve.Z)(function*(t){t?(i.gu.No(),yield Cn(i)):(yield i.gu.stop(),i.cu.length>0&&(Wt("RemoteStore",`Stopping write stream with ${i.cu.length} pending writes`),i.cu=[]))});return function(t){return e.apply(this,arguments)}}())),i.gu}class Ap{constructor(e,t,o,d,_){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=o,this.op=d,this.removalCallback=_,this.deferred=new S,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(C=>{})}static createAndSchedule(e,t,o,d,_){const C=Date.now()+o,R=new Ap(e,t,C,d,_);return R.start(o),R}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new T(Dt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function eh(i,e){if(Mi("AsyncQueue",`${e}: ${i}`),Ru(i))return new T(Dt.UNAVAILABLE,`${e}: ${i}`);throw i}class qh{constructor(e){this.comparator=e?(t,o)=>e(t,o)||dn.comparator(t.key,o.key):(t,o)=>dn.comparator(t.key,o.key),this.keyedMap=jc(),this.sortedSet=new ms(this.comparator)}static emptySet(e){return new qh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,o)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof qh)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;t.hasNext();){const d=t.getNext().key,_=o.getNext().key;if(!d.isEqual(_))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const o=new qh;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=t,o}}class xp{constructor(){this.yu=new ms(dn.comparator)}track(e){const t=e.doc.key,o=this.yu.get(t);o?0!==e.type&&3===o.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==o.type?this.yu=this.yu.insert(t,{type:o.type,doc:e.doc}):2===e.type&&2===o.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===o.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===o.type?this.yu=this.yu.remove(t):1===e.type&&2===o.type?this.yu=this.yu.insert(t,{type:1,doc:o.doc}):0===e.type&&1===o.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):Sn():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,o)=>{e.push(o)}),e}}class Yh{constructor(e,t,o,d,_,C,R,K){this.query=e,this.docs=t,this.oldDocs=o,this.docChanges=d,this.mutatedKeys=_,this.fromCache=C,this.syncStateChanged=R,this.excludesMetadataChanges=K}static fromInitialDocuments(e,t,o,d){const _=[];return t.forEach(C=>{_.push({type:0,doc:C})}),new Yh(e,t,qh.emptySet(t),_,o,d,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&cl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,o=e.docChanges;if(t.length!==o.length)return!1;for(let d=0;d<t.length;d++)if(t[d].type!==o[d].type||!t[d].doc.isEqual(o[d].doc))return!1;return!0}}class a_{constructor(){this.Iu=void 0,this.listeners=[]}}class Wm{constructor(){this.queries=new Pa(e=>eu(e),cl),this.onlineState="Unknown",this.Tu=new Set}}function rd(i,e){return Mp.apply(this,arguments)}function Mp(){return Mp=(0,ve.Z)(function*(i,e){const t=cn(i),o=e.query;let d=!1,_=t.queries.get(o);if(_||(d=!0,_=new a_),d)try{_.Iu=yield t.onListen(o)}catch(C){const R=eh(C,`Initialization of query '${Nc(e.query)}' failed`);return void e.onError(R)}t.queries.set(o,_),_.listeners.push(e),e.Eu(t.onlineState),_.Iu&&e.Au(_.Iu)&&Ng(t)}),Mp.apply(this,arguments)}function Og(i,e){return Pg.apply(this,arguments)}function Pg(){return Pg=(0,ve.Z)(function*(i,e){const t=cn(i),o=e.query;let d=!1;const _=t.queries.get(o);if(_){const C=_.listeners.indexOf(e);C>=0&&(_.listeners.splice(C,1),d=0===_.listeners.length)}if(d)return t.queries.delete(o),t.onUnlisten(o)}),Pg.apply(this,arguments)}function Kh(i,e){const t=cn(i);let o=!1;for(const d of e){const C=t.queries.get(d.query);if(C){for(const R of C.listeners)R.Au(d)&&(o=!0);C.Iu=d}}o&&Ng(t)}function l_(i,e,t){const o=cn(i),d=o.queries.get(e);if(d)for(const _ of d.listeners)_.onError(t);o.queries.delete(e)}function Ng(i){i.Tu.forEach(e=>{e.next()})}class kg{constructor(e,t,o){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=o||{}}Au(e){if(!this.options.includeMetadataChanges){const o=[];for(const d of e.docChanges)3!==d.type&&o.push(d);e=new Yh(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.Vu(e)&&(this.Ru.next(e),t=!0):this.vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=Yh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class u_{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class Gl{constructor(e){this.M=e}li(e){return ra(this.M,e)}fi(e){return e.metadata.exists?nc(this.M,e.document,!1):Lt.newNoDocument(this.li(e.metadata.name),this.di(e.metadata.readTime))}di(e){return _s(e)}}class Fg{constructor(e,t,o){this.xu=e,this.localStore=t,this.M=o,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Lg(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const o=Wr.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(o.get(o.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,o=new Gl(this.M);for(const d of e)if(d.metadata.queries){const _=o.li(d.metadata.name);for(const C of d.metadata.queries){const R=(t.get(C)||Di()).add(_);t.set(C,R)}}return t}complete(){var e=this;return(0,ve.Z)(function*(){const t=yield function Af(i,e,t,o){return Fu.apply(this,arguments)}(e.localStore,new Gl(e.M),e.documents,e.xu.id),o=e.ku(e.documents);for(const d of e.queries)yield Wd(e.localStore,d,o.get(d.name));return e.progress.taskState="Success",{progress:e.progress,Mu:e.collectionGroups,Ou:t}})()}}function Lg(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class Vg{constructor(e){this.key=e}}class Bg{constructor(e){this.key=e}}class $g{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=Di(),this.mutatedKeys=Di(),this.Lu=kc(e),this.Uu=new qh(this.Lu)}get qu(){return this.Fu}Gu(e,t){const o=t?t.Ku:new xp,d=t?t.Uu:this.Uu;let _=t?t.mutatedKeys:this.mutatedKeys,C=d,R=!1;const K=Oc(this.query)&&d.size===this.query.limit?d.last():null,J=Pc(this.query)&&d.size===this.query.limit?d.first():null;if(e.inorderTraversal((Me,Ye)=>{const Ct=d.get(Me),$t=Tu(this.query,Ye)?Ye:null,Qt=!!Ct&&this.mutatedKeys.has(Ct.key),$n=!!$t&&($t.hasLocalMutations||this.mutatedKeys.has($t.key)&&$t.hasCommittedMutations);let Lr=!1;Ct&&$t?Ct.data.isEqual($t.data)?Qt!==$n&&(o.track({type:3,doc:$t}),Lr=!0):this.Qu(Ct,$t)||(o.track({type:2,doc:$t}),Lr=!0,(K&&this.Lu($t,K)>0||J&&this.Lu($t,J)<0)&&(R=!0)):!Ct&&$t?(o.track({type:0,doc:$t}),Lr=!0):Ct&&!$t&&(o.track({type:1,doc:Ct}),Lr=!0,(K||J)&&(R=!0)),Lr&&($t?(C=C.add($t),_=$n?_.add(Me):_.delete(Me)):(C=C.delete(Me),_=_.delete(Me)))}),Oc(this.query)||Pc(this.query))for(;C.size>this.query.limit;){const Me=Oc(this.query)?C.last():C.first();C=C.delete(Me.key),_=_.delete(Me.key),o.track({type:1,doc:Me})}return{Uu:C,Ku:o,ei:R,mutatedKeys:_}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,o){const d=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const _=e.Ku.pu();_.sort((J,Me)=>function(Ye,Ct){const $t=Qt=>{switch(Qt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Sn()}};return $t(Ye)-$t(Ct)}(J.type,Me.type)||this.Lu(J.doc,Me.doc)),this.ju(o);const C=t?this.Wu():[],R=0===this.Bu.size&&this.current?1:0,K=R!==this.$u;return this.$u=R,0!==_.length||K?{snapshot:new Yh(this.query,e.Uu,d,_,e.mutatedKeys,0===R,K,!1),zu:C}:{zu:C}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Ku:new xp,mutatedKeys:this.mutatedKeys,ei:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=Di(),this.Uu.forEach(o=>{this.Hu(o.key)&&(this.Bu=this.Bu.add(o.key))});const t=[];return e.forEach(o=>{this.Bu.has(o)||t.push(new Bg(o))}),this.Bu.forEach(o=>{e.has(o)||t.push(new Vg(o))}),t}Ju(e){this.Fu=e.hi,this.Bu=Di();const t=this.Gu(e.documents);return this.applyChanges(t,!0)}Yu(){return Yh.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class c_{constructor(e,t,o){this.query=e,this.targetId=t,this.view=o}}class d_{constructor(e){this.key=e,this.Xu=!1}}class h_{constructor(e,t,o,d,_,C){this.localStore=e,this.remoteStore=t,this.eventManager=o,this.sharedClientState=d,this.currentUser=_,this.maxConcurrentLimboResolutions=C,this.Zu={},this.ta=new Pa(R=>eu(R),cl),this.ea=new Map,this.na=new Set,this.sa=new ms(dn.comparator),this.ia=new Map,this.ra=new kh,this.oa={},this.ua=new Map,this.aa=bc.gn(),this.onlineState="Unknown",this.ca=void 0}get isPrimaryClient(){return!0===this.ca}}function f_(i,e){return Rp.apply(this,arguments)}function Rp(){return Rp=(0,ve.Z)(function*(i,e){const t=ad(i);let o,d;const _=t.ta.get(e);if(_)o=_.targetId,t.sharedClientState.addLocalQueryTarget(o),d=_.view.Yu();else{const C=yield ku(t.localStore,ho(e));t.isPrimaryClient&&jh(t.remoteStore,C);const R=t.sharedClientState.addLocalQueryTarget(C.targetId);o=C.targetId,d=yield qm(t,e,o,"current"===R)}return d}),Rp.apply(this,arguments)}function qm(i,e,t,o){return Op.apply(this,arguments)}function Op(){return Op=(0,ve.Z)(function*(i,e,t,o){i.ha=(Me,Ye,Ct)=>{return($t=(0,ve.Z)(function*(Qt,$n,Lr,Qs){let oi=$n.view.Gu(Lr);oi.ei&&(oi=yield Nh(Qt.localStore,$n.query,!1).then(({documents:Ds})=>$n.view.Gu(Ds,oi)));const lo=Qs&&Qs.targetChanges.get($n.targetId),Os=$n.view.applyChanges(oi,Qt.isPrimaryClient,lo);return zg(Qt,$n.targetId,Os.zu),Os.snapshot}),function(Qt,$n,Lr,Qs){return $t.apply(this,arguments)})(i,Me,Ye,Ct);var $t};const d=yield Nh(i.localStore,e,!0),_=new $g(e,d.hi),C=_.Gu(d.documents),R=hl.createSynthesizedTargetChangeForCurrentChange(t,o&&"Offline"!==i.onlineState),K=_.applyChanges(C,i.isPrimaryClient,R);zg(i,t,K.zu);const J=new c_(e,t,_);return i.ta.set(e,J),i.ea.has(t)?i.ea.get(t).push(e):i.ea.set(t,[e]),K.snapshot}),Op.apply(this,arguments)}function p_(i,e){return Ug.apply(this,arguments)}function Ug(){return Ug=(0,ve.Z)(function*(i,e){const t=cn(i),o=t.ta.get(e),d=t.ea.get(o.targetId);if(d.length>1)return t.ea.set(o.targetId,d.filter(_=>!cl(_,e))),void t.ta.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(o.targetId),t.sharedClientState.isActiveQueryTarget(o.targetId)||(yield ed(t.localStore,o.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(o.targetId),Hh(t.remoteStore,o.targetId),th(t,o.targetId)}).catch(lu))):(th(t,o.targetId),yield ed(t.localStore,o.targetId,!0))}),Ug.apply(this,arguments)}function Ym(){return Ym=(0,ve.Z)(function*(i,e,t){const o=ld(i);try{const d=yield function(_,C){const R=cn(_),K=Ii.now(),J=C.reduce((Ye,Ct)=>Ye.add(Ct.key),Di());let Me;return R.persistence.runTransaction("Locally write mutations","readwrite",Ye=>R.ai.qs(Ye,J).next(Ct=>{Me=Ct;const $t=[];for(const Qt of C){const $n=Ad(Qt,Me.get(Qt.key));null!=$n&&$t.push(new Ra(Qt.key,$n,vt($n.value.mapValue),$s.exists(!0)))}return R.$s.addMutationBatch(Ye,K,$t,C)})).then(Ye=>(Ye.applyToLocalDocumentSet(Me),{batchId:Ye.batchId,changes:Me}))}(o.localStore,e);o.sharedClientState.addPendingMutation(d.batchId),function(_,C,R){let K=_.oa[_.currentUser.toKey()];K||(K=new ms(fr)),K=K.insert(C,R),_.oa[_.currentUser.toKey()]=K}(o,d.batchId,t),yield Sc(o,d.changes),yield Cn(o.remoteStore)}catch(d){const _=eh(d,"Failed to persist write");t.reject(_)}}),Ym.apply(this,arguments)}function Pp(i,e){return jg.apply(this,arguments)}function jg(){return jg=(0,ve.Z)(function*(i,e){const t=cn(i);try{const o=yield Nu(t.localStore,e);e.targetChanges.forEach((d,_)=>{const C=t.ia.get(_);C&&(Wn(d.addedDocuments.size+d.modifiedDocuments.size+d.removedDocuments.size<=1),d.addedDocuments.size>0?C.Xu=!0:d.modifiedDocuments.size>0?Wn(C.Xu):d.removedDocuments.size>0&&(Wn(C.Xu),C.Xu=!1))}),yield Sc(t,o,e)}catch(o){yield lu(o)}}),jg.apply(this,arguments)}function Hg(i,e,t){const o=cn(i);if(o.isPrimaryClient&&0===t||!o.isPrimaryClient&&1===t){const d=[];o.ta.forEach((_,C)=>{const R=C.view.Eu(e);R.snapshot&&d.push(R.snapshot)}),function(_,C){const R=cn(_);R.onlineState=C;let K=!1;R.queries.forEach((J,Me)=>{for(const Ye of Me.listeners)Ye.Eu(C)&&(K=!0)}),K&&Ng(R)}(o.eventManager,e),d.length&&o.Zu.Ko(d),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}function Km(i,e,t){return Zm.apply(this,arguments)}function Zm(){return Zm=(0,ve.Z)(function*(i,e,t){const o=cn(i);o.sharedClientState.updateQueryState(e,"rejected",t);const d=o.ia.get(e),_=d&&d.key;if(_){let C=new ms(dn.comparator);C=C.insert(_,Lt.newNoDocument(_,qn.min()));const R=Di().add(_),K=new Hc(qn.min(),new Map,new Ri(fr),C,R);yield Pp(o,K),o.sa=o.sa.remove(_),o.ia.delete(e),qg(o)}else yield ed(o.localStore,e,!1).then(()=>th(o,e,t)).catch(lu)}),Zm.apply(this,arguments)}function du(i,e){return Qm.apply(this,arguments)}function Qm(){return Qm=(0,ve.Z)(function*(i,e){const t=cn(i),o=e.batch.batchId;try{const d=yield Tf(t.localStore,e);Jm(t,o,null),Gg(t,o),t.sharedClientState.updateMutationState(o,"acknowledged"),yield Sc(t,d)}catch(d){yield lu(d)}}),Qm.apply(this,arguments)}function zv(i,e,t){return Np.apply(this,arguments)}function Np(){return Np=(0,ve.Z)(function*(i,e,t){const o=cn(i);try{const d=yield function(_,C){const R=cn(_);return R.persistence.runTransaction("Reject batch","readwrite-primary",K=>{let J;return R.$s.lookupMutationBatch(K,C).next(Me=>(Wn(null!==Me),J=Me.keys(),R.$s.removeMutationBatch(K,Me))).next(()=>R.$s.performConsistencyCheck(K)).next(()=>R.ai.qs(K,J))})}(o.localStore,e);Jm(o,e,t),Gg(o,e),o.sharedClientState.updateMutationState(e,"rejected",t),yield Sc(o,d)}catch(d){yield lu(d)}}),Np.apply(this,arguments)}function kp(){return kp=(0,ve.Z)(function*(i,e){const t=cn(i);a(t.remoteStore)||Wt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const o=yield function(_){const C=cn(_);return C.persistence.runTransaction("Get highest unacknowledged batch id","readonly",R=>C.$s.getHighestUnacknowledgedBatchId(R))}(t.localStore);if(-1===o)return void e.resolve();const d=t.ua.get(o)||[];d.push(e),t.ua.set(o,d)}catch(o){const d=eh(o,"Initialization of waitForPendingWrites() operation failed");e.reject(d)}}),kp.apply(this,arguments)}function Gg(i,e){(i.ua.get(e)||[]).forEach(t=>{t.resolve()}),i.ua.delete(e)}function Jm(i,e,t){const o=cn(i);let d=o.oa[o.currentUser.toKey()];if(d){const _=d.get(e);_&&(t?_.reject(t):_.resolve(),d=d.remove(e)),o.oa[o.currentUser.toKey()]=d}}function th(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const o of i.ea.get(e))i.ta.delete(o),t&&i.Zu.la(o,t);i.ea.delete(e),i.isPrimaryClient&&i.ra.Ri(e).forEach(o=>{i.ra.containsKey(o)||Fp(i,o)})}function Fp(i,e){i.na.delete(e.path.canonicalString());const t=i.sa.get(e);null!==t&&(Hh(i.remoteStore,t),i.sa=i.sa.remove(e),i.ia.delete(t),qg(i))}function zg(i,e,t){for(const o of t)o instanceof Vg?(i.ra.addReference(o.key,e),Wg(i,o)):o instanceof Bg?(Wt("SyncEngine","Document no longer in limbo: "+o.key),i.ra.removeReference(o.key,e),i.ra.containsKey(o.key)||Fp(i,o.key)):Sn()}function Wg(i,e){const t=e.key,o=t.path.canonicalString();i.sa.get(t)||i.na.has(o)||(Wt("SyncEngine","New document in limbo: "+t),i.na.add(o),qg(i))}function qg(i){for(;i.na.size>0&&i.sa.size<i.maxConcurrentLimboResolutions;){const e=i.na.values().next().value;i.na.delete(e);const t=new dn(Wr.fromString(e)),o=i.aa.next();i.ia.set(o,new d_(t)),i.sa=i.sa.insert(t,o),jh(i.remoteStore,new Io(ho(Jl(t.path)),o,2,fn.A))}}function Sc(i,e,t){return Yg.apply(this,arguments)}function Yg(){return Yg=(0,ve.Z)(function*(i,e,t){const o=cn(i),d=[],_=[],C=[];var R;o.ta.isEmpty()||(o.ta.forEach((R,K)=>{C.push(o.ha(K,e,t).then(J=>{if(J){o.isPrimaryClient&&o.sharedClientState.updateQueryState(K.targetId,J.fromCache?"not-current":"current"),d.push(J);const Me=bl.Js(K.targetId,J);_.push(Me)}}))}),yield Promise.all(C),o.Zu.Ko(d),yield(R=(0,ve.Z)(function*(K,J){const Me=cn(K);try{yield Me.persistence.runTransaction("notifyLocalViewChanges","readwrite",Ye=>Pt.forEach(J,Ct=>Pt.forEach(Ct.zs,$t=>Me.persistence.referenceDelegate.addReference(Ye,Ct.targetId,$t)).next(()=>Pt.forEach(Ct.Hs,$t=>Me.persistence.referenceDelegate.removeReference(Ye,Ct.targetId,$t)))))}catch(Ye){if(!Ru(Ye))throw Ye;Wt("LocalStore","Failed to update sequence numbers: "+Ye)}for(const Ye of J){const Ct=Ye.targetId;if(!Ye.fromCache){const $t=Me.si.get(Ct),$n=$t.withLastLimboFreeSnapshotVersion($t.snapshotVersion);Me.si=Me.si.insert(Ct,$n)}}}),function(K,J){return R.apply(this,arguments)})(o.localStore,_))}),Yg.apply(this,arguments)}function g_(i,e){return Kg.apply(this,arguments)}function Kg(){return Kg=(0,ve.Z)(function*(i,e){const t=cn(i);if(!t.currentUser.isEqual(e)){Wt("SyncEngine","User change. New user:",e.toKey());const o=yield Oh(t.localStore,e);t.currentUser=e,(d=t).ua.forEach(C=>{C.forEach(R=>{R.reject(new T(Dt.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),d.ua.clear(),t.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),yield Sc(t,o.ci)}var d}),Kg.apply(this,arguments)}function m_(i,e){const t=cn(i),o=t.ia.get(e);if(o&&o.Xu)return Di().add(o.key);{let d=Di();const _=t.ea.get(e);if(!_)return d;for(const C of _){const R=t.ta.get(C);d=d.unionWith(R.view.qu)}return d}}function Lp(i,e){return id.apply(this,arguments)}function id(){return id=(0,ve.Z)(function*(i,e){const t=cn(i),o=yield Nh(t.localStore,e.query,!0),d=e.view.Ju(o);return t.isPrimaryClient&&zg(t,e.targetId,d.zu),d}),id.apply(this,arguments)}function y_(i,e){return nh.apply(this,arguments)}function nh(){return nh=(0,ve.Z)(function*(i,e){const t=cn(i);return zd(t.localStore,e).then(o=>Sc(t,o))}),nh.apply(this,arguments)}function __(i,e,t,o){return Zg.apply(this,arguments)}function Zg(){return Zg=(0,ve.Z)(function*(i,e,t,o){const d=cn(i),_=yield function(C,R){const K=cn(C),J=cn(K.$s);return K.persistence.runTransaction("Lookup mutation documents","readonly",Me=>J.ln(Me,R).next(Ye=>Ye?K.ai.qs(Me,Ye):Pt.resolve(null)))}(d.localStore,e);var R;null!==_?("pending"===t?yield Cn(d.remoteStore):"acknowledged"===t||"rejected"===t?(Jm(d,e,o||null),Gg(d,e),R=e,cn(cn(d.localStore).$s).dn(R)):Sn(),yield Sc(d,_)):Wt("SyncEngine","Cannot apply mutation batch with id: "+e)}),Zg.apply(this,arguments)}function zl(){return zl=(0,ve.Z)(function*(i,e){const t=cn(i);if(ad(t),ld(t),!0===e&&!0!==t.ca){const o=t.sharedClientState.getAllActiveQueryTargets(),d=yield Zh(t,o.toArray());t.ca=!0,yield Jd(t.remoteStore,!0);for(const _ of d)jh(t.remoteStore,_)}else if(!1===e&&!1!==t.ca){const o=[];let d=Promise.resolve();t.ea.forEach((_,C)=>{t.sharedClientState.isLocalQueryTarget(C)?o.push(C):d=d.then(()=>(th(t,C),ed(t.localStore,C,!0))),Hh(t.remoteStore,C)}),yield d,yield Zh(t,o),function(_){const C=cn(_);C.ia.forEach((R,K)=>{Hh(C.remoteStore,K)}),C.ra.bi(),C.ia=new Map,C.sa=new ms(dn.comparator)}(t),t.ca=!1,yield Jd(t.remoteStore,!1)}}),zl.apply(this,arguments)}function Zh(i,e,t){return Ko.apply(this,arguments)}function Ko(){return Ko=(0,ve.Z)(function*(i,e,t){const o=cn(i),d=[],_=[];for(const C of e){let R;const K=o.ea.get(C);if(K&&0!==K.length){R=yield ku(o.localStore,ho(K[0]));for(const J of K){const Me=o.ta.get(J),Ye=yield Lp(o,Me);Ye.snapshot&&_.push(Ye.snapshot)}}else{const J=yield vp(o.localStore,C);R=yield ku(o.localStore,J),yield qm(o,sd(J),C,!1)}d.push(R)}return o.Zu.Ko(_),d}),Ko.apply(this,arguments)}function sd(i){return dh(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function Vp(i){const e=cn(i);return cn(cn(e.localStore).persistence).Os()}function Wl(i,e,t,o){return Bf.apply(this,arguments)}function Bf(){return Bf=(0,ve.Z)(function*(i,e,t,o){const d=cn(i);if(d.ca)return void Wt("SyncEngine","Ignoring unexpected query state notification.");const _=d.ea.get(e);if(_&&_.length>0)switch(t){case"current":case"not-current":{const C=yield zd(d.localStore,Wu(_[0])),R=Hc.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Sc(d,C,R);break}case"rejected":yield ed(d.localStore,e,!0),th(d,e,o);break;default:Sn()}}),Bf.apply(this,arguments)}function Qh(i,e,t){return od.apply(this,arguments)}function od(){return od=(0,ve.Z)(function*(i,e,t){const o=ad(i);if(o.ca){for(const d of e){if(o.ea.has(d)){Wt("SyncEngine","Adding an already active target "+d);continue}const _=yield vp(o.localStore,d),C=yield ku(o.localStore,_);yield qm(o,sd(_),C.targetId,!1),jh(o.remoteStore,C)}for(const d of t)o.ea.has(d)&&(yield ed(o.localStore,d,!1).then(()=>{Hh(o.remoteStore,d),th(o,d)}).catch(lu))}}),od.apply(this,arguments)}function ad(i){const e=cn(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=Pp.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=m_.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Km.bind(null,e),e.Zu.Ko=Kh.bind(null,e.eventManager),e.Zu.la=l_.bind(null,e.eventManager),e}function ld(i){const e=cn(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=du.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=zv.bind(null,e),e}class rh{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ve.Z)(function*(){t.M=Qd(e.databaseInfo.databaseId),t.sharedClientState=t.da(e),t.persistence=t._a(e),yield t.persistence.start(),t.gcScheduler=t.wa(e),t.localStore=t.ma(e)})()}wa(e){return null}ma(e){return Cf(this.persistence,new Rh,e.initialUser,this.M)}_a(e){return new bp(Fh.Wi,this.M)}da(e){return new Kd}terminate(){var e=this;return(0,ve.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class ih extends rh{constructor(e,t,o){super(),this.ga=e,this.cacheSizeBytes=t,this.forceOwnership=o,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,o=this;return(0,ve.Z)(function*(){yield t().call(o,e),yield o.ga.initialize(o,e),yield ld(o.ga.syncEngine),yield Cn(o.ga.remoteStore),yield o.persistence.Is(()=>(o.gcScheduler&&!o.gcScheduler.started&&o.gcScheduler.start(o.localStore),Promise.resolve()))})()}ma(e){return Cf(this.persistence,new Rh,e.initialUser,this.M)}wa(e){return new _g(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}_a(e){const t=If(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?Po.withCacheSize(this.cacheSizeBytes):Po.DEFAULT;return new Za(this.synchronizeTabs,t,e.clientId,o,e.asyncQueue,Pf(),Zd(),this.M,this.sharedClientState,!!this.forceOwnership)}da(e){return new Kd}}class Jh extends ih{constructor(e,t){super(e,t,!1),this.ga=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,o=this;return(0,ve.Z)(function*(){yield t().call(o,e);const d=o.ga.syncEngine;o.sharedClientState instanceof Mf&&(o.sharedClientState.syncEngine={kr:__.bind(null,d),Mr:Wl.bind(null,d),Or:Qh.bind(null,d),Os:Vp.bind(null,d),Nr:y_.bind(null,d)},yield o.sharedClientState.start()),yield o.persistence.Is(function(){var _=(0,ve.Z)(function*(C){yield function Qg(i,e){return zl.apply(this,arguments)}(o.ga.syncEngine,C),o.gcScheduler&&(C&&!o.gcScheduler.started?o.gcScheduler.start(o.localStore):C||o.gcScheduler.stop())});return function(C){return _.apply(this,arguments)}}())})()}da(e){const t=Pf();if(!Mf.vt(t))throw new T(Dt.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const o=If(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Mf(t,e.asyncQueue,o,e.clientId,e.initialUser)}}class ud{initialize(e,t){var o=this;return(0,ve.Z)(function*(){o.localStore||(o.localStore=e.localStore,o.sharedClientState=e.sharedClientState,o.datastore=o.createDatastore(t),o.remoteStore=o.createRemoteStore(t),o.eventManager=o.createEventManager(t),o.syncEngine=o.createSyncEngine(t,!e.synchronizeTabs),o.sharedClientState.onlineStateHandler=d=>Hg(o.syncEngine,d,1),o.remoteStore.remoteSyncer.handleCredentialChange=g_.bind(null,o.syncEngine),yield Jd(o.remoteStore,o.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Wm}createDatastore(e){const t=Qd(e.databaseInfo.databaseId),o=new Of(e.databaseInfo);return new Ag(e.authCredentials,e.appCheckCredentials,o,t)}createRemoteStore(e){return t=this.localStore,o=this.datastore,d=e.asyncQueue,_=R=>Hg(this.syncEngine,R,0),C=Cp.vt()?new Cp:new Ip,new Tp(t,o,d,_,C);var t,o,d,_,C}createSyncEngine(e,t){return function(o,d,_,C,R,K,J){const Me=new h_(o,d,_,C,R,K);return J&&(Me.ca=!0),Me}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ve.Z)(function*(t){const o=cn(t);Wt("RemoteStore","RemoteStore shutting down."),o.lu.add(5),yield Lu(o),o.du.shutdown(),o._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Xg(i,e=10240){let t=0;return{read:()=>(0,ve.Z)(function*(){if(t<i.byteLength){const o={value:i.slice(t,t+e),done:!1};return t+=e,o}return{done:!0}})(),cancel:()=>(0,ve.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class $f{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.ya(this.observer.next,e)}error(e){this.observer.error?this.ya(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}pa(){this.muted=!0}ya(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class ey{constructor(e,t){this.Ia=e,this.M=t,this.metadata=new S,this.buffer=new Uint8Array,this.Ta=new TextDecoder("utf-8"),this.Ea().then(o=>{o&&o.Cu()?this.metadata.resolve(o.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==o?void 0:o.payload)}`))},o=>this.metadata.reject(o))}close(){return this.Ia.cancel()}getMetadata(){var e=this;return(0,ve.Z)(function*(){return e.metadata.promise})()}fa(){var e=this;return(0,ve.Z)(function*(){return yield e.getMetadata(),e.Ea()})()}Ea(){var e=this;return(0,ve.Z)(function*(){const t=yield e.Aa();if(null===t)return null;const o=e.Ta.decode(t),d=Number(o);isNaN(d)&&e.Ra(`length string (${o}) is not valid number`);const _=yield e.ba(d);return new u_(JSON.parse(_),t.length+d)})()}Pa(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Aa(){var e=this;return(0,ve.Z)(function*(){for(;e.Pa()<0&&!(yield e.Va()););if(0===e.buffer.length)return null;const t=e.Pa();t<0&&e.Ra("Reached the end of bundle when a length string is expected.");const o=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),o})()}ba(e){var t=this;return(0,ve.Z)(function*(){for(;t.buffer.length<e;)(yield t.Va())&&t.Ra("Reached the end of bundle when more is expected.");const o=t.Ta.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),o})()}Ra(e){throw this.Ia.cancel(),new Error(`Invalid bundle format: ${e}`)}Va(){var e=this;return(0,ve.Z)(function*(){const t=yield e.Ia.read();if(!t.done){const o=new Uint8Array(e.buffer.length+t.value.length);o.set(e.buffer),o.set(t.value,e.buffer.length),e.buffer=o}return t.done})()}}class ty{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ve.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new T(Dt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const o=yield(d=(0,ve.Z)(function*(_,C){const R=cn(_),K=Mu(R.M)+"/documents",J={documents:C.map($t=>Ho(R.M,$t))},Me=yield R.co("BatchGetDocuments",K,J),Ye=new Map;Me.forEach($t=>{const Qt=function rc(i,e){return"found"in e?function(t,o){Wn(!!o.found);const d=ra(t,o.found.name),_=_s(o.found.updateTime),C=new it({mapValue:{fields:o.found.fields}});return Lt.newFoundDocument(d,_,C)}(i,e):"missing"in e?function(t,o){Wn(!!o.missing),Wn(!!o.readTime);const d=ra(t,o.missing),_=_s(o.readTime);return Lt.newNoDocument(d,_)}(i,e):Sn()}(R.M,$t);Ye.set(Qt.key.toString(),Qt)});const Ct=[];return C.forEach($t=>{const Qt=Ye.get($t.toString());Wn(!!Qt),Ct.push(Qt)}),Ct}),function(_,C){return d.apply(this,arguments)})(t.datastore,e);var d;return o.forEach(d=>t.recordVersion(d)),o})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(o){this.lastWriteError=o}this.writtenDocs.add(e.toString())}delete(e){this.write(new ru(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ve.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var o;e.mutations.forEach(o=>{t.delete(o.key.toString())}),t.forEach((o,d)=>{const _=dn.fromPath(d);e.mutations.push(new Uc(_,e.precondition(_)))}),yield(o=(0,ve.Z)(function*(d,_){const C=cn(d),R=Mu(C.M)+"/documents",K={writes:_.map(J=>Oo(C.M,J))};yield C.ro("Commit",R,K)}),function(d,_){return o.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Sn();t=qn.min()}const o=this.readVersions.get(e.key.toString());if(o){if(!t.isEqual(o))throw new T(Dt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?$s.updateTime(t):$s.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(qn.min()))throw new T(Dt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return $s.updateTime(t)}return $s.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class ny{constructor(e,t,o,d){this.asyncQueue=e,this.datastore=t,this.updateFunction=o,this.deferred=d,this.va=5,this.So=new Uh(this.asyncQueue,"transaction_retry")}run(){this.va-=1,this.Sa()}Sa(){var e=this;this.So.Io((0,ve.Z)(function*(){const t=new ty(e.datastore),o=e.Da(t);o&&o.then(d=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(d)}).catch(_=>{e.Ca(_)}))}).catch(d=>{e.Ca(d)})}))}Da(e){try{const t=this.updateFunction(e);return!Ys(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ca(e){this.va>0&&this.xa(e)?(this.va-=1,this.asyncQueue.enqueueAndForget(()=>(this.Sa(),Promise.resolve()))):this.deferred.reject(e)}xa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Md(t)}return!1}}class ry{constructor(e,t,o,d){var _=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=o,this.databaseInfo=d,this.user=hi.UNAUTHENTICATED,this.clientId=Cr.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(o,function(){var C=(0,ve.Z)(function*(R){Wt("FirestoreClient","Received user=",R.uid),yield _.authCredentialListener(R),_.user=R});return function(R){return C.apply(this,arguments)}}()),this.appCheckCredentials.start(o,C=>(Wt("FirestoreClient","Received new app check token=",C),this.appCheckCredentialListener(C,this.user)))}getConfiguration(){var e=this;return(0,ve.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new T(Dt.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new S;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ve.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(o){const d=eh(o,"Failed to shutdown persistence");t.reject(d)}})),t.promise}}function Jg(i,e){return Bp.apply(this,arguments)}function Bp(){return Bp=(0,ve.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),Wt("FirestoreClient","Initializing OfflineComponentProvider");const t=yield i.getConfiguration();yield e.initialize(t);let o=t.initialUser;i.setCredentialChangeListener(function(){var d=(0,ve.Z)(function*(_){o.isEqual(_)||(yield Oh(e.localStore,_),o=_)});return function(_){return d.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i.offlineComponents=e}),Bp.apply(this,arguments)}function em(i,e){return tm.apply(this,arguments)}function tm(){return tm=(0,ve.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const t=yield $p(i);Wt("FirestoreClient","Initializing OnlineComponentProvider");const o=yield i.getConfiguration();yield e.initialize(t,o),i.setCredentialChangeListener(d=>Mg(e.remoteStore,d)),i.setAppCheckTokenChangeListener((d,_)=>Mg(e.remoteStore,_)),i.onlineComponents=e}),tm.apply(this,arguments)}function $p(i){return nm.apply(this,arguments)}function nm(){return nm=(0,ve.Z)(function*(i){return i.offlineComponents||(Wt("FirestoreClient","Using default OfflineComponentProvider"),yield Jg(i,new rh)),i.offlineComponents}),nm.apply(this,arguments)}function Up(i){return jp.apply(this,arguments)}function jp(){return jp=(0,ve.Z)(function*(i){return i.onlineComponents||(Wt("FirestoreClient","Using default OnlineComponentProvider"),yield em(i,new ud)),i.onlineComponents}),jp.apply(this,arguments)}function iy(i){return $p(i).then(e=>e.persistence)}function rm(i){return $p(i).then(e=>e.localStore)}function im(i){return Up(i).then(e=>e.remoteStore)}function sm(i){return Up(i).then(e=>e.syncEngine)}function sh(i){return om.apply(this,arguments)}function om(){return om=(0,ve.Z)(function*(i){const e=yield Up(i),t=e.eventManager;return t.onListen=f_.bind(null,e.syncEngine),t.onUnlisten=p_.bind(null,e.syncEngine),t}),om.apply(this,arguments)}function Hp(i,e,t={}){const o=new S;return i.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function(d,_,C,R,K){const J=new $f({next:Ye=>{_.enqueueAndForget(()=>Og(d,Me));const Ct=Ye.docs.has(C);!Ct&&Ye.fromCache?K.reject(new T(Dt.UNAVAILABLE,"Failed to get document because the client is offline.")):Ct&&Ye.fromCache&&R&&"server"===R.source?K.reject(new T(Dt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):K.resolve(Ye)},error:Ye=>K.reject(Ye)}),Me=new kg(Jl(C.path),J,{includeMetadataChanges:!0,Du:!0});return rd(d,Me)}(yield sh(i),i.asyncQueue,e,t,o)})),o.promise}function sy(i,e,t={}){const o=new S;return i.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function(d,_,C,R,K){const J=new $f({next:Ye=>{_.enqueueAndForget(()=>Og(d,Me)),Ye.fromCache&&"server"===R.source?K.reject(new T(Dt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):K.resolve(Ye)},error:Ye=>K.reject(Ye)}),Me=new kg(C,J,{includeMetadataChanges:!0,Du:!0});return rd(d,Me)}(yield sh(i),i.asyncQueue,e,t,o)})),o.promise}const lm=new Map;function oy(i,e,t){if(!t)throw new T(Dt.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function ay(i,e,t,o){if(!0===e&&!0===o)throw new T(Dt.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function oh(i){if(!dn.isDocumentKey(i))throw new T(Dt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function ly(i){if(dn.isDocumentKey(i))throw new T(Dt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Uf(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(t=i).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof i?"a function":Sn()}function Ti(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new T(Dt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Uf(i);throw new T(Dt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function um(i,e){if(e<=0)throw new T(Dt.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}class jf{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new T(Dt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new T(Dt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,ay("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Hf{constructor(e,t,o){this._authCredentials=t,this._appCheckCredentials=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new jf({}),this._settingsFrozen=!1,e instanceof Vs?this._databaseId=e:(this._app=e,this._databaseId=function(d){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new T(Dt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vs(d.options.projectId)}(e))}get app(){if(!this._app)throw new T(Dt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new T(Dt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new jf(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new V;switch(t.type){case"gapi":const o=t.client;return Wn(!("object"!=typeof o||null===o||!o.auth||!o.auth.getAuthHeaderValueForFirstParty)),new $e(o,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new T(Dt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=lm.get(e);t&&(Wt("ComponentProvider","Removing Datastore"),lm.delete(e),t.terminate())}(this),Promise.resolve()}}class Rs{constructor(e,t,o){this.converter=t,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Vu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Rs(this.firestore,e,this._key)}}class va{constructor(e,t,o){this.converter=t,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new va(this.firestore,e,this._query)}}class Vu extends va{constructor(e,t,o){super(e,t,Jl(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Rs(this.firestore,null,new dn(e))}withConverter(e){return new Vu(this.firestore,e,this._path)}}function cy(i,e,...t){if(i=(0,_t.m9)(i),oy("collection","path",e),i instanceof Hf){const o=Wr.fromString(e,...t);return ly(o),new Vu(i,null,o)}{if(!(i instanceof Rs||i instanceof Vu))throw new T(Dt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(Wr.fromString(e,...t));return ly(o),new Vu(i.firestore,null,o)}}function Gf(i,e,...t){if(i=(0,_t.m9)(i),1===arguments.length&&(e=Cr.R()),oy("doc","path",e),i instanceof Hf){const o=Wr.fromString(e,...t);return oh(o),new Rs(i,null,new dn(o))}{if(!(i instanceof Rs||i instanceof Vu))throw new T(Dt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(Wr.fromString(e,...t));return oh(o),new Rs(i.firestore,i instanceof Vu?i.converter:null,new dn(o))}}function dy(i,e){return i=(0,_t.m9)(i),e=(0,_t.m9)(e),(i instanceof Rs||i instanceof Vu)&&(e instanceof Rs||e instanceof Vu)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function cm(i,e){return i=(0,_t.m9)(i),e=(0,_t.m9)(e),i instanceof va&&e instanceof va&&i.firestore===e.firestore&&cl(i._query,e._query)&&i.converter===e.converter}class hy{constructor(){this.Na=Promise.resolve(),this.ka=[],this.Ma=!1,this.Oa=[],this.Fa=null,this.$a=!1,this.Ba=!1,this.La=[],this.So=new Uh(this,"async_queue_retry"),this.Ua=()=>{const t=Zd();t&&Wt("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=Zd();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ua)}get isShuttingDown(){return this.Ma}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.qa(),this.Ga(e)}enterRestrictedMode(e){if(!this.Ma){this.Ma=!0,this.Ba=e||!1;const t=Zd();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ua)}}enqueue(e){if(this.qa(),this.Ma)return new Promise(()=>{});const t=new S;return this.Ga(()=>this.Ma&&this.Ba?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ka.push(e),this.Ka()))}Ka(){var e=this;return(0,ve.Z)(function*(){if(0!==e.ka.length){try{yield e.ka[0](),e.ka.shift(),e.So.reset()}catch(t){if(!Ru(t))throw t;Wt("AsyncQueue","Operation failed with retryable error: "+t)}e.ka.length>0&&e.So.Io(()=>e.Ka())}})()}Ga(e){const t=this.Na.then(()=>(this.$a=!0,e().catch(o=>{throw this.Fa=o,this.$a=!1,Mi("INTERNAL UNHANDLED ERROR: ",function(_){let C=_.message||"";return _.stack&&(C=_.stack.includes(_.message)?_.stack:_.message+"\n"+_.stack),C}(o)),o}).then(o=>(this.$a=!1,o))));return this.Na=t,t}enqueueAfterDelay(e,t,o){this.qa(),this.La.indexOf(e)>-1&&(t=0);const d=Ap.createAndSchedule(this,e,t,o,_=>this.Qa(_));return this.Oa.push(d),d}qa(){this.Fa&&Sn()}verifyOperationInProgress(){}ja(){var e=this;return(0,ve.Z)(function*(){let t;do{t=e.Na,yield t}while(t!==e.Na)})()}Wa(e){for(const t of this.Oa)if(t.timerId===e)return!0;return!1}za(e){return this.ja().then(()=>{this.Oa.sort((t,o)=>t.targetTimeMs-o.targetTimeMs);for(const t of this.Oa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.ja()})}Ha(e){this.La.push(e)}Qa(e){const t=this.Oa.indexOf(e);this.Oa.splice(t,1)}}function zf(i){return function(e,t){if("object"!=typeof e||null===e)return!1;const o=e;for(const d of["next","error","complete"])if(d in o&&"function"==typeof o[d])return!0;return!1}(i)}class Zv{constructor(){this._progressObserver={},this._taskCompletionResolver=new S,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,o){this._progressObserver={next:e,error:t,complete:o}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class js extends Hf{constructor(e,t,o){super(e,t,o),this.type="firestore",this._queue=new hy,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||zp(this),this._firestoreClient.terminate()}}function mo(i){return i._firestoreClient||zp(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function zp(i){var e;const t=i._freezeSettings(),o=(_=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new Eu(i._databaseId,_,i._persistenceKey,(R=t).host,R.ssl,R.experimentalForceLongPolling,R.experimentalAutoDetectLongPolling,R.useFetchStreams));var _,R;i._firestoreClient=new ry(i._authCredentials,i._appCheckCredentials,i._queue,o)}function Wf(i,e,t){const o=new S;return i.asyncQueue.enqueue((0,ve.Z)(function*(){try{yield Jg(i,t),yield em(i,e),o.resolve()}catch(d){if(!("FirebaseError"===(_=d).name?_.code===Dt.FAILED_PRECONDITION||_.code===Dt.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&_ instanceof DOMException)||22===_.code||20===_.code||11===_.code))throw d;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+d),o.reject(d)}var _})).then(()=>o.promise)}function mm(i){if(i._initialized||i._terminated)throw new T(Dt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class hu{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new T(Dt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ps(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class fu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new fu(Is.fromBase64String(e))}catch(t){throw new T(Dt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new fu(Is.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Ac{constructor(e){this._methodName=e}}class qf{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new T(Dt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new T(Dt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return fr(this._lat,e._lat)||fr(this._long,e._long)}}const T_=/^__.*__$/;class py{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return null!==this.fieldMask?new Ra(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ku(e,this.data,t,this.fieldTransforms)}}class ym{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return new Ra(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function qp(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Sn()}}class Yf{constructor(e,t,o,d,_,C){this.settings=e,this.databaseId=t,this.M=o,this.ignoreUndefinedProperties=d,void 0===_&&this.Ja(),this.fieldTransforms=_||[],this.fieldMask=C||[]}get path(){return this.settings.path}get Ya(){return this.settings.Ya}Xa(e){return new Yf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Za(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),d=this.Xa({path:o,tc:!1});return d.ec(e),d}nc(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),d=this.Xa({path:o,tc:!1});return d.Ja(),d}sc(e){return this.Xa({path:void 0,tc:!0})}ic(e){return Zf(e,this.settings.methodName,this.settings.rc||!1,this.path,this.settings.oc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ja(){if(this.path)for(let e=0;e<this.path.length;e++)this.ec(this.path.get(e))}ec(e){if(0===e.length)throw this.ic("Document fields must not be empty");if(qp(this.Ya)&&T_.test(e))throw this.ic('Document fields cannot begin and end with "__"')}}class S_{constructor(e,t,o){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=o||Qd(e)}uc(e,t,o,d=!1){return new Yf({Ya:e,methodName:t,oc:o,path:ps.emptyPath(),tc:!1,rc:d},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function cd(i){const e=i._freezeSettings(),t=Qd(i._databaseId);return new S_(i._databaseId,!!e.ignoreUndefinedProperties,t)}function Kf(i,e,t,o,d,_={}){const C=i.uc(_.merge||_.mergeFields?2:0,e,t,d);vm("Data must be an object, but it was:",C,o);const R=A_(o,C);let K,J;if(_.merge)K=new Ca(C.fieldMask),J=C.fieldTransforms;else if(_.mergeFields){const Me=[];for(const Ye of _.mergeFields){const Ct=Xp(e,Ye,t);if(!C.contains(Ct))throw new T(Dt.INVALID_ARGUMENT,`Field '${Ct}' is specified in your field mask but missing from your input data.`);vy(Me,Ct)||Me.push(Ct)}K=new Ca(Me),J=C.fieldTransforms.filter(Ye=>K.covers(Ye.field))}else K=null,J=C.fieldTransforms;return new py(new it(R),K,J)}class ef extends Ac{_toFieldTransform(e){if(2!==e.Ya)throw e.ic(1===e.Ya?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ef}}function Yp(i,e,t){return new Yf({Ya:3,oc:e.settings.oc,methodName:i._methodName,tc:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class Kp extends Ac{_toFieldTransform(e){return new Vc(e.path,new Au)}isEqual(e){return e instanceof Kp}}class gy extends Ac{constructor(e,t){super(e),this.ac=t}_toFieldTransform(e){const t=Yp(this,e,!0),o=this.ac.map(_=>dd(_,t)),d=new Ma(o);return new Vc(e.path,d)}isEqual(e){return this===e}}class my extends Ac{constructor(e,t){super(e),this.ac=t}_toFieldTransform(e){const t=Yp(this,e,!0),o=this.ac.map(_=>dd(_,t)),d=new kl(o);return new Vc(e.path,d)}isEqual(e){return this===e}}class yy extends Ac{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=new Fl(e.M,Su(e.M,this.cc));return new Vc(e.path,t)}isEqual(e){return this===e}}function Zp(i,e,t,o){const d=i.uc(1,e,t);vm("Data must be an object, but it was:",d,o);const _=[],C=it.empty();Ol(o,(K,J)=>{const Me=ao(e,K,t);J=(0,_t.m9)(J);const Ye=d.nc(Me);if(J instanceof ef)_.push(Me);else{const Ct=dd(J,Ye);null!=Ct&&(_.push(Me),C.set(Me,Ct))}});const R=new Ca(_);return new ym(C,R,d.fieldTransforms)}function Qp(i,e,t,o,d,_){const C=i.uc(1,e,t),R=[Xp(e,o,t)],K=[d];if(_.length%2!=0)throw new T(Dt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Ct=0;Ct<_.length;Ct+=2)R.push(Xp(e,_[Ct])),K.push(_[Ct+1]);const J=[],Me=it.empty();for(let Ct=R.length-1;Ct>=0;--Ct)if(!vy(J,R[Ct])){const $t=R[Ct];let Qt=K[Ct];Qt=(0,_t.m9)(Qt);const $n=C.nc($t);if(Qt instanceof ef)J.push($t);else{const Lr=dd(Qt,$n);null!=Lr&&(J.push($t),Me.set($t,Lr))}}const Ye=new Ca(J);return new ym(Me,Ye,C.fieldTransforms)}function _m(i,e,t,o=!1){return dd(t,i.uc(o?4:3,e))}function dd(i,e){if(_y(i=(0,_t.m9)(i)))return vm("Unsupported field value:",e,i),A_(i,e);if(i instanceof Ac)return function(t,o){if(!qp(o.Ya))throw o.ic(`${t._methodName}() can only be used with update() and set()`);if(!o.path)throw o.ic(`${t._methodName}() is not currently supported inside arrays`);const d=t._toFieldTransform(o);d&&o.fieldTransforms.push(d)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.tc&&4!==e.Ya)throw e.ic("Nested arrays are not supported");return function(t,o){const d=[];let _=0;for(const C of t){let R=dd(C,o.sc(_));null==R&&(R={nullValue:"NULL_VALUE"}),d.push(R),_++}return{arrayValue:{values:d}}}(i,e)}return function(t,o){if(null===(t=(0,_t.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Su(o.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const d=Ii.fromDate(t);return{timestampValue:iu(o.M,d)}}if(t instanceof Ii){const d=new Ii(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:iu(o.M,d)}}if(t instanceof qf)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof fu)return{bytesValue:su(o.M,t._byteString)};if(t instanceof Rs){const d=o.databaseId,_=t.firestore._databaseId;if(!_.isEqual(d))throw o.ic(`Document reference is for database ${_.projectId}/${_.database} but should be for database ${d.projectId}/${d.database}`);return{referenceValue:Gc(t.firestore._databaseId||o.databaseId,t._key.path)}}throw o.ic(`Unsupported field value: ${Uf(t)}`)}(i,e)}function A_(i,e){const t={};return vd(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ol(i,(o,d)=>{const _=dd(d,e.Za(o));null!=_&&(t[o]=_)}),{mapValue:{fields:t}}}function _y(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof Ii||i instanceof qf||i instanceof fu||i instanceof Rs||i instanceof Ac)}function vm(i,e,t){if(!_y(t)||"object"!=typeof(o=t)||null===o||Object.getPrototypeOf(o)!==Object.prototype&&null!==Object.getPrototypeOf(o)){const o=Uf(t);throw e.ic("an object"===o?i+" a custom object":i+" "+o)}var o}function Xp(i,e,t){if((e=(0,_t.m9)(e))instanceof hu)return e._internalPath;if("string"==typeof e)return ao(i,e);throw Zf("Field path arguments must be of type string or ",i,!1,void 0,t)}const x_=new RegExp("[~\\*/\\[\\]]");function ao(i,e,t){if(e.search(x_)>=0)throw Zf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new hu(...e.split("."))._internalPath}catch(o){throw Zf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function Zf(i,e,t,o,d){const _=o&&!o.isEmpty(),C=void 0!==d;let R=`Function ${e}() called with invalid data`;t&&(R+=" (via `toFirestore()`)"),R+=". ";let K="";return(_||C)&&(K+=" (found",_&&(K+=` in field ${o}`),C&&(K+=` in document ${d}`),K+=")"),new T(Dt.INVALID_ARGUMENT,R+i+K)}function vy(i,e){return i.some(t=>t.isEqual(e))}class Qf{constructor(e,t,o,d,_){this._firestore=e,this._userDataWriter=t,this._key=o,this._document=d,this._converter=_}get id(){return this._key.path.lastSegment()}get ref(){return new Rs(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Ey(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Jp("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Ey extends Qf{data(){return super.data()}}function Jp(i,e){return"string"==typeof e?ao(i,e):e instanceof hu?e._internalPath:e._delegate._internalPath}class hd{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Bu extends Qf{constructor(e,t,o,d,_,C){super(e,t,o,d,C),this._firestore=e,this._firestoreImpl=e,this.metadata=_}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new $u(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const o=this._document.data.field(Jp("DocumentSnapshot.get",e));if(null!==o)return this._userDataWriter.convertValue(o,t.serverTimestamps)}}}class $u extends Bu{data(e={}){return super.data(e)}}class fd{constructor(e,t,o,d){this._firestore=e,this._userDataWriter=t,this._snapshot=d,this.metadata=new hd(d.hasPendingWrites,d.fromCache),this.query=o}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(o=>{e.call(t,new $u(this._firestore,this._userDataWriter,o.key,o,new hd(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new T(Dt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,d){if(o._snapshot.oldDocs.isEmpty()){let _=0;return o._snapshot.docChanges.map(C=>({type:"added",doc:new $u(o._firestore,o._userDataWriter,C.doc.key,C.doc,new hd(o._snapshot.mutatedKeys.has(C.doc.key),o._snapshot.fromCache),o.query.converter),oldIndex:-1,newIndex:_++}))}{let _=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(C=>d||3!==C.type).map(C=>{const R=new $u(o._firestore,o._userDataWriter,C.doc.key,C.doc,new hd(o._snapshot.mutatedKeys.has(C.doc.key),o._snapshot.fromCache),o.query.converter);let K=-1,J=-1;return 0!==C.type&&(K=_.indexOf(C.doc.key),_=_.delete(C.doc.key)),1!==C.type&&(_=_.add(C.doc),J=_.indexOf(C.doc.key)),{type:M_(C.type),doc:R,oldIndex:K,newIndex:J}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function M_(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Sn()}}function Em(i,e){return i instanceof Bu&&e instanceof Bu?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof fd&&e instanceof fd&&i._firestore===e._firestore&&cm(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}function by(i){if(Pc(i)&&0===i.explicitOrderBy.length)throw new T(Dt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class tf{}function ah(i,...e){for(const t of e)i=t._apply(i);return i}class wy extends tf{constructor(e,t,o){super(),this.hc=e,this.lc=t,this.fc=o,this.type="where"}_apply(e){const t=cd(e.firestore),o=function(d,_,C,R,K,J,Me){let Ye;if(K.isKeyField()){if("array-contains"===J||"array-contains-any"===J)throw new T(Dt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${J}' queries on documentId().`);if("in"===J||"not-in"===J){nf(Me,J);const $t=[];for(const Qt of Me)$t.push(eg(R,d,Qt));Ye={arrayValue:{values:$t}}}else Ye=eg(R,d,Me)}else"in"!==J&&"not-in"!==J&&"array-contains-any"!==J||nf(Me,J),Ye=_m(C,"where",Me,"in"===J||"not-in"===J);const Ct=Ms.create(K,J,Ye);return function($t,Qt){if(Qt.S()){const Lr=zu($t);if(null!==Lr&&!Lr.isEqual(Qt.field))throw new T(Dt.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Lr.toString()}' and '${Qt.field.toString()}'`);const Qs=Cu($t);null!==Qs&&Ay(0,Qt.field,Qs)}const $n=function(Lr,Qs){for(const oi of Lr.filters)if(Qs.indexOf(oi.op)>=0)return oi.op;return null}($t,function(Lr){switch(Lr){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Qt.op));if(null!==$n)throw new T(Dt.INVALID_ARGUMENT,$n===Qt.op?`Invalid query. You cannot use more than one '${Qt.op.toString()}' filter.`:`Invalid query. You cannot use '${Qt.op.toString()}' filters with '${$n.toString()}' filters.`)}(d,Ct),Ct}(e._query,0,t,e.firestore._databaseId,this.hc,this.lc,this.fc);return new va(e.firestore,e.converter,function(d,_){const C=d.filters.concat([_]);return new fa(d.path,d.collectionGroup,d.explicitOrderBy.slice(),C,d.limit,d.limitType,d.startAt,d.endAt)}(e._query,o))}}class Uu extends tf{constructor(e,t){super(),this.hc=e,this.dc=t,this.type="orderBy"}_apply(e){const t=function(o,d,_){if(null!==o.startAt)throw new T(Dt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==o.endAt)throw new T(Dt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const C=new Wa(d,_);return function(R,K){if(null===Cu(R)){const J=zu(R);null!==J&&Ay(0,J,K.field)}}(o,C),C}(e._query,this.hc,this.dc);return new va(e.firestore,e.converter,function(o,d){const _=o.explicitOrderBy.concat([d]);return new fa(o.path,o.collectionGroup,_,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,t))}}class Iy extends tf{constructor(e,t,o){super(),this.type=e,this._c=t,this.wc=o}_apply(e){return new va(e.firestore,e.converter,Cd(e._query,this._c,this.wc))}}class ql extends tf{constructor(e,t,o){super(),this.type=e,this.mc=t,this.gc=o}_apply(e){const t=Sy(e,this.type,this.mc,this.gc);return new va(e.firestore,e.converter,(d=t,new fa((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,d,o.endAt)));var o,d}}class Ty extends tf{constructor(e,t,o){super(),this.type=e,this.mc=t,this.gc=o}_apply(e){const t=Sy(e,this.type,this.mc,this.gc);return new va(e.firestore,e.converter,(d=t,new fa((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,o.startAt,d)));var o,d}}function Sy(i,e,t,o){if(t[0]=(0,_t.m9)(t[0]),t[0]instanceof Qf)return function(d,_,C,R,K){if(!R)throw new T(Dt.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${C}().`);const J=[];for(const Me of Du(d))if(Me.field.isKeyField())J.push(Ql(_,R.key));else{const Ye=R.data.field(Me.field);if(sl(Ye))throw new T(Dt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+Me.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===Ye){const Ct=Me.field.canonicalString();throw new T(Dt.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Ct}' (used as the orderBy) does not exist.`)}J.push(Ye)}return new Ro(J,K)}(i._query,i.firestore._databaseId,e,t[0]._document,o);{const d=cd(i.firestore);return function(_,C,R,K,J,Me){const Ye=_.explicitOrderBy;if(J.length>Ye.length)throw new T(Dt.INVALID_ARGUMENT,`Too many arguments provided to ${K}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Ct=[];for(let $t=0;$t<J.length;$t++){const Qt=J[$t];if(Ye[$t].field.isKeyField()){if("string"!=typeof Qt)throw new T(Dt.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${K}(), but got a ${typeof Qt}`);if(!Nl(_)&&-1!==Qt.indexOf("/"))throw new T(Dt.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${K}() must be a plain document ID, but '${Qt}' contains a slash.`);const $n=_.path.child(Wr.fromString(Qt));if(!dn.isDocumentKey($n))throw new T(Dt.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${K}() must result in a valid document path, but '${$n}' is not because it contains an odd number of segments.`);const Lr=new dn($n);Ct.push(Ql(C,Lr))}else{const $n=_m(R,K,Qt);Ct.push($n)}}return new Ro(Ct,Me)}(i._query,i.firestore._databaseId,d,e,t,o)}}function eg(i,e,t){if("string"==typeof(t=(0,_t.m9)(t))){if(""===t)throw new T(Dt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Nl(e)&&-1!==t.indexOf("/"))throw new T(Dt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const o=e.path.child(Wr.fromString(t));if(!dn.isDocumentKey(o))throw new T(Dt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return Ql(i,new dn(o))}if(t instanceof Rs)return Ql(i,t._key);throw new T(Dt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Uf(t)}.`)}function nf(i,e){if(!Array.isArray(i)||0===i.length)throw new T(Dt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(i.length>10)throw new T(Dt.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function Ay(i,e,t){if(!t.isEqual(e))throw new T(Dt.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class tg{convertValue(e,t="none"){switch(Bs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return vi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ja(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Sn()}}convertObject(e,t){const o={};return Ol(e.fields,(d,_)=>{o[d]=this.convertValue(_,t)}),o}convertGeoPoint(e){return new qf(vi(e.latitude),vi(e.longitude))}convertArray(e,t){return(e.values||[]).map(o=>this.convertValue(o,t))}convertServerTimestamp(e,t){switch(t){case"previous":const o=Ls(e);return null==o?null:this.convertValue(o,t);case"estimate":return this.convertTimestamp(Cs(e));default:return null}}convertTimestamp(e){const t=da(e);return new Ii(t.seconds,t.nanos)}convertDocumentKey(e,t){const o=Wr.fromString(e);Wn(fe(o));const d=new Vs(o.get(1),o.get(3)),_=new dn(o.popFirst(5));return d.isEqual(t)||Mi(`Document ${_} contains a document reference within a different database (${d.projectId}/${d.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),_}}function ng(i,e,t){let o;return o=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,o}class xy extends tg{constructor(e){super(),this.firestore=e}convertBytes(e){return new fu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Rs(this.firestore,null,t)}}class wm{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=cd(e)}set(e,t,o){this._verifyNotCommitted();const d=gu(e,this._firestore),_=ng(d.converter,t,o),C=Kf(this._dataReader,"WriteBatch.set",d._key,_,null!==d.converter,o);return this._mutations.push(C.toMutation(d._key,$s.none())),this}update(e,t,o,...d){this._verifyNotCommitted();const _=gu(e,this._firestore);let C;return C="string"==typeof(t=(0,_t.m9)(t))||t instanceof hu?Qp(this._dataReader,"WriteBatch.update",_._key,t,o,d):Zp(this._dataReader,"WriteBatch.update",_._key,t),this._mutations.push(C.toMutation(_._key,$s.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=gu(e,this._firestore);return this._mutations=this._mutations.concat(new ru(t._key,$s.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new T(Dt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function gu(i,e){if((i=(0,_t.m9)(i)).firestore!==e)throw new T(Dt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class pd extends tg{constructor(e){super(),this.firestore=e}convertBytes(e){return new fu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Rs(this.firestore,null,t)}}function Dm(i,e,t){i=Ti(i,Rs);const o=Ti(i.firestore,js),d=ng(i.converter,e,t);return rf(o,[Kf(cd(o),"setDoc",i._key,d,null!==i.converter,t).toMutation(i._key,$s.none())])}function Tm(i,e,t,...o){i=Ti(i,Rs);const d=Ti(i.firestore,js),_=cd(d);let C;return C="string"==typeof(e=(0,_t.m9)(e))||e instanceof hu?Qp(_,"updateDoc",i._key,e,t,o):Zp(_,"updateDoc",i._key,e),rf(d,[C.toMutation(i._key,$s.exists(!0))])}function Sm(i,...e){var t,o,d;i=(0,_t.m9)(i);let _={includeMetadataChanges:!1},C=0;"object"!=typeof e[C]||zf(e[C])||(_=e[C],C++);const R={includeMetadataChanges:_.includeMetadataChanges};if(zf(e[C])){const Ye=e[C];e[C]=null===(t=Ye.next)||void 0===t?void 0:t.bind(Ye),e[C+1]=null===(o=Ye.error)||void 0===o?void 0:o.bind(Ye),e[C+2]=null===(d=Ye.complete)||void 0===d?void 0:d.bind(Ye)}let K,J,Me;if(i instanceof Rs)J=Ti(i.firestore,js),Me=Jl(i._key.path),K={next:Ye=>{e[C]&&e[C](Am(J,i,Ye))},error:e[C+1],complete:e[C+2]};else{const Ye=Ti(i,va);J=Ti(Ye.firestore,js),Me=Ye._query;const Ct=new pd(J);K={next:$t=>{e[C]&&e[C](new fd(J,Ct,Ye,$t))},error:e[C+1],complete:e[C+2]},by(i._query)}return function(Ye,Ct,$t,Qt){const $n=new $f(Qt),Lr=new kg(Ct,$n,$t);return Ye.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return rd(yield sh(Ye),Lr)})),()=>{$n.pa(),Ye.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return Og(yield sh(Ye),Lr)}))}}(mo(J),Me,R,K)}function rf(i,e){return function(t,o){const d=new S;return t.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function Gv(i,e,t){return Ym.apply(this,arguments)}(yield sm(t),o,d)})),d.promise}(mo(i),e)}function Am(i,e,t){const o=t.docs.get(e._key),d=new pd(i);return new Bu(i,d,e._key,o,new hd(t.hasPendingWrites,t.fromCache),e.converter)}class k_ extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=cd(e)}get(e){const t=gu(e,this._firestore),o=new xy(this._firestore);return this._transaction.lookup([t._key]).then(d=>{if(!d||1!==d.length)return Sn();const _=d[0];if(_.isFoundDocument())return new Qf(this._firestore,o,_.key,_,t.converter);if(_.isNoDocument())return new Qf(this._firestore,o,t._key,null,t.converter);throw Sn()})}set(e,t,o){const d=gu(e,this._firestore),_=ng(d.converter,t,o),C=Kf(this._dataReader,"Transaction.set",d._key,_,null!==d.converter,o);return this._transaction.set(d._key,C),this}update(e,t,o,...d){const _=gu(e,this._firestore);let C;return C="string"==typeof(t=(0,_t.m9)(t))||t instanceof hu?Qp(this._dataReader,"Transaction.update",_._key,t,o,d):Zp(this._dataReader,"Transaction.update",_._key,t),this._transaction.update(_._key,C),this}delete(e){const t=gu(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=gu(e,this._firestore),o=new pd(this._firestore);return super.get(e).then(d=>new Bu(this._firestore,o,t._key,d._document,new hd(!1,!1),t.converter))}}function xm(i,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new T("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}function Fy(){if("undefined"==typeof Uint8Array)throw new T("unimplemented","Uint8Arrays are not available in this environment.")}function Ly(){if(!function il(){return"undefined"!=typeof atob}())throw new T("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(i,e=!0){ca=ot.SDK_VERSION,(0,ot._registerComponent)(new Le.wA("firestore",(t,{options:o})=>{const d=t.getProvider("app").getImmediate(),_=new js(d,new se(t.getProvider("auth-internal")),new vn(t.getProvider("app-check-internal")));return o=Object.assign({useFetchStreams:e},o),_._setSettings(o),_},"PUBLIC")),(0,ot.registerVersion)(Gu,"3.4.7",i),(0,ot.registerVersion)(Gu,"3.4.7","esm2017")}();class Xf{constructor(e){this._delegate=e}static fromBase64String(e){return Ly(),new Xf(fu.fromBase64String(e))}static fromUint8Array(e){return Fy(),new Xf(fu.fromUint8Array(e))}toBase64(){return Ly(),this._delegate.toBase64()}toUint8Array(){return Fy(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function ig(i){return function Vy(i,e){if("object"!=typeof i||null===i)return!1;const t=i;for(const o of e)if(o in t&&"function"==typeof t[o])return!0;return!1}(i,["next","error","complete"])}class By{enableIndexedDbPersistence(e,t){return function hm(i,e){mm(i=Ti(i,js));const t=mo(i),o=i._freezeSettings(),d=new ud;return Wf(t,d,new ih(d,o.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function I_(i){mm(i=Ti(i,js));const e=mo(i),t=i._freezeSettings(),o=new ud;return Wf(e,o,new Jh(o,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function Wp(i){if(i._initialized&&!i._terminated)throw new T(Dt.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new S;return i._queue.enqueueAndForgetEvenWhileRestricted((0,ve.Z)(function*(){try{yield(t=(0,ve.Z)(function*(o){if(!Ka.vt())return Promise.resolve();const d=o+"main";yield Ka.delete(d)}),function(o){return t.apply(this,arguments)})(If(i._databaseId,i._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Mm{constructor(e,t,o){this._delegate=t,this._persistenceProvider=o,this.INTERNAL={delete:()=>this.terminate()},e instanceof Vs||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&As("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,o={}){!function uy(i,e,t,o={}){var d;const _=(i=Ti(i,Hf))._getSettings();if("firestore.googleapis.com"!==_.host&&_.host!==e&&As("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},_),{host:`${e}:${t}`,ssl:!1})),o.mockUserToken){let C,R;if("string"==typeof o.mockUserToken)C=o.mockUserToken,R=hi.MOCK_USER;else{C=(0,_t.Sg)(o.mockUserToken,null===(d=i._app)||void 0===d?void 0:d.options.projectId);const K=o.mockUserToken.sub||o.mockUserToken.user_id;if(!K)throw new T(Dt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");R=new hi(K)}i._authCredentials=new W(new D(C,R))}}(this._delegate,e,t,o)}enableNetwork(){return function Qv(i){return function v_(i){return i.asyncQueue.enqueue((0,ve.Z)(function*(){const e=yield iy(i),t=yield im(i);return e.setNetworkEnabled(!0),function(o){const d=cn(o);return d.lu.delete(0),Xd(d)}(t)}))}(mo(i=Ti(i,js)))}(this._delegate)}disableNetwork(){return function C_(i){return function Wv(i){return i.asyncQueue.enqueue((0,ve.Z)(function*(){const e=yield iy(i),t=yield im(i);return e.setNetworkEnabled(!1),(o=(0,ve.Z)(function*(d){const _=cn(d);_.lu.add(0),yield Lu(_),_._u.set("Offline")}),function(d){return o.apply(this,arguments)})(t);var o}))}(mo(i=Ti(i,js)))}(this._delegate)}enablePersistence(e){let t=!1,o=!1;return e&&(t=!!e.synchronizeTabs,o=!!e.experimentalForceOwningTab,ay("synchronizeTabs",t,"experimentalForceOwningTab",o)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,o)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function fm(i){return function(e){const t=new S;return e.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function Xm(i,e){return kp.apply(this,arguments)}(yield sm(e),t)})),t.promise}(mo(i=Ti(i,js)))}(this._delegate)}onSnapshotsInSync(e){return function Ny(i,e){return function qv(i,e){const t=new $f(e);return i.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return o=yield sh(i),d=t,cn(o).Tu.add(d),void d.next();var o,d})),()=>{t.pa(),i.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return o=yield sh(i),d=t,void cn(o).Tu.delete(d);var o,d}))}}(mo(i=Ti(i,js)),zf(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new T("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new lh(this,cy(this._delegate,e))}catch(t){throw Ea(t,"collection()","Firestore.collection()")}}doc(e){try{return new Il(this,Gf(this._delegate,e))}catch(t){throw Ea(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Xa(this,function w_(i,e){if(i=Ti(i,Hf),oy("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new T(Dt.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new va(i,null,(t=e,new fa(Wr.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ea(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function F_(i,e){return function Yv(i,e){const t=new S;return i.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){const o=yield(d=i,Up(d).then(_=>_.datastore));var d;new ny(i.asyncQueue,o,e,t).run()})),t.promise}(mo(i=Ti(i,js)),t=>e(new k_(i,t)))}(this._delegate,t=>e(new Rm(this,t)))}batch(){return mo(this._delegate),new Om(new wm(this._delegate,e=>rf(this._delegate,e)))}loadBundle(e){return function pm(i,e){const t=mo(i=Ti(i,js)),o=new Zv;return function Kv(i,e,t,o){const d=function(_,C){let R;return R="string"==typeof _?(new TextEncoder).encode(_):_,K=function(K,J){if(K instanceof Uint8Array)return Xg(K,J);if(K instanceof ArrayBuffer)return Xg(new Uint8Array(K),J);if(K instanceof ReadableStream)return K.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(R),new ey(K,C);var K}(t,Qd(e));i.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){!function Xh(i,e,t){const o=cn(i);var d;(d=(0,ve.Z)(function*(_,C,R){try{const K=yield C.getMetadata();if(yield function(Ct,$t){const Qt=cn(Ct),$n=_s($t.createTime);return Qt.persistence.runTransaction("hasNewerBundle","readonly",Lr=>Qt.ds.getBundleMetadata(Lr,$t.id)).then(Lr=>!!Lr&&Lr.createTime.compareTo($n)>=0)}(_.localStore,K))return yield C.close(),R._completeWith({taskState:"Success",documentsLoaded:(Ct=K).totalDocuments,bytesLoaded:Ct.totalBytes,totalDocuments:Ct.totalDocuments,totalBytes:Ct.totalBytes}),Promise.resolve(new Set);R._updateProgress(Lg(K));const J=new Fg(K,_.localStore,C.M);let Me=yield C.fa();for(;Me;){const Ct=yield J.Nu(Me);Ct&&R._updateProgress(Ct),Me=yield C.fa()}const Ye=yield J.complete();return yield Sc(_,Ye.Ou,void 0),yield function(Ct,$t){const Qt=cn(Ct);return Qt.persistence.runTransaction("Save bundle","readwrite",$n=>Qt.ds.saveBundleMetadata($n,$t))}(_.localStore,K),R._completeWith(Ye.progress),Promise.resolve(Ye.Mu)}catch(K){return As("SyncEngine",`Loading bundle failed with ${K}`),R._failWith(K),Promise.resolve(new Set)}var Ct}),function(_,C,R){return d.apply(this,arguments)})(o,e,t).then(d=>{o.sharedClientState.notifyBundleLoaded(d)})}(yield sm(i),d,o)}))}(t,i._databaseId,e,o),o}(this._delegate,e)}namedQuery(e){return function gm(i,e){return function b_(i,e){return i.asyncQueue.enqueue((0,ve.Z)(function*(){return function(t,o){const d=cn(t);return d.persistence.runTransaction("Get named query","readonly",_=>d.ds.getNamedQuery(_,o))}(yield rm(i),e)}))}(mo(i=Ti(i,js)),e).then(t=>t?new va(i,null,t.query):null)}(this._delegate,e).then(t=>t?new Xa(this,t):null)}}class Jf extends tg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xf(new fu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Il.forKey(t,this.firestore,null)}}class Rm{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Jf(e)}get(e){const t=yd(e);return this._delegate.get(t).then(o=>new ep(this._firestore,new Bu(this._firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,t.converter)))}set(e,t,o){const d=yd(e);return o?(xm("Transaction.set",o),this._delegate.set(d,t,o)):this._delegate.set(d,t),this}update(e,t,o,...d){const _=yd(e);return 2===arguments.length?this._delegate.update(_,t):this._delegate.update(_,t,o,...d),this}delete(e){const t=yd(e);return this._delegate.delete(t),this}}class Om{constructor(e){this._delegate=e}set(e,t,o){const d=yd(e);return o?(xm("WriteBatch.set",o),this._delegate.set(d,t,o)):this._delegate.set(d,t),this}update(e,t,o,...d){const _=yd(e);return 2===arguments.length?this._delegate.update(_,t):this._delegate.update(_,t,o,...d),this}delete(e){const t=yd(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class gd{constructor(e,t,o){this._firestore=e,this._userDataWriter=t,this._delegate=o}fromFirestore(e,t){const o=new $u(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Hu(this._firestore,o),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const o=gd.INSTANCES;let d=o.get(e);d||(d=new WeakMap,o.set(e,d));let _=d.get(t);return _||(_=new gd(e,new Jf(e),t),d.set(t,_)),_}}gd.INSTANCES=new WeakMap;class Il{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Jf(e)}static forPath(e,t,o){if(e.length%2!=0)throw new T("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Il(t,new Rs(t._delegate,o,new dn(e)))}static forKey(e,t,o){return new Il(t,new Rs(t._delegate,o,e))}get id(){return this._delegate.id}get parent(){return new lh(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new lh(this.firestore,cy(this._delegate,e))}catch(t){throw Ea(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,_t.m9)(e))instanceof Rs&&dy(this._delegate,e)}set(e,t){t=xm("DocumentReference.set",t);try{return t?Dm(this._delegate,e,t):Dm(this._delegate,e)}catch(o){throw Ea(o,"setDoc()","DocumentReference.set()")}}update(e,t,...o){try{return 1===arguments.length?Tm(this._delegate,e):Tm(this._delegate,e,t,...o)}catch(d){throw Ea(d,"updateDoc()","DocumentReference.update()")}}delete(){return function Oy(i){return rf(Ti(i.firestore,js),[new ru(i._key,$s.none())])}(this._delegate)}onSnapshot(...e){const t=md(e),o=Uy(e,d=>new ep(this.firestore,new Bu(this.firestore._delegate,this._userDataWriter,d._key,d._document,d.metadata,this._delegate.converter)));return Sm(this._delegate,t,o)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function My(i){i=Ti(i,Rs);const e=Ti(i.firestore,js),t=mo(e),o=new pd(e);return function E_(i,e){const t=new S;return i.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return(o=(0,ve.Z)(function*(d,_,C){try{const R=yield function(K,J){const Me=cn(K);return Me.persistence.runTransaction("read document","readonly",Ye=>Me.ai.Bs(Ye,J))}(d,_);R.isFoundDocument()?C.resolve(R):R.isNoDocument()?C.resolve(null):C.reject(new T(Dt.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(R){const K=eh(R,`Failed to get document '${_} from cache`);C.reject(K)}}),function(d,_,C){return o.apply(this,arguments)})(yield rm(i),e,t);var o})),t.promise}(t,i._key).then(d=>new Bu(e,o,i._key,d,new hd(null!==d&&d.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function Im(i){i=Ti(i,Rs);const e=Ti(i.firestore,js);return Hp(mo(e),i._key,{source:"server"}).then(t=>Am(e,i,t))}(this._delegate):function N_(i){i=Ti(i,Rs);const e=Ti(i.firestore,js);return Hp(mo(e),i._key).then(t=>Am(e,i,t))}(this._delegate),t.then(o=>new ep(this.firestore,new Bu(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)))}withConverter(e){return new Il(this.firestore,this._delegate.withConverter(e?gd.getInstance(this.firestore,e):null))}}function Ea(i,e,t){return i.message=i.message.replace(e,t),i}function md(i){for(const e of i)if("object"==typeof e&&!ig(e))return e;return{}}function Uy(i,e){var t,o;let d;return d=ig(i[0])?i[0]:ig(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:_=>{d.next&&d.next(e(_))},error:null===(t=d.error)||void 0===t?void 0:t.bind(d),complete:null===(o=d.complete)||void 0===o?void 0:o.bind(d)}}class ep{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Il(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Em(this._delegate,e._delegate)}}class Hu extends ep{data(e){const t=this._delegate.data(e);return function Rl(i,e){i||Sn()}(void 0!==t),t}}class Xa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Jf(e)}where(e,t,o){try{return new Xa(this.firestore,ah(this._delegate,function bm(i,e,t){const o=e,d=Jp("where",i);return new wy(d,o,t)}(e,t,o)))}catch(d){throw Ea(d,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Xa(this.firestore,ah(this._delegate,function R_(i,e="asc"){const t=e,o=Jp("orderBy",i);return new Uu(o,t)}(e,t)))}catch(o){throw Ea(o,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Xa(this.firestore,ah(this._delegate,function ju(i){return um("limit",i),new Iy("limit",i,"F")}(e)))}catch(t){throw Ea(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Xa(this.firestore,ah(this._delegate,function pu(i){return um("limitToLast",i),new Iy("limitToLast",i,"L")}(e)))}catch(t){throw Ea(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Xa(this.firestore,ah(this._delegate,function Cy(...i){return new ql("startAt",i,!0)}(...e)))}catch(t){throw Ea(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Xa(this.firestore,ah(this._delegate,function Dy(...i){return new ql("startAfter",i,!1)}(...e)))}catch(t){throw Ea(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Xa(this.firestore,ah(this._delegate,function O_(...i){return new Ty("endBefore",i,!1)}(...e)))}catch(t){throw Ea(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Xa(this.firestore,ah(this._delegate,function P_(...i){return new Ty("endAt",i,!0)}(...e)))}catch(t){throw Ea(t,"endAt()","Query.endAt()")}}isEqual(e){return cm(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function Cm(i){i=Ti(i,va);const e=Ti(i.firestore,js),t=mo(e),o=new pd(e);return function am(i,e){const t=new S;return i.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return(o=(0,ve.Z)(function*(d,_,C){try{const R=yield Nh(d,_,!0),K=new $g(_,R.hi),J=K.Gu(R.documents),Me=K.applyChanges(J,!1);C.resolve(Me.snapshot)}catch(R){const K=eh(R,`Failed to execute query '${_} against cache`);C.reject(K)}}),function(d,_,C){return o.apply(this,arguments)})(yield rm(i),e,t);var o})),t.promise}(t,i._query).then(d=>new fd(e,o,i,d))}(this._delegate):"server"===(null==e?void 0:e.source)?function Ry(i){i=Ti(i,va);const e=Ti(i.firestore,js),t=mo(e),o=new pd(e);return sy(t,i._query,{source:"server"}).then(d=>new fd(e,o,i,d))}(this._delegate):function rg(i){i=Ti(i,va);const e=Ti(i.firestore,js),t=mo(e),o=new pd(e);return by(i._query),sy(t,i._query).then(d=>new fd(e,o,i,d))}(this._delegate),t.then(o=>new jy(this.firestore,new fd(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)))}onSnapshot(...e){const t=md(e),o=Uy(e,d=>new jy(this.firestore,new fd(this.firestore._delegate,this._userDataWriter,this._delegate,d._snapshot)));return Sm(this._delegate,t,o)}withConverter(e){return new Xa(this.firestore,this._delegate.withConverter(e?gd.getInstance(this.firestore,e):null))}}class Pm{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Hu(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class jy{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Xa(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Hu(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Pm(this._firestore,t))}forEach(e,t){this._delegate.forEach(o=>{e.call(t,new Hu(this._firestore,o))})}isEqual(e){return Em(this._delegate,e._delegate)}}class lh extends Xa{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Il(this.firestore,e):null}doc(e){try{return new Il(this.firestore,void 0===e?Gf(this._delegate):Gf(this._delegate,e))}catch(t){throw Ea(t,"doc()","CollectionReference.doc()")}}add(e){return function Py(i,e){const t=Ti(i.firestore,js),o=Gf(i),d=ng(i.converter,e);return rf(t,[Kf(cd(i.firestore),"addDoc",o._key,d,null!==i.converter,{}).toMutation(o._key,$s.exists(!1))]).then(()=>o)}(this._delegate,e).then(t=>new Il(this.firestore,t))}isEqual(e){return dy(this._delegate,e._delegate)}withConverter(e){return new lh(this.firestore,this._delegate.withConverter(e?gd.getInstance(this.firestore,e):null))}}function yd(i){return Ti(i,Rs)}class Hy{constructor(...e){this._delegate=new hu(...e)}static documentId(){return new Hy(ps.keyField().canonicalString())}isEqual(e){return(e=(0,_t.m9)(e))instanceof hu&&this._delegate._internalPath.isEqual(e._internalPath)}}class rr{constructor(e){this._delegate=e}static serverTimestamp(){const e=function V_(){return new Kp("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new rr(e)}static delete(){const e=function L_(){return new ef("deleteField")}();return e._methodName="FieldValue.delete",new rr(e)}static arrayUnion(...e){const t=function B_(...i){return new gy("arrayUnion",i)}(...e);return t._methodName="FieldValue.arrayUnion",new rr(t)}static arrayRemove(...e){const t=function $_(...i){return new my("arrayRemove",i)}(...e);return t._methodName="FieldValue.arrayRemove",new rr(t)}static increment(e){const t=function U_(i){return new yy("increment",i)}(e);return t._methodName="FieldValue.increment",new rr(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const G_={Firestore:Mm,GeoPoint:qf,Timestamp:Ii,Blob:Xf,Transaction:Rm,WriteBatch:Om,DocumentReference:Il,DocumentSnapshot:ep,Query:Xa,QueryDocumentSnapshot:Hu,QuerySnapshot:jy,CollectionReference:lh,FieldPath:Hy,FieldValue:rr,setLogLevel:function $y(i){!function Ia(i){Bo.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function W_(i){(function z_(i,e){i.INTERNAL.registerComponent(new Le.wA("firestore-compat",t=>{const o=t.getProvider("app-compat").getImmediate(),d=t.getProvider("firestore").getImmediate();return e(o,d)},"PUBLIC").setServiceProps(Object.assign({},G_)))})(i,(e,t)=>new Mm(e,t,new By)),i.registerVersion("@firebase/firestore-compat","0.1.16")}(ht.Z);var mu=j(4941),q_=j(440),sg=j(127);function Zs(i,e){return function og(i,e=re.z){return new Z.y(t=>{let o;return null!=e?e.schedule(()=>{o=i.onSnapshot({includeMetadataChanges:!0},t)}):o=i.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=o&&o()}})}(i,e)}function ag(i,e){return Zs(i,e).pipe((0,te.U)(t=>({payload:t,type:"query"})))}function lg(i,e){return ag(i,e).pipe((0,me.O)(void 0),we(),(0,te.U)(([t,o])=>{const d=o.payload.docChanges(),_=d.map(C=>({type:C.type,payload:C}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(o.payload.metadata)&&o.payload.docs.forEach((C,R)=>{const K=d.find(Me=>Me.doc.ref.isEqual(C.ref)),J=null==t?void 0:t.payload.docs.find(Me=>Me.ref.isEqual(C.ref));K&&JSON.stringify(K.doc.metadata)===JSON.stringify(C.metadata)||!K&&J&&JSON.stringify(J.metadata)===JSON.stringify(C.metadata)||_.push({type:"modified",payload:{oldIndex:R,newIndex:R,type:"modified",doc:C}})}),_}))}function Gy(i,e,t){return lg(i,t).pipe((0,he.R)((o,d)=>function zy(i,e,t){return e.forEach(o=>{t.indexOf(o.type)>-1&&(i=function Wy(i,e){switch(e.type){case"added":if(!i[e.newIndex]||!i[e.newIndex].doc.ref.isEqual(e.doc.ref))return ug(i,e.newIndex,0,e);break;case"modified":if(null==i[e.oldIndex]||i[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=i.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return ug(i,e.newIndex,1,e)}break;case"removed":if(i[e.oldIndex]&&i[e.oldIndex].doc.ref.isEqual(e.doc.ref))return ug(i,e.oldIndex,1)}return i}(i,o))}),i}(o,d.map(_=>_.payload),e),[]),(0,Ue.x)(),(0,te.U)(o=>o.map(d=>({type:d.type,payload:d}))))}function ug(i,e,t,...o){const d=i.slice();return d.splice(e,t,...o),d}function Nm(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}class qy{constructor(e,t,o){this.ref=e,this.query=t,this.afs=o}stateChanges(e){let t=lg(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,te.U)(o=>o.filter(d=>e.indexOf(d.type)>-1)))),t.pipe((0,me.O)(void 0),we(),(0,Oe.h)(([o,d])=>d.length>0||!o),(0,te.U)(([o,d])=>d),ae.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,he.R)((t,o)=>[...t,...o],[]))}snapshotChanges(e){const t=Nm(e);return Gy(this.query,t,this.afs.schedulers.outsideAngular).pipe(ae.iC)}valueChanges(e={}){return ag(this.query,this.afs.schedulers.outsideAngular).pipe((0,te.U)(t=>t.payload.docs.map(o=>e.idField?Object.assign(Object.assign({},o.data()),{[e.idField]:o.id}):o.data())),ae.iC)}get(e){return(0,Ne.D)(this.query.get(e)).pipe(ae.iC)}add(e){return this.ref.add(e)}doc(e){return new Yy(this.ref.doc(e),this.afs)}}class Yy{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const o=this.ref.collection(e),{ref:d,query:_}=tp(o,t);return new qy(d,_,this.afs)}snapshotChanges(){return function e0(i,e){return Zs(i,e).pipe((0,me.O)(void 0),we(),(0,te.U)(([t,o])=>o.exists?(null==t?void 0:t.exists)?{payload:o,type:"modified"}:{payload:o,type:"added"}:{payload:o,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ae.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,te.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Ne.D)(this.ref.get(e)).pipe(ae.iC)}}class Y_{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?lg(this.query,this.afs.schedulers.outsideAngular).pipe((0,te.U)(t=>t.filter(o=>e.indexOf(o.type)>-1)),(0,Oe.h)(t=>t.length>0),ae.iC):lg(this.query,this.afs.schedulers.outsideAngular).pipe(ae.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,he.R)((t,o)=>[...t,...o],[]))}snapshotChanges(e){const t=Nm(e);return Gy(this.query,t,this.afs.schedulers.outsideAngular).pipe(ae.iC)}valueChanges(e={}){return ag(this.query,this.afs.schedulers.outsideAngular).pipe((0,te.U)(o=>o.payload.docs.map(d=>e.idField?Object.assign({[e.idField]:d.id},d.data()):d.data())),ae.iC)}get(e){return(0,Ne.D)(this.query.get(e)).pipe(ae.iC)}}const sf=new u.OlP("angularfire2.enableFirestorePersistence"),Ky=new u.OlP("angularfire2.firestore.persistenceSettings"),K_=new u.OlP("angularfire2.firestore.settings"),Z_=new u.OlP("angularfire2.firestore.use-emulator");function tp(i,e=(t=>t)){return{query:e(i),ref:i}}let km=(()=>{class i{constructor(t,o,d,_,C,R,K,J,Me,Ye,Ct,$t,Qt,$n,Lr,Qs,oi){this.schedulers=K;const lo=(0,_e.on)(t,R,o),Os=Me;Ye&&(0,mu.nw)(lo,R,Ct,Qt,$n,Lr,$t,Qs),[this.firestore,this.persistenceEnabled$]=(0,_e.cc)(`${lo.name}.firestore`,"AngularFirestore",lo.name,()=>{const Ds=R.runOutsideAngular(()=>lo.firestore());if(_&&Ds.settings(_),Os&&Ds.useEmulator(...Os),d&&!(0,Pe.PM)(C)){const Gi=()=>{try{return(0,Ne.D)(Ds.enablePersistence(J||void 0).then(()=>!0,()=>!1))}catch(Ja){return"undefined"!=typeof console&&console.warn(Ja),(0,Se.of)(!1)}};return[Ds,R.runOutsideAngular(Gi)]}return[Ds,(0,Se.of)(!1)]},[_,Os,d])}collection(t,o){let d;d="string"==typeof t?this.firestore.collection(t):t;const{ref:_,query:C}=tp(d,o),R=this.schedulers.ngZone.run(()=>_);return new qy(R,C,this)}collectionGroup(t,o){const d=o||(C=>C),_=this.firestore.collectionGroup(t);return new Y_(d(_),this)}doc(t){let o;o="string"==typeof t?this.firestore.doc(t):t;const d=this.schedulers.ngZone.run(()=>o);return new Yy(d,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(t){return new(t||i)(u.LFG(_e.Dh),u.LFG(_e.xv,8),u.LFG(sf,8),u.LFG(K_,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(ae.HU),u.LFG(Ky,8),u.LFG(Z_,8),u.LFG(mu.zQ,8),u.LFG(mu.Qv,8),u.LFG(mu.L6,8),u.LFG(mu._Q,8),u.LFG(mu.rT,8),u.LFG(mu.lh,8),u.LFG(mu.f7,8),u.LFG(q_.nm,8))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),Zy=(()=>{class i{constructor(){sg.Z.registerVersion("angularfire",ae.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:i,providers:[{provide:sf,useValue:!0},{provide:Ky,useValue:t}]}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({providers:[km]}),i})()},2011:(Jt,ct,j)=>{"use strict";j.d(ct,{hO:()=>he,xv:()=>ye,Dh:()=>we,GT:()=>ae,cc:()=>Ue,on:()=>de,pX:()=>Se});var u=j(5e3),re=j(127),Z=j(6351);Jt=j.hmd(Jt);const Ne=["ngOnDestroy"],Se=(ke,ht,ve,ot={})=>new Proxy(ke,{get:(Le,rt)=>ve.runOutsideAngular(()=>{var _t;if(ke[rt])return(null===(_t=null==ot?void 0:ot.spy)||void 0===_t?void 0:_t.get)&&ot.spy.get(rt,ke[rt]),ke[rt];if(Ne.indexOf(rt)>-1)return()=>{};const St=ht.toPromise().then(qe=>{const pe=qe&&qe[rt];return"function"==typeof pe?pe.bind(qe):pe&&pe.then?pe.then(Ve=>ve.run(()=>Ve)):ve.run(()=>pe)});return new Proxy(()=>{},{get:(qe,pe)=>St[pe],apply:(qe,pe,Ve)=>St.then(Ee=>{var Te;const Je=Ee&&Ee(...Ve);return(null===(Te=null==ot?void 0:ot.spy)||void 0===Te?void 0:Te.apply)&&ot.spy.apply(rt,Ve,Je),Je})})})}),ae=(ke,ht)=>{ht.forEach(ve=>{Object.getOwnPropertyNames(ve.prototype||ve).forEach(ot=>{Object.defineProperty(ke.prototype,ot,Object.getOwnPropertyDescriptor(ve.prototype||ve,ot))})})};class Ie{constructor(ht){return ht}}const we=new u.OlP("angularfire2.app.options"),ye=new u.OlP("angularfire2.app.name");function de(ke,ht,ve){const Le="object"==typeof ve&&ve||{};Le.name=Le.name||"string"==typeof ve&&ve||"[DEFAULT]";const _t=re.Z.apps.filter(St=>St&&St.name===Le.name)[0]||ht.runOutsideAngular(()=>re.Z.initializeApp(ke,Le));try{JSON.stringify(ke)!==JSON.stringify(_t.options)&&me("error",`${_t.name} Firebase App already initialized with different options${Jt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(St){}return new Ie(_t)}const me=(ke,...ht)=>{(0,u.X6Q)()&&"undefined"!=typeof console&&console[ke](...ht)},te={provide:Ie,useFactory:de,deps:[we,u.R0b,[new u.FiY,ye]]};let he=(()=>{class ke{constructor(ve){re.Z.registerVersion("angularfire",Z.q4.full,"core"),re.Z.registerVersion("angularfire",Z.q4.full,"app-compat"),re.Z.registerVersion("angular",u.q4F.full,ve.toString())}static initializeApp(ve,ot){return{ngModule:ke,providers:[{provide:we,useValue:ve},{provide:ye,useValue:ot}]}}}return ke.\u0275fac=function(ve){return new(ve||ke)(u.LFG(u.Lbi))},ke.\u0275mod=u.oAB({type:ke}),ke.\u0275inj=u.cJS({providers:[te]}),ke})();function Ue(ke,ht,ve,ot,Le){const[,rt,_t]=globalThis.\u0275AngularfireInstanceCache.find(St=>St[0]===ke)||[];if(rt)return function Oe(ke,ht){try{return ke.toString()===ht.toString()}catch(ve){return ke===ht}}(Le,_t)||(Pe("error",`${ht} was already initialized on the ${ve} Firebase App with different settings.${_e?" You may need to reload as Firebase is not HMR aware.":""}`),Pe("warn",{is:Le,was:_t})),rt;{const St=ot();return globalThis.\u0275AngularfireInstanceCache.push([ke,St,Le]),St}}const _e=!!Jt.hot,Pe=(ke,...ht)=>{(0,u.X6Q)()&&"undefined"!=typeof console&&console[ke](...ht)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},6351:(Jt,ct,j)=>{"use strict";j.d(ct,{q4:()=>vi,iC:()=>Ha,HU:()=>co,vb:()=>Ed,JM:()=>wu});var u=j(5e3),re=j(5867),Z=j(5861),Ne=j(9681),Se=j(2090),ae=j(4859),Ie=j(1877);const we="@firebase/installations",me="w:0.5.7",te="FIS_v2",ke=new Se.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function ht(N){return N instanceof Se.ZR&&N.code.includes("request-failed")}function ve({projectId:N}){return`https://firebaseinstallations.googleapis.com/v1/projects/${N}/installations`}function ot(N){return{token:N.token,requestStatus:2,expiresIn:Ve(N.expiresIn),creationTime:Date.now()}}function Le(N,z){return rt.apply(this,arguments)}function rt(){return(rt=(0,Z.Z)(function*(N,z){const xe=(yield z.json()).error;return ke.create("request-failed",{requestName:N,serverCode:xe.code,serverMessage:xe.message,serverStatus:xe.status})})).apply(this,arguments)}function _t({apiKey:N}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":N})}function St(N,{refreshToken:z}){const oe=_t(N);return oe.append("Authorization",function Ee(N){return`${te} ${N}`}(z)),oe}function qe(N){return pe.apply(this,arguments)}function pe(){return(pe=(0,Z.Z)(function*(N){const z=yield N();return z.status>=500&&z.status<600?N():z})).apply(this,arguments)}function Ve(N){return Number(N.replace("s","000"))}function Te(N,z){return Je.apply(this,arguments)}function Je(){return(Je=(0,Z.Z)(function*({appConfig:N,heartbeatServiceProvider:z},{fid:oe}){const xe=ve(N),it=_t(N),vt=z.getImmediate({optional:!0});if(vt){const tr=yield vt.getHeartbeatsHeader();tr&&it.append("x-firebase-client",tr)}const Mn={method:"POST",headers:it,body:JSON.stringify({fid:oe,authVersion:te,appId:N.appId,sdkVersion:me})},lr=yield qe(()=>fetch(xe,Mn));if(lr.ok){const tr=yield lr.json();return{fid:tr.fid||oe,registrationStatus:2,refreshToken:tr.refreshToken,authToken:ot(tr.authToken)}}throw yield Le("Create Installation",lr)})).apply(this,arguments)}function Ze(N){return new Promise(z=>{setTimeout(z,N)})}const Xt=/^[cdef][\w-]{21}$/;function st(){try{const N=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(N),N[0]=112+N[0]%16;const oe=function Qe(N){return function Ut(N){return btoa(String.fromCharCode(...N)).replace(/\+/g,"-").replace(/\//g,"_")}(N).substr(0,22)}(N);return Xt.test(oe)?oe:""}catch(N){return""}}function nt(N){return`${N.appName}!${N.appId}`}const at=new Map;function Re(N,z){const oe=nt(N);ft(oe,z),function Zt(N,z){const oe=function An(){return!gn&&"BroadcastChannel"in self&&(gn=new BroadcastChannel("[Firebase] FID Change"),gn.onmessage=N=>{ft(N.data.key,N.data.fid)}),gn}();oe&&oe.postMessage({key:N,fid:z}),function ln(){0===at.size&&gn&&(gn.close(),gn=null)}()}(oe,z)}function ft(N,z){const oe=at.get(N);if(oe)for(const xe of oe)xe(z)}let gn=null;const xr="firebase-installations-store";let Kn=null;function Yn(){return Kn||(Kn=(0,Se.X3)("firebase-installations-database",1,(N,z)=>{0===z&&N.createObjectStore(xr)})),Kn}function jt(N,z){return ir.apply(this,arguments)}function ir(){return(ir=(0,Z.Z)(function*(N,z){const oe=nt(N),it=(yield Yn()).transaction(xr,"readwrite"),vt=it.objectStore(xr),Lt=yield vt.get(oe);return yield vt.put(z,oe),yield it.complete,(!Lt||Lt.fid!==z.fid)&&Re(N,z.fid),z})).apply(this,arguments)}function Hr(N){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,Z.Z)(function*(N){const z=nt(N),xe=(yield Yn()).transaction(xr,"readwrite");yield xe.objectStore(xr).delete(z),yield xe.complete})).apply(this,arguments)}function cr(N,z){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,Z.Z)(function*(N,z){const oe=nt(N),it=(yield Yn()).transaction(xr,"readwrite"),vt=it.objectStore(xr),Lt=yield vt.get(oe),Mn=z(Lt);return void 0===Mn?yield vt.delete(oe):yield vt.put(Mn,oe),yield it.complete,Mn&&(!Lt||Lt.fid!==Mn.fid)&&Re(N,Mn.fid),Mn})).apply(this,arguments)}function on(N){return qr.apply(this,arguments)}function qr(){return(qr=(0,Z.Z)(function*(N){let z;const oe=yield cr(N.appConfig,xe=>{const it=Gt(xe),vt=ni(N,it);return z=vt.registrationPromise,vt.installationEntry});return""===oe.fid?{installationEntry:yield z}:{installationEntry:oe,registrationPromise:z}})).apply(this,arguments)}function Gt(N){return Vn(N||{fid:st(),registrationStatus:0})}function ni(N,z){if(0===z.registrationStatus){if(!navigator.onLine)return{installationEntry:z,registrationPromise:Promise.reject(ke.create("app-offline"))};const oe={fid:z.fid,registrationStatus:1,registrationTime:Date.now()},xe=function kn(N,z){return hn.apply(this,arguments)}(N,oe);return{installationEntry:oe,registrationPromise:xe}}return 1===z.registrationStatus?{installationEntry:z,registrationPromise:Dn(N)}:{installationEntry:z}}function hn(){return(hn=(0,Z.Z)(function*(N,z){try{const oe=yield Te(N,z);return jt(N.appConfig,oe)}catch(oe){throw ht(oe)&&409===oe.customData.serverCode?yield Hr(N.appConfig):yield jt(N.appConfig,{fid:z.fid,registrationStatus:0}),oe}})).apply(this,arguments)}function Dn(N){return jr.apply(this,arguments)}function jr(){return(jr=(0,Z.Z)(function*(N){let z=yield Oi(N.appConfig);for(;1===z.registrationStatus;)yield Ze(100),z=yield Oi(N.appConfig);if(0===z.registrationStatus){const{installationEntry:oe,registrationPromise:xe}=yield on(N);return xe||oe}return z})).apply(this,arguments)}function Oi(N){return cr(N,z=>{if(!z)throw ke.create("installation-not-found");return Vn(z)})}function Vn(N){return function Pn(N){return 1===N.registrationStatus&&N.registrationTime+1e4<Date.now()}(N)?{fid:N.fid,registrationStatus:0}:N}function ai(N,z){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,Z.Z)(function*({appConfig:N,heartbeatServiceProvider:z},oe){const xe=wn(N,oe),it=St(N,oe),vt=z.getImmediate({optional:!0});if(vt){const tr=yield vt.getHeartbeatsHeader();tr&&it.append("x-firebase-client",tr)}const Mn={method:"POST",headers:it,body:JSON.stringify({installation:{sdkVersion:me,appId:N.appId}})},lr=yield qe(()=>fetch(xe,Mn));if(lr.ok)return ot(yield lr.json());throw yield Le("Generate Auth Token",lr)})).apply(this,arguments)}function wn(N,{fid:z}){return`${ve(N)}/${z}/authTokens:generate`}function li(N){return er.apply(this,arguments)}function er(){return(er=(0,Z.Z)(function*(N,z=!1){let oe;const xe=yield cr(N.appConfig,vt=>{if(!Rn(vt))throw ke.create("not-registered");const Lt=vt.authToken;if(!z&&Fe(Lt))return vt;if(1===Lt.requestStatus)return oe=nn(N,z),vt;{if(!navigator.onLine)throw ke.create("app-offline");const Mn=je(vt);return oe=yn(N,Mn),Mn}});return oe?yield oe:xe.authToken})).apply(this,arguments)}function nn(N,z){return kt.apply(this,arguments)}function kt(){return(kt=(0,Z.Z)(function*(N,z){let oe=yield en(N.appConfig);for(;1===oe.authToken.requestStatus;)yield Ze(100),oe=yield en(N.appConfig);const xe=oe.authToken;return 0===xe.requestStatus?li(N,z):xe})).apply(this,arguments)}function en(N){return cr(N,z=>{if(!Rn(z))throw ke.create("not-registered");return function Et(N){return 1===N.requestStatus&&N.requestTime+1e4<Date.now()}(z.authToken)?Object.assign(Object.assign({},z),{authToken:{requestStatus:0}}):z})}function yn(N,z){return _n.apply(this,arguments)}function _n(){return(_n=(0,Z.Z)(function*(N,z){try{const oe=yield ai(N,z),xe=Object.assign(Object.assign({},z),{authToken:oe});return yield jt(N.appConfig,xe),oe}catch(oe){if(!ht(oe)||401!==oe.customData.serverCode&&404!==oe.customData.serverCode){const xe=Object.assign(Object.assign({},z),{authToken:{requestStatus:0}});yield jt(N.appConfig,xe)}else yield Hr(N.appConfig);throw oe}})).apply(this,arguments)}function Rn(N){return void 0!==N&&2===N.registrationStatus}function Fe(N){return 2===N.requestStatus&&!function Ce(N){const z=Date.now();return z<N.creationTime||N.creationTime+N.expiresIn<z+36e5}(N)}function je(N){const z={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},N),{authToken:z})}function qt(){return(qt=(0,Z.Z)(function*(N){const z=N,{installationEntry:oe,registrationPromise:xe}=yield on(z);return xe?xe.catch(console.error):li(z).catch(console.error),oe.fid})).apply(this,arguments)}function Qn(){return(Qn=(0,Z.Z)(function*(N,z=!1){const oe=N;return yield Yr(oe),(yield li(oe,z)).token})).apply(this,arguments)}function Yr(N){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,Z.Z)(function*(N){const{registrationPromise:z}=yield on(N);z&&(yield z)})).apply(this,arguments)}function Or(N){return ke.create("missing-app-config-values",{valueName:N})}const bi="installations",Mt=N=>{const z=N.getProvider("app").getImmediate(),oe=function Mr(N){if(!N||!N.options)throw Or("App Configuration");if(!N.name)throw Or("App Name");const z=["projectId","apiKey","appId"];for(const oe of z)if(!N.options[oe])throw Or(oe);return{appName:N.name,projectId:N.options.projectId,apiKey:N.options.apiKey,appId:N.options.appId}}(z);return{app:z,appConfig:oe,heartbeatServiceProvider:(0,Ne._getProvider)(z,"heartbeat"),_delete:()=>Promise.resolve()}},mn=N=>{const z=N.getProvider("app").getImmediate(),oe=(0,Ne._getProvider)(z,bi).getImmediate();return{getId:()=>function ut(N){return qt.apply(this,arguments)}(oe),getToken:it=>function In(N){return Qn.apply(this,arguments)}(oe,it)}};(function sr(){(0,Ne._registerComponent)(new ae.wA(bi,Mt,"PUBLIC")),(0,Ne._registerComponent)(new ae.wA("installations-internal",mn,"PRIVATE"))})(),(0,Ne.registerVersion)(we,"0.5.7"),(0,Ne.registerVersion)(we,"0.5.7","esm2017");const yr="@firebase/remote-config",Br=new Se.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class pn{constructor(z,oe,xe,it){this.client=z,this.storage=oe,this.storageCache=xe,this.logger=it}isCachedDataFresh(z,oe){if(!oe)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const xe=Date.now()-oe,it=xe<=z;return this.logger.debug(`Config fetch cache check. Cache age millis: ${xe}. Cache max age millis (minimumFetchIntervalMillis setting): ${z}. Is cache hit: ${it}.`),it}fetch(z){var oe=this;return(0,Z.Z)(function*(){const[xe,it]=yield Promise.all([oe.storage.getLastSuccessfulFetchTimestampMillis(),oe.storage.getLastSuccessfulFetchResponse()]);if(it&&oe.isCachedDataFresh(z.cacheMaxAgeMillis,xe))return it;z.eTag=it&&it.eTag;const vt=yield oe.client.fetch(z),Lt=[oe.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===vt.status&&Lt.push(oe.storage.setLastSuccessfulFetchResponse(vt)),yield Promise.all(Lt),vt})()}}function xn(N=navigator){return N.languages&&N.languages[0]||N.language}class Tn{constructor(z,oe,xe,it,vt,Lt){this.firebaseInstallations=z,this.sdkVersion=oe,this.namespace=xe,this.projectId=it,this.apiKey=vt,this.appId=Lt}fetch(z){var oe=this;return(0,Z.Z)(function*(){const[xe,it]=yield Promise.all([oe.firebaseInstallations.getId(),oe.firebaseInstallations.getToken()]),Lt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${oe.projectId}/namespaces/${oe.namespace}:fetch?key=${oe.apiKey}`,Mn={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":z.eTag||"*"},lr={sdk_version:oe.sdkVersion,app_instance_id:xe,app_instance_id_token:it,app_id:oe.appId,language_code:xn()},tr={method:"POST",headers:Mn,body:JSON.stringify(lr)},Fr=fetch(Lt,tr),ur=new Promise((Eo,Pr)=>{z.signal.addEventListener(()=>{const bo=new Error("The operation was aborted.");bo.name="AbortError",Pr(bo)})});let xs;try{yield Promise.race([Fr,ur]),xs=yield Fr}catch(Eo){let Pr="fetch-client-network";throw"AbortError"===Eo.name&&(Pr="fetch-timeout"),Br.create(Pr,{originalErrorMessage:Eo.message})}let ti=xs.status;const io=xs.headers.get("ETag")||void 0;let ea,Sa;if(200===xs.status){let Eo;try{Eo=yield xs.json()}catch(Pr){throw Br.create("fetch-client-parse",{originalErrorMessage:Pr.message})}ea=Eo.entries,Sa=Eo.state}if("INSTANCE_STATE_UNSPECIFIED"===Sa?ti=500:"NO_CHANGE"===Sa?ti=304:("NO_TEMPLATE"===Sa||"EMPTY_CONFIG"===Sa)&&(ea={}),304!==ti&&200!==ti)throw Br.create("fetch-status",{httpStatus:ti});return{status:ti,eTag:io,config:ea}})()}}class Xi{constructor(z,oe){this.client=z,this.storage=oe}fetch(z){var oe=this;return(0,Z.Z)(function*(){const xe=(yield oe.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return oe.attemptFetch(z,xe)})()}attemptFetch(z,{throttleEndTimeMillis:oe,backoffCount:xe}){var it=this;return(0,Z.Z)(function*(){yield function zn(N,z){return new Promise((oe,xe)=>{const it=Math.max(z-Date.now(),0),vt=setTimeout(oe,it);N.addEventListener(()=>{clearTimeout(vt),xe(Br.create("fetch-throttle",{throttleEndTimeMillis:z}))})})}(z.signal,oe);try{const vt=yield it.client.fetch(z);return yield it.storage.deleteThrottleMetadata(),vt}catch(vt){if(!function ri(N){if(!(N instanceof Se.ZR&&N.customData))return!1;const z=Number(N.customData.httpStatus);return 429===z||500===z||503===z||504===z}(vt))throw vt;const Lt={throttleEndTimeMillis:Date.now()+(0,Se.$s)(xe),backoffCount:xe+1};return yield it.storage.setThrottleMetadata(Lt),it.attemptFetch(z,Lt)}})()}}class lt{constructor(z,oe,xe,it,vt){this.app=z,this._client=oe,this._storageCache=xe,this._storage=it,this._logger=vt,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ot(N,z){const oe=N.target.error||void 0;return Br.create(z,{originalErrorMessage:oe&&oe.message})}const zt="app_namespace_store";class Xn{constructor(z,oe,xe,it=function ii(){return new Promise((N,z)=>{try{const oe=indexedDB.open("firebase_remote_config",1);oe.onerror=xe=>{z(Ot(xe,"storage-open"))},oe.onsuccess=xe=>{N(xe.target.result)},oe.onupgradeneeded=xe=>{0===xe.oldVersion&&xe.target.result.createObjectStore(zt,{keyPath:"compositeKey"})}}catch(oe){z(Br.create("storage-open",{originalErrorMessage:oe}))}})}()){this.appId=z,this.appName=oe,this.namespace=xe,this.openDbPromise=it}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(z){return this.set("last_fetch_status",z)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(z){return this.set("last_successful_fetch_timestamp_millis",z)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(z){return this.set("last_successful_fetch_response",z)}getActiveConfig(){return this.get("active_config")}setActiveConfig(z){return this.set("active_config",z)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(z){return this.set("active_config_etag",z)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(z){return this.set("throttle_metadata",z)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(z){var oe=this;return(0,Z.Z)(function*(){const xe=yield oe.openDbPromise;return new Promise((it,vt)=>{const Mn=xe.transaction([zt],"readonly").objectStore(zt),lr=oe.createCompositeKey(z);try{const tr=Mn.get(lr);tr.onerror=Fr=>{vt(Ot(Fr,"storage-get"))},tr.onsuccess=Fr=>{const ur=Fr.target.result;it(ur?ur.value:void 0)}}catch(tr){vt(Br.create("storage-get",{originalErrorMessage:tr&&tr.message}))}})})()}set(z,oe){var xe=this;return(0,Z.Z)(function*(){const it=yield xe.openDbPromise;return new Promise((vt,Lt)=>{const lr=it.transaction([zt],"readwrite").objectStore(zt),tr=xe.createCompositeKey(z);try{const Fr=lr.put({compositeKey:tr,value:oe});Fr.onerror=ur=>{Lt(Ot(ur,"storage-set"))},Fr.onsuccess=()=>{vt()}}catch(Fr){Lt(Br.create("storage-set",{originalErrorMessage:Fr&&Fr.message}))}})})()}delete(z){var oe=this;return(0,Z.Z)(function*(){const xe=yield oe.openDbPromise;return new Promise((it,vt)=>{const Mn=xe.transaction([zt],"readwrite").objectStore(zt),lr=oe.createCompositeKey(z);try{const tr=Mn.delete(lr);tr.onerror=Fr=>{vt(Ot(Fr,"storage-delete"))},tr.onsuccess=()=>{it()}}catch(tr){vt(Br.create("storage-delete",{originalErrorMessage:tr&&tr.message}))}})})()}createCompositeKey(z){return[this.appId,this.appName,this.namespace,z].join()}}class Zr{constructor(z){this.storage=z}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var z=this;return(0,Z.Z)(function*(){const oe=z.storage.getLastFetchStatus(),xe=z.storage.getLastSuccessfulFetchTimestampMillis(),it=z.storage.getActiveConfig(),vt=yield oe;vt&&(z.lastFetchStatus=vt);const Lt=yield xe;Lt&&(z.lastSuccessfulFetchTimestampMillis=Lt);const Mn=yield it;Mn&&(z.activeConfig=Mn)})()}setLastFetchStatus(z){return this.lastFetchStatus=z,this.storage.setLastFetchStatus(z)}setLastSuccessfulFetchTimestampMillis(z){return this.lastSuccessfulFetchTimestampMillis=z,this.storage.setLastSuccessfulFetchTimestampMillis(z)}setActiveConfig(z){return this.activeConfig=z,this.storage.setActiveConfig(z)}}function ki(){return zi.apply(this,arguments)}function zi(){return(zi=(0,Z.Z)(function*(){if(!(0,Se.hl)())return!1;try{return yield(0,Se.eu)()}catch(N){return!1}})).apply(this,arguments)}!function Ji(){(0,Ne._registerComponent)(new ae.wA("remote-config",function N(z,{instanceIdentifier:oe}){const xe=z.getProvider("app").getImmediate(),it=z.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Br.create("registration-window");if(!(0,Se.hl)())throw Br.create("indexed-db-unavailable");const{projectId:vt,apiKey:Lt,appId:Mn}=xe.options;if(!vt)throw Br.create("registration-project-id");if(!Lt)throw Br.create("registration-api-key");if(!Mn)throw Br.create("registration-app-id");const lr=new Xn(Mn,xe.name,oe=oe||"firebase"),tr=new Zr(lr),Fr=new Ie.Yd(yr);Fr.logLevel=Ie.in.ERROR;const ur=new Tn(it,Ne.SDK_VERSION,oe,vt,Lt,Mn),xs=new Xi(ur,lr),ti=new pn(xs,lr,tr,Fr),io=new lt(xe,ti,tr,lr,Fr);return function Q(N){const z=(0,Se.m9)(N);z._initializePromise||(z._initializePromise=z._storageCache.loadFromStorage().then(()=>{z._isInitializationComplete=!0}))}(io),io},"PUBLIC").setMultipleInstances(!0)),(0,Ne.registerVersion)(yr,"0.3.6"),(0,Ne.registerVersion)(yr,"0.3.6","esm2017")}();const ls="/firebase-messaging-sw.js",Hs="/firebase-cloud-messaging-push-scope",xi="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",vs="google.c.a.c_id",si="google.c.a.c_l",uo="google.c.a.ts",Zo="google.c.a.e";var Ts=(()=>{return(N=Ts||(Ts={})).PUSH_RECEIVED="push-received",N.NOTIFICATION_CLICKED="notification-clicked",Ts;var N})();function es(N){const z=new Uint8Array(N);return btoa(String.fromCharCode(...z)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Do(N){const oe=(N+"=".repeat((4-N.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),xe=atob(oe),it=new Uint8Array(xe.length);for(let vt=0;vt<xe.length;++vt)it[vt]=xe.charCodeAt(vt);return it}const $i="fcm_token_details_db",Qr="fcm_token_object_Store";function Ps(N){return Ns.apply(this,arguments)}function Ns(){return Ns=(0,Z.Z)(function*(N){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(vt=>vt.name).includes($i))return null;let z=null;return(yield(0,Se.X3)($i,5,function(){var xe=(0,Z.Z)(function*(it,vt,Lt,Mn){var lr;if(vt<2||!it.objectStoreNames.contains(Qr))return;const tr=Mn.objectStore(Qr),Fr=yield tr.index("fcmSenderId").get(N);if(yield tr.clear(),Fr)if(2===vt){const ur=Fr;if(!ur.auth||!ur.p256dh||!ur.endpoint)return;z={token:ur.fcmToken,createTime:null!==(lr=ur.createTime)&&void 0!==lr?lr:Date.now(),subscriptionOptions:{auth:ur.auth,p256dh:ur.p256dh,endpoint:ur.endpoint,swScope:ur.swScope,vapidKey:"string"==typeof ur.vapidKey?ur.vapidKey:es(ur.vapidKey)}}}else if(3===vt){const ur=Fr;z={token:ur.fcmToken,createTime:ur.createTime,subscriptionOptions:{auth:es(ur.auth),p256dh:es(ur.p256dh),endpoint:ur.endpoint,swScope:ur.swScope,vapidKey:es(ur.vapidKey)}}}else if(4===vt){const ur=Fr;z={token:ur.fcmToken,createTime:ur.createTime,subscriptionOptions:{auth:es(ur.auth),p256dh:es(ur.p256dh),endpoint:ur.endpoint,swScope:ur.swScope,vapidKey:es(ur.vapidKey)}}}});return function(it,vt,Lt,Mn){return xe.apply(this,arguments)}}())).close(),yield(0,Se.Lj)($i),yield(0,Se.Lj)("fcm_vapid_details_db"),yield(0,Se.Lj)("undefined"),cs(z)?z:null}),Ns.apply(this,arguments)}function cs(N){if(!N||!N.subscriptionOptions)return!1;const{subscriptionOptions:z}=N;return"number"==typeof N.createTime&&N.createTime>0&&"string"==typeof N.token&&N.token.length>0&&"string"==typeof z.auth&&z.auth.length>0&&"string"==typeof z.p256dh&&z.p256dh.length>0&&"string"==typeof z.endpoint&&z.endpoint.length>0&&"string"==typeof z.swScope&&z.swScope.length>0&&"string"==typeof z.vapidKey&&z.vapidKey.length>0}const Ei="firebase-messaging-store";let Es=null;function Fo(){return Es||(Es=(0,Se.X3)("firebase-messaging-database",1,(N,z)=>{0===z&&N.createObjectStore(Ei)})),Es}function wr(N){return B.apply(this,arguments)}function B(){return(B=(0,Z.Z)(function*(N){const z=mt(N),xe=yield(yield Fo()).transaction(Ei).objectStore(Ei).get(z);if(xe)return xe;{const it=yield Ps(N.appConfig.senderId);if(it)return yield ee(N,it),it}})).apply(this,arguments)}function ee(N,z){return $.apply(this,arguments)}function $(){return($=(0,Z.Z)(function*(N,z){const oe=mt(N),it=(yield Fo()).transaction(Ei,"readwrite");return yield it.objectStore(Ei).put(z,oe),yield it.complete,z})).apply(this,arguments)}function ce(N){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,Z.Z)(function*(N){const z=mt(N),xe=(yield Fo()).transaction(Ei,"readwrite");yield xe.objectStore(Ei).delete(z),yield xe.complete})).apply(this,arguments)}function mt({appConfig:N}){return N.appId}const Yt=new Se.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function zr(N,z){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,Z.Z)(function*(N,z){const oe=yield yo(N),xe=On(z),it={method:"POST",headers:oe,body:JSON.stringify(xe)};let vt;try{vt=yield(yield fetch(ui(N.appConfig),it)).json()}catch(Lt){throw Yt.create("token-subscribe-failed",{errorInfo:Lt})}if(vt.error)throw Yt.create("token-subscribe-failed",{errorInfo:vt.error.message});if(!vt.token)throw Yt.create("token-subscribe-no-token");return vt.token})).apply(this,arguments)}function or(N,z){return _r.apply(this,arguments)}function _r(){return(_r=(0,Z.Z)(function*(N,z){const oe=yield yo(N),xe=On(z.subscriptionOptions),it={method:"PATCH",headers:oe,body:JSON.stringify(xe)};let vt;try{vt=yield(yield fetch(`${ui(N.appConfig)}/${z.token}`,it)).json()}catch(Lt){throw Yt.create("token-update-failed",{errorInfo:Lt})}if(vt.error)throw Yt.create("token-update-failed",{errorInfo:vt.error.message});if(!vt.token)throw Yt.create("token-update-no-token");return vt.token})).apply(this,arguments)}function fi(N,z){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,Z.Z)(function*(N,z){const xe={method:"DELETE",headers:yield yo(N)};try{const vt=yield(yield fetch(`${ui(N.appConfig)}/${z}`,xe)).json();if(vt.error)throw Yt.create("token-unsubscribe-failed",{errorInfo:vt.error.message})}catch(it){throw Yt.create("token-unsubscribe-failed",{errorInfo:it})}})).apply(this,arguments)}function ui({projectId:N}){return`https://fcmregistrations.googleapis.com/v1/projects/${N}/registrations`}function yo(N){return rs.apply(this,arguments)}function rs(){return(rs=(0,Z.Z)(function*({appConfig:N,installations:z}){const oe=yield z.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":N.apiKey,"x-goog-firebase-installations-auth":`FIS ${oe}`})})).apply(this,arguments)}function On({p256dh:N,auth:z,endpoint:oe,vapidKey:xe}){const it={web:{endpoint:oe,auth:z,p256dh:N}};return xe!==xi&&(it.web.applicationPubKey=xe),it}const fs=6048e5;function G(N){return k.apply(this,arguments)}function k(){return(k=(0,Z.Z)(function*(N){const z=yield ue(N.swRegistration,N.vapidKey),oe={vapidKey:N.vapidKey,swScope:N.swRegistration.scope,endpoint:z.endpoint,auth:es(z.getKey("auth")),p256dh:es(z.getKey("p256dh"))},xe=yield wr(N.firebaseDependencies);if(xe){if(Kt(xe.subscriptionOptions,oe))return Date.now()>=xe.createTime+fs?v(N,{token:xe.token,createTime:Date.now(),subscriptionOptions:oe}):xe.token;try{yield fi(N.firebaseDependencies,xe.token)}catch(it){console.warn(it)}return E(N.firebaseDependencies,oe)}return E(N.firebaseDependencies,oe)})).apply(this,arguments)}function P(N){return ie.apply(this,arguments)}function ie(){return(ie=(0,Z.Z)(function*(N){const z=yield wr(N.firebaseDependencies);z&&(yield fi(N.firebaseDependencies,z.token),yield ce(N.firebaseDependencies));const oe=yield N.swRegistration.pushManager.getSubscription();return!oe||oe.unsubscribe()})).apply(this,arguments)}function v(N,z){return L.apply(this,arguments)}function L(){return(L=(0,Z.Z)(function*(N,z){try{const oe=yield or(N.firebaseDependencies,z),xe=Object.assign(Object.assign({},z),{token:oe,createTime:Date.now()});return yield ee(N.firebaseDependencies,xe),oe}catch(oe){throw yield P(N),oe}})).apply(this,arguments)}function E(N,z){return F.apply(this,arguments)}function F(){return(F=(0,Z.Z)(function*(N,z){const xe={token:yield zr(N,z),createTime:Date.now(),subscriptionOptions:z};return yield ee(N,xe),xe.token})).apply(this,arguments)}function ue(N,z){return dt.apply(this,arguments)}function dt(){return(dt=(0,Z.Z)(function*(N,z){return(yield N.pushManager.getSubscription())||N.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Do(z)})})).apply(this,arguments)}function Kt(N,z){return z.vapidKey===N.vapidKey&&z.endpoint===N.endpoint&&z.auth===N.auth&&z.p256dh===N.p256dh}function En(N){const z={from:N.from,collapseKey:N.collapse_key,messageId:N.fcmMessageId};return function Nn(N,z){if(!z.notification)return;N.notification={};const oe=z.notification.title;oe&&(N.notification.title=oe);const xe=z.notification.body;xe&&(N.notification.body=xe);const it=z.notification.image;it&&(N.notification.image=it)}(z,N),function Jr(N,z){!z.data||(N.data=z.data)}(z,N),function ci(N,z){if(!z.fcmOptions)return;N.fcmOptions={};const oe=z.fcmOptions.link;oe&&(N.fcmOptions.link=oe);const xe=z.fcmOptions.analytics_label;xe&&(N.fcmOptions.analyticsLabel=xe)}(z,N),z}function wi(N){return"object"==typeof N&&!!N&&vs in N}function eo(N,z){const oe=[];for(let xe=0;xe<N.length;xe++)oe.push(N.charAt(xe)),xe<z.length&&oe.push(z.charAt(xe));return oe.join("")}function ts(N){return Yt.create("missing-app-config-values",{valueName:N})}eo("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),eo("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class ei{constructor(z,oe,xe){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const it=function bs(N){if(!N||!N.options)throw ts("App Configuration Object");if(!N.name)throw ts("App Name");const z=["projectId","apiKey","appId","messagingSenderId"],{options:oe}=N;for(const xe of z)if(!oe[xe])throw ts(xe);return{appName:N.name,projectId:oe.projectId,apiKey:oe.apiKey,appId:oe.appId,senderId:oe.messagingSenderId}}(z);this.firebaseDependencies={app:z,appConfig:it,installations:oe,analyticsProvider:xe}}_delete(){return Promise.resolve()}}function Wi(N){return ia.apply(this,arguments)}function ia(){return(ia=(0,Z.Z)(function*(N){try{N.swRegistration=yield navigator.serviceWorker.register(ls,{scope:Hs}),N.swRegistration.update().catch(()=>{})}catch(z){throw Yt.create("failed-service-worker-registration",{browserErrorMessage:z.message})}})).apply(this,arguments)}function Qo(N,z){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,Z.Z)(function*(N,z){if(!z&&!N.swRegistration&&(yield Wi(N)),z||!N.swRegistration){if(!(z instanceof ServiceWorkerRegistration))throw Yt.create("invalid-sw-registration");N.swRegistration=z}})).apply(this,arguments)}function ba(N,z){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,Z.Z)(function*(N,z){z?N.vapidKey=z:N.vapidKey||(N.vapidKey=xi)})).apply(this,arguments)}function Tl(){return(Tl=(0,Z.Z)(function*(N,z){if(!navigator)throw Yt.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Yt.create("permission-blocked");return yield ba(N,null==z?void 0:z.vapidKey),yield Qo(N,null==z?void 0:z.serviceWorkerRegistration),G(N)})).apply(this,arguments)}function La(N,z,oe){return el.apply(this,arguments)}function el(){return(el=(0,Z.Z)(function*(N,z,oe){const xe=Va(z);(yield N.firebaseDependencies.analyticsProvider.get()).logEvent(xe,{message_id:oe[vs],message_name:oe[si],message_time:oe[uo],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Va(N){switch(N){case Ts.NOTIFICATION_CLICKED:return"notification_open";case Ts.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function tl(){return(tl=(0,Z.Z)(function*(N,z){const oe=z.data;if(!oe.isFirebaseMessaging)return;N.onMessageHandler&&oe.messageType===Ts.PUSH_RECEIVED&&("function"==typeof N.onMessageHandler?N.onMessageHandler(En(oe)):N.onMessageHandler.next(En(oe)));const xe=oe.data;wi(xe)&&"1"===xe[Zo]&&(yield La(N,oe.messageType,xe))})).apply(this,arguments)}const Ba="@firebase/messaging",$a=N=>{const z=new ei(N.getProvider("app").getImmediate(),N.getProvider("installations-internal").getImmediate(),N.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",oe=>function Sl(N,z){return tl.apply(this,arguments)}(z,oe)),z},Lo=N=>{const z=N.getProvider("messaging").getImmediate();return{getToken:xe=>function Ui(N,z){return Tl.apply(this,arguments)}(z,xe)}};function oa(){return aa.apply(this,arguments)}function aa(){return(aa=(0,Z.Z)(function*(){try{yield(0,Se.eu)()}catch(N){return!1}return"undefined"!=typeof window&&(0,Se.hl)()&&(0,Se.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function To(){(0,Ne._registerComponent)(new ae.wA("messaging",$a,"PUBLIC")),(0,Ne._registerComponent)(new ae.wA("messaging-internal",Lo,"PRIVATE")),(0,Ne.registerVersion)(Ba,"0.9.11"),(0,Ne.registerVersion)(Ba,"0.9.11","esm2017")}();const Xo="analytics",Yl="firebase_id",qi="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",la="https://www.googletagmanager.com/gtag/js",Yi=new Ie.Yd("@firebase/analytics");function qs(N){return Promise.all(N.map(z=>z.catch(oe=>oe)))}function xl(N,z){const oe=document.createElement("script");oe.src=`${la}?l=${N}&id=${z}`,oe.async=!0,document.head.appendChild(oe)}function Jo(N,z,oe,xe,it,vt){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,Z.Z)(function*(N,z,oe,xe,it,vt){const Lt=xe[it];try{if(Lt)yield z[Lt];else{const lr=(yield qs(oe)).find(tr=>tr.measurementId===it);lr&&(yield z[lr.appId])}}catch(Mn){Yi.error(Mn)}N("config",it,vt)})).apply(this,arguments)}function Ao(N,z,oe,xe,it){return ji.apply(this,arguments)}function ji(){return(ji=(0,Z.Z)(function*(N,z,oe,xe,it){try{let vt=[];if(it&&it.send_to){let Lt=it.send_to;Array.isArray(Lt)||(Lt=[Lt]);const Mn=yield qs(oe);for(const lr of Lt){const tr=Mn.find(ur=>ur.measurementId===lr),Fr=tr&&z[tr.appId];if(!Fr){vt=[];break}vt.push(Fr)}}0===vt.length&&(vt=Object.values(z)),yield Promise.all(vt),N("event",xe,it||{})}catch(vt){Yi.error(vt)}})).apply(this,arguments)}function wa(){const N=window.document.getElementsByTagName("script");for(const z of Object.values(N))if(z.src&&z.src.includes(la))return z;return null}const is=new Se.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),_o=new class rl{constructor(z={},oe=1e3){this.throttleMetadata=z,this.intervalMillis=oe}getThrottleMetadata(z){return this.throttleMetadata[z]}setThrottleMetadata(z,oe){this.throttleMetadata[z]=oe}deleteThrottleMetadata(z){delete this.throttleMetadata[z]}};function gr(N){return new Headers({Accept:"application/json","x-goog-api-key":N})}function Ua(N){return di.apply(this,arguments)}function di(){return(di=(0,Z.Z)(function*(N){var z;const{appId:oe,apiKey:xe}=N,it={method:"GET",headers:gr(xe)},vt=qi.replace("{app-id}",oe),Lt=yield fetch(vt,it);if(200!==Lt.status&&304!==Lt.status){let Mn="";try{const lr=yield Lt.json();(null===(z=lr.error)||void 0===z?void 0:z.message)&&(Mn=lr.error.message)}catch(lr){}throw is.create("config-fetch-failed",{httpStatus:Lt.status,responseMessage:Mn})}return Lt.json()})).apply(this,arguments)}function vu(N){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,Z.Z)(function*(N,z=_o,oe){const{appId:xe,apiKey:it,measurementId:vt}=N.options;if(!xe)throw is.create("no-app-id");if(!it){if(vt)return{measurementId:vt,appId:xe};throw is.create("no-api-key")}const Lt=z.getThrottleMetadata(xe)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Mn=new ca;return setTimeout((0,Z.Z)(function*(){Mn.abort()}),void 0!==oe?oe:6e4),xo({appId:xe,apiKey:it,measurementId:vt},Lt,Mn,z)})).apply(this,arguments)}function xo(N,z,oe){return ws.apply(this,arguments)}function ws(){return(ws=(0,Z.Z)(function*(N,{throttleEndTimeMillis:z,backoffCount:oe},xe,it=_o){const{appId:vt,measurementId:Lt}=N;try{yield Gu(xe,z)}catch(Mn){if(Lt)return Yi.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Lt} provided in the "measurementId" field in the local Firebase config. [${Mn.message}]`),{appId:vt,measurementId:Lt};throw Mn}try{const Mn=yield Ua(N);return it.deleteThrottleMetadata(vt),Mn}catch(Mn){if(!hi(Mn)){if(it.deleteThrottleMetadata(vt),Lt)return Yi.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Lt} provided in the "measurementId" field in the local Firebase config. [${Mn.message}]`),{appId:vt,measurementId:Lt};throw Mn}const lr=503===Number(Mn.customData.httpStatus)?(0,Se.$s)(oe,it.intervalMillis,30):(0,Se.$s)(oe,it.intervalMillis),tr={throttleEndTimeMillis:Date.now()+lr,backoffCount:oe+1};return it.setThrottleMetadata(vt,tr),Yi.debug(`Calling attemptFetch again in ${lr} millis`),xo(N,tr,xe,it)}})).apply(this,arguments)}function Gu(N,z){return new Promise((oe,xe)=>{const it=Math.max(z-Date.now(),0),vt=setTimeout(oe,it);N.addEventListener(()=>{clearTimeout(vt),xe(is.create("fetch-throttle",{throttleEndTimeMillis:z}))})})}function hi(N){if(!(N instanceof Se.ZR&&N.customData))return!1;const z=Number(N.customData.httpStatus);return 429===z||500===z||503===z||504===z}class ca{constructor(){this.listeners=[]}addEventListener(z){this.listeners.push(z)}abort(){this.listeners.forEach(z=>z())}}function Bo(){return $o.apply(this,arguments)}function $o(){return($o=(0,Z.Z)(function*(){if(!(0,Se.hl)())return Yi.warn(is.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,Se.eu)()}catch(N){return Yi.warn(is.create("indexeddb-unavailable",{errorInfo:N}).message),!1}return!0})).apply(this,arguments)}function Wt(){return(Wt=(0,Z.Z)(function*(N,z,oe,xe,it,vt,Lt){var Mn;const lr=vu(N);lr.then(ti=>{oe[ti.measurementId]=ti.appId,N.options.measurementId&&ti.measurementId!==N.options.measurementId&&Yi.warn(`The measurement ID in the local Firebase config (${N.options.measurementId}) does not match the measurement ID fetched from the server (${ti.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(ti=>Yi.error(ti)),z.push(lr);const tr=Bo().then(ti=>{if(ti)return xe.getId()}),[Fr,ur]=yield Promise.all([lr,tr]);wa()||xl(vt,Fr.measurementId),it("js",new Date);const xs=null!==(Mn=null==Lt?void 0:Lt.config)&&void 0!==Mn?Mn:{};return xs.origin="firebase",xs.update=!0,null!=ur&&(xs[Yl]=ur),it("config",Fr.measurementId,xs),Fr.measurementId})).apply(this,arguments)}class Mi{constructor(z){this.app=z}_delete(){return delete As[this.app.options.appId],Promise.resolve()}}let As={},ks=[];const Sn={};let cn,Dt,Wn="dataLayer",T=!1;function V(N,z,oe){!function D(){const N=[];if((0,Se.ru)()&&N.push("This is a browser extension environment."),(0,Se.zI)()||N.push("Cookies are not available."),N.length>0){const z=N.map((xe,it)=>`(${it+1}) ${xe}`).join(" "),oe=is.create("invalid-analytics-context",{errorInfo:z});Yi.warn(oe.message)}}();const xe=N.options.appId;if(!xe)throw is.create("no-app-id");if(!N.options.apiKey){if(!N.options.measurementId)throw is.create("no-api-key");Yi.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${N.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=As[xe])throw is.create("already-exists",{id:xe});if(!T){!function So(N){let z=[];Array.isArray(window[N])?z=window[N]:window[N]=z}(Wn);const{wrappedGtag:vt,gtagCore:Lt}=function Kl(N,z,oe,xe,it){let vt=function(...Lt){window[xe].push(arguments)};return window[it]&&"function"==typeof window[it]&&(vt=window[it]),window[it]=function ua(N,z,oe,xe){function vt(){return(vt=(0,Z.Z)(function*(Lt,Mn,lr){try{"event"===Lt?yield Ao(N,z,oe,Mn,lr):"config"===Lt?yield Jo(N,z,oe,xe,Mn,lr):N("set",Mn)}catch(tr){Yi.error(tr)}})).apply(this,arguments)}return function it(Lt,Mn,lr){return vt.apply(this,arguments)}}(vt,N,z,oe),{gtagCore:vt,wrappedGtag:window[it]}}(As,ks,Sn,Wn,"gtag");Dt=vt,cn=Lt,T=!0}return As[xe]=function Ia(N,z,oe,xe,it,vt,Lt){return Wt.apply(this,arguments)}(N,ks,Sn,z,cn,Wn,oe),new Mi(N)}function se(){return(se=(0,Z.Z)(function*(N,z,oe,xe,it){if(it&&it.global)N("event",oe,xe);else{const vt=yield z;N("event",oe,Object.assign(Object.assign({},xe),{send_to:vt}))}})).apply(this,arguments)}function ro(){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,Z.Z)(function*(){if((0,Se.ru)()||!(0,Se.zI)()||!(0,Se.hl)())return!1;try{return yield(0,Se.eu)()}catch(N){return!1}})).apply(this,arguments)}const Wr="@firebase/analytics";!function ps(){(0,Ne._registerComponent)(new ae.wA(Xo,(z,{options:oe})=>V(z.getProvider("app").getImmediate(),z.getProvider("installations-internal").getImmediate(),oe),"PUBLIC")),(0,Ne._registerComponent)(new ae.wA("analytics-internal",function N(z){try{const oe=z.getProvider(Xo).getImmediate();return{logEvent:(xe,it,vt)=>function Zl(N,z,oe,xe){N=(0,Se.m9)(N),function W(N,z,oe,xe,it){return se.apply(this,arguments)}(Dt,As[N.app.options.appId],z,oe,xe).catch(it=>Yi.error(it))}(oe,xe,it,vt)}}catch(oe){throw is.create("interop-component-reg-failed",{reason:oe})}},"PRIVATE")),(0,Ne.registerVersion)(Wr,"0.7.7"),(0,Ne.registerVersion)(Wr,"0.7.7","esm2017")}();var Ca=j(341),il=j(353),Is=j(2868),Ki=j(8915),da=j(2102);const vi=new u.GfV("7.3.0"),ja="__angularfire_symbol__analyticsIsSupportedValue",sl="__angularfire_symbol__analyticsIsSupported",Ls="__angularfire_symbol__remoteConfigIsSupportedValue",Cs="__angularfire_symbol__remoteConfigIsSupported",Eu="__angularfire_symbol__messagingIsSupportedValue",Vs="__angularfire_symbol__messagingIsSupported";function wu(N,z,oe){if(z){if(1===z.length)return z[0];const vt=z.filter(Lt=>Lt.app===oe);if(1===vt.length)return vt[0]}return oe.container.getProvider(N).getImmediate({optional:!0})}globalThis[sl]||(globalThis[sl]=ro().then(N=>globalThis[ja]=N).catch(()=>globalThis[ja]=!1)),globalThis[Vs]||(globalThis[Vs]=oa().then(N=>globalThis[Eu]=N).catch(()=>globalThis[Eu]=!1)),globalThis[Cs]||(globalThis[Cs]=ki().then(N=>globalThis[Ls]=N).catch(()=>globalThis[Ls]=!1));const Ed=(N,z)=>{const oe=z?[z]:(0,re.C6)(),xe=[];return oe.forEach(it=>{it.container.getProvider(N).instances.forEach(Lt=>{xe.includes(Lt)||xe.push(Lt)})}),xe};function Bs(){}class Ci{constructor(z,oe=Ca.N){this.zone=z,this.delegate=oe}now(){return this.delegate.now()}schedule(z,oe,xe){const it=this.zone;return this.delegate.schedule(function(Lt){it.runGuarded(()=>{z.apply(this,[Lt])})},oe,xe)}}class Da{constructor(z){this.zone=z,this.task=null}call(z,oe){const xe=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Bs,{},Bs,Bs)),oe.pipe((0,Is.b)({next:xe,complete:xe,error:xe})).subscribe(z).add(xe)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let co=(()=>{class N{constructor(oe){this.ngZone=oe,this.outsideAngular=oe.runOutsideAngular(()=>new Ci(Zone.current)),this.insideAngular=oe.run(()=>new Ci(Zone.current,il.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return N.\u0275fac=function(oe){return new(oe||N)(u.LFG(u.R0b))},N.\u0275prov=u.Yz7({token:N,factory:N.\u0275fac,providedIn:"root"}),N})();function Ta(){const N=globalThis.\u0275AngularFireScheduler;if(!N)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return N}function Ha(N){return Ta(),function Mo(N){return function(oe){return(oe=oe.lift(new Da(N.ngZone))).pipe((0,Ki.R)(N.outsideAngular),(0,da.QV)(N.insideAngular))}}(Ta())(N)}},2090:(Jt,ct,j)=>{"use strict";j.d(ct,{BH:()=>Ue,LL:()=>Ut,ZR:()=>Ze,gQ:()=>Yn,zI:()=>Ee,hu:()=>Z,g5:()=>Ne,US:()=>Ie,tV:()=>de,h$:()=>we,L:()=>ye,$s:()=>Pn,r3:()=>ft,Sg:()=>Oe,ne:()=>jt,p$:()=>me,vZ:()=>ln,ZB:()=>te,Lj:()=>_n,gK:()=>on,pd:()=>Kn,m9:()=>wn,z$:()=>_e,GJ:()=>Tt,jU:()=>ht,ru:()=>ve,d:()=>Le,xb:()=>gn,w1:()=>rt,hl:()=>pe,uI:()=>Pe,UG:()=>ke,Yr:()=>St,b$:()=>ot,G6:()=>qe,Mn:()=>_t,w9:()=>Xe,cI:()=>st,UI:()=>An,X3:()=>yn,xO:()=>mr,zd:()=>xr,DV:()=>Zt,ug:()=>hn,dS:()=>kn,Pz:()=>Qe,Dv:()=>Ur,Wj:()=>Gt,lb:()=>ni,eu:()=>Ve});var u=j(5861);const Z=function(Fe,Ce){if(!Fe)throw Ne(Ce)},Ne=function(Fe){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+Fe)},Se=function(Fe){const Ce=[];let je=0;for(let Et=0;Et<Fe.length;Et++){let ut=Fe.charCodeAt(Et);ut<128?Ce[je++]=ut:ut<2048?(Ce[je++]=ut>>6|192,Ce[je++]=63&ut|128):55296==(64512&ut)&&Et+1<Fe.length&&56320==(64512&Fe.charCodeAt(Et+1))?(ut=65536+((1023&ut)<<10)+(1023&Fe.charCodeAt(++Et)),Ce[je++]=ut>>18|240,Ce[je++]=ut>>12&63|128,Ce[je++]=ut>>6&63|128,Ce[je++]=63&ut|128):(Ce[je++]=ut>>12|224,Ce[je++]=ut>>6&63|128,Ce[je++]=63&ut|128)}return Ce},Ie={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Fe,Ce){if(!Array.isArray(Fe))throw Error("encodeByteArray takes an array as a parameter");this.init_();const je=Ce?this.byteToCharMapWebSafe_:this.byteToCharMap_,Et=[];for(let ut=0;ut<Fe.length;ut+=3){const qt=Fe[ut],In=ut+1<Fe.length,Qn=In?Fe[ut+1]:0,Yr=ut+2<Fe.length,Bn=Yr?Fe[ut+2]:0;let br=(15&Qn)<<2|Bn>>6,Rr=63&Bn;Yr||(Rr=64,In||(br=64)),Et.push(je[qt>>2],je[(3&qt)<<4|Qn>>4],je[br],je[Rr])}return Et.join("")},encodeString(Fe,Ce){return this.HAS_NATIVE_SUPPORT&&!Ce?btoa(Fe):this.encodeByteArray(Se(Fe),Ce)},decodeString(Fe,Ce){return this.HAS_NATIVE_SUPPORT&&!Ce?atob(Fe):function(Fe){const Ce=[];let je=0,Et=0;for(;je<Fe.length;){const ut=Fe[je++];if(ut<128)Ce[Et++]=String.fromCharCode(ut);else if(ut>191&&ut<224){const qt=Fe[je++];Ce[Et++]=String.fromCharCode((31&ut)<<6|63&qt)}else if(ut>239&&ut<365){const Yr=((7&ut)<<18|(63&Fe[je++])<<12|(63&Fe[je++])<<6|63&Fe[je++])-65536;Ce[Et++]=String.fromCharCode(55296+(Yr>>10)),Ce[Et++]=String.fromCharCode(56320+(1023&Yr))}else{const qt=Fe[je++],In=Fe[je++];Ce[Et++]=String.fromCharCode((15&ut)<<12|(63&qt)<<6|63&In)}}return Ce.join("")}(this.decodeStringToByteArray(Fe,Ce))},decodeStringToByteArray(Fe,Ce){this.init_();const je=Ce?this.charToByteMapWebSafe_:this.charToByteMap_,Et=[];for(let ut=0;ut<Fe.length;){const qt=je[Fe.charAt(ut++)],Qn=ut<Fe.length?je[Fe.charAt(ut)]:0;++ut;const Bn=ut<Fe.length?je[Fe.charAt(ut)]:64;++ut;const Un=ut<Fe.length?je[Fe.charAt(ut)]:64;if(++ut,null==qt||null==Qn||null==Bn||null==Un)throw Error();Et.push(qt<<2|Qn>>4),64!==Bn&&(Et.push(Qn<<4&240|Bn>>2),64!==Un&&Et.push(Bn<<6&192|Un))}return Et},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Fe=0;Fe<this.ENCODED_VALS.length;Fe++)this.byteToCharMap_[Fe]=this.ENCODED_VALS.charAt(Fe),this.charToByteMap_[this.byteToCharMap_[Fe]]=Fe,this.byteToCharMapWebSafe_[Fe]=this.ENCODED_VALS_WEBSAFE.charAt(Fe),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Fe]]=Fe,Fe>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Fe)]=Fe,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Fe)]=Fe)}}},we=function(Fe){const Ce=Se(Fe);return Ie.encodeByteArray(Ce,!0)},ye=function(Fe){return we(Fe).replace(/\./g,"")},de=function(Fe){try{return Ie.decodeString(Fe,!0)}catch(Ce){console.error("base64Decode failed: ",Ce)}return null};function me(Fe){return te(void 0,Fe)}function te(Fe,Ce){if(!(Ce instanceof Object))return Ce;switch(Ce.constructor){case Date:return new Date(Ce.getTime());case Object:void 0===Fe&&(Fe={});break;case Array:Fe=[];break;default:return Ce}for(const je in Ce)!Ce.hasOwnProperty(je)||!he(je)||(Fe[je]=te(Fe[je],Ce[je]));return Fe}function he(Fe){return"__proto__"!==Fe}class Ue{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Ce,je)=>{this.resolve=Ce,this.reject=je})}wrapCallback(Ce){return(je,Et)=>{je?this.reject(je):this.resolve(Et),"function"==typeof Ce&&(this.promise.catch(()=>{}),1===Ce.length?Ce(je):Ce(je,Et))}}}function Oe(Fe,Ce){if(Fe.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Et=Ce||"demo-project",ut=Fe.iat||0,qt=Fe.sub||Fe.user_id;if(!qt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const In=Object.assign({iss:`https://securetoken.google.com/${Et}`,aud:Et,iat:ut,exp:ut+3600,auth_time:ut,sub:qt,user_id:qt,firebase:{sign_in_provider:"custom",identities:{}}},Fe);return[ye(JSON.stringify({alg:"none",type:"JWT"})),ye(JSON.stringify(In)),""].join(".")}function _e(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Pe(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_e())}function ke(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(Fe){return!1}}function ht(){return"object"==typeof self&&self.self===self}function ve(){const Fe="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Fe&&void 0!==Fe.id}function ot(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Le(){return _e().indexOf("Electron/")>=0}function rt(){const Fe=_e();return Fe.indexOf("MSIE ")>=0||Fe.indexOf("Trident/")>=0}function _t(){return _e().indexOf("MSAppHost/")>=0}function St(){return!1}function qe(){return!ke()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function pe(){return"object"==typeof indexedDB}function Ve(){return new Promise((Fe,Ce)=>{try{let je=!0;const Et="validate-browser-context-for-indexeddb-analytics-module",ut=self.indexedDB.open(Et);ut.onsuccess=()=>{ut.result.close(),je||self.indexedDB.deleteDatabase(Et),Fe(!0)},ut.onupgradeneeded=()=>{je=!1},ut.onerror=()=>{var qt;Ce((null===(qt=ut.error)||void 0===qt?void 0:qt.message)||"")}}catch(je){Ce(je)}})}function Ee(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Ze extends Error{constructor(Ce,je,Et){super(je),this.code=Ce,this.customData=Et,this.name="FirebaseError",Object.setPrototypeOf(this,Ze.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ut.prototype.create)}}class Ut{constructor(Ce,je,Et){this.service=Ce,this.serviceName=je,this.errors=Et}create(Ce,...je){const Et=je[0]||{},ut=`${this.service}/${Ce}`,qt=this.errors[Ce],In=qt?function Xt(Fe,Ce){return Fe.replace(pt,(je,Et)=>{const ut=Ce[Et];return null!=ut?String(ut):`<${Et}?>`})}(qt,Et):"Error";return new Ze(ut,`${this.serviceName}: ${In} (${ut}).`,Et)}}const pt=/\{\$([^}]+)}/g;function st(Fe){return JSON.parse(Fe)}function Qe(Fe){return JSON.stringify(Fe)}const nt=function(Fe){let Ce={},je={},Et={},ut="";try{const qt=Fe.split(".");Ce=st(de(qt[0])||""),je=st(de(qt[1])||""),ut=qt[2],Et=je.d||{},delete je.d}catch(qt){}return{header:Ce,claims:je,data:Et,signature:ut}},Xe=function(Fe){const je=nt(Fe).claims;return!!je&&"object"==typeof je&&je.hasOwnProperty("iat")},Tt=function(Fe){const Ce=nt(Fe).claims;return"object"==typeof Ce&&!0===Ce.admin};function ft(Fe,Ce){return Object.prototype.hasOwnProperty.call(Fe,Ce)}function Zt(Fe,Ce){if(Object.prototype.hasOwnProperty.call(Fe,Ce))return Fe[Ce]}function gn(Fe){for(const Ce in Fe)if(Object.prototype.hasOwnProperty.call(Fe,Ce))return!1;return!0}function An(Fe,Ce,je){const Et={};for(const ut in Fe)Object.prototype.hasOwnProperty.call(Fe,ut)&&(Et[ut]=Ce.call(je,Fe[ut],ut,Fe));return Et}function ln(Fe,Ce){if(Fe===Ce)return!0;const je=Object.keys(Fe),Et=Object.keys(Ce);for(const ut of je){if(!Et.includes(ut))return!1;const qt=Fe[ut],In=Ce[ut];if(tn(qt)&&tn(In)){if(!ln(qt,In))return!1}else if(qt!==In)return!1}for(const ut of Et)if(!je.includes(ut))return!1;return!0}function tn(Fe){return null!==Fe&&"object"==typeof Fe}function mr(Fe){const Ce=[];for(const[je,Et]of Object.entries(Fe))Array.isArray(Et)?Et.forEach(ut=>{Ce.push(encodeURIComponent(je)+"="+encodeURIComponent(ut))}):Ce.push(encodeURIComponent(je)+"="+encodeURIComponent(Et));return Ce.length?"&"+Ce.join("&"):""}function xr(Fe){const Ce={};return Fe.replace(/^\?/,"").split("&").forEach(Et=>{if(Et){const[ut,qt]=Et.split("=");Ce[decodeURIComponent(ut)]=decodeURIComponent(qt)}}),Ce}function Kn(Fe){const Ce=Fe.indexOf("?");if(!Ce)return"";const je=Fe.indexOf("#",Ce);return Fe.substring(Ce,je>0?je:void 0)}class Yn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let Ce=1;Ce<this.blockSize;++Ce)this.pad_[Ce]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(Ce,je){je||(je=0);const Et=this.W_;if("string"==typeof Ce)for(let Un=0;Un<16;Un++)Et[Un]=Ce.charCodeAt(je)<<24|Ce.charCodeAt(je+1)<<16|Ce.charCodeAt(je+2)<<8|Ce.charCodeAt(je+3),je+=4;else for(let Un=0;Un<16;Un++)Et[Un]=Ce[je]<<24|Ce[je+1]<<16|Ce[je+2]<<8|Ce[je+3],je+=4;for(let Un=16;Un<80;Un++){const br=Et[Un-3]^Et[Un-8]^Et[Un-14]^Et[Un-16];Et[Un]=4294967295&(br<<1|br>>>31)}let Bn,Er,ut=this.chain_[0],qt=this.chain_[1],In=this.chain_[2],Qn=this.chain_[3],Yr=this.chain_[4];for(let Un=0;Un<80;Un++){Un<40?Un<20?(Bn=Qn^qt&(In^Qn),Er=1518500249):(Bn=qt^In^Qn,Er=1859775393):Un<60?(Bn=qt&In|Qn&(qt|In),Er=2400959708):(Bn=qt^In^Qn,Er=3395469782);const br=(ut<<5|ut>>>27)+Bn+Yr+Er+Et[Un]&4294967295;Yr=Qn,Qn=In,In=4294967295&(qt<<30|qt>>>2),qt=ut,ut=br}this.chain_[0]=this.chain_[0]+ut&4294967295,this.chain_[1]=this.chain_[1]+qt&4294967295,this.chain_[2]=this.chain_[2]+In&4294967295,this.chain_[3]=this.chain_[3]+Qn&4294967295,this.chain_[4]=this.chain_[4]+Yr&4294967295}update(Ce,je){if(null==Ce)return;void 0===je&&(je=Ce.length);const Et=je-this.blockSize;let ut=0;const qt=this.buf_;let In=this.inbuf_;for(;ut<je;){if(0===In)for(;ut<=Et;)this.compress_(Ce,ut),ut+=this.blockSize;if("string"==typeof Ce){for(;ut<je;)if(qt[In]=Ce.charCodeAt(ut),++In,++ut,In===this.blockSize){this.compress_(qt),In=0;break}}else for(;ut<je;)if(qt[In]=Ce[ut],++In,++ut,In===this.blockSize){this.compress_(qt),In=0;break}}this.inbuf_=In,this.total_+=je}digest(){const Ce=[];let je=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let ut=this.blockSize-1;ut>=56;ut--)this.buf_[ut]=255&je,je/=256;this.compress_(this.buf_);let Et=0;for(let ut=0;ut<5;ut++)for(let qt=24;qt>=0;qt-=8)Ce[Et]=this.chain_[ut]>>qt&255,++Et;return Ce}}function jt(Fe,Ce){const je=new ir(Fe,Ce);return je.subscribe.bind(je)}class ir{constructor(Ce,je){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=je,this.task.then(()=>{Ce(this)}).catch(Et=>{this.error(Et)})}next(Ce){this.forEachObserver(je=>{je.next(Ce)})}error(Ce){this.forEachObserver(je=>{je.error(Ce)}),this.close(Ce)}complete(){this.forEachObserver(Ce=>{Ce.complete()}),this.close()}subscribe(Ce,je,Et){let ut;if(void 0===Ce&&void 0===je&&void 0===Et)throw new Error("Missing Observer.");ut=function Jn(Fe,Ce){if("object"!=typeof Fe||null===Fe)return!1;for(const je of Ce)if(je in Fe&&"function"==typeof Fe[je])return!0;return!1}(Ce,["next","error","complete"])?Ce:{next:Ce,error:je,complete:Et},void 0===ut.next&&(ut.next=cr),void 0===ut.error&&(ut.error=cr),void 0===ut.complete&&(ut.complete=cr);const qt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ut.error(this.finalError):ut.complete()}catch(In){}}),this.observers.push(ut),qt}unsubscribeOne(Ce){void 0===this.observers||void 0===this.observers[Ce]||(delete this.observers[Ce],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Ce){if(!this.finalized)for(let je=0;je<this.observers.length;je++)this.sendOne(je,Ce)}sendOne(Ce,je){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[Ce])try{je(this.observers[Ce])}catch(Et){"undefined"!=typeof console&&console.error&&console.error(Et)}})}close(Ce){this.finalized||(this.finalized=!0,void 0!==Ce&&(this.finalError=Ce),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function cr(){}const Ur=function(Fe,Ce,je,Et){let ut;if(Et<Ce?ut="at least "+Ce:Et>je&&(ut=0===je?"none":"no more than "+je),ut)throw new Error(Fe+" failed: Was called with "+Et+(1===Et?" argument.":" arguments.")+" Expects "+ut+".")};function on(Fe,Ce){return`${Fe} failed: ${Ce} argument `}function Gt(Fe,Ce,je,Et){if((!Et||je)&&"function"!=typeof je)throw new Error(on(Fe,Ce)+"must be a valid function.")}function ni(Fe,Ce,je,Et){if((!Et||je)&&("object"!=typeof je||null===je))throw new Error(on(Fe,Ce)+"must be a valid context object.")}const kn=function(Fe){const Ce=[];let je=0;for(let Et=0;Et<Fe.length;Et++){let ut=Fe.charCodeAt(Et);if(ut>=55296&&ut<=56319){const qt=ut-55296;Et++,Z(Et<Fe.length,"Surrogate pair missing trail surrogate."),ut=65536+(qt<<10)+(Fe.charCodeAt(Et)-56320)}ut<128?Ce[je++]=ut:ut<2048?(Ce[je++]=ut>>6|192,Ce[je++]=63&ut|128):ut<65536?(Ce[je++]=ut>>12|224,Ce[je++]=ut>>6&63|128,Ce[je++]=63&ut|128):(Ce[je++]=ut>>18|240,Ce[je++]=ut>>12&63|128,Ce[je++]=ut>>6&63|128,Ce[je++]=63&ut|128)}return Ce},hn=function(Fe){let Ce=0;for(let je=0;je<Fe.length;je++){const Et=Fe.charCodeAt(je);Et<128?Ce++:Et<2048?Ce+=2:Et>=55296&&Et<=56319?(Ce+=4,je++):Ce+=3}return Ce};function Pn(Fe,Ce=1e3,je=2){const Et=Ce*Math.pow(je,Fe),ut=Math.round(.5*Et*(Math.random()-.5)*2);return Math.min(144e5,Et+ut)}function wn(Fe){return Fe&&Fe._delegate?Fe._delegate:Fe}function li(Fe,Ce){return new Promise((je,Et)=>{Fe.onsuccess=ut=>{je(ut.target.result)},Fe.onerror=ut=>{var qt;Et(`${Ce}: ${null===(qt=ut.target.error)||void 0===qt?void 0:qt.message}`)}})}class er{constructor(Ce){this._db=Ce,this.objectStoreNames=this._db.objectStoreNames}transaction(Ce,je){return new nn(this._db.transaction.call(this._db,Ce,je))}createObjectStore(Ce,je){return new kt(this._db.createObjectStore(Ce,je))}close(){this._db.close()}}class nn{constructor(Ce){this._transaction=Ce,this.complete=new Promise((je,Et)=>{this._transaction.oncomplete=function(){je()},this._transaction.onerror=()=>{Et(this._transaction.error)},this._transaction.onabort=()=>{Et(this._transaction.error)}})}objectStore(Ce){return new kt(this._transaction.objectStore(Ce))}}class kt{constructor(Ce){this._store=Ce}index(Ce){return new en(this._store.index(Ce))}createIndex(Ce,je,Et){return new en(this._store.createIndex(Ce,je,Et))}get(Ce){return li(this._store.get(Ce),"Error reading from IndexedDB")}put(Ce,je){return li(this._store.put(Ce,je),"Error writing to IndexedDB")}delete(Ce){return li(this._store.delete(Ce),"Error deleting from IndexedDB")}clear(){return li(this._store.clear(),"Error clearing IndexedDB object store")}}class en{constructor(Ce){this._index=Ce}get(Ce){return li(this._index.get(Ce),"Error reading from IndexedDB")}}function yn(Fe,Ce,je){return new Promise((Et,ut)=>{try{const qt=indexedDB.open(Fe,Ce);qt.onsuccess=In=>{Et(new er(In.target.result))},qt.onerror=In=>{var Qn;ut(`Error opening indexedDB: ${null===(Qn=In.target.error)||void 0===Qn?void 0:Qn.message}`)},qt.onupgradeneeded=In=>{je(new er(qt.result),In.oldVersion,In.newVersion,new nn(qt.transaction))}}catch(qt){ut(`Error opening indexedDB: ${qt.message}`)}})}function _n(Fe){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,u.Z)(function*(Fe){return new Promise((Ce,je)=>{try{const Et=indexedDB.deleteDatabase(Fe);Et.onsuccess=()=>{Ce()},Et.onerror=ut=>{var qt;je(`Error deleting indexedDB database "${Fe}": ${null===(qt=ut.target.error)||void 0===qt?void 0:qt.message}`)}}catch(Et){je(`Error deleting indexedDB database "${Fe}": ${Et.message}`)}})})).apply(this,arguments)}},6926:(Jt,ct,j)=>{"use strict";j.d(ct,{BX:()=>Yt,dr:()=>hn,BJ:()=>Dn,YG:()=>Nr,PM:()=>li,FN:()=>er,tO:()=>kt,W2:()=>Fe,fr:()=>qt,Gu:()=>Qn,gu:()=>Yr,Xz:()=>Bn,pK:()=>br,Ie:()=>Rr,Q$:()=>bi,q_:()=>Vr,jP:()=>cs,g2:()=>Tn,wd:()=>ri,sr:()=>ze,Pc:()=>ie,r4:()=>G,IN:()=>fi,X1:()=>We,j9:()=>Jn});var u=j(5e3),re=j(4182),Z=j(655),Ne=j(2916),Se=j(6688),ae=j(7043),Ie=j(4850);function ye(v,L,E,F){return(0,ae.m)(E)&&(F=E,E=void 0),F?ye(v,L,E).pipe((0,Ie.U)(ue=>(0,Se.k)(ue)?F(...ue):F(ue))):new Ne.y(ue=>{de(v,L,function dt(Kt){ue.next(arguments.length>1?Array.prototype.slice.call(arguments):Kt)},ue,E)})}function de(v,L,E,F,ue){let dt;if(function he(v){return v&&"function"==typeof v.addEventListener&&"function"==typeof v.removeEventListener}(v)){const Kt=v;v.addEventListener(L,E,ue),dt=()=>Kt.removeEventListener(L,E,ue)}else if(function te(v){return v&&"function"==typeof v.on&&"function"==typeof v.off}(v)){const Kt=v;v.on(L,E),dt=()=>Kt.off(L,E)}else if(function me(v){return v&&"function"==typeof v.addListener&&"function"==typeof v.removeListener}(v)){const Kt=v;v.addListener(L,E),dt=()=>Kt.removeListener(L,E)}else{if(!v||!v.length)throw new TypeError("Invalid event target");for(let Kt=0,En=v.length;Kt<En;Kt++)de(v[Kt],L,E,F,ue)}F.add(dt)}var Ue=j(8929),Oe=j(591),_e=j(8186),ve=(j(5797),j(6409),j(1363),j(8686)),ot=j(206),Le=j(358),_t=(j(5970),j(3986)),qe=(j(2733),j(2361)),Ze=j(2198),Ut=j(7545),Xt=j(5778),pt=j(9808);const Qe=ve.i,Re=["*"],An=v=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(v):"function"==typeof requestAnimationFrame?requestAnimationFrame(v):setTimeout(v);let ln=(()=>{class v{constructor(E,F){this.injector=E,this.el=F,this.onChange=()=>{},this.onTouched=()=>{}}writeValue(E){this.el.nativeElement.value=this.lastValue=null==E?"":E,tn(this.el)}handleChangeEvent(E,F){E===this.el.nativeElement&&(F!==this.lastValue&&(this.lastValue=F,this.onChange(F)),tn(this.el))}_handleBlurEvent(E){E===this.el.nativeElement&&(this.onTouched(),tn(this.el))}registerOnChange(E){this.onChange=E}registerOnTouched(E){this.onTouched=E}setDisabledState(E){this.el.nativeElement.disabled=E}ngOnDestroy(){this.statusChanges&&this.statusChanges.unsubscribe()}ngAfterViewInit(){let E;try{E=this.injector.get(re.a5)}catch(ue){}if(!E)return;E.statusChanges&&(this.statusChanges=E.statusChanges.subscribe(()=>tn(this.el)));const F=E.control;F&&["markAsTouched","markAllAsTouched","markAsUntouched","markAsDirty","markAsPristine"].forEach(dt=>{if(void 0!==F[dt]){const Kt=F[dt].bind(F);F[dt]=(...En)=>{Kt(...En),tn(this.el)}}})}}return v.\u0275fac=function(E){return new(E||v)(u.Y36(u.zs3),u.Y36(u.SBq))},v.\u0275dir=u.lG2({type:v,hostBindings:function(E,F){1&E&&u.NdJ("ionBlur",function(dt){return F._handleBlurEvent(dt.target)})}}),v})();const tn=v=>{An(()=>{const L=v.nativeElement,E=mr(L);xr(L,E);const F=L.closest("ion-item");F&&xr(F,E)})},mr=v=>{const L=v.classList,E=[];for(let F=0;F<L.length;F++){const ue=L.item(F);null!==ue&&Kn(ue,"ng-")&&E.push(`ion-${ue.substr(3)}`)}return E},xr=(v,L)=>{const E=v.classList;["ion-valid","ion-invalid","ion-touched","ion-untouched","ion-dirty","ion-pristine"].forEach(F=>E.remove(F)),L.forEach(F=>E.add(F))},Kn=(v,L)=>v.substr(0,L.length)===L;let Jn=(()=>{class v extends ln{constructor(E,F){super(E,F)}_handleInputEvent(E){this.handleChangeEvent(E,E.value)}}return v.\u0275fac=function(E){return new(E||v)(u.Y36(u.zs3),u.Y36(u.SBq))},v.\u0275dir=u.lG2({type:v,selectors:[["ion-input",3,"type","number"],["ion-textarea"],["ion-searchbar"]],hostBindings:function(E,F){1&E&&u.NdJ("ionChange",function(dt){return F._handleInputEvent(dt.target)})},features:[u._Bn([{provide:re.JU,useExisting:v,multi:!0}]),u.qOj]}),v})();const cr=(v,L)=>{const E=v.prototype;L.forEach(F=>{Object.defineProperty(E,F,{get(){return this.el[F]},set(ue){this.z.runOutsideAngular(()=>this.el[F]=ue)}})})},Ur=(v,L)=>{const E=v.prototype;L.forEach(F=>{E[F]=function(){const ue=arguments;return this.z.runOutsideAngular(()=>this.el[F].apply(this.el,ue))}})},on=(v,L,E)=>{E.forEach(F=>v[F]=ye(L,F))};function Gt(v){return function(E){const{defineCustomElementFn:F,inputs:ue,methods:dt}=v;return void 0!==F&&F(),ue&&cr(E,ue),dt&&Ur(E,dt),E}}let hn=(()=>{let v=class{constructor(E,F,ue){this.z=ue,E.detach(),this.el=F.nativeElement}};return v.\u0275fac=function(E){return new(E||v)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},v.\u0275cmp=u.Xpm({type:v,selectors:[["ion-app"]],ngContentSelectors:Re,decls:1,vars:0,template:function(E,F){1&E&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),v=(0,Z.gn)([Gt({defineCustomElementFn:void 0})],v),v})(),Dn=(()=>{let v=class{constructor(E,F,ue){this.z=ue,E.detach(),this.el=F.nativeElement}};return v.\u0275fac=function(E){return new(E||v)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},v.\u0275cmp=u.Xpm({type:v,selectors:[["ion-avatar"]],ngContentSelectors:Re,decls:1,vars:0,template:function(E,F){1&E&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),v=(0,Z.gn)([Gt({defineCustomElementFn:void 0})],v),v})(),Nr=(()=>{let v=class{constructor(E,F,ue){this.z=ue,E.detach(),this.el=F.nativeElement,on(this,this.el,["ionFocus","ionBlur"])}};return v.\u0275fac=function(E){return new(E||v)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},v.\u0275cmp=u.Xpm({type:v,selectors:[["ion-button"]],inputs:{buttonType:"buttonType",color:"color",disabled:"disabled",download:"download",expand:"expand",fill:"fill",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",shape:"shape",size:"size",strong:"strong",target:"target",type:"type"},ngContentSelectors:Re,decls:1,vars:0,template:function(E,F){1&E&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),v=(0,Z.gn)([Gt({defineCustomElementFn:void 0,inputs:["buttonType","color","disabled","download","expand","fill","href","mode","rel","routerAnimation","routerDirection","shape","size","strong","target","type"]})],v),v})(),li=(()=>{let v=class{constructor(E,F,ue){this.z=ue,E.detach(),this.el=F.nativeElement}};return v.\u0275fac=function(E){return new(E||v)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},v.\u0275cmp=u.Xpm({type:v,selectors:[["ion-card"]],inputs:{button:"button",color:"color",disabled:"disabled",download:"download",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",target:"target",type:"type"},ngContentSelectors:Re,decls:1,vars:0,template:function(E,F){1&E&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),v=(0,Z.gn)([Gt({defineCustomElementFn:void 0,inputs:["button","color","disabled","download","href","mode","rel","routerAnimation","routerDirection","target","type"]})],v),v})(),er=(()=>{let v=class{constructor(E,F,ue){this.z=ue,E.detach(),this.el=F.nativeElement}};return v.\u0275fac=function(E){return new(E||v)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},v.\u0275cmp=u.Xpm({type:v,selectors:[["ion-card-content"]],inputs:{mode:"mode"},ngContentSelectors:Re,decls:1,vars:0,template:function(E,F){1&E&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),v=(0,Z.gn)([Gt({defineCustomElementFn:void 0,inputs:["mode"]})],v),v})(),kt=(()=>{let v=class{constructor(E,F,ue){this.z=ue,E.detach(),this.el=F.nativeElement}};return v.\u0275fac=function(E){return new(E||v)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},v.\u0275cmp=u.Xpm({type:v,selectors:[["ion-card-subtitle"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:Re,decls:1,vars:0,template:function(E,F){1&E&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),v=(0,Z.gn)([Gt({defineCustomElementFn:void 0,inputs:["color","mode"]})],v),v})(),Fe=(()=>{let v=class{constructor(E,F,ue){this.z=ue,E.detach(),this.el=F.nativeElement,on(this,this.el,["ionScrollStart","ionScroll","ionScrollEnd"])}};return v.\u0275fac=function(E){return new(E||v)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},v.\u0275cmp=u.Xpm({type:v,selectors:[["ion-content"]],inputs:{color:"color",forceOverscroll:"forceOverscroll",fullscreen:"fullscreen",scrollEvents:"scrollEvents",scrollX:"scrollX",scrollY:"scrollY"},ngContentSelectors:Re,decls:1,vars:0,template:function(E,F){1&E&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),v=(0,Z.gn)([Gt({defineCustomElementFn:void 0,inputs:["color","forceOverscroll","fullscreen","scrollEvents","scrollX","scrollY"],methods:["getScrollElement","scrollToTop","scrollToBottom","scrollByPoint","scrollToPoint"]})],v),v})(),qt=(()=>{let v=class{constructor(E,F,ue){this.z=ue,E.detach(),this.el=F.nativeElement}};return v.\u0275fac=function(E){return new(E||v)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},v.\u0275cmp=u.Xpm({type:v,selectors:[["ion-footer"]],inputs:{collapse:"collapse",mode:"mode",translucent:"translucent"},ngContentSelectors:Re,decls:1,vars:0,template:function(E,F){1&E&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),v=(0,Z.gn)([Gt({defineCustomElementFn:void 0,inputs:["collapse","mode","translucent"]})],v),v})(),Qn=(()=>{let v=class{constructor(E,F,ue){this.z=ue,E.detach(),this.el=F.nativeElement}};return v.\u0275fac=function(E){return new(E||v)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},v.\u0275cmp=u.Xpm({type:v,selectors:[["ion-header"]],inputs:{collapse:"collapse",mode:"mode",translucent:"translucent"},ngContentSelectors:Re,decls:1,vars:0,template:function(E,F){1&E&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),v=(0,Z.gn)([Gt({defineCustomElementFn:void 0,inputs:["collapse","mode","translucent"]})],v),v})(),Yr=(()=>{let v=class{constructor(E,F,ue){this.z=ue,E.detach(),this.el=F.nativeElement}};return v.\u0275fac=function(E){return new(E||v)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},v.\u0275cmp=u.Xpm({type:v,selectors:[["ion-icon"]],inputs:{color:"color",flipRtl:"flipRtl",icon:"icon",ios:"ios",lazy:"lazy",md:"md",mode:"mode",name:"name",sanitize:"sanitize",size:"size",src:"src"},ngContentSelectors:Re,decls:1,vars:0,template:function(E,F){1&E&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),v=(0,Z.gn)([Gt({defineCustomElementFn:void 0,inputs:["color","flipRtl","icon","ios","lazy","md","mode","name","sanitize","size","src"]})],v),v})(),Bn=(()=>{let v=class{constructor(E,F,ue){this.z=ue,E.detach(),this.el=F.nativeElement,on(this,this.el,["ionImgWillLoad","ionImgDidLoad","ionError"])}};return v.\u0275fac=function(E){return new(E||v)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},v.\u0275cmp=u.Xpm({type:v,selectors:[["ion-img"]],inputs:{alt:"alt",src:"src"},ngContentSelectors:Re,decls:1,vars:0,template:function(E,F){1&E&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),v=(0,Z.gn)([Gt({defineCustomElementFn:void 0,inputs:["alt","src"]})],v),v})(),br=(()=>{let v=class{constructor(E,F,ue){this.z=ue,E.detach(),this.el=F.nativeElement,on(this,this.el,["ionInput","ionChange","ionBlur","ionFocus"])}};return v.\u0275fac=function(E){return new(E||v)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},v.\u0275cmp=u.Xpm({type:v,selectors:[["ion-input"]],inputs:{accept:"accept",autocapitalize:"autocapitalize",autocomplete:"autocomplete",autocorrect:"autocorrect",autofocus:"autofocus",clearInput:"clearInput",clearOnEdit:"clearOnEdit",color:"color",debounce:"debounce",disabled:"disabled",enterkeyhint:"enterkeyhint",inputmode:"inputmode",max:"max",maxlength:"maxlength",min:"min",minlength:"minlength",mode:"mode",multiple:"multiple",name:"name",pattern:"pattern",placeholder:"placeholder",readonly:"readonly",required:"required",size:"size",spellcheck:"spellcheck",step:"step",type:"type",value:"value"},ngContentSelectors:Re,decls:1,vars:0,template:function(E,F){1&E&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),v=(0,Z.gn)([Gt({defineCustomElementFn:void 0,inputs:["accept","autocapitalize","autocomplete","autocorrect","autofocus","clearInput","clearOnEdit","color","debounce","disabled","enterkeyhint","inputmode","max","maxlength","min","minlength","mode","multiple","name","pattern","placeholder","readonly","required","size","spellcheck","step","type","value"],methods:["setFocus","getInputElement"]})],v),v})(),Rr=(()=>{let v=class{constructor(E,F,ue){this.z=ue,E.detach(),this.el=F.nativeElement}};return v.\u0275fac=function(E){return new(E||v)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},v.\u0275cmp=u.Xpm({type:v,selectors:[["ion-item"]],inputs:{button:"button",color:"color",counter:"counter",detail:"detail",detailIcon:"detailIcon",disabled:"disabled",download:"download",fill:"fill",href:"href",lines:"lines",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",shape:"shape",target:"target",type:"type"},ngContentSelectors:Re,decls:1,vars:0,template:function(E,F){1&E&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),v=(0,Z.gn)([Gt({defineCustomElementFn:void 0,inputs:["button","color","counter","detail","detailIcon","disabled","download","fill","href","lines","mode","rel","routerAnimation","routerDirection","shape","target","type"]})],v),v})(),bi=(()=>{let v=class{constructor(E,F,ue){this.z=ue,E.detach(),this.el=F.nativeElement}};return v.\u0275fac=function(E){return new(E||v)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},v.\u0275cmp=u.Xpm({type:v,selectors:[["ion-label"]],inputs:{color:"color",mode:"mode",position:"position"},ngContentSelectors:Re,decls:1,vars:0,template:function(E,F){1&E&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),v=(0,Z.gn)([Gt({defineCustomElementFn:void 0,inputs:["color","mode","position"]})],v),v})(),Vr=(()=>{let v=class{constructor(E,F,ue){this.z=ue,E.detach(),this.el=F.nativeElement}};return v.\u0275fac=function(E){return new(E||v)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},v.\u0275cmp=u.Xpm({type:v,selectors:[["ion-list"]],inputs:{inset:"inset",lines:"lines",mode:"mode"},ngContentSelectors:Re,decls:1,vars:0,template:function(E,F){1&E&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),v=(0,Z.gn)([Gt({defineCustomElementFn:void 0,inputs:["inset","lines","mode"],methods:["closeSlidingItems"]})],v),v})(),Tn=(()=>{let v=class{constructor(E,F,ue){this.z=ue,E.detach(),this.el=F.nativeElement,on(this,this.el,["ionChange","ionInput","ionBlur","ionFocus"])}};return v.\u0275fac=function(E){return new(E||v)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},v.\u0275cmp=u.Xpm({type:v,selectors:[["ion-textarea"]],inputs:{autoGrow:"autoGrow",autocapitalize:"autocapitalize",autofocus:"autofocus",clearOnEdit:"clearOnEdit",color:"color",cols:"cols",debounce:"debounce",disabled:"disabled",enterkeyhint:"enterkeyhint",inputmode:"inputmode",maxlength:"maxlength",minlength:"minlength",mode:"mode",name:"name",placeholder:"placeholder",readonly:"readonly",required:"required",rows:"rows",spellcheck:"spellcheck",value:"value",wrap:"wrap"},ngContentSelectors:Re,decls:1,vars:0,template:function(E,F){1&E&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),v=(0,Z.gn)([Gt({defineCustomElementFn:void 0,inputs:["autoGrow","autocapitalize","autofocus","clearOnEdit","color","cols","debounce","disabled","enterkeyhint","inputmode","maxlength","minlength","mode","name","placeholder","readonly","required","rows","spellcheck","value","wrap"],methods:["setFocus","getInputElement"]})],v),v})(),ri=(()=>{let v=class{constructor(E,F,ue){this.z=ue,E.detach(),this.el=F.nativeElement}};return v.\u0275fac=function(E){return new(E||v)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},v.\u0275cmp=u.Xpm({type:v,selectors:[["ion-title"]],inputs:{color:"color",size:"size"},ngContentSelectors:Re,decls:1,vars:0,template:function(E,F){1&E&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),v=(0,Z.gn)([Gt({defineCustomElementFn:void 0,inputs:["color","size"]})],v),v})(),ze=(()=>{let v=class{constructor(E,F,ue){this.z=ue,E.detach(),this.el=F.nativeElement}};return v.\u0275fac=function(E){return new(E||v)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(u.R0b))},v.\u0275cmp=u.Xpm({type:v,selectors:[["ion-toolbar"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:Re,decls:1,vars:0,template:function(E,F){1&E&&(u.F$t(),u.Hsn(0))},encapsulation:2,changeDetection:0}),v=(0,Z.gn)([Gt({defineCustomElementFn:void 0,inputs:["color","mode"]})],v),v})();class We{constructor(L={}){this.data=L}get(L){return this.data[L]}}let lt=(()=>{class v{constructor(E,F){this.zone=E,this.appRef=F}create(E,F,ue){return new Ot(E,F,ue,this.appRef,this.zone)}}return v.\u0275fac=function(E){return new(E||v)(u.LFG(u.R0b),u.LFG(u.z2F))},v.\u0275prov=u.Yz7({token:v,factory:v.\u0275fac}),v})();class Ot{constructor(L,E,F,ue,dt){this.resolver=L,this.injector=E,this.location=F,this.appRef=ue,this.zone=dt,this.elRefMap=new WeakMap,this.elEventsMap=new WeakMap}attachViewToDom(L,E,F,ue){return this.zone.run(()=>new Promise(dt=>{dt(zt(this.zone,this.resolver,this.injector,this.location,this.appRef,this.elRefMap,this.elEventsMap,L,E,F,ue))}))}removeViewFromDom(L,E){return this.zone.run(()=>new Promise(F=>{const ue=this.elRefMap.get(E);if(ue){ue.destroy(),this.elRefMap.delete(E);const dt=this.elEventsMap.get(E);dt&&(dt(),this.elEventsMap.delete(E))}F()}))}}const zt=(v,L,E,F,ue,dt,Kt,En,Nn,Jr,ci)=>{const wi=L.resolveComponentFactory(Nn),eo=u.zs3.create({providers:Xn(Jr),parent:E}),bs=F?F.createComponent(wi,F.length,eo):wi.create(eo),ts=bs.instance,ei=bs.location.nativeElement;if(Jr&&Object.assign(ts,Jr),ci)for(const ia of ci)ei.classList.add(ia);const Wi=Sr(v,ts,ei);return En.appendChild(ei),F||ue.attachView(bs.hostView),bs.changeDetectorRef.reattach(),dt.set(ei,bs),Kt.set(ei,Wi),ei},rn=[Le.L,Le.a,Le.b,Le.c,Le.d],Sr=(v,L,E)=>v.run(()=>{const F=rn.filter(ue=>"function"==typeof L[ue]).map(ue=>{const dt=Kt=>L[ue](Kt.detail);return E.addEventListener(ue,dt),()=>E.removeEventListener(ue,dt)});return()=>F.forEach(ue=>ue())}),ii=new u.OlP("NavParamsToken"),Xn=v=>[{provide:ii,useValue:v},{provide:We,useFactory:Zr,deps:[ii]}],Zr=v=>new We(v),hs=(v,L)=>((v=v.filter(E=>E.stackId!==L.stackId)).push(L),v),zi=(v,L)=>{const E=v.createUrlTree(["."],{relativeTo:L});return v.serializeUrl(E)},Hs=(v,L)=>{if(!v)return;const E=xi(L);for(let F=0;F<E.length;F++){if(F>=v.length)return E[F];if(E[F]!==v[F])return}},xi=v=>v.split("/").map(L=>L.trim()).filter(L=>""!==L),us=v=>{v&&(v.ref.destroy(),v.unlistenEvents())};class vs{constructor(L,E,F,ue,dt,Kt){this.containerEl=E,this.router=F,this.navCtrl=ue,this.zone=dt,this.location=Kt,this.views=[],this.skipTransition=!1,this.nextId=0,this.tabsPrefix=void 0!==L?xi(L):void 0}createView(L,E){var F;const ue=zi(this.router,E),dt=null===(F=null==L?void 0:L.location)||void 0===F?void 0:F.nativeElement,Kt=Sr(this.zone,L.instance,dt);return{id:this.nextId++,stackId:Hs(this.tabsPrefix,ue),unlistenEvents:Kt,element:dt,ref:L,url:ue}}getExistingView(L){const E=zi(this.router,L),F=this.views.find(ue=>ue.url===E);return F&&F.ref.changeDetectorRef.reattach(),F}setActive(L){var E,F;const ue=this.navCtrl.consumeTransition();let{direction:dt,animation:Kt,animationBuilder:En}=ue;const Nn=this.activeView,Jr=((v,L)=>!L||v.stackId!==L.stackId)(L,Nn);Jr&&(dt="back",Kt=void 0);const ci=this.views.slice();let wi;const eo=this.router;eo.getCurrentNavigation?wi=eo.getCurrentNavigation():(null===(E=eo.navigations)||void 0===E?void 0:E.value)&&(wi=eo.navigations.value),(null===(F=null==wi?void 0:wi.extras)||void 0===F?void 0:F.replaceUrl)&&this.views.length>0&&this.views.splice(-1,1);const bs=this.views.includes(L),ts=this.insertView(L,dt);bs||L.ref.changeDetectorRef.detectChanges();const ei=L.animationBuilder;return void 0===En&&"back"===dt&&!Jr&&void 0!==ei&&(En=ei),Nn&&(Nn.animationBuilder=En),this.zone.runOutsideAngular(()=>this.wait(()=>(Nn&&Nn.ref.changeDetectorRef.detach(),L.ref.changeDetectorRef.reattach(),this.transition(L,Nn,Kt,this.canGoBack(1),!1,En).then(()=>si(L,ts,ci,this.location,this.zone)).then(()=>({enteringView:L,direction:dt,animation:Kt,tabSwitch:Jr})))))}canGoBack(L,E=this.getActiveStackId()){return this.getStack(E).length>L}pop(L,E=this.getActiveStackId()){return this.zone.run(()=>{var F,ue;const dt=this.getStack(E);if(dt.length<=L)return Promise.resolve(!1);const Kt=dt[dt.length-L-1];let En=Kt.url;const Nn=Kt.savedData;if(Nn){const ci=Nn.get("primary");(null===(ue=null===(F=null==ci?void 0:ci.route)||void 0===F?void 0:F._routerState)||void 0===ue?void 0:ue.snapshot.url)&&(En=ci.route._routerState.snapshot.url)}const{animationBuilder:Jr}=this.navCtrl.consumeTransition();return this.navCtrl.navigateBack(En,Object.assign(Object.assign({},Kt.savedExtras),{animation:Jr})).then(()=>!0)})}startBackTransition(){const L=this.activeView;if(L){const E=this.getStack(L.stackId),F=E[E.length-2],ue=F.animationBuilder;return this.wait(()=>this.transition(F,L,"back",this.canGoBack(2),!0,ue))}return Promise.resolve()}endBackTransition(L){L?(this.skipTransition=!0,this.pop(1)):this.activeView&&uo(this.activeView,this.views,this.views,this.location,this.zone)}getLastUrl(L){const E=this.getStack(L);return E.length>0?E[E.length-1]:void 0}getRootUrl(L){const E=this.getStack(L);return E.length>0?E[0]:void 0}getActiveStackId(){return this.activeView?this.activeView.stackId:void 0}hasRunningTask(){return void 0!==this.runningTask}destroy(){this.containerEl=void 0,this.views.forEach(us),this.activeView=void 0,this.views=[]}getStack(L){return this.views.filter(E=>E.stackId===L)}insertView(L,E){return this.activeView=L,this.views=((v,L,E)=>"root"===E?hs(v,L):"forward"===E?((v,L)=>(v.indexOf(L)>=0?v=v.filter(F=>F.stackId!==L.stackId||F.id<=L.id):v.push(L),v))(v,L):((v,L)=>v.indexOf(L)>=0?v.filter(F=>F.stackId!==L.stackId||F.id<=L.id):hs(v,L))(v,L))(this.views,L,E),this.views.slice()}transition(L,E,F,ue,dt,Kt){if(this.skipTransition)return this.skipTransition=!1,Promise.resolve(!1);if(E===L)return Promise.resolve(!1);const En=L?L.element:void 0,Nn=E?E.element:void 0,Jr=this.containerEl;return En&&En!==Nn&&(En.classList.add("ion-page"),En.classList.add("ion-page-invisible"),En.parentElement!==Jr&&Jr.appendChild(En),Jr.commit)?Jr.commit(En,Nn,{deepWait:!0,duration:void 0===F?0:void 0,direction:F,showGoBack:ue,progressAnimation:dt,animationBuilder:Kt}):Promise.resolve(!1)}wait(L){return(0,Z.mG)(this,void 0,void 0,function*(){void 0!==this.runningTask&&(yield this.runningTask,this.runningTask=void 0);const E=this.runningTask=L();return E.finally(()=>this.runningTask=void 0),E})}}const si=(v,L,E,F,ue)=>"function"==typeof requestAnimationFrame?new Promise(dt=>{requestAnimationFrame(()=>{uo(v,L,E,F,ue),dt()})}):Promise.resolve(),uo=(v,L,E,F,ue)=>{ue.run(()=>E.filter(dt=>!L.includes(dt)).forEach(us)),L.forEach(dt=>{const En=F.path().split("?")[0].split("#")[0];if(dt!==v&&dt.url!==En){const Nn=dt.element;Nn.setAttribute("aria-hidden","true"),Nn.classList.add("ion-page-hidden"),dt.ref.changeDetectorRef.detach()}})};let Zo=(()=>{class v{get(E,F){const ue=Ts();return ue?ue.get(E,F):null}getBoolean(E,F){const ue=Ts();return!!ue&&ue.getBoolean(E,F)}getNumber(E,F){const ue=Ts();return ue?ue.getNumber(E,F):0}}return v.\u0275fac=function(E){return new(E||v)},v.\u0275prov=u.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})();const Gs=new u.OlP("USERCONFIG"),Ts=()=>{if("undefined"!=typeof window){const v=window.Ionic;if(null==v?void 0:v.config)return v.config}return null};let es=(()=>{class v{constructor(E,F){this.doc=E,this.backButton=new Ue.xQ,this.keyboardDidShow=new Ue.xQ,this.keyboardDidHide=new Ue.xQ,this.pause=new Ue.xQ,this.resume=new Ue.xQ,this.resize=new Ue.xQ,F.run(()=>{var ue;let dt;this.win=E.defaultView,this.backButton.subscribeWithPriority=function(Kt,En){return this.subscribe(Nn=>Nn.register(Kt,Jr=>F.run(()=>En(Jr))))},$i(this.pause,E,"pause"),$i(this.resume,E,"resume"),$i(this.backButton,E,"ionBackButton"),$i(this.resize,this.win,"resize"),$i(this.keyboardDidShow,this.win,"ionKeyboardDidShow"),$i(this.keyboardDidHide,this.win,"ionKeyboardDidHide"),this._readyPromise=new Promise(Kt=>{dt=Kt}),(null===(ue=this.win)||void 0===ue?void 0:ue.cordova)?E.addEventListener("deviceready",()=>{dt("cordova")},{once:!0}):dt("dom")})}is(E){return(0,ve.a)(this.win,E)}platforms(){return(0,ve.g)(this.win)}ready(){return this._readyPromise}get isRTL(){return"rtl"===this.doc.dir}getQueryParam(E){return Do(this.win.location.href,E)}isLandscape(){return!this.isPortrait()}isPortrait(){var E,F;return null===(F=(E=this.win).matchMedia)||void 0===F?void 0:F.call(E,"(orientation: portrait)").matches}testUserAgent(E){const F=this.win.navigator;return!!((null==F?void 0:F.userAgent)&&F.userAgent.indexOf(E)>=0)}url(){return this.win.location.href}width(){return this.win.innerWidth}height(){return this.win.innerHeight}}return v.\u0275fac=function(E){return new(E||v)(u.LFG(pt.K0),u.LFG(u.R0b))},v.\u0275prov=u.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})();const Do=(v,L)=>{L=L.replace(/[[]/,"\\[").replace(/[\]]/,"\\]");const F=new RegExp("[\\?&]"+L+"=([^&#]*)").exec(v);return F?decodeURIComponent(F[1].replace(/\+/g," ")):null},$i=(v,L,E)=>{L&&L.addEventListener(E,F=>{v.next(null!=F?F.detail:void 0)})};let $r=(()=>{class v{constructor(E,F,ue,dt){this.location=F,this.serializer=ue,this.router=dt,this.direction=Ps,this.animated=Ns,this.guessDirection="forward",this.lastNavId=-1,dt&&dt.events.subscribe(Kt=>{if(Kt instanceof _e.OD){const En=Kt.restoredState?Kt.restoredState.navigationId:Kt.id;this.guessDirection=En<this.lastNavId?"back":"forward",this.guessAnimation=Kt.restoredState?void 0:this.guessDirection,this.lastNavId="forward"===this.guessDirection?Kt.id:En}}),E.backButton.subscribeWithPriority(0,Kt=>{this.pop(),Kt()})}navigateForward(E,F={}){return this.setDirection("forward",F.animated,F.animationDirection,F.animation),this.navigate(E,F)}navigateBack(E,F={}){return this.setDirection("back",F.animated,F.animationDirection,F.animation),this.navigate(E,F)}navigateRoot(E,F={}){return this.setDirection("root",F.animated,F.animationDirection,F.animation),this.navigate(E,F)}back(E={animated:!0,animationDirection:"back"}){return this.setDirection("back",E.animated,E.animationDirection,E.animation),this.location.back()}pop(){return(0,Z.mG)(this,void 0,void 0,function*(){let E=this.topOutlet;for(;E&&!(yield E.pop());)E=E.parentOutlet})}setDirection(E,F,ue,dt){this.direction=E,this.animated=Qr(E,F,ue),this.animationBuilder=dt}setTopOutlet(E){this.topOutlet=E}consumeTransition(){let F,E="root";const ue=this.animationBuilder;return"auto"===this.direction?(E=this.guessDirection,F=this.guessAnimation):(F=this.animated,E=this.direction),this.direction=Ps,this.animated=Ns,this.animationBuilder=void 0,{direction:E,animation:F,animationBuilder:ue}}navigate(E,F){if(Array.isArray(E))return this.router.navigate(E,F);{const ue=this.serializer.parse(E.toString());return void 0!==F.queryParams&&(ue.queryParams=Object.assign({},F.queryParams)),void 0!==F.fragment&&(ue.fragment=F.fragment),this.router.navigateByUrl(ue,F)}}}return v.\u0275fac=function(E){return new(E||v)(u.LFG(es),u.LFG(pt.Ye),u.LFG(_e.Hx),u.LFG(_e.F0,8))},v.\u0275prov=u.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})();const Qr=(v,L,E)=>{if(!1!==L){if(void 0!==E)return E;if("forward"===v||"back"===v)return v;if("root"===v&&!0===L)return"forward"}},Ps="auto",Ns=void 0;let cs=(()=>{class v{constructor(E,F,ue,dt,Kt,En,Nn,Jr,ci,wi,eo,bs,ts){this.parentContexts=E,this.location=F,this.resolver=ue,this.config=En,this.navCtrl=Nn,this.parentOutlet=ts,this.activated=null,this.activatedView=null,this._activatedRoute=null,this.proxyMap=new WeakMap,this.currentActivatedRoute$=new Oe.X(null),this.stackEvents=new u.vpe,this.activateEvents=new u.vpe,this.deactivateEvents=new u.vpe,this.nativeEl=ci.nativeElement,this.name=dt||_e.eC,this.tabsPrefix="true"===Kt?zi(wi,bs):void 0,this.stackCtrl=new vs(this.tabsPrefix,this.nativeEl,wi,Nn,eo,Jr),E.onChildOutletCreated(this.name,this)}set animation(E){this.nativeEl.animation=E}set animated(E){this.nativeEl.animated=E}set swipeGesture(E){this._swipeGesture=E,this.nativeEl.swipeHandler=E?{canStart:()=>this.stackCtrl.canGoBack(1)&&!this.stackCtrl.hasRunningTask(),onStart:()=>this.stackCtrl.startBackTransition(),onEnd:F=>this.stackCtrl.endBackTransition(F)}:void 0}ngOnDestroy(){this.stackCtrl.destroy()}getContext(){return this.parentContexts.getContext(this.name)}ngOnInit(){if(!this.activated){const E=this.getContext();(null==E?void 0:E.route)&&this.activateWith(E.route,E.resolver||null)}new Promise(E=>(0,ot.c)(this.nativeEl,E)).then(()=>{void 0===this._swipeGesture&&(this.swipeGesture=this.config.getBoolean("swipeBackEnabled","ios"===this.nativeEl.mode))})}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){throw new Error("incompatible reuse strategy")}attach(E,F){throw new Error("incompatible reuse strategy")}deactivate(){if(this.activated){if(this.activatedView){const F=this.getContext();this.activatedView.savedData=new Map(F.children.contexts);const ue=this.activatedView.savedData.get("primary");if(ue&&F.route&&(ue.route=Object.assign({},F.route)),this.activatedView.savedExtras={},F.route){const dt=F.route.snapshot;this.activatedView.savedExtras.queryParams=dt.queryParams,this.activatedView.savedExtras.fragment=dt.fragment}}const E=this.component;this.activatedView=null,this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(E)}}activateWith(E,F){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=E;let ue,dt=this.stackCtrl.getExistingView(E);if(dt){ue=this.activated=dt.ref;const Kt=dt.savedData;Kt&&(this.getContext().children.contexts=Kt),this.updateActivatedRouteProxy(ue.instance,E)}else{const Nn=(F=F||this.resolver).resolveComponentFactory(E._futureSnapshot.routeConfig.component),Jr=this.parentContexts.getOrCreateContext(this.name).children,ci=new Oe.X(null),wi=this.createActivatedRouteProxy(ci,E),eo=new zs(wi,Jr,this.location.injector);ue=this.activated=this.location.createComponent(Nn,this.location.length,eo),ci.next(ue.instance),dt=this.stackCtrl.createView(this.activated,E),this.proxyMap.set(ue.instance,wi),this.currentActivatedRoute$.next({component:ue.instance,activatedRoute:E})}this.activatedView=dt,this.stackCtrl.setActive(dt).then(Kt=>{this.navCtrl.setTopOutlet(this),this.activateEvents.emit(ue.instance),this.stackEvents.emit(Kt)})}canGoBack(E=1,F){return this.stackCtrl.canGoBack(E,F)}pop(E=1,F){return this.stackCtrl.pop(E,F)}getLastUrl(E){const F=this.stackCtrl.getLastUrl(E);return F?F.url:void 0}getLastRouteView(E){return this.stackCtrl.getLastUrl(E)}getRootView(E){return this.stackCtrl.getRootUrl(E)}getActiveStackId(){return this.stackCtrl.getActiveStackId()}createActivatedRouteProxy(E,F){const ue=new _e.gz;return ue._futureSnapshot=F._futureSnapshot,ue._routerState=F._routerState,ue.snapshot=F.snapshot,ue.outlet=F.outlet,ue.component=F.component,ue._paramMap=this.proxyObservable(E,"paramMap"),ue._queryParamMap=this.proxyObservable(E,"queryParamMap"),ue.url=this.proxyObservable(E,"url"),ue.params=this.proxyObservable(E,"params"),ue.queryParams=this.proxyObservable(E,"queryParams"),ue.fragment=this.proxyObservable(E,"fragment"),ue.data=this.proxyObservable(E,"data"),ue}proxyObservable(E,F){return E.pipe((0,Ze.h)(ue=>!!ue),(0,Ut.w)(ue=>this.currentActivatedRoute$.pipe((0,Ze.h)(dt=>null!==dt&&dt.component===ue),(0,Ut.w)(dt=>dt&&dt.activatedRoute[F]),(0,Xt.x)())))}updateActivatedRouteProxy(E,F){const ue=this.proxyMap.get(E);if(!ue)throw new Error("Could not find activated route proxy for view");ue._futureSnapshot=F._futureSnapshot,ue._routerState=F._routerState,ue.snapshot=F.snapshot,ue.outlet=F.outlet,ue.component=F.component,this.currentActivatedRoute$.next({component:E,activatedRoute:F})}}return v.\u0275fac=function(E){return new(E||v)(u.Y36(_e.y6),u.Y36(u.s_b),u.Y36(u._Vd),u.$8M("name"),u.$8M("tabs"),u.Y36(Zo),u.Y36($r),u.Y36(pt.Ye),u.Y36(u.SBq),u.Y36(_e.F0),u.Y36(u.R0b),u.Y36(_e.gz),u.Y36(v,12))},v.\u0275dir=u.lG2({type:v,selectors:[["ion-router-outlet"]],inputs:{animated:"animated",animation:"animation",swipeGesture:"swipeGesture"},outputs:{stackEvents:"stackEvents",activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),v})();class zs{constructor(L,E,F){this.route=L,this.childContexts=E,this.parent=F}get(L,E){return L===_e.gz?this.route:L===_e.y6?this.childContexts:this.parent.get(L,E)}}class Ft{constructor(L){this.ctrl=L}create(L){return this.ctrl.create(L||{})}dismiss(L,E,F){return this.ctrl.dismiss(L,E,F)}getTop(){return this.ctrl.getTop()}}let Yt=(()=>{class v extends Ft{constructor(){super(_t.b)}}return v.\u0275fac=function(E){return new(E||v)},v.\u0275prov=u.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})(),fi=(()=>{class v extends Ft{constructor(E,F,ue){super(_t.m),this.angularDelegate=E,this.resolver=F,this.injector=ue}create(E){return super.create(Object.assign(Object.assign({},E),{delegate:this.angularDelegate.create(this.resolver,this.injector)}))}}return v.\u0275fac=function(E){return new(E||v)(u.LFG(lt),u.LFG(u._Vd),u.LFG(u.zs3))},v.\u0275prov=u.Yz7({token:v,factory:v.\u0275fac}),v})(),Xr=(()=>{class v extends Ft{constructor(E,F,ue){super(_t.c),this.angularDelegate=E,this.resolver=F,this.injector=ue}create(E){return super.create(Object.assign(Object.assign({},E),{delegate:this.angularDelegate.create(this.resolver,this.injector)}))}}return v.\u0275fac=function(E){return new(E||v)(u.LFG(lt),u.LFG(u._Vd),u.LFG(u.zs3))},v.\u0275prov=u.Yz7({token:v,factory:v.\u0275fac}),v})();class G{shouldDetach(L){return!1}shouldAttach(L){return!1}store(L,E){}retrieve(L){return null}shouldReuseRoute(L,E){if(L.routeConfig!==E.routeConfig)return!1;const F=L.params,ue=E.params,dt=Object.keys(F),Kt=Object.keys(ue);if(dt.length!==Kt.length)return!1;for(const En of dt)if(ue[En]!==F[En])return!1;return!0}}const k=(v,L,E)=>()=>{if(L.defaultView&&"undefined"!=typeof window){(v=>{const L=window,E=L.Ionic;E&&E.config&&"Object"!==E.config.constructor.name||(L.Ionic=L.Ionic||{},L.Ionic.config=Object.assign(Object.assign({},L.Ionic.config),v))})(Object.assign(Object.assign({},v),{_zoneGate:dt=>E.run(dt)}));const ue="__zone_symbol__addEventListener"in L.body?"__zone_symbol__addEventListener":"addEventListener";return function st(){var v=[];if("undefined"!=typeof window){var L=window;(!L.customElements||L.Element&&(!L.Element.prototype.closest||!L.Element.prototype.matches||!L.Element.prototype.remove||!L.Element.prototype.getRootNode))&&v.push(j.e(6748).then(j.t.bind(j,723,23))),("function"!=typeof Object.assign||!Object.entries||!Array.prototype.find||!Array.prototype.includes||!String.prototype.startsWith||!String.prototype.endsWith||L.NodeList&&!L.NodeList.prototype.forEach||!L.fetch||!function(){try{var F=new URL("b","http://a");return F.pathname="c%20d","http://a/c%20d"===F.href&&F.searchParams}catch(ue){return!1}}()||"undefined"==typeof WeakMap)&&v.push(j.e(2214).then(j.t.bind(j,4144,23)))}return Promise.all(v)}().then(()=>((v,L)=>"undefined"==typeof window?Promise.resolve():(0,qe.p)().then(()=>(Qe(),(0,qe.b)(JSON.parse('[["ion-menu_3",[[33,"ion-menu-button",{"color":[513],"disabled":[4],"menu":[1],"autoHide":[4,"auto-hide"],"type":[1],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]],[33,"ion-menu",{"contentId":[513,"content-id"],"menuId":[513,"menu-id"],"type":[1025],"disabled":[1028],"side":[513],"swipeGesture":[4,"swipe-gesture"],"maxEdgeStart":[2,"max-edge-start"],"isPaneVisible":[32],"isEndSide":[32],"isOpen":[64],"isActive":[64],"open":[64],"close":[64],"toggle":[64],"setOpen":[64]},[[16,"ionSplitPaneVisible","onSplitPaneChanged"],[2,"click","onBackdropClick"],[0,"keydown","onKeydown"]]],[1,"ion-menu-toggle",{"menu":[1],"autoHide":[4,"auto-hide"],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]]]],["ion-fab_3",[[33,"ion-fab-button",{"color":[513],"activated":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1],"show":[4],"translucent":[4],"type":[1],"size":[1],"closeIcon":[1,"close-icon"]}],[1,"ion-fab",{"horizontal":[1],"vertical":[1],"edge":[4],"activated":[1028],"close":[64]}],[1,"ion-fab-list",{"activated":[4],"side":[1]}]]],["ion-refresher_2",[[0,"ion-refresher-content",{"pullingIcon":[1025,"pulling-icon"],"pullingText":[1,"pulling-text"],"refreshingSpinner":[1025,"refreshing-spinner"],"refreshingText":[1,"refreshing-text"]}],[32,"ion-refresher",{"pullMin":[2,"pull-min"],"pullMax":[2,"pull-max"],"closeDuration":[1,"close-duration"],"snapbackDuration":[1,"snapback-duration"],"pullFactor":[2,"pull-factor"],"disabled":[4],"nativeRefresher":[32],"state":[32],"complete":[64],"cancel":[64],"getProgress":[64]}]]],["ion-back-button",[[33,"ion-back-button",{"color":[513],"defaultHref":[1025,"default-href"],"disabled":[516],"icon":[1],"text":[1],"type":[1],"routerAnimation":[16]}]]],["ion-toast",[[33,"ion-toast",{"overlayIndex":[2,"overlay-index"],"color":[513],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"duration":[2],"header":[1],"message":[1],"keyboardClose":[4,"keyboard-close"],"position":[1],"buttons":[16],"translucent":[4],"animated":[4],"icon":[1],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-card_5",[[33,"ion-card",{"color":[513],"button":[4],"type":[1],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}],[32,"ion-card-content"],[33,"ion-card-header",{"color":[513],"translucent":[4]}],[33,"ion-card-subtitle",{"color":[513]}],[33,"ion-card-title",{"color":[513]}]]],["ion-item-option_3",[[33,"ion-item-option",{"color":[513],"disabled":[4],"download":[1],"expandable":[4],"href":[1],"rel":[1],"target":[1],"type":[1]}],[32,"ion-item-options",{"side":[1],"fireSwipeEvent":[64]}],[0,"ion-item-sliding",{"disabled":[4],"state":[32],"getOpenAmount":[64],"getSlidingRatio":[64],"open":[64],"close":[64],"closeOpened":[64]}]]],["ion-accordion_2",[[49,"ion-accordion",{"value":[1],"disabled":[4],"readonly":[4],"toggleIcon":[1,"toggle-icon"],"toggleIconSlot":[1,"toggle-icon-slot"],"state":[32],"isNext":[32],"isPrevious":[32]}],[33,"ion-accordion-group",{"animated":[4],"multiple":[4],"value":[1025],"disabled":[4],"readonly":[4],"expand":[1],"requestAccordionToggle":[64],"getAccordions":[64]},[[0,"keydown","onKeydown"]]]]],["ion-infinite-scroll_2",[[32,"ion-infinite-scroll-content",{"loadingSpinner":[1025,"loading-spinner"],"loadingText":[1,"loading-text"]}],[0,"ion-infinite-scroll",{"threshold":[1],"disabled":[4],"position":[1],"isLoading":[32],"complete":[64]}]]],["ion-reorder_2",[[33,"ion-reorder",null,[[2,"click","onClick"]]],[0,"ion-reorder-group",{"disabled":[4],"state":[32],"complete":[64]}]]],["ion-segment_2",[[33,"ion-segment-button",{"disabled":[4],"layout":[1],"type":[1],"value":[1],"checked":[32]}],[33,"ion-segment",{"color":[513],"disabled":[4],"scrollable":[4],"swipeGesture":[4,"swipe-gesture"],"value":[1025],"selectOnFocus":[4,"select-on-focus"],"activated":[32]},[[0,"keydown","onKeyDown"]]]]],["ion-tab-bar_2",[[33,"ion-tab-button",{"disabled":[4],"download":[1],"href":[1],"rel":[1],"layout":[1025],"selected":[1028],"tab":[1],"target":[1]},[[8,"ionTabBarChanged","onTabBarChanged"]]],[33,"ion-tab-bar",{"color":[513],"selectedTab":[1,"selected-tab"],"translucent":[4],"keyboardVisible":[32]}]]],["ion-chip",[[33,"ion-chip",{"color":[513],"outline":[4],"disabled":[4]}]]],["ion-searchbar",[[34,"ion-searchbar",{"color":[513],"animated":[4],"autocomplete":[1],"autocorrect":[1],"cancelButtonIcon":[1,"cancel-button-icon"],"cancelButtonText":[1,"cancel-button-text"],"clearIcon":[1,"clear-icon"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"placeholder":[1],"searchIcon":[1,"search-icon"],"showCancelButton":[1,"show-cancel-button"],"showClearButton":[1,"show-clear-button"],"spellcheck":[4],"type":[1],"value":[1025],"focused":[32],"noAnimate":[32],"setFocus":[64],"getInputElement":[64]}]]],["ion-nav_2",[[1,"ion-nav",{"delegate":[16],"swipeGesture":[1028,"swipe-gesture"],"animated":[4],"animation":[16],"rootParams":[16],"root":[1],"push":[64],"insert":[64],"insertPages":[64],"pop":[64],"popTo":[64],"popToRoot":[64],"removeIndex":[64],"setRoot":[64],"setPages":[64],"setRouteId":[64],"getRouteId":[64],"getActive":[64],"getByIndex":[64],"canGoBack":[64],"getPrevious":[64]}],[0,"ion-nav-link",{"component":[1],"componentProps":[16],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}]]],["ion-slide_2",[[0,"ion-slide"],[36,"ion-slides",{"options":[8],"pager":[4],"scrollbar":[4],"update":[64],"updateAutoHeight":[64],"slideTo":[64],"slideNext":[64],"slidePrev":[64],"getActiveIndex":[64],"getPreviousIndex":[64],"length":[64],"isEnd":[64],"isBeginning":[64],"startAutoplay":[64],"stopAutoplay":[64],"lockSwipeToNext":[64],"lockSwipeToPrev":[64],"lockSwipes":[64],"getSwiper":[64]}]]],["ion-tab_2",[[1,"ion-tab",{"active":[1028],"delegate":[16],"tab":[1],"component":[1],"setActive":[64]}],[1,"ion-tabs",{"useRouter":[1028,"use-router"],"selectedTab":[32],"select":[64],"getTab":[64],"getSelected":[64],"setRouteId":[64],"getRouteId":[64]}]]],["ion-input",[[34,"ion-input",{"fireFocusEvents":[4,"fire-focus-events"],"color":[513],"accept":[1],"autocapitalize":[1],"autocomplete":[1],"autocorrect":[1],"autofocus":[4],"clearInput":[4,"clear-input"],"clearOnEdit":[4,"clear-on-edit"],"debounce":[2],"disabled":[4],"enterkeyhint":[1],"inputmode":[1],"max":[8],"maxlength":[2],"min":[8],"minlength":[2],"multiple":[4],"name":[1],"pattern":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"step":[1],"size":[2],"type":[1],"value":[1032],"hasFocus":[32],"setFocus":[64],"setBlur":[64],"getInputElement":[64]}]]],["ion-textarea",[[34,"ion-textarea",{"fireFocusEvents":[4,"fire-focus-events"],"color":[513],"autocapitalize":[1],"autofocus":[4],"clearOnEdit":[1028,"clear-on-edit"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"maxlength":[2],"minlength":[2],"name":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"cols":[2],"rows":[2],"wrap":[1],"autoGrow":[4,"auto-grow"],"value":[1025],"hasFocus":[32],"setFocus":[64],"setBlur":[64],"getInputElement":[64]}]]],["ion-backdrop",[[33,"ion-backdrop",{"visible":[4],"tappable":[4],"stopPropagation":[4,"stop-propagation"]},[[2,"click","onMouseDown"]]]]],["ion-loading",[[34,"ion-loading",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"message":[1],"cssClass":[1,"css-class"],"duration":[2],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"spinner":[1025],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-breadcrumb_2",[[33,"ion-breadcrumb",{"collapsed":[4],"last":[4],"showCollapsedIndicator":[4,"show-collapsed-indicator"],"color":[1],"active":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"separator":[4],"target":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}],[33,"ion-breadcrumbs",{"color":[1],"maxItems":[2,"max-items"],"itemsBeforeCollapse":[2,"items-before-collapse"],"itemsAfterCollapse":[2,"items-after-collapse"],"collapsed":[32],"activeChanged":[32]},[[0,"collapsedClick","onCollapsedClick"]]]]],["ion-modal",[[33,"ion-modal",{"hasController":[4,"has-controller"],"overlayIndex":[2,"overlay-index"],"delegate":[16],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"breakpoints":[16],"initialBreakpoint":[2,"initial-breakpoint"],"backdropBreakpoint":[2,"backdrop-breakpoint"],"handle":[4],"component":[1],"componentProps":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"animated":[4],"swipeToClose":[4,"swipe-to-close"],"presentingElement":[16],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-route_4",[[0,"ion-route",{"url":[1],"component":[1],"componentProps":[16],"beforeLeave":[16],"beforeEnter":[16]}],[0,"ion-route-redirect",{"from":[1],"to":[1]}],[0,"ion-router",{"root":[1],"useHash":[4,"use-hash"],"canTransition":[64],"push":[64],"back":[64],"printDebug":[64],"navChanged":[64]},[[8,"popstate","onPopState"],[4,"ionBackButton","onBackButton"]]],[1,"ion-router-link",{"color":[513],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}]]],["ion-avatar_3",[[33,"ion-avatar"],[33,"ion-badge",{"color":[513]}],[1,"ion-thumbnail"]]],["ion-col_3",[[1,"ion-col",{"offset":[1],"offsetXs":[1,"offset-xs"],"offsetSm":[1,"offset-sm"],"offsetMd":[1,"offset-md"],"offsetLg":[1,"offset-lg"],"offsetXl":[1,"offset-xl"],"pull":[1],"pullXs":[1,"pull-xs"],"pullSm":[1,"pull-sm"],"pullMd":[1,"pull-md"],"pullLg":[1,"pull-lg"],"pullXl":[1,"pull-xl"],"push":[1],"pushXs":[1,"push-xs"],"pushSm":[1,"push-sm"],"pushMd":[1,"push-md"],"pushLg":[1,"push-lg"],"pushXl":[1,"push-xl"],"size":[1],"sizeXs":[1,"size-xs"],"sizeSm":[1,"size-sm"],"sizeMd":[1,"size-md"],"sizeLg":[1,"size-lg"],"sizeXl":[1,"size-xl"]},[[9,"resize","onResize"]]],[1,"ion-grid",{"fixed":[4]}],[1,"ion-row"]]],["ion-img",[[1,"ion-img",{"alt":[1],"src":[1],"loadSrc":[32],"loadError":[32]}]]],["ion-progress-bar",[[33,"ion-progress-bar",{"type":[1],"reversed":[4],"value":[2],"buffer":[2],"color":[513]}]]],["ion-range",[[33,"ion-range",{"color":[513],"debounce":[2],"name":[1],"dualKnobs":[4,"dual-knobs"],"min":[2],"max":[2],"pin":[4],"pinFormatter":[16],"snaps":[4],"step":[2],"ticks":[4],"disabled":[4],"value":[1026],"ratioA":[32],"ratioB":[32],"pressedKnob":[32]}]]],["ion-split-pane",[[33,"ion-split-pane",{"contentId":[513,"content-id"],"disabled":[4],"when":[8],"visible":[32]}]]],["ion-text",[[1,"ion-text",{"color":[513]}]]],["ion-toggle",[[33,"ion-toggle",{"color":[513],"name":[1],"checked":[1028],"disabled":[4],"value":[1],"activated":[32]}]]],["ion-virtual-scroll",[[0,"ion-virtual-scroll",{"approxItemHeight":[2,"approx-item-height"],"approxHeaderHeight":[2,"approx-header-height"],"approxFooterHeight":[2,"approx-footer-height"],"headerFn":[16],"footerFn":[16],"items":[16],"itemHeight":[16],"headerHeight":[16],"footerHeight":[16],"renderItem":[16],"renderHeader":[16],"renderFooter":[16],"nodeRender":[16],"domRender":[16],"totalHeight":[32],"positionForItem":[64],"checkRange":[64],"checkEnd":[64]},[[9,"resize","onResize"]]]]],["ion-picker-column-internal",[[33,"ion-picker-column-internal",{"items":[16],"value":[1032],"color":[513],"numericInput":[4,"numeric-input"],"isActive":[32],"scrollActiveItemIntoView":[64]}]]],["ion-picker-internal",[[33,"ion-picker-internal"]]],["ion-radio_2",[[33,"ion-radio",{"color":[513],"name":[1],"disabled":[4],"value":[8],"checked":[32],"buttonTabindex":[32],"setFocus":[64],"setButtonTabindex":[64]}],[0,"ion-radio-group",{"allowEmptySelection":[4,"allow-empty-selection"],"name":[1],"value":[1032]},[[4,"keydown","onKeydown"]]]]],["ion-ripple-effect",[[1,"ion-ripple-effect",{"type":[1],"addRipple":[64]}]]],["ion-button_2",[[33,"ion-button",{"color":[513],"buttonType":[1025,"button-type"],"disabled":[516],"expand":[513],"fill":[1537],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"download":[1],"href":[1],"rel":[1],"shape":[513],"size":[513],"strong":[4],"target":[1],"type":[1]}],[1,"ion-icon",{"mode":[1025],"color":[1],"ios":[1],"md":[1],"flipRtl":[4,"flip-rtl"],"name":[513],"src":[1],"icon":[8],"size":[1],"lazy":[4],"sanitize":[4],"svgContent":[32],"isVisible":[32],"ariaLabel":[32]}]]],["ion-datetime_3",[[33,"ion-datetime",{"color":[1],"name":[1],"disabled":[4],"readonly":[4],"min":[1025],"max":[1025],"presentation":[1],"cancelText":[1,"cancel-text"],"doneText":[1,"done-text"],"clearText":[1,"clear-text"],"yearValues":[8,"year-values"],"monthValues":[8,"month-values"],"dayValues":[8,"day-values"],"hourValues":[8,"hour-values"],"minuteValues":[8,"minute-values"],"locale":[1],"firstDayOfWeek":[2,"first-day-of-week"],"value":[1025],"showDefaultTitle":[4,"show-default-title"],"showDefaultButtons":[4,"show-default-buttons"],"showClearButton":[4,"show-clear-button"],"showDefaultTimeLabel":[4,"show-default-time-label"],"hourCycle":[1,"hour-cycle"],"size":[1],"showMonthAndYear":[32],"activeParts":[32],"workingParts":[32],"isPresented":[32],"isTimePopoverOpen":[32],"confirm":[64],"reset":[64],"cancel":[64]}],[34,"ion-picker",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"columns":[16],"cssClass":[1,"css-class"],"duration":[2],"showBackdrop":[4,"show-backdrop"],"backdropDismiss":[4,"backdrop-dismiss"],"animated":[4],"htmlAttributes":[16],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"getColumn":[64]}],[32,"ion-picker-column",{"col":[16]}]]],["ion-action-sheet",[[34,"ion-action-sheet",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"header":[1],"subHeader":[1,"sub-header"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-alert",[[34,"ion-alert",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"header":[1],"subHeader":[1,"sub-header"],"message":[1],"buttons":[16],"inputs":[1040],"backdropDismiss":[4,"backdrop-dismiss"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},[[4,"keydown","onKeydown"]]]]],["ion-popover",[[33,"ion-popover",{"hasController":[4,"has-controller"],"delegate":[16],"overlayIndex":[2,"overlay-index"],"enterAnimation":[16],"leaveAnimation":[16],"component":[1],"componentProps":[16],"keyboardClose":[4,"keyboard-close"],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"event":[8],"showBackdrop":[4,"show-backdrop"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"triggerAction":[1,"trigger-action"],"trigger":[1],"size":[1],"dismissOnSelect":[4,"dismiss-on-select"],"reference":[1],"side":[1],"alignment":[1025],"arrow":[4],"isOpen":[4,"is-open"],"keyboardEvents":[4,"keyboard-events"],"presented":[32],"presentFromTrigger":[64],"present":[64],"dismiss":[64],"getParentPopover":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-checkbox",[[33,"ion-checkbox",{"color":[513],"name":[1],"checked":[1028],"indeterminate":[1028],"disabled":[4],"value":[8]}]]],["ion-select_3",[[33,"ion-select",{"disabled":[4],"cancelText":[1,"cancel-text"],"okText":[1,"ok-text"],"placeholder":[1],"name":[1],"selectedText":[1,"selected-text"],"multiple":[4],"interface":[1],"interfaceOptions":[8,"interface-options"],"compareWith":[1,"compare-with"],"value":[1032],"isExpanded":[32],"open":[64]}],[1,"ion-select-option",{"disabled":[4],"value":[8]}],[34,"ion-select-popover",{"header":[1],"subHeader":[1,"sub-header"],"message":[1],"multiple":[4],"options":[16]},[[0,"ionChange","onSelect"]]]]],["ion-app_8",[[0,"ion-app",{"setFocus":[64]}],[1,"ion-content",{"color":[513],"fullscreen":[4],"forceOverscroll":[1028,"force-overscroll"],"scrollX":[4,"scroll-x"],"scrollY":[4,"scroll-y"],"scrollEvents":[4,"scroll-events"],"getScrollElement":[64],"scrollToTop":[64],"scrollToBottom":[64],"scrollByPoint":[64],"scrollToPoint":[64]},[[8,"appload","onAppLoad"]]],[36,"ion-footer",{"collapse":[1],"translucent":[4]}],[36,"ion-header",{"collapse":[1],"translucent":[4]}],[1,"ion-router-outlet",{"mode":[1025],"delegate":[16],"animated":[4],"animation":[16],"swipeHandler":[16],"commit":[64],"setRouteId":[64],"getRouteId":[64]}],[33,"ion-title",{"color":[513],"size":[1]}],[33,"ion-toolbar",{"color":[513]},[[0,"ionStyle","childrenStyle"]]],[34,"ion-buttons",{"collapse":[4]}]]],["ion-spinner",[[1,"ion-spinner",{"color":[513],"duration":[2],"name":[1],"paused":[4]}]]],["ion-item_8",[[33,"ion-item-divider",{"color":[513],"sticky":[4]}],[32,"ion-item-group"],[1,"ion-skeleton-text",{"animated":[4]}],[32,"ion-list",{"lines":[1],"inset":[4],"closeSlidingItems":[64]}],[33,"ion-list-header",{"color":[513],"lines":[1]}],[49,"ion-item",{"color":[513],"button":[4],"detail":[4],"detailIcon":[1,"detail-icon"],"disabled":[4],"download":[1],"fill":[1],"shape":[1],"href":[1],"rel":[1],"lines":[1],"counter":[4],"routerAnimation":[16],"routerDirection":[1,"router-direction"],"target":[1],"type":[1],"multipleInputs":[32],"focusable":[32],"counterString":[32]},[[0,"ionChange","handleIonChange"],[0,"ionColor","labelColorChanged"],[0,"ionStyle","itemStyle"]]],[34,"ion-label",{"color":[513],"position":[1],"noAnimate":[32]}],[33,"ion-note",{"color":[513]}]]]]'),L))))(0,{exclude:["ion-tabs","ion-tab"],syncQueue:!0,raf:An,jmp:dt=>E.runOutsideAngular(dt),ael(dt,Kt,En,Nn){dt[ue](Kt,En,Nn)},rel(dt,Kt,En,Nn){dt.removeEventListener(Kt,En,Nn)}}))}};let ie=(()=>{class v{static forRoot(E){return{ngModule:v,providers:[{provide:Gs,useValue:E},{provide:u.ip1,useFactory:k,multi:!0,deps:[Gs,pt.K0,u.R0b]}]}}}return v.\u0275fac=function(E){return new(E||v)},v.\u0275mod=u.oAB({type:v}),v.\u0275inj=u.cJS({providers:[lt,fi,Xr],imports:[[pt.ez]]}),v})()},6304:(Jt,ct,j)=>{"use strict";j.d(ct,{c:()=>Oe});var u=j(206);let re;const Ne=_e=>_e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Se=_e=>{if(void 0===re){const ke=void 0!==_e.style.webkitAnimationName;re=void 0===_e.style.animationName&&ke?"-webkit-":""}return re},ae=(_e,Pe,ke)=>{const ht=Pe.startsWith("animation")?Se(_e):"";_e.style.setProperty(ht+Pe,ke)},Ie=(_e,Pe)=>{const ke=Pe.startsWith("animation")?Se(_e):"";_e.style.removeProperty(ke+Pe)},de=[],Ue=(_e=[],Pe)=>{if(void 0!==Pe){const ke=Array.isArray(Pe)?Pe:[Pe];return[..._e,...ke]}return _e},Oe=_e=>{let Pe,ke,ht,ve,ot,Le,pe,pt,st,Qe,nt,Tt,ft,rt=[],_t=[],St=[],qe=!1,Ve={},Ee=[],Te=[],Je={},Ze=0,Ut=!1,Xt=!1,at=!0,Re=!1,Xe=!0;const Zt=_e,gn=[],An=[],ln=[],tn=[],mr=[],xr=[],Kn=[],Yn=[],jt=[],ir=[],Hr="function"==typeof AnimationEffect||"function"==typeof window.AnimationEffect,Jn="function"==typeof Element&&"function"==typeof Element.prototype.animate&&Hr,Ur=()=>ir,ni=(le,H)=>((H&&H.oneTimeCallback?An:gn).push({c:le,o:H}),ft),hn=()=>{if(Jn)ir.forEach(le=>{le.cancel()}),ir.length=0;else{const le=ln.slice();(0,u.r)(()=>{le.forEach(H=>{Ie(H,"animation-name"),Ie(H,"animation-duration"),Ie(H,"animation-timing-function"),Ie(H,"animation-iteration-count"),Ie(H,"animation-delay"),Ie(H,"animation-play-state"),Ie(H,"animation-fill-mode"),Ie(H,"animation-direction")})})}},Dn=()=>{mr.forEach(le=>{le&&le.parentNode&&le.parentNode.removeChild(le)}),mr.length=0},yn=()=>void 0!==ot?ot:pe?pe.getFill():"both",_n=()=>void 0!==st?st:void 0!==Le?Le:pe?pe.getDirection():"normal",Rn=()=>Ut?"linear":void 0!==ht?ht:pe?pe.getEasing():"linear",Fe=()=>Xt?0:void 0!==Qe?Qe:void 0!==ke?ke:pe?pe.getDuration():0,Ce=()=>void 0!==ve?ve:pe?pe.getIterations():1,je=()=>void 0!==nt?nt:void 0!==Pe?Pe:pe?pe.getDelay():0,Mr=()=>{0!==Ze&&(Ze--,0===Ze&&((()=>{Ln(),Yn.forEach(bt=>bt()),jt.forEach(bt=>bt());const le=at?1:0,H=Ee,He=Te,tt=Je;ln.forEach(bt=>{const At=bt.classList;H.forEach(Nt=>At.add(Nt)),He.forEach(Nt=>At.remove(Nt));for(const Nt in tt)tt.hasOwnProperty(Nt)&&ae(bt,Nt,tt[Nt])}),gn.forEach(bt=>bt.c(le,ft)),An.forEach(bt=>bt.c(le,ft)),An.length=0,Xe=!0,at&&(Re=!0),at=!0})(),pe&&pe.animationFinish()))},Or=(le=!0)=>{Dn();const H=(_e=>(_e.forEach(Pe=>{for(const ke in Pe)if(Pe.hasOwnProperty(ke)){const ht=Pe[ke];if("easing"===ke)Pe["animation-timing-function"]=ht,delete Pe[ke];else{const ve=Ne(ke);ve!==ke&&(Pe[ve]=ht,delete Pe[ke])}}}),_e))(rt);ln.forEach(He=>{if(H.length>0){const tt=((_e=[])=>_e.map(Pe=>{const ke=Pe.offset,ht=[];for(const ve in Pe)Pe.hasOwnProperty(ve)&&"offset"!==ve&&ht.push(`${ve}: ${Pe[ve]};`);return`${100*ke}% { ${ht.join(" ")} }`}).join(" "))(H);Tt=void 0!==_e?_e:(_e=>{let Pe=de.indexOf(_e);return Pe<0&&(Pe=de.push(_e)-1),`ion-animation-${Pe}`})(tt);const bt=((_e,Pe,ke)=>{const ht=(_e=>{const Pe=_e.getRootNode();return Pe.head||Pe})(ke),ve=Se(ke),ot=ht.querySelector("#"+_e);if(ot)return ot;const Le=(ke.ownerDocument||document).createElement("style");return Le.id=_e,Le.textContent=`@${ve}keyframes ${_e} { ${Pe} } @${ve}keyframes ${_e}-alt { ${Pe} }`,ht.appendChild(Le),Le})(Tt,tt,He);mr.push(bt),ae(He,"animation-duration",`${Fe()}ms`),ae(He,"animation-timing-function",Rn()),ae(He,"animation-delay",`${je()}ms`),ae(He,"animation-fill-mode",yn()),ae(He,"animation-direction",_n());const At=Ce()===1/0?"infinite":Ce().toString();ae(He,"animation-iteration-count",At),ae(He,"animation-play-state","paused"),le&&ae(He,"animation-name",`${bt.id}-alt`),(0,u.r)(()=>{ae(He,"animation-name",bt.id||null)})}})},Vr=(le=!0)=>{(()=>{xr.forEach(tt=>tt()),Kn.forEach(tt=>tt());const le=_t,H=St,He=Ve;ln.forEach(tt=>{const bt=tt.classList;le.forEach(At=>bt.add(At)),H.forEach(At=>bt.remove(At));for(const At in He)He.hasOwnProperty(At)&&ae(tt,At,He[At])})})(),rt.length>0&&(Jn?(ln.forEach(le=>{const H=le.animate(rt,{id:Zt,delay:je(),duration:Fe(),easing:Rn(),iterations:Ce(),fill:yn(),direction:_n()});H.pause(),ir.push(H)}),ir.length>0&&(ir[0].onfinish=()=>{Mr()})):Or(le)),qe=!0},Mt=le=>{if(le=Math.min(Math.max(le,0),.9999),Jn)ir.forEach(H=>{H.currentTime=H.effect.getComputedTiming().delay+Fe()*le,H.pause()});else{const H=`-${Fe()*le}ms`;ln.forEach(He=>{rt.length>0&&(ae(He,"animation-delay",H),ae(He,"animation-play-state","paused"))})}},mn=le=>{ir.forEach(H=>{H.effect.updateTiming({delay:je(),duration:Fe(),easing:Rn(),iterations:Ce(),fill:yn(),direction:_n()})}),void 0!==le&&Mt(le)},sr=(le=!0,H)=>{(0,u.r)(()=>{ln.forEach(He=>{ae(He,"animation-name",Tt||null),ae(He,"animation-duration",`${Fe()}ms`),ae(He,"animation-timing-function",Rn()),ae(He,"animation-delay",void 0!==H?`-${H*Fe()}ms`:`${je()}ms`),ae(He,"animation-fill-mode",yn()||null),ae(He,"animation-direction",_n()||null);const tt=Ce()===1/0?"infinite":Ce().toString();ae(He,"animation-iteration-count",tt),le&&ae(He,"animation-name",`${Tt}-alt`),(0,u.r)(()=>{ae(He,"animation-name",Tt||null)})})})},yr=(le=!1,H=!0,He)=>(le&&tn.forEach(tt=>{tt.update(le,H,He)}),Jn?mn(He):sr(H,He),ft),dr=()=>{qe&&(Jn?ir.forEach(le=>{le.pause()}):ln.forEach(le=>{ae(le,"animation-play-state","paused")}))},Vi=()=>{pt=void 0,Mr()},Ln=()=>{pt&&clearTimeout(pt)},Tr=le=>new Promise(H=>{le&&le.sync&&(Xt=!0,ni(()=>Xt=!1,{oneTimeCallback:!0})),qe||Vr(),Re&&(Jn?(Mt(0),mn()):sr(),Re=!1),Xe&&(Ze=tn.length+1,Xe=!1),ni(()=>H(),{oneTimeCallback:!0}),tn.forEach(He=>{He.play()}),Jn?(ir.forEach(le=>{le.play()}),(0===rt.length||0===ln.length)&&Mr()):(()=>{if(Ln(),(0,u.r)(()=>{ln.forEach(le=>{rt.length>0&&ae(le,"animation-play-state","running")})}),0===rt.length||0===ln.length)Mr();else{const le=je()||0,H=Fe()||0,He=Ce()||1;isFinite(He)&&(pt=setTimeout(Vi,le+H*He+100)),((_e,Pe)=>{let ke;const ht={passive:!0},ot=Le=>{_e===Le.target&&(ke&&ke(),Ln(),(0,u.r)(()=>{ln.forEach(le=>{Ie(le,"animation-duration"),Ie(le,"animation-delay"),Ie(le,"animation-play-state")}),(0,u.r)(Mr)}))};_e&&(_e.addEventListener("webkitAnimationEnd",ot,ht),_e.addEventListener("animationend",ot,ht),ke=()=>{_e.removeEventListener("webkitAnimationEnd",ot,ht),_e.removeEventListener("animationend",ot,ht)})})(ln[0])}})()}),Ai=(le,H)=>{const He=rt[0];return void 0===He||void 0!==He.offset&&0!==He.offset?rt=[{offset:0,[le]:H},...rt]:He[le]=H,ft};return ft={parentAnimation:pe,elements:ln,childAnimations:tn,id:Zt,animationFinish:Mr,from:Ai,to:(le,H)=>{const He=rt[rt.length-1];return void 0===He||void 0!==He.offset&&1!==He.offset?rt=[...rt,{offset:1,[le]:H}]:He[le]=H,ft},fromTo:(le,H,He)=>Ai(le,H).to(le,He),parent:le=>(pe=le,ft),play:Tr,pause:()=>(tn.forEach(le=>{le.pause()}),dr(),ft),stop:()=>{tn.forEach(le=>{le.stop()}),qe&&(hn(),qe=!1),Ut=!1,Xt=!1,Xe=!0,st=void 0,Qe=void 0,nt=void 0,Ze=0,Re=!1,at=!0},destroy:le=>(tn.forEach(H=>{H.destroy(le)}),(le=>{hn(),le&&Dn()})(le),ln.length=0,tn.length=0,rt.length=0,gn.length=0,An.length=0,qe=!1,Xe=!0,ft),keyframes:le=>{const H=rt!==le;return rt=le,H&&(le=>{Jn?Ur().forEach(H=>{if(H.effect.setKeyframes)H.effect.setKeyframes(le);else{const He=new KeyframeEffect(H.effect.target,le,H.effect.getTiming());H.effect=He}}):Or()})(rt),ft},addAnimation:le=>{if(null!=le)if(Array.isArray(le))for(const H of le)H.parent(ft),tn.push(H);else le.parent(ft),tn.push(le);return ft},addElement:le=>{if(null!=le)if(1===le.nodeType)ln.push(le);else if(le.length>=0)for(let H=0;H<le.length;H++)ln.push(le[H]);else console.error("Invalid addElement value");return ft},update:yr,fill:le=>(ot=le,yr(!0),ft),direction:le=>(Le=le,yr(!0),ft),iterations:le=>(ve=le,yr(!0),ft),duration:le=>(!Jn&&0===le&&(le=1),ke=le,yr(!0),ft),easing:le=>(ht=le,yr(!0),ft),delay:le=>(Pe=le,yr(!0),ft),getWebAnimations:Ur,getKeyframes:()=>rt,getFill:yn,getDirection:_n,getDelay:je,getIterations:Ce,getEasing:Rn,getDuration:Fe,afterAddRead:le=>(Yn.push(le),ft),afterAddWrite:le=>(jt.push(le),ft),afterClearStyles:(le=[])=>{for(const H of le)Je[H]="";return ft},afterStyles:(le={})=>(Je=le,ft),afterRemoveClass:le=>(Te=Ue(Te,le),ft),afterAddClass:le=>(Ee=Ue(Ee,le),ft),beforeAddRead:le=>(xr.push(le),ft),beforeAddWrite:le=>(Kn.push(le),ft),beforeClearStyles:(le=[])=>{for(const H of le)Ve[H]="";return ft},beforeStyles:(le={})=>(Ve=le,ft),beforeRemoveClass:le=>(St=Ue(St,le),ft),beforeAddClass:le=>(_t=Ue(_t,le),ft),onFinish:ni,progressStart:(le=!1,H)=>(tn.forEach(He=>{He.progressStart(le,H)}),dr(),Ut=le,qe||Vr(),yr(!1,!0,H),ft),progressStep:le=>(tn.forEach(H=>{H.progressStep(le)}),Mt(le),ft),progressEnd:(le,H,He)=>(Ut=!1,tn.forEach(tt=>{tt.progressEnd(le,H,He)}),void 0!==He&&(Qe=He),Re=!1,at=!0,0===le?(st="reverse"===_n()?"normal":"reverse","reverse"===st&&(at=!1),Jn?(yr(),Mt(1-H)):(nt=(1-H)*Fe()*-1,yr(!1,!1))):1===le&&(Jn?(yr(),Mt(H)):(nt=H*Fe()*-1,yr(!1,!1))),void 0!==le&&(ni(()=>{Qe=void 0,st=void 0,nt=void 0},{oneTimeCallback:!0}),pe||Tr()),ft)}}},2733:(Jt,ct,j)=>{"use strict";j.d(ct,{G:()=>Se});class re{constructor(Ie,we,ye,de,me){this.id=we,this.name=ye,this.disableScroll=me,this.priority=1e6*de+we,this.ctrl=Ie}canStart(){return!!this.ctrl&&this.ctrl.canStart(this.name)}start(){return!!this.ctrl&&this.ctrl.start(this.name,this.id,this.priority)}capture(){if(!this.ctrl)return!1;const Ie=this.ctrl.capture(this.name,this.id,this.priority);return Ie&&this.disableScroll&&this.ctrl.disableScroll(this.id),Ie}release(){this.ctrl&&(this.ctrl.release(this.id),this.disableScroll&&this.ctrl.enableScroll(this.id))}destroy(){this.release(),this.ctrl=void 0}}class Z{constructor(Ie,we,ye,de){this.id=we,this.disable=ye,this.disableScroll=de,this.ctrl=Ie}block(){if(this.ctrl){if(this.disable)for(const Ie of this.disable)this.ctrl.disableGesture(Ie,this.id);this.disableScroll&&this.ctrl.disableScroll(this.id)}}unblock(){if(this.ctrl){if(this.disable)for(const Ie of this.disable)this.ctrl.enableGesture(Ie,this.id);this.disableScroll&&this.ctrl.enableScroll(this.id)}}destroy(){this.unblock(),this.ctrl=void 0}}const Ne="backdrop-no-scroll",Se=new class u{constructor(){this.gestureId=0,this.requestedStart=new Map,this.disabledGestures=new Map,this.disabledScroll=new Set}createGesture(Ie){return new re(this,this.newID(),Ie.name,Ie.priority||0,!!Ie.disableScroll)}createBlocker(Ie={}){return new Z(this,this.newID(),Ie.disable,!!Ie.disableScroll)}start(Ie,we,ye){return this.canStart(Ie)?(this.requestedStart.set(we,ye),!0):(this.requestedStart.delete(we),!1)}capture(Ie,we,ye){if(!this.start(Ie,we,ye))return!1;const de=this.requestedStart;let me=-1e4;if(de.forEach(te=>{me=Math.max(me,te)}),me===ye){this.capturedId=we,de.clear();const te=new CustomEvent("ionGestureCaptured",{detail:{gestureName:Ie}});return document.dispatchEvent(te),!0}return de.delete(we),!1}release(Ie){this.requestedStart.delete(Ie),this.capturedId===Ie&&(this.capturedId=void 0)}disableGesture(Ie,we){let ye=this.disabledGestures.get(Ie);void 0===ye&&(ye=new Set,this.disabledGestures.set(Ie,ye)),ye.add(we)}enableGesture(Ie,we){const ye=this.disabledGestures.get(Ie);void 0!==ye&&ye.delete(we)}disableScroll(Ie){this.disabledScroll.add(Ie),1===this.disabledScroll.size&&document.body.classList.add(Ne)}enableScroll(Ie){this.disabledScroll.delete(Ie),0===this.disabledScroll.size&&document.body.classList.remove(Ne)}canStart(Ie){return!(void 0!==this.capturedId||this.isDisabled(Ie))}isCaptured(){return void 0!==this.capturedId}isScrollDisabled(){return this.disabledScroll.size>0}isDisabled(Ie){const we=this.disabledGestures.get(Ie);return!!(we&&we.size>0)}newID(){return this.gestureId++,this.gestureId}}},527:(Jt,ct,j)=>{"use strict";j.r(ct),j.d(ct,{MENU_BACK_BUTTON_PRIORITY:()=>Se,OVERLAY_BACK_BUTTON_PRIORITY:()=>Ne,blockHardwareBackButton:()=>re,startHardwareBackButton:()=>Z});var u=j(5861);const re=()=>{document.addEventListener("backbutton",()=>{})},Z=()=>{const ae=document;let Ie=!1;ae.addEventListener("backbutton",()=>{if(Ie)return;let we=0,ye=[];const de=new CustomEvent("ionBackButton",{bubbles:!1,detail:{register(he,Ue){ye.push({priority:he,handler:Ue,id:we++})}}});ae.dispatchEvent(de);const me=function(){var he=(0,u.Z)(function*(Ue){try{if(Ue&&Ue.handler){const Oe=Ue.handler(te);null!=Oe&&(yield Oe)}}catch(Oe){console.error(Oe)}});return function(Oe){return he.apply(this,arguments)}}(),te=()=>{if(ye.length>0){let he={priority:Number.MIN_SAFE_INTEGER,handler:()=>{},id:-1};ye.forEach(Ue=>{Ue.priority>=he.priority&&(he=Ue)}),Ie=!0,ye=ye.filter(Ue=>Ue.id!==he.id),me(he).then(()=>Ie=!1)}};te()})},Ne=100,Se=99},206:(Jt,ct,j)=>{"use strict";j.d(ct,{a:()=>Se,b:()=>ae,c:()=>Z,d:()=>te,e:()=>he,f:()=>me,g:()=>Ie,h:()=>ht,i:()=>Ne,j:()=>de,k:()=>Ue,l:()=>ye,m:()=>Oe,n:()=>ke,o:()=>ve,p:()=>Pe,q:()=>_e,r:()=>we,s:()=>ot,t:()=>u});const u=(Le,rt=0)=>new Promise(_t=>{re(Le,rt,_t)}),re=(Le,rt=0,_t)=>{let St,qe;const pe={passive:!0},Ee=()=>{St&&St()},Te=Je=>{(void 0===Je||Le===Je.target)&&(Ee(),_t(Je))};return Le&&(Le.addEventListener("webkitTransitionEnd",Te,pe),Le.addEventListener("transitionend",Te,pe),qe=setTimeout(Te,rt+500),St=()=>{qe&&(clearTimeout(qe),qe=void 0),Le.removeEventListener("webkitTransitionEnd",Te,pe),Le.removeEventListener("transitionend",Te,pe)}),Ee},Z=(Le,rt)=>{Le.componentOnReady?Le.componentOnReady().then(_t=>rt(_t)):we(()=>rt(Le))},Ne=(Le,rt=[])=>{const _t={};return rt.forEach(St=>{Le.hasAttribute(St)&&(null!==Le.getAttribute(St)&&(_t[St]=Le.getAttribute(St)),Le.removeAttribute(St))}),_t},Se=(Le,rt,_t,St)=>{if("undefined"!=typeof window){const qe=window,pe=qe&&qe.Ionic&&qe.Ionic.config;if(pe){const Ve=pe.get("_ael");if(Ve)return Ve(Le,rt,_t,St);if(pe._ael)return pe._ael(Le,rt,_t,St)}}return Le.addEventListener(rt,_t,St)},ae=(Le,rt,_t,St)=>{if("undefined"!=typeof window){const qe=window,pe=qe&&qe.Ionic&&qe.Ionic.config;if(pe){const Ve=pe.get("_rel");if(Ve)return Ve(Le,rt,_t,St);if(pe._rel)return pe._rel(Le,rt,_t,St)}}return Le.removeEventListener(rt,_t,St)},Ie=(Le,rt=Le)=>Le.shadowRoot||rt,we=Le=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(Le):"function"==typeof requestAnimationFrame?requestAnimationFrame(Le):setTimeout(Le),ye=Le=>!!Le.shadowRoot&&!!Le.attachShadow,de=Le=>{const rt=Le.closest("ion-item");return rt?rt.querySelector("ion-label"):null},me=Le=>{if(Le.focus(),Le.classList.contains("ion-focusable")){const rt=Le.closest("ion-app");rt&&rt.setFocus([Le])}},te=(Le,rt)=>{let _t;const St=Le.getAttribute("aria-labelledby"),qe=Le.id;let pe=null!==St&&""!==St.trim()?St:rt+"-lbl",Ve=null!==St&&""!==St.trim()?document.getElementById(St):de(Le);return Ve?(null===St&&(Ve.id=pe),_t=Ve.textContent,Ve.setAttribute("aria-hidden","true")):""!==qe.trim()&&(Ve=document.querySelector(`label[for="${qe}"]`),Ve&&(""!==Ve.id?pe=Ve.id:Ve.id=pe=`${qe}-lbl`,_t=Ve.textContent)),{label:Ve,labelId:pe,labelText:_t}},he=(Le,rt,_t,St,qe)=>{if(Le||ye(rt)){let pe=rt.querySelector("input.aux-input");pe||(pe=rt.ownerDocument.createElement("input"),pe.type="hidden",pe.classList.add("aux-input"),rt.appendChild(pe)),pe.disabled=qe,pe.name=_t,pe.value=St||""}},Ue=(Le,rt,_t)=>Math.max(Le,Math.min(rt,_t)),Oe=(Le,rt)=>{if(!Le){const _t="ASSERT: "+rt;throw console.error(_t),new Error(_t)}},_e=Le=>Le.timeStamp||Date.now(),Pe=Le=>{if(Le){const rt=Le.changedTouches;if(rt&&rt.length>0){const _t=rt[0];return{x:_t.clientX,y:_t.clientY}}if(void 0!==Le.pageX)return{x:Le.pageX,y:Le.pageY}}return{x:0,y:0}},ke=Le=>{const rt="rtl"===document.dir;switch(Le){case"start":return rt;case"end":return!rt;default:throw new Error(`"${Le}" is not a valid value for [side]. Use "start" or "end" instead.`)}},ht=(Le,rt)=>{const _t=Le._original||Le;return{_original:Le,emit:ve(_t.emit.bind(_t),rt)}},ve=(Le,rt=0)=>{let _t;return(...St)=>{clearTimeout(_t),_t=setTimeout(Le,rt,...St)}},ot=(Le,rt)=>{if(null!=Le||(Le={}),null!=rt||(rt={}),Le===rt)return!0;const _t=Object.keys(Le);if(_t.length!==Object.keys(rt).length)return!1;for(const St of _t)if(!(St in rt)||Le[St]!==rt[St])return!1;return!0}},1363:(Jt,ct,j)=>{"use strict";j.r(ct),j.d(ct,{GESTURE_CONTROLLER:()=>u.G,createGesture:()=>ye});var u=j(2733);const re=(he,Ue,Oe,_e)=>{const Pe=Z(he)?{capture:!!_e.capture,passive:!!_e.passive}:!!_e.capture;let ke,ht;return he.__zone_symbol__addEventListener?(ke="__zone_symbol__addEventListener",ht="__zone_symbol__removeEventListener"):(ke="addEventListener",ht="removeEventListener"),he[ke](Ue,Oe,Pe),()=>{he[ht](Ue,Oe,Pe)}},Z=he=>{if(void 0===Ne)try{const Ue=Object.defineProperty({},"passive",{get:()=>{Ne=!0}});he.addEventListener("optsTest",()=>{},Ue)}catch(Ue){Ne=!1}return!!Ne};let Ne;const Ie=he=>he instanceof Document?he:he.ownerDocument,ye=he=>{let Ue=!1,Oe=!1,_e=!0,Pe=!1;const ke=Object.assign({disableScroll:!1,direction:"x",gesturePriority:0,passive:!0,maxAngle:40,threshold:10},he),ht=ke.canStart,ve=ke.onWillStart,ot=ke.onStart,Le=ke.onEnd,rt=ke.notCaptured,_t=ke.onMove,St=ke.threshold,qe=ke.passive,pe=ke.blurOnStart,Ve={type:"pan",startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,event:void 0,data:void 0},Ee=((he,Ue,Oe)=>{const _e=Oe*(Math.PI/180),Pe="x"===he,ke=Math.cos(_e),ht=Ue*Ue;let ve=0,ot=0,Le=!1,rt=0;return{start(_t,St){ve=_t,ot=St,rt=0,Le=!0},detect(_t,St){if(!Le)return!1;const qe=_t-ve,pe=St-ot,Ve=qe*qe+pe*pe;if(Ve<ht)return!1;const Ee=Math.sqrt(Ve),Te=(Pe?qe:pe)/Ee;return rt=Te>ke?1:Te<-ke?-1:0,Le=!1,!0},isGesture:()=>0!==rt,getDirection:()=>rt}})(ke.direction,ke.threshold,ke.maxAngle),Te=u.G.createGesture({name:he.gestureName,priority:he.gesturePriority,disableScroll:he.disableScroll}),Ut=()=>{!Ue||(Pe=!1,_t&&_t(Ve))},Xt=()=>!(Te&&!Te.capture()||(Ue=!0,_e=!1,Ve.startX=Ve.currentX,Ve.startY=Ve.currentY,Ve.startTime=Ve.currentTime,ve?ve(Ve).then(st):st(),0)),st=()=>{pe&&(()=>{if("undefined"!=typeof document){const Xe=document.activeElement;null!==Xe&&Xe.blur&&Xe.blur()}})(),ot&&ot(Ve),_e=!0},Qe=()=>{Ue=!1,Oe=!1,Pe=!1,_e=!0,Te.release()},nt=Xe=>{const Tt=Ue,ft=_e;if(Qe(),ft){if(de(Ve,Xe),Tt)return void(Le&&Le(Ve));rt&&rt(Ve)}},at=((he,Ue,Oe,_e,Pe)=>{let ke,ht,ve,ot,Le,rt,_t,St=0;const qe=pt=>{St=Date.now()+2e3,Ue(pt)&&(!ht&&Oe&&(ht=re(he,"touchmove",Oe,Pe)),ve||(ve=re(pt.target,"touchend",Ve,Pe)),ot||(ot=re(pt.target,"touchcancel",Ve,Pe)))},pe=pt=>{St>Date.now()||!Ue(pt)||(!rt&&Oe&&(rt=re(Ie(he),"mousemove",Oe,Pe)),_t||(_t=re(Ie(he),"mouseup",Ee,Pe)))},Ve=pt=>{Te(),_e&&_e(pt)},Ee=pt=>{Je(),_e&&_e(pt)},Te=()=>{ht&&ht(),ve&&ve(),ot&&ot(),ht=ve=ot=void 0},Je=()=>{rt&&rt(),_t&&_t(),rt=_t=void 0},Ze=()=>{Te(),Je()},Ut=(pt=!0)=>{pt?(ke||(ke=re(he,"touchstart",qe,Pe)),Le||(Le=re(he,"mousedown",pe,Pe))):(ke&&ke(),Le&&Le(),ke=Le=void 0,Ze())};return{enable:Ut,stop:Ze,destroy:()=>{Ut(!1),_e=Oe=Ue=void 0}}})(ke.el,Xe=>{const Tt=te(Xe);return!(Oe||!_e||(me(Xe,Ve),Ve.startX=Ve.currentX,Ve.startY=Ve.currentY,Ve.startTime=Ve.currentTime=Tt,Ve.velocityX=Ve.velocityY=Ve.deltaX=Ve.deltaY=0,Ve.event=Xe,ht&&!1===ht(Ve))||(Te.release(),!Te.start()))&&(Oe=!0,0===St?Xt():(Ee.start(Ve.startX,Ve.startY),!0))},Xe=>{Ue?!Pe&&_e&&(Pe=!0,de(Ve,Xe),requestAnimationFrame(Ut)):(de(Ve,Xe),Ee.detect(Ve.currentX,Ve.currentY)&&(!Ee.isGesture()||!Xt())&&Re())},nt,{capture:!1,passive:qe}),Re=()=>{Qe(),at.stop(),rt&&rt(Ve)};return{enable(Xe=!0){Xe||(Ue&&nt(void 0),Qe()),at.enable(Xe)},destroy(){Te.destroy(),at.destroy()}}},de=(he,Ue)=>{if(!Ue)return;const Oe=he.currentX,_e=he.currentY,Pe=he.currentTime;me(Ue,he);const ke=he.currentX,ht=he.currentY,ot=(he.currentTime=te(Ue))-Pe;if(ot>0&&ot<100){const rt=(ht-_e)/ot;he.velocityX=(ke-Oe)/ot*.7+.3*he.velocityX,he.velocityY=.7*rt+.3*he.velocityY}he.deltaX=ke-he.startX,he.deltaY=ht-he.startY,he.event=Ue},me=(he,Ue)=>{let Oe=0,_e=0;if(he){const Pe=he.changedTouches;if(Pe&&Pe.length>0){const ke=Pe[0];Oe=ke.clientX,_e=ke.clientY}else void 0!==he.pageX&&(Oe=he.pageX,_e=he.pageY)}Ue.currentX=Oe,Ue.currentY=_e},te=he=>he.timeStamp||Date.now()},2361:(Jt,ct,j)=>{"use strict";j.d(ct,{B:()=>Ai,H:()=>mr,a:()=>Re,b:()=>Or,c:()=>Bi,e:()=>er,f:()=>Tr,g:()=>Xe,h:()=>ln,i:()=>li,j:()=>Ce,k:()=>bi,p:()=>_e,r:()=>mn,s:()=>Ue});var u=j(5861);let Z,Ne,Se,ae=!1,Ie=!1,we=!1,ye=!1,de=!1;const me="undefined"!=typeof window?window:{},te=me.document||{head:{}},he={$flags$:0,$resourcesUrl$:"",jmp:Q=>Q(),raf:Q=>requestAnimationFrame(Q),ael:(Q,ge,le,H)=>Q.addEventListener(ge,le,H),rel:(Q,ge,le,H)=>Q.removeEventListener(ge,le,H),ce:(Q,ge)=>new CustomEvent(Q,ge)},Ue=Q=>{Object.assign(he,Q)},_e=Q=>Promise.resolve(Q),Pe=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replace}catch(Q){}return!1})(),ke=(Q,ge,le,H)=>{le&&le.map(([He,tt,bt])=>{const At=ve(Q,He),Nt=ht(ge,bt),Rt=ot(He);he.ael(At,tt,Nt,Rt),(ge.$rmListeners$=ge.$rmListeners$||[]).push(()=>he.rel(At,tt,Nt,Rt))})},ht=(Q,ge)=>le=>{try{256&Q.$flags$?Q.$lazyInstance$[ge](le):(Q.$queuedListeners$=Q.$queuedListeners$||[]).push([ge,le])}catch(H){Kr(H)}},ve=(Q,ge)=>4&ge?te:8&ge?me:16&ge?te.body:Q,ot=Q=>0!=(2&Q),qe="s-id",pe="sty-id",Te="http://www.w3.org/1999/xlink",Ut=new WeakMap,Xt=(Q,ge,le)=>{let H=dr.get(Q);Pe&&le?(H=H||new CSSStyleSheet,H.replace(ge)):H=ge,dr.set(Q,H)},pt=(Q,ge,le,H)=>{let He=Qe(ge,le),tt=dr.get(He);if(Q=11===Q.nodeType?Q:te,tt)if("string"==typeof tt){let At,bt=Ut.get(Q=Q.head||Q);bt||Ut.set(Q,bt=new Set),bt.has(He)||(Q.host&&(At=Q.querySelector(`[${pe}="${He}"]`))?At.innerHTML=tt:(At=te.createElement("style"),At.innerHTML=tt,Q.insertBefore(At,Q.querySelector("link"))),bt&&bt.add(He))}else Q.adoptedStyleSheets.includes(tt)||(Q.adoptedStyleSheets=[...Q.adoptedStyleSheets,tt]);return He},Qe=(Q,ge)=>"sc-"+(ge&&32&Q.$flags$?Q.$tagName$+"-"+ge:Q.$tagName$),nt=Q=>Q.replace(/\/\*!@([^\/]+)\*\/[^\{]+\{/g,"$1{"),Re=Q=>Br.push(Q),Xe=Q=>Mt(Q).$modeName$,Tt={},An=Q=>"object"==(Q=typeof Q)||"function"===Q,ln=(Q,ge,...le)=>{let H=null,He=null,tt=null,bt=!1,At=!1,Nt=[];const Rt=xn=>{for(let Tn=0;Tn<xn.length;Tn++)H=xn[Tn],Array.isArray(H)?Rt(H):null!=H&&"boolean"!=typeof H&&((bt="function"!=typeof Q&&!An(H))&&(H=String(H)),bt&&At?Nt[Nt.length-1].$text$+=H:Nt.push(bt?tn(null,H):H),At=bt)};if(Rt(le),ge){ge.key&&(He=ge.key),ge.name&&(tt=ge.name);{const xn=ge.className||ge.class;xn&&(ge.class="object"!=typeof xn?xn:Object.keys(xn).filter(Tn=>xn[Tn]).join(" "))}}if("function"==typeof Q)return Q(null===ge?{}:ge,Nt,Kn);const pn=tn(Q,null);return pn.$attrs$=ge,Nt.length>0&&(pn.$children$=Nt),pn.$key$=He,pn.$name$=tt,pn},tn=(Q,ge)=>({$flags$:0,$tag$:Q,$text$:ge,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null}),mr={},Kn={forEach:(Q,ge)=>Q.map(Yn).forEach(ge),map:(Q,ge)=>Q.map(Yn).map(ge).map(jt)},Yn=Q=>({vattrs:Q.$attrs$,vchildren:Q.$children$,vkey:Q.$key$,vname:Q.$name$,vtag:Q.$tag$,vtext:Q.$text$}),jt=Q=>{if("function"==typeof Q.vtag){const le=Object.assign({},Q.vattrs);return Q.vkey&&(le.key=Q.vkey),Q.vname&&(le.name=Q.vname),ln(Q.vtag,le,...Q.vchildren||[])}const ge=tn(Q.vtag,Q.vtext);return ge.$attrs$=Q.vattrs,ge.$children$=Q.vchildren,ge.$key$=Q.vkey,ge.$name$=Q.vname,ge},ir=(Q,ge,le,H,He,tt)=>{if(le!==H){let bt=yr(Q,ge),At=ge.toLowerCase();if("class"===ge){const Nt=Q.classList,Rt=Jn(le),pn=Jn(H);Nt.remove(...Rt.filter(xn=>xn&&!pn.includes(xn))),Nt.add(...pn.filter(xn=>xn&&!Rt.includes(xn)))}else if("style"===ge){for(const Nt in le)(!H||null==H[Nt])&&(Nt.includes("-")?Q.style.removeProperty(Nt):Q.style[Nt]="");for(const Nt in H)(!le||H[Nt]!==le[Nt])&&(Nt.includes("-")?Q.style.setProperty(Nt,H[Nt]):Q.style[Nt]=H[Nt])}else if("key"!==ge)if("ref"===ge)H&&H(Q);else if(bt||"o"!==ge[0]||"n"!==ge[1]){const Nt=An(H);if((bt||Nt&&null!==H)&&!He)try{if(Q.tagName.includes("-"))Q[ge]=H;else{let pn=null==H?"":H;"list"===ge?bt=!1:(null==le||Q[ge]!=pn)&&(Q[ge]=pn)}}catch(pn){}let Rt=!1;At!==(At=At.replace(/^xlink\:?/,""))&&(ge=At,Rt=!0),null==H||!1===H?(!1!==H||""===Q.getAttribute(ge))&&(Rt?Q.removeAttributeNS(Te,ge):Q.removeAttribute(ge)):(!bt||4&tt||He)&&!Nt&&(H=!0===H?"":H,Rt?Q.setAttributeNS(Te,ge,H):Q.setAttribute(ge,H))}else ge="-"===ge[2]?ge.slice(3):yr(me,At)?At.slice(2):At[2]+ge.slice(3),le&&he.rel(Q,ge,le,!1),H&&he.ael(Q,ge,H,!1)}},Hr=/\s/,Jn=Q=>Q?Q.split(Hr):[],cr=(Q,ge,le,H)=>{const He=11===ge.$elm$.nodeType&&ge.$elm$.host?ge.$elm$.host:ge.$elm$,tt=Q&&Q.$attrs$||Tt,bt=ge.$attrs$||Tt;for(H in tt)H in bt||ir(He,H,tt[H],void 0,le,ge.$flags$);for(H in bt)ir(He,H,tt[H],bt[H],le,ge.$flags$)},Ur=(Q,ge,le,H)=>{let bt,At,Nt,He=ge.$children$[le],tt=0;if(ae||(we=!0,"slot"===He.$tag$&&(Z&&H.classList.add(Z+"-s"),He.$flags$|=He.$children$?2:1)),null!==He.$text$)bt=He.$elm$=te.createTextNode(He.$text$);else if(1&He.$flags$)bt=He.$elm$=te.createTextNode("");else{if(ye||(ye="svg"===He.$tag$),bt=He.$elm$=te.createElementNS(ye?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",2&He.$flags$?"slot-fb":He.$tag$),ye&&"foreignObject"===He.$tag$&&(ye=!1),cr(null,He,ye),(Q=>null!=Q)(Z)&&bt["s-si"]!==Z&&bt.classList.add(bt["s-si"]=Z),He.$children$)for(tt=0;tt<He.$children$.length;++tt)At=Ur(Q,He,tt,bt),At&&bt.appendChild(At);"svg"===He.$tag$?ye=!1:"foreignObject"===bt.tagName&&(ye=!0)}return bt["s-hn"]=Se,3&He.$flags$&&(bt["s-sr"]=!0,bt["s-cr"]=Ne,bt["s-sn"]=He.$name$||"",Nt=Q&&Q.$children$&&Q.$children$[le],Nt&&Nt.$tag$===He.$tag$&&Q.$elm$&&on(Q.$elm$,!1)),bt},on=(Q,ge)=>{he.$flags$|=1;const le=Q.childNodes;for(let H=le.length-1;H>=0;H--){const He=le[H];He["s-hn"]!==Se&&He["s-ol"]&&(Dn(He).insertBefore(He,hn(He)),He["s-ol"].remove(),He["s-ol"]=void 0,we=!0),ge&&on(He,ge)}he.$flags$&=-2},qr=(Q,ge,le,H,He,tt)=>{let At,bt=Q["s-cr"]&&Q["s-cr"].parentNode||Q;for(bt.shadowRoot&&bt.tagName===Se&&(bt=bt.shadowRoot);He<=tt;++He)H[He]&&(At=Ur(null,le,He,Q),At&&(H[He].$elm$=At,bt.insertBefore(At,hn(ge))))},Gt=(Q,ge,le,H,He)=>{for(;ge<=le;++ge)(H=Q[ge])&&(He=H.$elm$,Nr(H),Ie=!0,He["s-ol"]?He["s-ol"].remove():on(He,!0),He.remove())},kn=(Q,ge)=>Q.$tag$===ge.$tag$&&("slot"===Q.$tag$?Q.$name$===ge.$name$:Q.$key$===ge.$key$),hn=Q=>Q&&Q["s-ol"]||Q,Dn=Q=>(Q["s-ol"]?Q["s-ol"]:Q).parentNode,jr=(Q,ge)=>{const le=ge.$elm$=Q.$elm$,H=Q.$children$,He=ge.$children$,tt=ge.$tag$,bt=ge.$text$;let At;null===bt?(ye="svg"===tt||"foreignObject"!==tt&&ye,"slot"===tt||cr(Q,ge,ye),null!==H&&null!==He?((Q,ge,le,H)=>{let ri,Xi,He=0,tt=0,bt=0,At=0,Nt=ge.length-1,Rt=ge[0],pn=ge[Nt],xn=H.length-1,Tn=H[0],zn=H[xn];for(;He<=Nt&&tt<=xn;)if(null==Rt)Rt=ge[++He];else if(null==pn)pn=ge[--Nt];else if(null==Tn)Tn=H[++tt];else if(null==zn)zn=H[--xn];else if(kn(Rt,Tn))jr(Rt,Tn),Rt=ge[++He],Tn=H[++tt];else if(kn(pn,zn))jr(pn,zn),pn=ge[--Nt],zn=H[--xn];else if(kn(Rt,zn))("slot"===Rt.$tag$||"slot"===zn.$tag$)&&on(Rt.$elm$.parentNode,!1),jr(Rt,zn),Q.insertBefore(Rt.$elm$,pn.$elm$.nextSibling),Rt=ge[++He],zn=H[--xn];else if(kn(pn,Tn))("slot"===Rt.$tag$||"slot"===zn.$tag$)&&on(pn.$elm$.parentNode,!1),jr(pn,Tn),Q.insertBefore(pn.$elm$,Rt.$elm$),pn=ge[--Nt],Tn=H[++tt];else{for(bt=-1,At=He;At<=Nt;++At)if(ge[At]&&null!==ge[At].$key$&&ge[At].$key$===Tn.$key$){bt=At;break}bt>=0?(Xi=ge[bt],Xi.$tag$!==Tn.$tag$?ri=Ur(ge&&ge[tt],le,bt,Q):(jr(Xi,Tn),ge[bt]=void 0,ri=Xi.$elm$),Tn=H[++tt]):(ri=Ur(ge&&ge[tt],le,tt,Q),Tn=H[++tt]),ri&&Dn(Rt.$elm$).insertBefore(ri,hn(Rt.$elm$))}He>Nt?qr(Q,null==H[xn+1]?null:H[xn+1].$elm$,le,H,tt,xn):tt>xn&&Gt(ge,He,Nt)})(le,H,ge,He):null!==He?(null!==Q.$text$&&(le.textContent=""),qr(le,null,ge,He,0,He.length-1)):null!==H&&Gt(H,0,H.length-1),ye&&"svg"===tt&&(ye=!1)):(At=le["s-cr"])?At.parentNode.textContent=bt:Q.$text$!==bt&&(le.data=bt)},Oi=Q=>{let le,H,He,tt,bt,At,ge=Q.childNodes;for(H=0,He=ge.length;H<He;H++)if(le=ge[H],1===le.nodeType){if(le["s-sr"])for(bt=le["s-sn"],le.hidden=!1,tt=0;tt<He;tt++)if(At=ge[tt].nodeType,ge[tt]["s-hn"]!==le["s-hn"]||""!==bt){if(1===At&&bt===ge[tt].getAttribute("slot")){le.hidden=!0;break}}else if(1===At||3===At&&""!==ge[tt].textContent.trim()){le.hidden=!0;break}Oi(le)}},Vn=[],Pn=Q=>{let ge,le,H,He,tt,bt,At=0,Nt=Q.childNodes,Rt=Nt.length;for(;At<Rt;At++){if(ge=Nt[At],ge["s-sr"]&&(le=ge["s-cr"])&&le.parentNode)for(H=le.parentNode.childNodes,He=ge["s-sn"],bt=H.length-1;bt>=0;bt--)le=H[bt],!le["s-cn"]&&!le["s-nr"]&&le["s-hn"]!==ge["s-hn"]&&(ai(le,He)?(tt=Vn.find(pn=>pn.$nodeToRelocate$===le),Ie=!0,le["s-sn"]=le["s-sn"]||He,tt?tt.$slotRefNode$=ge:Vn.push({$slotRefNode$:ge,$nodeToRelocate$:le}),le["s-sr"]&&Vn.map(pn=>{ai(pn.$nodeToRelocate$,le["s-sn"])&&(tt=Vn.find(xn=>xn.$nodeToRelocate$===le),tt&&!pn.$slotRefNode$&&(pn.$slotRefNode$=tt.$slotRefNode$))})):Vn.some(pn=>pn.$nodeToRelocate$===le)||Vn.push({$nodeToRelocate$:le}));1===ge.nodeType&&Pn(ge)}},ai=(Q,ge)=>1===Q.nodeType?null===Q.getAttribute("slot")&&""===ge||Q.getAttribute("slot")===ge:Q["s-sn"]===ge||""===ge,Nr=Q=>{Q.$attrs$&&Q.$attrs$.ref&&Q.$attrs$.ref(null),Q.$children$&&Q.$children$.map(Nr)},li=Q=>Mt(Q).$hostElement$,er=(Q,ge,le)=>{const H=li(Q);return{emit:He=>nn(H,ge,{bubbles:!!(4&le),composed:!!(2&le),cancelable:!!(1&le),detail:He})}},nn=(Q,ge,le)=>{const H=he.ce(ge,le);return Q.dispatchEvent(H),H},kt=(Q,ge)=>{ge&&!Q.$onRenderResolve$&&ge["s-p"]&&ge["s-p"].push(new Promise(le=>Q.$onRenderResolve$=le))},en=(Q,ge)=>{if(Q.$flags$|=16,!(4&Q.$flags$))return kt(Q,Q.$ancestorComponent$),Bi(()=>yn(Q,ge));Q.$flags$|=512},yn=(Q,ge)=>{const H=Q.$lazyInstance$;let He;return ge&&(Q.$flags$|=256,Q.$queuedListeners$&&(Q.$queuedListeners$.map(([tt,bt])=>Et(H,tt,bt)),Q.$queuedListeners$=null),He=Et(H,"componentWillLoad")),He=ut(He,()=>Et(H,"componentWillRender")),ut(He,()=>_n(Q,H,ge))},_n=function(){var Q=(0,u.Z)(function*(ge,le,H){const He=ge.$hostElement$,bt=He["s-rc"];H&&(Q=>{const ge=Q.$cmpMeta$,le=Q.$hostElement$,H=ge.$flags$,tt=pt(le.shadowRoot?le.shadowRoot:le.getRootNode(),ge,Q.$modeName$);10&H&&(le["s-sc"]=tt,le.classList.add(tt+"-h"),2&H&&le.classList.add(tt+"-s"))})(ge);Rn(ge,le),bt&&(bt.map(Nt=>Nt()),He["s-rc"]=void 0);{const Nt=He["s-p"],Rt=()=>Fe(ge);0===Nt.length?Rt():(Promise.all(Nt).then(Rt),ge.$flags$|=4,Nt.length=0)}});return function(le,H,He){return Q.apply(this,arguments)}}(),Rn=(Q,ge,le)=>{try{ge=ge.render&&ge.render(),Q.$flags$&=-17,Q.$flags$|=2,((Q,ge)=>{const le=Q.$hostElement$,H=Q.$cmpMeta$,He=Q.$vnode$||tn(null,null),tt=(Q=>Q&&Q.$tag$===mr)(ge)?ge:ln(null,null,ge);if(Se=le.tagName,H.$attrsToReflect$&&(tt.$attrs$=tt.$attrs$||{},H.$attrsToReflect$.map(([bt,At])=>tt.$attrs$[At]=le[bt])),tt.$tag$=null,tt.$flags$|=4,Q.$vnode$=tt,tt.$elm$=He.$elm$=le.shadowRoot||le,Z=le["s-sc"],Ne=le["s-cr"],ae=0!=(1&H.$flags$),Ie=!1,jr(He,tt),he.$flags$|=1,we){Pn(tt.$elm$);let bt,At,Nt,Rt,pn,xn,Tn=0;for(;Tn<Vn.length;Tn++)bt=Vn[Tn],At=bt.$nodeToRelocate$,At["s-ol"]||(Nt=te.createTextNode(""),Nt["s-nr"]=At,At.parentNode.insertBefore(At["s-ol"]=Nt,At));for(Tn=0;Tn<Vn.length;Tn++)if(bt=Vn[Tn],At=bt.$nodeToRelocate$,bt.$slotRefNode$){for(Rt=bt.$slotRefNode$.parentNode,pn=bt.$slotRefNode$.nextSibling,Nt=At["s-ol"];Nt=Nt.previousSibling;)if(xn=Nt["s-nr"],xn&&xn["s-sn"]===At["s-sn"]&&Rt===xn.parentNode&&(xn=xn.nextSibling,!xn||!xn["s-nr"])){pn=xn;break}(!pn&&Rt!==At.parentNode||At.nextSibling!==pn)&&At!==pn&&(!At["s-hn"]&&At["s-ol"]&&(At["s-hn"]=At["s-ol"].parentNode.nodeName),Rt.insertBefore(At,pn))}else 1===At.nodeType&&(At.hidden=!0)}Ie&&Oi(tt.$elm$),he.$flags$&=-2,Vn.length=0})(Q,ge)}catch(H){Kr(H,Q.$hostElement$)}return null},Fe=Q=>{const le=Q.$hostElement$,He=Q.$lazyInstance$,tt=Q.$ancestorComponent$;Et(He,"componentDidRender"),64&Q.$flags$?Et(He,"componentDidUpdate"):(Q.$flags$|=64,qt(le),Et(He,"componentDidLoad"),Q.$onReadyResolve$(le),tt||je()),Q.$onInstanceResolve$(le),Q.$onRenderResolve$&&(Q.$onRenderResolve$(),Q.$onRenderResolve$=void 0),512&Q.$flags$&&Ni(()=>en(Q,!1)),Q.$flags$&=-517},Ce=Q=>{{const ge=Mt(Q),le=ge.$hostElement$.isConnected;return le&&2==(18&ge.$flags$)&&en(ge,!1),le}},je=Q=>{qt(te.documentElement),Ni(()=>nn(me,"appload",{detail:{namespace:"ionic"}}))},Et=(Q,ge,le)=>{if(Q&&Q[ge])try{return Q[ge](le)}catch(H){Kr(H)}},ut=(Q,ge)=>Q&&Q.then?Q.then(ge):ge(),qt=Q=>Q.classList.add("hydrated"),Qn=(Q,ge,le,H,He,tt,bt)=>{let At,Nt,Rt,pn;if(1===tt.nodeType){for(At=tt.getAttribute("c-id"),At&&(Nt=At.split("."),(Nt[0]===bt||"0"===Nt[0])&&(Rt={$flags$:0,$hostId$:Nt[0],$nodeId$:Nt[1],$depth$:Nt[2],$index$:Nt[3],$tag$:tt.tagName.toLowerCase(),$elm$:tt,$attrs$:null,$children$:null,$key$:null,$name$:null,$text$:null},ge.push(Rt),tt.removeAttribute("c-id"),Q.$children$||(Q.$children$=[]),Q.$children$[Rt.$index$]=Rt,Q=Rt,H&&"0"===Rt.$depth$&&(H[Rt.$index$]=Rt.$elm$))),pn=tt.childNodes.length-1;pn>=0;pn--)Qn(Q,ge,le,H,He,tt.childNodes[pn],bt);if(tt.shadowRoot)for(pn=tt.shadowRoot.childNodes.length-1;pn>=0;pn--)Qn(Q,ge,le,H,He,tt.shadowRoot.childNodes[pn],bt)}else if(8===tt.nodeType)Nt=tt.nodeValue.split("."),(Nt[1]===bt||"0"===Nt[1])&&(At=Nt[0],Rt={$flags$:0,$hostId$:Nt[1],$nodeId$:Nt[2],$depth$:Nt[3],$index$:Nt[4],$elm$:tt,$attrs$:null,$children$:null,$key$:null,$name$:null,$tag$:null,$text$:null},"t"===At?(Rt.$elm$=tt.nextSibling,Rt.$elm$&&3===Rt.$elm$.nodeType&&(Rt.$text$=Rt.$elm$.textContent,ge.push(Rt),tt.remove(),Q.$children$||(Q.$children$=[]),Q.$children$[Rt.$index$]=Rt,H&&"0"===Rt.$depth$&&(H[Rt.$index$]=Rt.$elm$))):Rt.$hostId$===bt&&("s"===At?(Rt.$tag$="slot",tt["s-sn"]=Nt[5]?Rt.$name$=Nt[5]:"",tt["s-sr"]=!0,H&&(Rt.$elm$=te.createElement(Rt.$tag$),Rt.$name$&&Rt.$elm$.setAttribute("name",Rt.$name$),tt.parentNode.insertBefore(Rt.$elm$,tt),tt.remove(),"0"===Rt.$depth$&&(H[Rt.$index$]=Rt.$elm$)),le.push(Rt),Q.$children$||(Q.$children$=[]),Q.$children$[Rt.$index$]=Rt):"r"===At&&(H?tt.remove():(He["s-cr"]=tt,tt["s-cn"]=!0))));else if(Q&&"style"===Q.$tag$){const xn=tn(null,tt.textContent);xn.$elm$=tt,xn.$index$="0",Q.$children$=[xn]}},Yr=(Q,ge)=>{if(1===Q.nodeType){let le=0;for(;le<Q.childNodes.length;le++)Yr(Q.childNodes[le],ge);if(Q.shadowRoot)for(le=0;le<Q.shadowRoot.childNodes.length;le++)Yr(Q.shadowRoot.childNodes[le],ge)}else if(8===Q.nodeType){const le=Q.nodeValue.split(".");"o"===le[0]&&(ge.set(le[1]+"."+le[2],Q),Q.nodeValue="",Q["s-en"]=le[3])}},br=(Q,ge,le)=>{if(ge.$members$){Q.watchers&&(ge.$watchers$=Q.watchers);const H=Object.entries(ge.$members$),He=Q.prototype;if(H.map(([tt,[bt]])=>{31&bt||2&le&&32&bt?Object.defineProperty(He,tt,{get(){return((Q,ge)=>Mt(this).$instanceValues$.get(ge))(0,tt)},set(At){((Q,ge,le,H)=>{const He=Mt(Q),tt=He.$hostElement$,bt=He.$instanceValues$.get(ge),At=He.$flags$,Nt=He.$lazyInstance$;le=((Q,ge)=>null==Q||An(Q)?Q:4&ge?"false"!==Q&&(""===Q||!!Q):2&ge?parseFloat(Q):1&ge?String(Q):Q)(le,H.$members$[ge][0]);const Rt=Number.isNaN(bt)&&Number.isNaN(le);if((!(8&At)||void 0===bt)&&le!==bt&&!Rt&&(He.$instanceValues$.set(ge,le),Nt)){if(H.$watchers$&&128&At){const xn=H.$watchers$[ge];xn&&xn.map(Tn=>{try{Nt[Tn](le,bt,ge)}catch(zn){Kr(zn,tt)}})}2==(18&At)&&en(He,!1)}})(this,tt,At,ge)},configurable:!0,enumerable:!0}):1&le&&64&bt&&Object.defineProperty(He,tt,{value(...At){const Nt=Mt(this);return Nt.$onInstancePromise$.then(()=>Nt.$lazyInstance$[tt](...At))}})}),1&le){const tt=new Map;He.attributeChangedCallback=function(bt,At,Nt){he.jmp(()=>{const Rt=tt.get(bt);if(this.hasOwnProperty(Rt))Nt=this[Rt],delete this[Rt];else if(He.hasOwnProperty(Rt)&&"number"==typeof this[Rt]&&this[Rt]==Nt)return;this[Rt]=(null!==Nt||"boolean"!=typeof this[Rt])&&Nt})},Q.observedAttributes=H.filter(([bt,At])=>15&At[0]).map(([bt,At])=>{const Nt=At[1]||bt;return tt.set(Nt,bt),512&At[0]&&ge.$attrsToReflect$.push([bt,Nt]),Nt})}}return Q},Rr=function(){var Q=(0,u.Z)(function*(ge,le,H,He,tt){if(0==(32&le.$flags$)){{if(le.$flags$|=32,(tt=yi(H)).then){const Rt=()=>{};tt=yield tt,Rt()}tt.isProxied||(H.$watchers$=tt.watchers,br(tt,H,2),tt.isProxied=!0);const Nt=()=>{};le.$flags$|=8;try{new tt(le)}catch(Rt){Kr(Rt)}le.$flags$&=-9,le.$flags$|=128,Nt(),Fn(le.$lazyInstance$)}if(tt.style){let Nt=tt.style;"string"!=typeof Nt&&(Nt=Nt[le.$modeName$=(Q=>Br.map(ge=>ge(Q)).find(ge=>!!ge))(ge)]);const Rt=Qe(H,le.$modeName$);if(!dr.has(Rt)){const pn=()=>{};Xt(Rt,Nt,!!(1&H.$flags$)),pn()}}}const bt=le.$ancestorComponent$,At=()=>en(le,!0);bt&&bt["s-rc"]?bt["s-rc"].push(At):At()});return function(le,H,He,tt,bt){return Q.apply(this,arguments)}}(),Fn=Q=>{Et(Q,"connectedCallback")},as=Q=>{const ge=Q["s-cr"]=te.createComment("");ge["s-cn"]=!0,Q.insertBefore(ge,Q.firstChild)},Or=(Q,ge={})=>{const H=[],He=ge.exclude||[],tt=me.customElements,bt=te.head,At=bt.querySelector("meta[charset]"),Nt=te.createElement("style"),Rt=[],pn=te.querySelectorAll(`[${pe}]`);let xn,Tn=!0,zn=0;for(Object.assign(he,ge),he.$resourcesUrl$=new URL(ge.resourcesUrl||"./",te.baseURI).href,he.$flags$|=2;zn<pn.length;zn++)Xt(pn[zn].getAttribute(pe),nt(pn[zn].innerHTML),!0);Q.map(ri=>{ri[1].map(Xi=>{const ze={$flags$:Xi[0],$tagName$:Xi[1],$members$:Xi[2],$listeners$:Xi[3]};ze.$members$=Xi[2],ze.$listeners$=Xi[3],ze.$attrsToReflect$=[],ze.$watchers$={};const We=ze.$tagName$,lt=class extends HTMLElement{constructor(Ot){super(Ot),sr(Ot=this,ze),1&ze.$flags$&&Ot.attachShadow({mode:"open",delegatesFocus:!!(16&ze.$flags$)})}connectedCallback(){xn&&(clearTimeout(xn),xn=null),Tn?Rt.push(this):he.jmp(()=>(Q=>{if(0==(1&he.$flags$)){const ge=Mt(Q),le=ge.$cmpMeta$,H=()=>{};if(1&ge.$flags$)ke(Q,ge,le.$listeners$),Fn(ge.$lazyInstance$);else{let He;if(ge.$flags$|=1,He=Q.getAttribute(qe),He){if(1&le.$flags$){const tt=pt(Q.shadowRoot,le,Q.getAttribute("s-mode"));Q.classList.remove(tt+"-h",tt+"-s")}((Q,ge,le,H)=>{const tt=Q.shadowRoot,bt=[],Nt=tt?[]:null,Rt=H.$vnode$=tn(ge,null);he.$orgLocNodes$||Yr(te.body,he.$orgLocNodes$=new Map),Q[qe]=le,Q.removeAttribute(qe),Qn(Rt,bt,[],Nt,Q,Q,le),bt.map(pn=>{const xn=pn.$hostId$+"."+pn.$nodeId$,Tn=he.$orgLocNodes$.get(xn),zn=pn.$elm$;Tn&&""===Tn["s-en"]&&Tn.parentNode.insertBefore(zn,Tn.nextSibling),tt||(zn["s-hn"]=ge,Tn&&(zn["s-ol"]=Tn,zn["s-ol"]["s-nr"]=zn)),he.$orgLocNodes$.delete(xn)}),tt&&Nt.map(pn=>{pn&&tt.appendChild(pn)})})(Q,le.$tagName$,He,ge)}He||12&le.$flags$&&as(Q);{let tt=Q;for(;tt=tt.parentNode||tt.host;)if(1===tt.nodeType&&tt.hasAttribute("s-id")&&tt["s-p"]||tt["s-p"]){kt(ge,ge.$ancestorComponent$=tt);break}}le.$members$&&Object.entries(le.$members$).map(([tt,[bt]])=>{if(31&bt&&Q.hasOwnProperty(tt)){const At=Q[tt];delete Q[tt],Q[tt]=At}}),Ni(()=>Rr(Q,ge,le))}H()}})(this))}disconnectedCallback(){he.jmp(()=>(Q=>{if(0==(1&he.$flags$)){const ge=Mt(this),le=ge.$lazyInstance$;ge.$rmListeners$&&(ge.$rmListeners$.map(H=>H()),ge.$rmListeners$=void 0),Et(le,"disconnectedCallback")}})())}componentOnReady(){return Mt(this).$onReadyPromise$}};ze.$lazyBundleId$=ri[0],!He.includes(We)&&!tt.get(We)&&(H.push(We),tt.define(We,br(lt,ze,1)))})}),Nt.innerHTML=H+"{visibility:hidden}.hydrated{visibility:inherit}",Nt.setAttribute("data-styles",""),bt.insertBefore(Nt,At?At.nextSibling:bt.firstChild),Tn=!1,Rt.length?Rt.map(ri=>ri.connectedCallback()):he.jmp(()=>xn=setTimeout(je,30))},bi=Q=>{const ge=new URL(Q,he.$resourcesUrl$);return ge.origin!==me.location.origin?ge.href:ge.pathname},Vr=new WeakMap,Mt=Q=>Vr.get(Q),mn=(Q,ge)=>Vr.set(ge.$lazyInstance$=Q,ge),sr=(Q,ge)=>{const le={$flags$:0,$hostElement$:Q,$cmpMeta$:ge,$instanceValues$:new Map};return le.$onInstancePromise$=new Promise(H=>le.$onInstanceResolve$=H),le.$onReadyPromise$=new Promise(H=>le.$onReadyResolve$=H),Q["s-p"]=[],Q["s-rc"]=[],ke(Q,le,ge.$listeners$),Vr.set(Q,le)},yr=(Q,ge)=>ge in Q,Kr=(Q,ge)=>(0,console.error)(Q,ge),Gr=new Map,yi=(Q,ge,le)=>{const H=Q.$tagName$.replace(/-/g,"_"),He=Q.$lazyBundleId$,tt=Gr.get(He);return tt?tt[H]:j(863)(`./${He}.entry.js`).then(bt=>(Gr.set(He,bt),bt[H]),Kr)},dr=new Map,Br=[],Vi=[],Ln=[],Zi=(Q,ge)=>le=>{Q.push(le),de||(de=!0,ge&&4&he.$flags$?Ni(Pi):he.raf(Pi))},Qi=Q=>{for(let ge=0;ge<Q.length;ge++)try{Q[ge](performance.now())}catch(le){Kr(le)}Q.length=0},Pi=()=>{Qi(Vi),Qi(Ln),(de=Vi.length>0)&&he.raf(Pi)},Ni=Q=>_e().then(Q),Tr=Zi(Vi,!1),Bi=Zi(Ln,!0),Ai={isDev:!1,isBrowser:!0,isServer:!1,isTesting:!1}},5970:(Jt,ct,j)=>{"use strict";j.d(ct,{m:()=>me});var u=j(5861),re=j(527),Z=j(206),Ne=j(8686),Se=j(6304);const ae=te=>(0,Se.c)().duration(te?400:300),Ie=te=>{let he,Ue;const Oe=te.width+8,_e=(0,Se.c)(),Pe=(0,Se.c)();te.isEndSide?(he=Oe+"px",Ue="0px"):(he=-Oe+"px",Ue="0px"),_e.addElement(te.menuInnerEl).fromTo("transform",`translateX(${he})`,`translateX(${Ue})`);const ht="ios"===(0,Ne.b)(te),ve=ht?.2:.25;return Pe.addElement(te.backdropEl).fromTo("opacity",.01,ve),ae(ht).addAnimation([_e,Pe])},we=te=>{let he,Ue;const Oe=(0,Ne.b)(te),_e=te.width;te.isEndSide?(he=-_e+"px",Ue=_e+"px"):(he=_e+"px",Ue=-_e+"px");const Pe=(0,Se.c)().addElement(te.menuInnerEl).fromTo("transform",`translateX(${Ue})`,"translateX(0px)"),ke=(0,Se.c)().addElement(te.contentEl).fromTo("transform","translateX(0px)",`translateX(${he})`),ht=(0,Se.c)().addElement(te.backdropEl).fromTo("opacity",.01,.32);return ae("ios"===Oe).addAnimation([Pe,ke,ht])},ye=te=>{const he=(0,Ne.b)(te),Ue=te.width*(te.isEndSide?-1:1)+"px",Oe=(0,Se.c)().addElement(te.contentEl).fromTo("transform","translateX(0px)",`translateX(${Ue})`);return ae("ios"===he).addAnimation(Oe)},me=(()=>{const te=new Map,he=[],Ue=function(){var st=(0,u.Z)(function*(Qe){const nt=yield ot(Qe);return!!nt&&nt.open()});return function(nt){return st.apply(this,arguments)}}(),Oe=function(){var st=(0,u.Z)(function*(Qe){const nt=yield void 0!==Qe?ot(Qe):Le();return void 0!==nt&&nt.close()});return function(nt){return st.apply(this,arguments)}}(),_e=function(){var st=(0,u.Z)(function*(Qe){const nt=yield ot(Qe);return!!nt&&nt.toggle()});return function(nt){return st.apply(this,arguments)}}(),Pe=function(){var st=(0,u.Z)(function*(Qe,nt){const at=yield ot(nt);return at&&(at.disabled=!Qe),at});return function(nt,at){return st.apply(this,arguments)}}(),ke=function(){var st=(0,u.Z)(function*(Qe,nt){const at=yield ot(nt);return at&&(at.swipeGesture=Qe),at});return function(nt,at){return st.apply(this,arguments)}}(),ht=function(){var st=(0,u.Z)(function*(Qe){if(null!=Qe){const nt=yield ot(Qe);return void 0!==nt&&nt.isOpen()}return void 0!==(yield Le())});return function(nt){return st.apply(this,arguments)}}(),ve=function(){var st=(0,u.Z)(function*(Qe){const nt=yield ot(Qe);return!!nt&&!nt.disabled});return function(nt){return st.apply(this,arguments)}}(),ot=function(){var st=(0,u.Z)(function*(Qe){return yield pt(),"start"===Qe||"end"===Qe?Xt(Re=>Re.side===Qe&&!Re.disabled)||Xt(Re=>Re.side===Qe):null!=Qe?Xt(at=>at.menuId===Qe):Xt(at=>!at.disabled)||(he.length>0?he[0].el:void 0)});return function(nt){return st.apply(this,arguments)}}(),Le=function(){var st=(0,u.Z)(function*(){return yield pt(),Je()});return function(){return st.apply(this,arguments)}}(),rt=function(){var st=(0,u.Z)(function*(){return yield pt(),Ze()});return function(){return st.apply(this,arguments)}}(),_t=function(){var st=(0,u.Z)(function*(){return yield pt(),Ut()});return function(){return st.apply(this,arguments)}}(),St=(st,Qe)=>{te.set(st,Qe)},Ve=st=>{const Qe=st.side;he.filter(nt=>nt.side===Qe&&nt!==st).forEach(nt=>nt.disabled=!0)},Ee=function(){var st=(0,u.Z)(function*(Qe,nt,at){if(Ut())return!1;if(nt){const Re=yield Le();Re&&Qe.el!==Re&&(yield Re.setOpen(!1,!1))}return Qe._setOpen(nt,at)});return function(nt,at,Re){return st.apply(this,arguments)}}(),Je=()=>Xt(st=>st._isOpen),Ze=()=>he.map(st=>st.el),Ut=()=>he.some(st=>st.isAnimating),Xt=st=>{const Qe=he.find(st);if(void 0!==Qe)return Qe.el},pt=()=>Promise.all(Array.from(document.querySelectorAll("ion-menu")).map(st=>new Promise(Qe=>(0,Z.c)(st,Qe))));return St("reveal",ye),St("push",we),St("overlay",Ie),"undefined"!=typeof document&&document.addEventListener("ionBackButton",st=>{const Qe=Je();Qe&&st.detail.register(re.MENU_BACK_BUTTON_PRIORITY,()=>Qe.close())}),{registerAnimation:St,get:ot,getMenus:rt,getOpen:Le,isEnabled:ve,swipeGesture:ke,isAnimating:_t,isOpen:ht,enable:Pe,toggle:_e,close:Oe,open:Ue,_getOpenSync:Je,_createAnimation:(st,Qe)=>{const nt=te.get(st);if(!nt)throw new Error("animation not registered");return nt(Qe)},_register:st=>{he.indexOf(st)<0&&(st.disabled||Ve(st),he.push(st))},_unregister:st=>{const Qe=he.indexOf(st);Qe>-1&&he.splice(Qe,1)},_setOpen:Ee,_setActiveMenu:Ve}})()},358:(Jt,ct,j)=>{"use strict";j.d(ct,{L:()=>Ne,a:()=>Se,b:()=>ae,c:()=>Ie,d:()=>we,e:()=>St,g:()=>Ve,l:()=>rt,s:()=>qe,t:()=>me});var u=j(5861),re=j(2361),Z=j(206);const Ne="ionViewWillEnter",Se="ionViewDidEnter",ae="ionViewWillLeave",Ie="ionViewDidLeave",we="ionViewWillUnload",me=Ee=>new Promise((Te,Je)=>{(0,re.c)(()=>{te(Ee),he(Ee).then(Ze=>{Ze.animation&&Ze.animation.destroy(),Ue(Ee),Te(Ze)},Ze=>{Ue(Ee),Je(Ze)})})}),te=Ee=>{const Te=Ee.enteringEl,Je=Ee.leavingEl;pe(Te,Je,Ee.direction),Ee.showGoBack?Te.classList.add("can-go-back"):Te.classList.remove("can-go-back"),qe(Te,!1),Te.style.setProperty("pointer-events","none"),Je&&(qe(Je,!1),Je.style.setProperty("pointer-events","none"))},he=function(){var Ee=(0,u.Z)(function*(Te){const Je=yield Oe(Te);return Je&&re.B.isBrowser?_e(Je,Te):Pe(Te)});return function(Je){return Ee.apply(this,arguments)}}(),Ue=Ee=>{const Te=Ee.enteringEl,Je=Ee.leavingEl;Te.classList.remove("ion-page-invisible"),Te.style.removeProperty("pointer-events"),void 0!==Je&&(Je.classList.remove("ion-page-invisible"),Je.style.removeProperty("pointer-events"))},Oe=function(){var Ee=(0,u.Z)(function*(Te){return Te.leavingEl&&Te.animated&&0!==Te.duration?Te.animationBuilder?Te.animationBuilder:"ios"===Te.mode?(yield Promise.resolve().then(j.bind(j,5797))).iosTransitionAnimation:(yield Promise.resolve().then(j.bind(j,6409))).mdTransitionAnimation:void 0});return function(Je){return Ee.apply(this,arguments)}}(),_e=function(){var Ee=(0,u.Z)(function*(Te,Je){yield ke(Je,!0);const Ze=Te(Je.baseEl,Je);ot(Je.enteringEl,Je.leavingEl);const Ut=yield ve(Ze,Je);return Je.progressCallback&&Je.progressCallback(void 0),Ut&&Le(Je.enteringEl,Je.leavingEl),{hasCompleted:Ut,animation:Ze}});return function(Je,Ze){return Ee.apply(this,arguments)}}(),Pe=function(){var Ee=(0,u.Z)(function*(Te){const Je=Te.enteringEl,Ze=Te.leavingEl;return yield ke(Te,!1),ot(Je,Ze),Le(Je,Ze),{hasCompleted:!0}});return function(Je){return Ee.apply(this,arguments)}}(),ke=function(){var Ee=(0,u.Z)(function*(Te,Je){const Ut=(void 0!==Te.deepWait?Te.deepWait:Je)?[St(Te.enteringEl),St(Te.leavingEl)]:[_t(Te.enteringEl),_t(Te.leavingEl)];yield Promise.all(Ut),yield ht(Te.viewIsReady,Te.enteringEl)});return function(Je,Ze){return Ee.apply(this,arguments)}}(),ht=function(){var Ee=(0,u.Z)(function*(Te,Je){Te&&(yield Te(Je))});return function(Je,Ze){return Ee.apply(this,arguments)}}(),ve=(Ee,Te)=>{const Je=Te.progressCallback,Ze=new Promise(Ut=>{Ee.onFinish(Xt=>Ut(1===Xt))});return Je?(Ee.progressStart(!0),Je(Ee)):Ee.play(),Ze},ot=(Ee,Te)=>{rt(Te,ae),rt(Ee,Ne)},Le=(Ee,Te)=>{rt(Ee,Se),rt(Te,Ie)},rt=(Ee,Te)=>{if(Ee){const Je=new CustomEvent(Te,{bubbles:!1,cancelable:!1});Ee.dispatchEvent(Je)}},_t=Ee=>Ee?new Promise(Te=>(0,Z.c)(Ee,Te)):Promise.resolve(),St=function(){var Ee=(0,u.Z)(function*(Te){const Je=Te;if(Je){if(null!=Je.componentOnReady){if(null!=(yield Je.componentOnReady()))return}else if(null!=Je.__registerHost)return void(yield new Promise(Ut=>(0,Z.r)(Ut)));yield Promise.all(Array.from(Je.children).map(St))}});return function(Je){return Ee.apply(this,arguments)}}(),qe=(Ee,Te)=>{Te?(Ee.setAttribute("aria-hidden","true"),Ee.classList.add("ion-page-hidden")):(Ee.hidden=!1,Ee.removeAttribute("aria-hidden"),Ee.classList.remove("ion-page-hidden"))},pe=(Ee,Te,Je)=>{void 0!==Ee&&(Ee.style.zIndex="back"===Je?"99":"101"),void 0!==Te&&(Te.style.zIndex="100")},Ve=Ee=>Ee.classList.contains("ion-page")?Ee:Ee.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")||Ee},8686:(Jt,ct,j)=>{"use strict";j.d(ct,{a:()=>me,b:()=>Ut,c:()=>Z,g:()=>de,i:()=>Xt});var u=j(2361);class re{constructor(){this.m=new Map}reset(st){this.m=new Map(Object.entries(st))}get(st,Qe){const nt=this.m.get(st);return void 0!==nt?nt:Qe}getBoolean(st,Qe=!1){const nt=this.m.get(st);return void 0===nt?Qe:"string"==typeof nt?"true"===nt:!!nt}getNumber(st,Qe){const nt=parseFloat(this.m.get(st));return isNaN(nt)?void 0!==Qe?Qe:NaN:nt}set(st,Qe){this.m.set(st,Qe)}}const Z=new re,ye="ionic-persist-config",de=pt=>te(pt),me=(pt,st)=>("string"==typeof pt&&(st=pt,pt=void 0),de(pt).includes(st)),te=(pt=window)=>{if(void 0===pt)return[];pt.Ionic=pt.Ionic||{};let st=pt.Ionic.platforms;return null==st&&(st=pt.Ionic.platforms=he(pt),st.forEach(Qe=>pt.document.documentElement.classList.add(`plt-${Qe}`))),st},he=pt=>{const st=Z.get("platform");return Object.keys(Je).filter(Qe=>{const nt=st&&st[Qe];return"function"==typeof nt?nt(pt):Je[Qe](pt)})},Oe=pt=>!!(Ee(pt,/iPad/i)||Ee(pt,/Macintosh/i)&&Le(pt)),ke=pt=>Ee(pt,/android|sink/i),Le=pt=>Te(pt,"(any-pointer:coarse)"),_t=pt=>St(pt)||qe(pt),St=pt=>!!(pt.cordova||pt.phonegap||pt.PhoneGap),qe=pt=>{const st=pt.Capacitor;return!(!st||!st.isNative)},Ee=(pt,st)=>st.test(pt.navigator.userAgent),Te=(pt,st)=>pt.matchMedia&&pt.matchMedia(st).matches,Je={ipad:Oe,iphone:pt=>Ee(pt,/iPhone/i),ios:pt=>Ee(pt,/iPhone|iPod/i)||Oe(pt),android:ke,phablet:pt=>{const st=pt.innerWidth,Qe=pt.innerHeight,nt=Math.min(st,Qe),at=Math.max(st,Qe);return nt>390&&nt<520&&at>620&&at<800},tablet:pt=>{const st=pt.innerWidth,Qe=pt.innerHeight,nt=Math.min(st,Qe),at=Math.max(st,Qe);return Oe(pt)||(pt=>ke(pt)&&!Ee(pt,/mobile/i))(pt)||nt>460&&nt<820&&at>780&&at<1400},cordova:St,capacitor:qe,electron:pt=>Ee(pt,/electron/i),pwa:pt=>!!(pt.matchMedia&&pt.matchMedia("(display-mode: standalone)").matches||pt.navigator.standalone),mobile:Le,mobileweb:pt=>Le(pt)&&!_t(pt),desktop:pt=>!Le(pt),hybrid:_t};let Ze;const Ut=pt=>pt&&(0,u.g)(pt)||Ze,Xt=(pt={})=>{if("undefined"==typeof window)return;const st=window.document,Qe=window,nt=Qe.Ionic=Qe.Ionic||{},at={};pt._ael&&(at.ael=pt._ael),pt._rel&&(at.rel=pt._rel),pt._ce&&(at.ce=pt._ce),(0,u.s)(at);const Re=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(pt=>{try{const st=pt.sessionStorage.getItem(ye);return null!==st?JSON.parse(st):{}}catch(st){return{}}})(Qe)),{persistConfig:!1}),nt.config),(pt=>{const st={};return pt.location.search.slice(1).split("&").map(Qe=>Qe.split("=")).map(([Qe,nt])=>[decodeURIComponent(Qe),decodeURIComponent(nt)]).filter(([Qe])=>((pt,st)=>pt.substr(0,st.length)===st)(Qe,"ionic:")).map(([Qe,nt])=>[Qe.slice("ionic:".length),nt]).forEach(([Qe,nt])=>{st[Qe]=nt}),st})(Qe)),pt);Z.reset(Re),Z.getBoolean("persistConfig")&&((pt,st)=>{try{pt.sessionStorage.setItem(ye,JSON.stringify(st))}catch(Qe){return}})(Qe,Re),te(Qe),nt.config=Z,nt.mode=Ze=Z.get("mode",st.documentElement.getAttribute("mode")||(me(Qe,"ios")?"ios":"md")),Z.set("mode",Ze),st.documentElement.setAttribute("mode",Ze),st.documentElement.classList.add(Ze),Z.getBoolean("_testing")&&Z.set("animated",!1);const Xe=ft=>ft.tagName&&ft.tagName.startsWith("ION-"),Tt=ft=>["ios","md"].includes(ft);(0,u.a)(ft=>{for(;ft;){const Zt=ft.mode||ft.getAttribute("mode");if(Zt){if(Tt(Zt))return Zt;Xe(ft)&&console.warn('Invalid ionic mode: "'+Zt+'", expected: "ios" or "md"')}ft=ft.parentElement}return Ze})}},5797:(Jt,ct,j)=>{"use strict";j.r(ct),j.d(ct,{iosTransitionAnimation:()=>te,shadow:()=>ae});var u=j(6304),re=j(358);j(2361);const Se=he=>document.querySelector(`${he}.ion-cloned-element`),ae=he=>he.shadowRoot||he,Ie=he=>{const Ue="ION-TABS"===he.tagName?he:he.querySelector("ion-tabs"),Oe="ion-content ion-header:not(.header-collapse-condense-inactive) ion-title.title-large";if(null!=Ue){const _e=Ue.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");return null!=_e?_e.querySelector(Oe):null}return he.querySelector(Oe)},we=(he,Ue)=>{const Oe="ION-TABS"===he.tagName?he:he.querySelector("ion-tabs");let _e=[];if(null!=Oe){const Pe=Oe.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");null!=Pe&&(_e=Pe.querySelectorAll("ion-buttons"))}else _e=he.querySelectorAll("ion-buttons");for(const Pe of _e){const ke=Pe.closest("ion-header"),ht=ke&&!ke.classList.contains("header-collapse-condense-inactive"),ve=Pe.querySelector("ion-back-button"),ot=Pe.classList.contains("buttons-collapse"),Le="start"===Pe.slot||""===Pe.slot;if(null!==ve&&Le&&(ot&&ht&&Ue||!ot))return ve}return null},de=(he,Ue,Oe,_e,Pe,ke)=>{const ht=Ue?`calc(100% - ${ke.right+4}px)`:ke.left-4+"px",ve=Ue?"7px":"-7px",ot=Ue?"-4px":"4px",Le=Ue?"-4px":"4px",rt=Ue?"right":"left",_t=Ue?"left":"right",pe=Oe?[{offset:0,opacity:1,transform:`translate3d(${ot}, ${ke.top-46}px, 0) scale(1)`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${ve}, ${Pe.top-40}px, 0) scale(2.1)`}]:[{offset:0,opacity:0,transform:`translate3d(${ve}, ${Pe.top-40}px, 0) scale(2.1)`},{offset:1,opacity:1,transform:`translate3d(${ot}, ${ke.top-46}px, 0) scale(1)`}],Te=Oe?[{offset:0,opacity:1,transform:`translate3d(${Le}, ${ke.top-46}px, 0) scale(1)`},{offset:.2,opacity:0,transform:`translate3d(${Le}, ${ke.top-41}px, 0) scale(0.6)`},{offset:1,opacity:0,transform:`translate3d(${Le}, ${ke.top-41}px, 0) scale(0.6)`}]:[{offset:0,opacity:0,transform:`translate3d(${Le}, ${ke.top-41}px, 0) scale(0.6)`},{offset:1,opacity:1,transform:`translate3d(${Le}, ${ke.top-46}px, 0) scale(1)`}],Je=(0,u.c)(),Ze=(0,u.c)(),Ut=Se("ion-back-button"),Xt=ae(Ut).querySelector(".button-text"),pt=ae(Ut).querySelector("ion-icon");Ut.text=_e.text,Ut.mode=_e.mode,Ut.icon=_e.icon,Ut.color=_e.color,Ut.disabled=_e.disabled,Ut.style.setProperty("display","block"),Ut.style.setProperty("position","fixed"),Ze.addElement(pt),Je.addElement(Xt),Je.beforeStyles({"transform-origin":`${rt} center`}).beforeAddWrite(()=>{_e.style.setProperty("display","none"),Ut.style.setProperty(rt,ht)}).afterAddWrite(()=>{_e.style.setProperty("display",""),Ut.style.setProperty("display","none"),Ut.style.removeProperty(rt)}).keyframes(pe),Ze.beforeStyles({"transform-origin":`${_t} center`}).keyframes(Te),he.addAnimation([Je,Ze])},me=(he,Ue,Oe,_e,Pe,ke)=>{const ht=Ue?`calc(100% - ${Pe.right}px)`:`${Pe.left}px`,ve=Ue?"-18px":"18px",ot=Ue?"right":"left",_t=Oe?[{offset:0,opacity:0,transform:`translate3d(${ve}, ${ke.top-4}px, 0) scale(0.49)`},{offset:.1,opacity:0},{offset:1,opacity:1,transform:`translate3d(0, ${Pe.top-2}px, 0) scale(1)`}]:[{offset:0,opacity:.99,transform:`translate3d(0, ${Pe.top-2}px, 0) scale(1)`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${ve}, ${ke.top-4}px, 0) scale(0.5)`}],St=Se("ion-title"),qe=(0,u.c)();St.innerText=_e.innerText,St.size=_e.size,St.color=_e.color,qe.addElement(St),qe.beforeStyles({"transform-origin":`${ot} center`,height:"46px",display:"",position:"relative",[ot]:ht}).beforeAddWrite(()=>{_e.style.setProperty("display","none")}).afterAddWrite(()=>{_e.style.setProperty("display",""),St.style.setProperty("display","none")}).keyframes(_t),he.addAnimation(qe)},te=(he,Ue)=>{try{const Oe="cubic-bezier(0.32,0.72,0,1)",_e="opacity",Pe="transform",ke="0%",ve="rtl"===he.ownerDocument.dir,ot=ve?"-99.5%":"99.5%",Le=ve?"33%":"-33%",rt=Ue.enteringEl,_t=Ue.leavingEl,St="back"===Ue.direction,qe=rt.querySelector(":scope > ion-content"),pe=rt.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *"),Ve=rt.querySelectorAll(":scope > ion-header > ion-toolbar"),Ee=(0,u.c)(),Te=(0,u.c)();if(Ee.addElement(rt).duration(Ue.duration||540).easing(Ue.easing||Oe).fill("both").beforeRemoveClass("ion-page-invisible"),_t&&he){const Xt=(0,u.c)();Xt.addElement(he),Ee.addAnimation(Xt)}if(qe||0!==Ve.length||0!==pe.length?(Te.addElement(qe),Te.addElement(pe)):Te.addElement(rt.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),Ee.addAnimation(Te),St?Te.beforeClearStyles([_e]).fromTo("transform",`translateX(${Le})`,`translateX(${ke})`).fromTo(_e,.8,1):Te.beforeClearStyles([_e]).fromTo("transform",`translateX(${ot})`,`translateX(${ke})`),qe){const Xt=ae(qe).querySelector(".transition-effect");if(Xt){const pt=Xt.querySelector(".transition-cover"),st=Xt.querySelector(".transition-shadow"),Qe=(0,u.c)(),nt=(0,u.c)(),at=(0,u.c)();Qe.addElement(Xt).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),nt.addElement(pt).beforeClearStyles([_e]).fromTo(_e,0,.1),at.addElement(st).beforeClearStyles([_e]).fromTo(_e,.03,.7),Qe.addAnimation([nt,at]),Te.addAnimation([Qe])}}const Je=rt.querySelector("ion-header.header-collapse-condense"),{forward:Ze,backward:Ut}=((he,Ue,Oe,_e,Pe)=>{const ke=we(_e,Oe),ht=Ie(Pe),ve=Ie(_e),ot=we(Pe,Oe),Le=null!==ke&&null!==ht&&!Oe,rt=null!==ve&&null!==ot&&Oe;if(Le){const _t=ht.getBoundingClientRect(),St=ke.getBoundingClientRect();me(he,Ue,Oe,ht,_t,St),de(he,Ue,Oe,ke,_t,St)}else if(rt){const _t=ve.getBoundingClientRect(),St=ot.getBoundingClientRect();me(he,Ue,Oe,ve,_t,St),de(he,Ue,Oe,ot,_t,St)}return{forward:Le,backward:rt}})(Ee,ve,St,rt,_t);if(Ve.forEach(Xt=>{const pt=(0,u.c)();pt.addElement(Xt),Ee.addAnimation(pt);const st=(0,u.c)();st.addElement(Xt.querySelector("ion-title"));const Qe=(0,u.c)(),nt=Array.from(Xt.querySelectorAll("ion-buttons,[menuToggle]")),at=Xt.closest("ion-header"),Re=at&&at.classList.contains("header-collapse-condense-inactive");let Xe;Xe=nt.filter(St?An=>{const ln=An.classList.contains("buttons-collapse");return ln&&!Re||!ln}:An=>!An.classList.contains("buttons-collapse")),Qe.addElement(Xe);const Tt=(0,u.c)();Tt.addElement(Xt.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])"));const ft=(0,u.c)();ft.addElement(ae(Xt).querySelector(".toolbar-background"));const Zt=(0,u.c)(),gn=Xt.querySelector("ion-back-button");if(gn&&Zt.addElement(gn),pt.addAnimation([st,Qe,Tt,ft,Zt]),Qe.fromTo(_e,.01,1),Tt.fromTo(_e,.01,1),St)Re||st.fromTo("transform",`translateX(${Le})`,`translateX(${ke})`).fromTo(_e,.01,1),Tt.fromTo("transform",`translateX(${Le})`,`translateX(${ke})`),Zt.fromTo(_e,.01,1);else if(Je||st.fromTo("transform",`translateX(${ot})`,`translateX(${ke})`).fromTo(_e,.01,1),Tt.fromTo("transform",`translateX(${ot})`,`translateX(${ke})`),ft.beforeClearStyles([_e,"transform"]),(null==at?void 0:at.translucent)?ft.fromTo("transform",ve?"translateX(-100%)":"translateX(100%)","translateX(0px)"):ft.fromTo(_e,.01,"var(--opacity)"),Ze||Zt.fromTo(_e,.01,1),gn&&!Ze){const ln=(0,u.c)();ln.addElement(ae(gn).querySelector(".button-text")).fromTo("transform",ve?"translateX(-100px)":"translateX(100px)","translateX(0px)"),pt.addAnimation(ln)}}),_t){const Xt=(0,u.c)(),pt=_t.querySelector(":scope > ion-content"),st=_t.querySelectorAll(":scope > ion-header > ion-toolbar"),Qe=_t.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *");if(pt||0!==st.length||0!==Qe.length?(Xt.addElement(pt),Xt.addElement(Qe)):Xt.addElement(_t.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),Ee.addAnimation(Xt),St){Xt.beforeClearStyles([_e]).fromTo("transform",`translateX(${ke})`,ve?"translateX(-100%)":"translateX(100%)");const nt=(0,re.g)(_t);Ee.afterAddWrite(()=>{"normal"===Ee.getDirection()&&nt.style.setProperty("display","none")})}else Xt.fromTo("transform",`translateX(${ke})`,`translateX(${Le})`).fromTo(_e,1,.8);if(pt){const nt=ae(pt).querySelector(".transition-effect");if(nt){const at=nt.querySelector(".transition-cover"),Re=nt.querySelector(".transition-shadow"),Xe=(0,u.c)(),Tt=(0,u.c)(),ft=(0,u.c)();Xe.addElement(nt).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),Tt.addElement(at).beforeClearStyles([_e]).fromTo(_e,.1,0),ft.addElement(Re).beforeClearStyles([_e]).fromTo(_e,.7,.03),Xe.addAnimation([Tt,ft]),Xt.addAnimation([Xe])}}st.forEach(nt=>{const at=(0,u.c)();at.addElement(nt);const Re=(0,u.c)();Re.addElement(nt.querySelector("ion-title"));const Xe=(0,u.c)(),Tt=nt.querySelectorAll("ion-buttons,[menuToggle]"),ft=nt.closest("ion-header"),Zt=ft&&ft.classList.contains("header-collapse-condense-inactive"),gn=Array.from(Tt).filter(Kn=>{const Yn=Kn.classList.contains("buttons-collapse");return Yn&&!Zt||!Yn});Xe.addElement(gn);const An=(0,u.c)(),ln=nt.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])");ln.length>0&&An.addElement(ln);const tn=(0,u.c)();tn.addElement(ae(nt).querySelector(".toolbar-background"));const mr=(0,u.c)(),xr=nt.querySelector("ion-back-button");if(xr&&mr.addElement(xr),at.addAnimation([Re,Xe,An,mr,tn]),Ee.addAnimation(at),mr.fromTo(_e,.99,0),Xe.fromTo(_e,.99,0),An.fromTo(_e,.99,0),St){if(Zt||Re.fromTo("transform",`translateX(${ke})`,ve?"translateX(-100%)":"translateX(100%)").fromTo(_e,.99,0),An.fromTo("transform",`translateX(${ke})`,ve?"translateX(-100%)":"translateX(100%)"),tn.beforeClearStyles([_e,"transform"]),(null==ft?void 0:ft.translucent)?tn.fromTo("transform","translateX(0px)",ve?"translateX(-100%)":"translateX(100%)"):tn.fromTo(_e,"var(--opacity)",0),xr&&!Ut){const Yn=(0,u.c)();Yn.addElement(ae(xr).querySelector(".button-text")).fromTo("transform",`translateX(${ke})`,`translateX(${(ve?-124:124)+"px"})`),at.addAnimation(Yn)}}else Zt||Re.fromTo("transform",`translateX(${ke})`,`translateX(${Le})`).fromTo(_e,.99,0).afterClearStyles([Pe,_e]),An.fromTo("transform",`translateX(${ke})`,`translateX(${Le})`).afterClearStyles([Pe,_e]),mr.afterClearStyles([_e]),Re.afterClearStyles([_e]),Xe.afterClearStyles([_e])})}return Ee}catch(Oe){throw Oe}}},6409:(Jt,ct,j)=>{"use strict";j.r(ct),j.d(ct,{mdTransitionAnimation:()=>Ne});var u=j(6304),re=j(358);j(2361);const Ne=(Se,ae)=>{const ye="back"===ae.direction,me=ae.leavingEl,te=(0,re.g)(ae.enteringEl),he=te.querySelector("ion-toolbar"),Ue=(0,u.c)();if(Ue.addElement(te).fill("both").beforeRemoveClass("ion-page-invisible"),ye?Ue.duration(ae.duration||200).easing("cubic-bezier(0.47,0,0.745,0.715)"):Ue.duration(ae.duration||280).easing("cubic-bezier(0.36,0.66,0.04,1)").fromTo("transform","translateY(40px)","translateY(0px)").fromTo("opacity",.01,1),he){const Oe=(0,u.c)();Oe.addElement(he),Ue.addAnimation(Oe)}if(me&&ye){Ue.duration(ae.duration||200).easing("cubic-bezier(0.47,0,0.745,0.715)");const Oe=(0,u.c)();Oe.addElement((0,re.g)(me)).onFinish(_e=>{1===_e&&Oe.elements.length>0&&Oe.elements[0].style.setProperty("display","none")}).fromTo("transform","translateY(0px)","translateY(40px)").fromTo("opacity",1,0),Ue.addAnimation(Oe)}return Ue}},3986:(Jt,ct,j)=>{"use strict";j.d(ct,{B:()=>nt,a:()=>we,b:()=>ye,c:()=>he,d:()=>Ve,e:()=>Oe,f:()=>Te,g:()=>Ut,h:()=>ae,i:()=>pt,j:()=>ht,k:()=>qe,m:()=>me,s:()=>Qe});var u=j(5861),re=j(8686),Z=j(527),Ne=j(206);let Se=0;const ae=new WeakMap,Ie=at=>({create:Re=>_e(at,Re),dismiss:(Re,Xe,Tt)=>_t(document,Re,Xe,at,Tt),getTop:()=>(0,u.Z)(function*(){return qe(document,at)})()}),we=Ie("ion-alert"),ye=Ie("ion-action-sheet"),me=Ie("ion-modal"),he=Ie("ion-popover"),Oe=at=>{"undefined"!=typeof document&&rt(document);const Re=Se++;at.overlayIndex=Re,at.hasAttribute("id")||(at.id=`ion-overlay-${Re}`)},_e=(at,Re)=>"undefined"!=typeof window&&void 0!==window.customElements?window.customElements.whenDefined(at).then(()=>{const Xe=document.createElement(at);return Xe.classList.add("overlay-hidden"),Object.assign(Xe,Object.assign(Object.assign({},Re),{hasController:!0})),Je(document).appendChild(Xe),new Promise(Tt=>(0,Ne.c)(Xe,Tt))}):Promise.resolve(),Pe='[tabindex]:not([tabindex^="-"]), input:not([type=hidden]):not([tabindex^="-"]), textarea:not([tabindex^="-"]), button:not([tabindex^="-"]), select:not([tabindex^="-"]), .ion-focusable:not([tabindex^="-"])',ke="input:not([type=hidden]), textarea, button, select",ht=(at,Re)=>{let Xe=at.querySelector(Pe);const Tt=Xe&&Xe.shadowRoot;Tt&&(Xe=Tt.querySelector(ke)||Xe),Xe?(0,Ne.f)(Xe):Re.focus()},ot=(at,Re)=>{const Xe=Array.from(at.querySelectorAll(Pe));let Tt=Xe.length>0?Xe[Xe.length-1]:null;const ft=Tt&&Tt.shadowRoot;ft&&(Tt=ft.querySelector(ke)||Tt),Tt?Tt.focus():Re.focus()},rt=at=>{0===Se&&(Se=1,at.addEventListener("focus",Re=>{((at,Re)=>{const Xe=qe(Re,"ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover"),Tt=at.target;Xe&&Tt&&!Xe.classList.contains("ion-disable-focus-trap")&&(Xe.shadowRoot?(()=>{if(Xe.contains(Tt))Xe.lastFocus=Tt;else{const gn=Xe.lastFocus;ht(Xe,Xe),gn===Re.activeElement&&ot(Xe,Xe),Xe.lastFocus=Re.activeElement}})():(()=>{if(Xe===Tt)Xe.lastFocus=void 0;else{const gn=(0,Ne.g)(Xe);if(!gn.contains(Tt))return;const An=gn.querySelector(".ion-overlay-wrapper");if(!An)return;if(An.contains(Tt))Xe.lastFocus=Tt;else{const ln=Xe.lastFocus;ht(An,Xe),ln===Re.activeElement&&ot(An,Xe),Xe.lastFocus=Re.activeElement}}})())})(Re,at)},!0),at.addEventListener("ionBackButton",Re=>{const Xe=qe(at);Xe&&Xe.backdropDismiss&&Re.detail.register(Z.OVERLAY_BACK_BUTTON_PRIORITY,()=>Xe.dismiss(void 0,nt))}),at.addEventListener("keyup",Re=>{if("Escape"===Re.key){const Xe=qe(at);Xe&&Xe.backdropDismiss&&Xe.dismiss(void 0,nt)}}))},_t=(at,Re,Xe,Tt,ft)=>{const Zt=qe(at,Tt,ft);return Zt?Zt.dismiss(Re,Xe):Promise.reject("overlay does not exist")},qe=(at,Re,Xe)=>{const Tt=((at,Re)=>(void 0===Re&&(Re="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover,ion-toast"),Array.from(at.querySelectorAll(Re)).filter(Xe=>Xe.overlayIndex>0)))(at,Re).filter(ft=>!(at=>at.classList.contains("overlay-hidden"))(ft));return void 0===Xe?Tt[Tt.length-1]:Tt.find(ft=>ft.id===Xe)},pe=(at=!1)=>{const Xe=Je(document).querySelector("ion-router-outlet, ion-nav, #ion-view-container-root");!Xe||(at?Xe.setAttribute("aria-hidden","true"):Xe.removeAttribute("aria-hidden"))},Ve=function(){var at=(0,u.Z)(function*(Re,Xe,Tt,ft,Zt){var gn,An;if(Re.presented)return;pe(!0),Re.presented=!0,Re.willPresent.emit(),null===(gn=Re.willPresentShorthand)||void 0===gn||gn.emit();const ln=(0,re.b)(Re),tn=Re.enterAnimation?Re.enterAnimation:re.c.get(Xe,"ios"===ln?Tt:ft);(yield Ze(Re,tn,Re.el,Zt))&&(Re.didPresent.emit(),null===(An=Re.didPresentShorthand)||void 0===An||An.emit()),"ION-TOAST"!==Re.el.tagName&&Ee(Re.el),Re.keyboardClose&&Re.el.focus()});return function(Xe,Tt,ft,Zt,gn){return at.apply(this,arguments)}}(),Ee=function(){var at=(0,u.Z)(function*(Re){let Xe=document.activeElement;if(!Xe)return;const Tt=Xe&&Xe.shadowRoot;Tt&&(Xe=Tt.querySelector(ke)||Xe),yield Re.onDidDismiss(),Xe.focus()});return function(Xe){return at.apply(this,arguments)}}(),Te=function(){var at=(0,u.Z)(function*(Re,Xe,Tt,ft,Zt,gn,An){var ln,tn;if(!Re.presented)return!1;pe(!1),Re.presented=!1;try{Re.el.style.setProperty("pointer-events","none"),Re.willDismiss.emit({data:Xe,role:Tt}),null===(ln=Re.willDismissShorthand)||void 0===ln||ln.emit({data:Xe,role:Tt});const mr=(0,re.b)(Re),xr=Re.leaveAnimation?Re.leaveAnimation:re.c.get(ft,"ios"===mr?Zt:gn);"gesture"!==Tt&&(yield Ze(Re,xr,Re.el,An)),Re.didDismiss.emit({data:Xe,role:Tt}),null===(tn=Re.didDismissShorthand)||void 0===tn||tn.emit({data:Xe,role:Tt}),ae.delete(Re),Re.el.classList.add("overlay-hidden"),Re.el.style.removeProperty("pointer-events")}catch(mr){console.error(mr)}return Re.el.remove(),!0});return function(Xe,Tt,ft,Zt,gn,An,ln){return at.apply(this,arguments)}}(),Je=at=>at.querySelector("ion-app")||at.body,Ze=function(){var at=(0,u.Z)(function*(Re,Xe,Tt,ft){Tt.classList.remove("overlay-hidden");const gn=Xe(Re.el,ft);(!Re.animated||!re.c.getBoolean("animated",!0))&&gn.duration(0),Re.keyboardClose&&gn.beforeAddWrite(()=>{const ln=Tt.ownerDocument.activeElement;ln&&ln.matches("input,ion-input, ion-textarea")&&ln.blur()});const An=ae.get(Re)||[];return ae.set(Re,[...An,gn]),yield gn.play(),!0});return function(Xe,Tt,ft,Zt){return at.apply(this,arguments)}}(),Ut=(at,Re)=>{let Xe;const Tt=new Promise(ft=>Xe=ft);return Xt(at,Re,ft=>{Xe(ft.detail)}),Tt},Xt=(at,Re,Xe)=>{const Tt=ft=>{(0,Ne.b)(at,Re,Tt),Xe(ft)};(0,Ne.a)(at,Re,Tt)},pt=at=>"cancel"===at||at===nt,st=at=>at(),Qe=(at,Re)=>{if("function"==typeof at)return re.c.get("_zoneGate",st)(()=>{try{return at(Re)}catch(Tt){throw Tt}})},nt="backdrop"},6893:(Jt,ct,j)=>{"use strict";j.d(ct,{e:()=>Se});var u=j(5e3),re=j(4941),Z=j(8186),Ne=j(2796);let Se=(()=>{class ae{constructor(we,ye,de){this.afauth=we,this.router=ye,this.db=de}login(we,ye){return new Promise((de,me)=>{this.afauth.signInWithEmailAndPassword(we,ye).then(te=>{const he=te.user.uid;this.db.collection("users").doc(he).valueChanges().subscribe(Ue=>{this.user=Ue,this.nombre=this.user.name,localStorage.setItem("usuario",JSON.stringify(this.nombre))}),de(te)}).catch(te=>me(te))})}logout(){this.afauth.signOut().then(()=>{this.nombre="",this.user=null,localStorage.setItem("usuario",JSON.stringify("")),this.router.navigate(["/login"])})}registrar(we,ye,de){return new Promise((me,te)=>{this.afauth.createUserWithEmailAndPassword(ye,de).then(he=>{const Ue=he.user.uid;this.db.collection("users").doc(he.user.uid).set({name:we,uid:Ue}),me(he)}).catch(he=>te(he))})}}return ae.\u0275fac=function(we){return new(we||ae)(u.LFG(re.zQ),u.LFG(Z.F0),u.LFG(Ne.ST))},ae.\u0275prov=u.Yz7({token:ae,factory:ae.\u0275fac,providedIn:"root"}),ae})()},6237:(Jt,ct,j)=>{"use strict";j.d(ct,{a:()=>Ne});var u=j(127),re=j(5e3),Z=j(2796);let Ne=(()=>{class Se{constructor(Ie){this.db=Ie}getChatRooms(){return this.db.collection("chatRooms").valueChanges({idField:"id"})}getChat(Ie){return this.db.collection("chatRooms").doc(Ie).valueChanges()}enviarABD(Ie,we){this.db.collection("chatRooms").doc(we).update({Messages:u.Z.firestore.FieldValue.arrayUnion(Ie)})}}return Se.\u0275fac=function(Ie){return new(Ie||Se)(re.LFG(Z.ST))},Se.\u0275prov=re.Yz7({token:Se,factory:Se.\u0275fac,providedIn:"root"}),Se})()},2646:(Jt,ct,j)=>{"use strict";var u=j(9808),re=j(5e3);class Z extends u.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Ne extends Z{static makeCurrent(){(0,u.HT)(new Ne)}onAndCancel(l,a,p){return l.addEventListener(a,p,!1),()=>{l.removeEventListener(a,p,!1)}}dispatchEvent(l,a){l.dispatchEvent(a)}remove(l){l.parentNode&&l.parentNode.removeChild(l)}createElement(l,a){return(a=a||this.getDefaultDocument()).createElement(l)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(l){return l.nodeType===Node.ELEMENT_NODE}isShadowRoot(l){return l instanceof DocumentFragment}getGlobalEventTarget(l,a){return"window"===a?window:"document"===a?l:"body"===a?l.body:null}getBaseHref(l){const a=function ae(){return Se=Se||document.querySelector("base"),Se?Se.getAttribute("href"):null}();return null==a?null:function we(h){Ie=Ie||document.createElement("a"),Ie.setAttribute("href",h);const l=Ie.pathname;return"/"===l.charAt(0)?l:`/${l}`}(a)}resetBaseElement(){Se=null}getUserAgent(){return window.navigator.userAgent}getCookie(l){return(0,u.Mx)(document.cookie,l)}}let Ie,Se=null;const ye=new re.OlP("TRANSITION_ID"),me=[{provide:re.ip1,useFactory:function de(h,l,a){return()=>{a.get(re.CZH).donePromise.then(()=>{const p=(0,u.q)(),b=l.querySelectorAll(`style[ng-transition="${h}"]`);for(let M=0;M<b.length;M++)p.remove(b[M])})}},deps:[ye,u.K0,re.zs3],multi:!0}];class te{static init(){(0,re.VLi)(new te)}addToWindow(l){re.dqk.getAngularTestability=(p,b=!0)=>{const M=l.findTestabilityInTree(p,b);if(null==M)throw new Error("Could not find testability for element.");return M},re.dqk.getAllAngularTestabilities=()=>l.getAllTestabilities(),re.dqk.getAllAngularRootElements=()=>l.getAllRootElements(),re.dqk.frameworkStabilizers||(re.dqk.frameworkStabilizers=[]),re.dqk.frameworkStabilizers.push(p=>{const b=re.dqk.getAllAngularTestabilities();let M=b.length,U=!1;const ne=function(be){U=U||be,M--,0==M&&p(U)};b.forEach(function(be){be.whenStable(ne)})})}findTestabilityInTree(l,a,p){if(null==a)return null;const b=l.getTestability(a);return null!=b?b:p?(0,u.q)().isShadowRoot(a)?this.findTestabilityInTree(l,a.host,!0):this.findTestabilityInTree(l,a.parentElement,!0):null}}let he=(()=>{class h{build(){return new XMLHttpRequest}}return h.\u0275fac=function(a){return new(a||h)},h.\u0275prov=re.Yz7({token:h,factory:h.\u0275fac}),h})();const Ue=new re.OlP("EventManagerPlugins");let Oe=(()=>{class h{constructor(a,p){this._zone=p,this._eventNameToPlugin=new Map,a.forEach(b=>b.manager=this),this._plugins=a.slice().reverse()}addEventListener(a,p,b){return this._findPluginFor(p).addEventListener(a,p,b)}addGlobalEventListener(a,p,b){return this._findPluginFor(p).addGlobalEventListener(a,p,b)}getZone(){return this._zone}_findPluginFor(a){const p=this._eventNameToPlugin.get(a);if(p)return p;const b=this._plugins;for(let M=0;M<b.length;M++){const U=b[M];if(U.supports(a))return this._eventNameToPlugin.set(a,U),U}throw new Error(`No event manager plugin found for event ${a}`)}}return h.\u0275fac=function(a){return new(a||h)(re.LFG(Ue),re.LFG(re.R0b))},h.\u0275prov=re.Yz7({token:h,factory:h.\u0275fac}),h})();class _e{constructor(l){this._doc=l}addGlobalEventListener(l,a,p){const b=(0,u.q)().getGlobalEventTarget(this._doc,l);if(!b)throw new Error(`Unsupported event target ${b} for event ${a}`);return this.addEventListener(b,a,p)}}let Pe=(()=>{class h{constructor(){this._stylesSet=new Set}addStyles(a){const p=new Set;a.forEach(b=>{this._stylesSet.has(b)||(this._stylesSet.add(b),p.add(b))}),this.onStylesAdded(p)}onStylesAdded(a){}getAllStyles(){return Array.from(this._stylesSet)}}return h.\u0275fac=function(a){return new(a||h)},h.\u0275prov=re.Yz7({token:h,factory:h.\u0275fac}),h})(),ke=(()=>{class h extends Pe{constructor(a){super(),this._doc=a,this._hostNodes=new Map,this._hostNodes.set(a.head,[])}_addStylesToHost(a,p,b){a.forEach(M=>{const U=this._doc.createElement("style");U.textContent=M,b.push(p.appendChild(U))})}addHost(a){const p=[];this._addStylesToHost(this._stylesSet,a,p),this._hostNodes.set(a,p)}removeHost(a){const p=this._hostNodes.get(a);p&&p.forEach(ht),this._hostNodes.delete(a)}onStylesAdded(a){this._hostNodes.forEach((p,b)=>{this._addStylesToHost(a,b,p)})}ngOnDestroy(){this._hostNodes.forEach(a=>a.forEach(ht))}}return h.\u0275fac=function(a){return new(a||h)(re.LFG(u.K0))},h.\u0275prov=re.Yz7({token:h,factory:h.\u0275fac}),h})();function ht(h){(0,u.q)().remove(h)}const ve={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ot=/%COMP%/g;function Ve(h,l,a){for(let p=0;p<l.length;p++){let b=l[p];Array.isArray(b)?Ve(h,b,a):(b=b.replace(ot,h),a.push(b))}return a}function Ee(h){return l=>{if("__ngUnwrap__"===l)return h;!1===h(l)&&(l.preventDefault(),l.returnValue=!1)}}let Je=(()=>{class h{constructor(a,p,b){this.eventManager=a,this.sharedStylesHost=p,this.appId=b,this.rendererByCompId=new Map,this.defaultRenderer=new Ze(a)}createRenderer(a,p){if(!a||!p)return this.defaultRenderer;switch(p.encapsulation){case re.ifc.Emulated:{let b=this.rendererByCompId.get(p.id);return b||(b=new pt(this.eventManager,this.sharedStylesHost,p,this.appId),this.rendererByCompId.set(p.id,b)),b.applyToHost(a),b}case 1:case re.ifc.ShadowDom:return new st(this.eventManager,this.sharedStylesHost,a,p);default:if(!this.rendererByCompId.has(p.id)){const b=Ve(p.id,p.styles,[]);this.sharedStylesHost.addStyles(b),this.rendererByCompId.set(p.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return h.\u0275fac=function(a){return new(a||h)(re.LFG(Oe),re.LFG(ke),re.LFG(re.AFp))},h.\u0275prov=re.Yz7({token:h,factory:h.\u0275fac}),h})();class Ze{constructor(l){this.eventManager=l,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(l,a){return a?document.createElementNS(ve[a]||a,l):document.createElement(l)}createComment(l){return document.createComment(l)}createText(l){return document.createTextNode(l)}appendChild(l,a){l.appendChild(a)}insertBefore(l,a,p){l&&l.insertBefore(a,p)}removeChild(l,a){l&&l.removeChild(a)}selectRootElement(l,a){let p="string"==typeof l?document.querySelector(l):l;if(!p)throw new Error(`The selector "${l}" did not match any elements`);return a||(p.textContent=""),p}parentNode(l){return l.parentNode}nextSibling(l){return l.nextSibling}setAttribute(l,a,p,b){if(b){a=b+":"+a;const M=ve[b];M?l.setAttributeNS(M,a,p):l.setAttribute(a,p)}else l.setAttribute(a,p)}removeAttribute(l,a,p){if(p){const b=ve[p];b?l.removeAttributeNS(b,a):l.removeAttribute(`${p}:${a}`)}else l.removeAttribute(a)}addClass(l,a){l.classList.add(a)}removeClass(l,a){l.classList.remove(a)}setStyle(l,a,p,b){b&(re.JOm.DashCase|re.JOm.Important)?l.style.setProperty(a,p,b&re.JOm.Important?"important":""):l.style[a]=p}removeStyle(l,a,p){p&re.JOm.DashCase?l.style.removeProperty(a):l.style[a]=""}setProperty(l,a,p){l[a]=p}setValue(l,a){l.nodeValue=a}listen(l,a,p){return"string"==typeof l?this.eventManager.addGlobalEventListener(l,a,Ee(p)):this.eventManager.addEventListener(l,a,Ee(p))}}class pt extends Ze{constructor(l,a,p,b){super(l),this.component=p;const M=Ve(b+"-"+p.id,p.styles,[]);a.addStyles(M),this.contentAttr=function qe(h){return"_ngcontent-%COMP%".replace(ot,h)}(b+"-"+p.id),this.hostAttr=function pe(h){return"_nghost-%COMP%".replace(ot,h)}(b+"-"+p.id)}applyToHost(l){super.setAttribute(l,this.hostAttr,"")}createElement(l,a){const p=super.createElement(l,a);return super.setAttribute(p,this.contentAttr,""),p}}class st extends Ze{constructor(l,a,p,b){super(l),this.sharedStylesHost=a,this.hostEl=p,this.shadowRoot=p.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const M=Ve(b.id,b.styles,[]);for(let U=0;U<M.length;U++){const ne=document.createElement("style");ne.textContent=M[U],this.shadowRoot.appendChild(ne)}}nodeOrShadowRoot(l){return l===this.hostEl?this.shadowRoot:l}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(l,a){return super.appendChild(this.nodeOrShadowRoot(l),a)}insertBefore(l,a,p){return super.insertBefore(this.nodeOrShadowRoot(l),a,p)}removeChild(l,a){return super.removeChild(this.nodeOrShadowRoot(l),a)}parentNode(l){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(l)))}}let Qe=(()=>{class h extends _e{constructor(a){super(a)}supports(a){return!0}addEventListener(a,p,b){return a.addEventListener(p,b,!1),()=>this.removeEventListener(a,p,b)}removeEventListener(a,p,b){return a.removeEventListener(p,b)}}return h.\u0275fac=function(a){return new(a||h)(re.LFG(u.K0))},h.\u0275prov=re.Yz7({token:h,factory:h.\u0275fac}),h})();const nt=["alt","control","meta","shift"],Re={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Xe={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Tt={alt:h=>h.altKey,control:h=>h.ctrlKey,meta:h=>h.metaKey,shift:h=>h.shiftKey};let ft=(()=>{class h extends _e{constructor(a){super(a)}supports(a){return null!=h.parseEventName(a)}addEventListener(a,p,b){const M=h.parseEventName(p),U=h.eventCallback(M.fullKey,b,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,u.q)().onAndCancel(a,M.domEventName,U))}static parseEventName(a){const p=a.toLowerCase().split("."),b=p.shift();if(0===p.length||"keydown"!==b&&"keyup"!==b)return null;const M=h._normalizeKey(p.pop());let U="";if(nt.forEach(be=>{const Be=p.indexOf(be);Be>-1&&(p.splice(Be,1),U+=be+".")}),U+=M,0!=p.length||0===M.length)return null;const ne={};return ne.domEventName=b,ne.fullKey=U,ne}static getEventFullKey(a){let p="",b=function Zt(h){let l=h.key;if(null==l){if(l=h.keyIdentifier,null==l)return"Unidentified";l.startsWith("U+")&&(l=String.fromCharCode(parseInt(l.substring(2),16)),3===h.location&&Xe.hasOwnProperty(l)&&(l=Xe[l]))}return Re[l]||l}(a);return b=b.toLowerCase()," "===b?b="space":"."===b&&(b="dot"),nt.forEach(M=>{M!=b&&Tt[M](a)&&(p+=M+".")}),p+=b,p}static eventCallback(a,p,b){return M=>{h.getEventFullKey(M)===a&&b.runGuarded(()=>p(M))}}static _normalizeKey(a){return"esc"===a?"escape":a}}return h.\u0275fac=function(a){return new(a||h)(re.LFG(u.K0))},h.\u0275prov=re.Yz7({token:h,factory:h.\u0275fac}),h})();const mr=(0,re.eFA)(re._c5,"browser",[{provide:re.Lbi,useValue:u.bD},{provide:re.g9A,useValue:function gn(){Ne.makeCurrent(),te.init()},multi:!0},{provide:u.K0,useFactory:function ln(){return(0,re.RDi)(document),document},deps:[]}]),xr=[{provide:re.zSh,useValue:"root"},{provide:re.qLn,useFactory:function An(){return new re.qLn},deps:[]},{provide:Ue,useClass:Qe,multi:!0,deps:[u.K0,re.R0b,re.Lbi]},{provide:Ue,useClass:ft,multi:!0,deps:[u.K0]},{provide:Je,useClass:Je,deps:[Oe,ke,re.AFp]},{provide:re.FYo,useExisting:Je},{provide:Pe,useExisting:ke},{provide:ke,useClass:ke,deps:[u.K0]},{provide:re.dDg,useClass:re.dDg,deps:[re.R0b]},{provide:Oe,useClass:Oe,deps:[Ue,re.R0b]},{provide:u.JF,useClass:he,deps:[]}];let Kn=(()=>{class h{constructor(a){if(a)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(a){return{ngModule:h,providers:[{provide:re.AFp,useValue:a.appId},{provide:ye,useExisting:re.AFp},me]}}}return h.\u0275fac=function(a){return new(a||h)(re.LFG(h,12))},h.\u0275mod=re.oAB({type:h}),h.\u0275inj=re.cJS({providers:xr,imports:[u.ez,re.hGG]}),h})();"undefined"!=typeof window&&window;var In=j(8186),Qn=j(6926);let Yr=(()=>{class h{constructor(){}}return h.\u0275fac=function(a){return new(a||h)},h.\u0275cmp=re.Xpm({type:h,selectors:[["app-root"]],decls:2,vars:0,template:function(a,p){1&a&&(re.TgZ(0,"ion-app"),re._UZ(1,"ion-router-outlet"),re.qZA())},directives:[Qn.dr,Qn.jP],styles:[""]}),h})();var Bn=j(4850),Er=j(4941);let Un=(()=>{class h{constructor(a,p){this.aFaut=a,this.router=p}canActivate(a,p){return this.aFaut.authState.pipe((0,Bn.U)(b=>null!=b||(this.router.navigate(["/login"]),!1)))}}return h.\u0275fac=function(a){return new(a||h)(re.LFG(Er.zQ),re.LFG(In.F0))},h.\u0275prov=re.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"}),h})(),br=(()=>{class h{constructor(a,p){this.aFaut=a,this.router=p}canActivate(a,p){return this.aFaut.authState.pipe((0,Bn.U)(b=>null==b||(this.router.navigate(["/home"]),!1)))}}return h.\u0275fac=function(a){return new(a||h)(re.LFG(Er.zQ),re.LFG(In.F0))},h.\u0275prov=re.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"}),h})();const Rr=[{path:"home",canActivate:[Un],loadChildren:()=>j.e(781).then(j.bind(j,781)).then(h=>h.HomePageModule)},{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",canActivate:[br],loadChildren:()=>j.e(4515).then(j.bind(j,4515)).then(h=>h.LoginPageModule)},{path:"registro",canActivate:[br],loadChildren:()=>j.e(9056).then(j.bind(j,9056)).then(h=>h.RegistroPageModule)}];let Fn=(()=>{class h{}return h.\u0275fac=function(a){return new(a||h)},h.\u0275mod=re.oAB({type:h}),h.\u0275inj=re.cJS({imports:[[In.Bz.forRoot(Rr,{preloadingStrategy:In.wm})],In.Bz]}),h})();const as={apiKey:"AIzaSyAEjfZYseWS360UpkYXOnsvuk5ju6e1BkA",authDomain:"chat2022-f36ef.firebaseapp.com",projectId:"chat2022-f36ef",storageBucket:"chat2022-f36ef.appspot.com",messagingSenderId:"541631979609",appId:"1:541631979609:web:cbe8b69805d8d68f54d148"};var Mr=j(2011),Or=j(4182),bi=j(353),Vr=j(2916),Mt=j(1086),mn=j(6787),sr=j(2474),yr=j(7545),Kr=j(2014),Gr=j(5778),yi=j(826),dr=j(448);class Vi{constructor(l,a){this.observables=l,this.project=a}call(l,a){return a.subscribe(new Ln(l,this.observables,this.project))}}class Ln extends yi.L{constructor(l,a,p){super(l),this.observables=a,this.project=p,this.toRespond=[];const b=a.length;this.values=new Array(b);for(let M=0;M<b;M++)this.toRespond.push(M);for(let M=0;M<b;M++)this.add((0,dr.D)(this,a[M],void 0,M))}notifyNext(l,a,p){this.values[p]=a;const b=this.toRespond;if(b.length>0){const M=b.indexOf(p);-1!==M&&b.splice(M,1)}}notifyComplete(){}_next(l){if(0===this.toRespond.length){const a=[l,...this.values];this.project?this._tryProject(a):this.destination.next(a)}}_tryProject(l){let a;try{a=this.project.apply(this,l)}catch(p){return void this.destination.error(p)}this.destination.next(a)}}var Zi=j(3489);class Pi{constructor(l){this.predicate=l}call(l,a){return a.subscribe(new Ni(l,this.predicate))}}class Ni extends Zi.L{constructor(l,a){super(l),this.predicate=a,this.skipping=!0,this.index=0}_next(l){const a=this.destination;this.skipping&&this.tryCallPredicate(l),this.skipping||a.next(l)}tryCallPredicate(l){try{const a=this.predicate(l,this.index++);this.skipping=Boolean(a)}catch(a){this.destination.error(a)}}}var Tr=j(6351),Ai=(j(4087),j(3942)),Q=j(4859),ge=j(5861),le=j(9681),H=j(2090),He=j(1877);const tt="@firebase/database";let At="";function Nt(h){At=h}class Rt{constructor(l){this.domStorage_=l,this.prefix_="firebase:"}set(l,a){null==a?this.domStorage_.removeItem(this.prefixedName_(l)):this.domStorage_.setItem(this.prefixedName_(l),(0,H.Pz)(a))}get(l){const a=this.domStorage_.getItem(this.prefixedName_(l));return null==a?null:(0,H.cI)(a)}remove(l){this.domStorage_.removeItem(this.prefixedName_(l))}prefixedName_(l){return this.prefix_+l}toString(){return this.domStorage_.toString()}}class pn{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(l,a){null==a?delete this.cache_[l]:this.cache_[l]=a}get(l){return(0,H.r3)(this.cache_,l)?this.cache_[l]:null}remove(l){delete this.cache_[l]}}const xn=function(h){try{if("undefined"!=typeof window&&void 0!==window[h]){const l=window[h];return l.setItem("firebase:sentinel","cache"),l.removeItem("firebase:sentinel"),new Rt(l)}}catch(l){}return new pn},Tn=xn("localStorage"),zn=xn("sessionStorage"),ri=new He.Yd("@firebase/database"),Xi=function(){let h=1;return function(){return h++}}(),ze=function(h){const l=(0,H.dS)(h),a=new H.gQ;a.update(l);const p=a.digest();return H.US.encodeByteArray(p)},We=function(...h){let l="";for(let a=0;a<h.length;a++){const p=h[a];Array.isArray(p)||p&&"object"==typeof p&&"number"==typeof p.length?l+=We.apply(null,p):l+="object"==typeof p?(0,H.Pz)(p):p,l+=" "}return l};let lt=null,Ot=!0;const zt=function(h,l){(0,H.hu)(!l||!0===h||!1===h,"Can't turn on custom loggers persistently."),!0===h?(ri.logLevel=He.in.VERBOSE,lt=ri.log.bind(ri),l&&zn.set("logging_enabled",!0)):"function"==typeof h?lt=h:(lt=null,zn.remove("logging_enabled"))},rn=function(...h){if(!0===Ot&&(Ot=!1,null===lt&&!0===zn.get("logging_enabled")&&zt(!0)),lt){const l=We.apply(null,h);lt(l)}},Sr=function(h){return function(...l){rn(h,...l)}},ii=function(...h){const l="FIREBASE INTERNAL ERROR: "+We(...h);ri.error(l)},Xn=function(...h){const l=`FIREBASE FATAL ERROR: ${We(...h)}`;throw ri.error(l),new Error(l)},Zr=function(...h){const l="FIREBASE WARNING: "+We(...h);ri.warn(l)},hs=function(h){return"number"==typeof h&&(h!=h||h===Number.POSITIVE_INFINITY||h===Number.NEGATIVE_INFINITY)},ki="[MIN_NAME]",zi="[MAX_NAME]",ls=function(h,l){if(h===l)return 0;if(h===ki||l===zi)return-1;if(l===ki||h===zi)return 1;{const a=$r(h),p=$r(l);return null!==a?null!==p?a-p==0?h.length-l.length:a-p:-1:null!==p?1:h<l?-1:1}},Hs=function(h,l){return h===l?0:h<l?-1:1},xi=function(h,l){if(l&&h in l)return l[h];throw new Error("Missing required key ("+h+") in object: "+(0,H.Pz)(l))},us=function(h){if("object"!=typeof h||null===h)return(0,H.Pz)(h);const l=[];for(const p in h)l.push(p);l.sort();let a="{";for(let p=0;p<l.length;p++)0!==p&&(a+=","),a+=(0,H.Pz)(l[p]),a+=":",a+=us(h[l[p]]);return a+="}",a},vs=function(h,l){const a=h.length;if(a<=l)return[h];const p=[];for(let b=0;b<a;b+=l)p.push(h.substring(b,b+l>a?a:b+l));return p};function si(h,l){for(const a in h)h.hasOwnProperty(a)&&l(a,h[a])}const uo=function(h){(0,H.hu)(!hs(h),"Invalid JSON number");const p=1023;let b,M,U,ne,be;0===h?(M=0,U=0,b=1/h==-1/0?1:0):(b=h<0,(h=Math.abs(h))>=Math.pow(2,1-p)?(ne=Math.min(Math.floor(Math.log(h)/Math.LN2),p),M=ne+p,U=Math.round(h*Math.pow(2,52-ne)-Math.pow(2,52))):(M=0,U=Math.round(h/Math.pow(2,-1074))));const Be=[];for(be=52;be;be-=1)Be.push(U%2?1:0),U=Math.floor(U/2);for(be=11;be;be-=1)Be.push(M%2?1:0),M=Math.floor(M/2);Be.push(b?1:0),Be.reverse();const It=Be.join("");let wt="";for(be=0;be<64;be+=8){let Bt=parseInt(It.substr(be,8),2).toString(16);1===Bt.length&&(Bt="0"+Bt),wt+=Bt}return wt.toLowerCase()},es=new RegExp("^-?(0*)\\d{1,10}$"),Do=-2147483648,$i=2147483647,$r=function(h){if(es.test(h)){const l=Number(h);if(l>=Do&&l<=$i)return l}return null},Qr=function(h){try{h()}catch(l){setTimeout(()=>{throw Zr("Exception was thrown by user callback.",l.stack||""),l},Math.floor(0))}},Ns=function(h,l){const a=setTimeout(h,l);return"object"==typeof a&&a.unref&&a.unref(),a};class cs{constructor(l,a){this.appName_=l,this.appCheckProvider=a,this.appCheck=null==a?void 0:a.getImmediate({optional:!0}),this.appCheck||null==a||a.get().then(p=>this.appCheck=p)}getToken(l){return this.appCheck?this.appCheck.getToken(l):new Promise((a,p)=>{setTimeout(()=>{this.appCheck?this.getToken(l).then(a,p):a(null)},0)})}addTokenChangeListener(l){var a;null===(a=this.appCheckProvider)||void 0===a||a.get().then(p=>p.addTokenListener(l))}notifyForInvalidToken(){Zr(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class zs{constructor(l,a,p){this.appName_=l,this.firebaseOptions_=a,this.authProvider_=p,this.auth_=null,this.auth_=p.getImmediate({optional:!0}),this.auth_||p.onInit(b=>this.auth_=b)}getToken(l){return this.auth_?this.auth_.getToken(l).catch(a=>a&&"auth/token-not-initialized"===a.code?(rn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(a)):new Promise((a,p)=>{setTimeout(()=>{this.auth_?this.getToken(l).then(a,p):a(null)},0)})}addTokenChangeListener(l){this.auth_?this.auth_.addAuthTokenListener(l):this.authProvider_.get().then(a=>a.addAuthTokenListener(l))}removeTokenChangeListener(l){this.authProvider_.get().then(a=>a.removeAuthTokenListener(l))}notifyForInvalidToken(){let l='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';l+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Zr(l)}}let Ss=(()=>{class h{constructor(a){this.accessToken=a}getToken(a){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(a){a(this.accessToken)}removeTokenChangeListener(a){}notifyForInvalidToken(){}}return h.OWNER="owner",h})();const ee=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,mt="websocket",Ft="long_polling";class Yt{constructor(l,a,p,b,M=!1,U="",ne=!1){this.secure=a,this.namespace=p,this.webSocketOnly=b,this.nodeAdmin=M,this.persistenceKey=U,this.includeNamespaceInQueryParams=ne,this._host=l.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Tn.get("host:"+l)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(l){l!==this.internalHost&&(this.internalHost=l,this.isCacheableHost()&&Tn.set("host:"+this._host,this.internalHost))}toString(){let l=this.toURLString();return this.persistenceKey&&(l+="<"+this.persistenceKey+">"),l}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Ir(h,l,a){let p;if((0,H.hu)("string"==typeof l,"typeof type must == string"),(0,H.hu)("object"==typeof a,"typeof params must == object"),l===mt)p=(h.secure?"wss://":"ws://")+h.internalHost+"/.ws?";else{if(l!==Ft)throw new Error("Unknown connection type: "+l);p=(h.secure?"https://":"http://")+h.internalHost+"/.lp?"}(function zr(h){return h.host!==h.internalHost||h.isCustomHost()||h.includeNamespaceInQueryParams})(h)&&(a.ns=h.namespace);const b=[];return si(a,(M,U)=>{b.push(M+"="+U)}),p+b.join("&")}class or{constructor(){this.counters_={}}incrementCounter(l,a=1){(0,H.r3)(this.counters_,l)||(this.counters_[l]=0),this.counters_[l]+=a}get(){return(0,H.p$)(this.counters_)}}const _r={},fi={};function Xr(h){const l=h.toString();return _r[l]||(_r[l]=new or),_r[l]}class yo{constructor(l){this.onMessage_=l,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(l,a){this.closeAfterResponse=l,this.onClose=a,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(l,a){for(this.pendingResponses[l]=a;this.pendingResponses[this.currentResponseNum];){const p=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let b=0;b<p.length;++b)p[b]&&Qr(()=>{this.onMessage_(p[b])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class ci{constructor(l,a,p,b,M,U,ne){this.connId=l,this.repoInfo=a,this.applicationId=p,this.appCheckToken=b,this.authToken=M,this.transportSessionId=U,this.lastSessionId=ne,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Sr(l),this.stats_=Xr(a),this.urlFn=be=>(this.appCheckToken&&(be.ac=this.appCheckToken),Ir(a,Ft,be))}open(l,a){this.curSegmentNum=0,this.onDisconnect_=a,this.myPacketOrderer=new yo(l),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(h){if((0,H.Yr)()||"complete"===document.readyState)h();else{let l=!1;const a=function(){document.body?l||(l=!0,h()):setTimeout(a,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",a,!1),window.addEventListener("load",a,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&a()}),window.attachEvent("onload",a))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new wi((...M)=>{const[U,ne,be,Be,It]=M;if(this.incrementIncomingBytes_(M),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===U)this.id=ne,this.password=be;else{if("close"!==U)throw new Error("Unrecognized command received: "+U);ne?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(ne,()=>{this.onClosed_()})):this.onClosed_()}},(...M)=>{const[U,ne]=M;this.incrementIncomingBytes_(M),this.myPacketOrderer.handleResponse(U,ne)},()=>{this.onClosed_()},this.urlFn);const p={start:"t"};p.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(p.cb=this.scriptTagHolder.uniqueCallbackIdentifier),p.v="5",this.transportSessionId&&(p.s=this.transportSessionId),this.lastSessionId&&(p.ls=this.lastSessionId),this.applicationId&&(p.p=this.applicationId),this.appCheckToken&&(p.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&ee.test(location.hostname)&&(p.r="f");const b=this.urlFn(p);this.log_("Connecting via long-poll to "+b),this.scriptTagHolder.addTag(b,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ci.forceAllow_=!0}static forceDisallow(){ci.forceDisallow_=!0}static isAvailable(){return!((0,H.Yr)()||!ci.forceAllow_&&(ci.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(l){const a=(0,H.Pz)(l);this.bytesSent+=a.length,this.stats_.incrementCounter("bytes_sent",a.length);const p=(0,H.h$)(a),b=vs(p,1840);for(let M=0;M<b.length;M++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,b.length,b[M]),this.curSegmentNum++}addDisconnectPingFrame(l,a){if((0,H.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const p={dframe:"t"};p.id=l,p.pw=a,this.myDisconnFrame.src=this.urlFn(p),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(l){const a=(0,H.Pz)(l).length;this.bytesReceived+=a,this.stats_.incrementCounter("bytes_received",a)}}class wi{constructor(l,a,p,b){if(this.onDisconnect=p,this.urlFn=b,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,H.Yr)())this.commandCB=l,this.onMessageCB=a;else{this.uniqueCallbackIdentifier=Xi(),window["pLPCommand"+this.uniqueCallbackIdentifier]=l,window["pRTLPCB"+this.uniqueCallbackIdentifier]=a,this.myIFrame=wi.createIFrame_();let M="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(M='<script>document.domain="'+document.domain+'";<\/script>');const U="<html><body>"+M+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(U),this.myIFrame.doc.close()}catch(ne){rn("frame writing exception"),ne.stack&&rn(ne.stack),rn(ne)}}}static createIFrame_(){const l=document.createElement("iframe");if(l.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(l);try{l.contentWindow.document||rn("No IE domain setting required")}catch(a){const p=document.domain;l.src="javascript:void((function(){document.open();document.domain='"+p+"';document.close();})())"}return l.contentDocument?l.doc=l.contentDocument:l.contentWindow?l.doc=l.contentWindow.document:l.document&&(l.doc=l.document),l}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const l=this.onDisconnect;l&&(this.onDisconnect=null,l())}startLongPoll(l,a){for(this.myID=l,this.myPW=a,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const l={};l.id=this.myID,l.pw=this.myPW,l.ser=this.currentSerial;let a=this.urlFn(l),p="",b=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+p.length<=1870;){const U=this.pendingSegs.shift();p=p+"&seg"+b+"="+U.seg+"&ts"+b+"="+U.ts+"&d"+b+"="+U.d,b++}return a+=p,this.addLongPollTag_(a,this.currentSerial),!0}return!1}enqueueSegment(l,a,p){this.pendingSegs.push({seg:l,ts:a,d:p}),this.alive&&this.newRequest_()}addLongPollTag_(l,a){this.outstandingRequests.add(a);const p=()=>{this.outstandingRequests.delete(a),this.newRequest_()},b=setTimeout(p,Math.floor(25e3));this.addTag(l,()=>{clearTimeout(b),p()})}addTag(l,a){(0,H.Yr)()?this.doNodeLongPoll(l,a):setTimeout(()=>{try{if(!this.sendNewPolls)return;const p=this.myIFrame.doc.createElement("script");p.type="text/javascript",p.async=!0,p.src=l,p.onload=p.onreadystatechange=function(){const b=p.readyState;(!b||"loaded"===b||"complete"===b)&&(p.onload=p.onreadystatechange=null,p.parentNode&&p.parentNode.removeChild(p),a())},p.onerror=()=>{rn("Long-poll script failed to load: "+l),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(p)}catch(p){}},Math.floor(1))}}let ts=null;"undefined"!=typeof MozWebSocket?ts=MozWebSocket:"undefined"!=typeof WebSocket&&(ts=WebSocket);let ei=(()=>{class h{constructor(a,p,b,M,U,ne,be){this.connId=a,this.applicationId=b,this.appCheckToken=M,this.authToken=U,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Sr(this.connId),this.stats_=Xr(p),this.connURL=h.connectionURL_(p,ne,be,M),this.nodeAdmin=p.nodeAdmin}static connectionURL_(a,p,b,M){const U={v:"5"};return!(0,H.Yr)()&&"undefined"!=typeof location&&location.hostname&&ee.test(location.hostname)&&(U.r="f"),p&&(U.s=p),b&&(U.ls=b),M&&(U.ac=M),Ir(a,mt,U)}open(a,p){this.onDisconnect=p,this.onMessage=a,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Tn.set("previous_websocket_failure",!0);try{if((0,H.Yr)()){const M={headers:{"User-Agent":`Firebase/5/${At}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(M.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(M.headers["X-Firebase-AppCheck"]=this.appCheckToken);const U=process.env,ne=0===this.connURL.indexOf("wss://")?U.HTTPS_PROXY||U.https_proxy:U.HTTP_PROXY||U.http_proxy;ne&&(M.proxy={origin:ne}),this.mySock=new ts(this.connURL,[],M)}else this.mySock=new ts(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(b){this.log_("Error instantiating WebSocket.");const M=b.message||b.data;return M&&this.log_(M),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=b=>{this.handleIncomingFrame(b)},this.mySock.onerror=b=>{this.log_("WebSocket error.  Closing connection.");const M=b.message||b.data;M&&this.log_(M),this.onClosed_()}}start(){}static forceDisallow(){h.forceDisallow_=!0}static isAvailable(){let a=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const b=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);b&&b.length>1&&parseFloat(b[1])<4.4&&(a=!0)}return!a&&null!==ts&&!h.forceDisallow_}static previouslyFailed(){return Tn.isInMemoryStorage||!0===Tn.get("previous_websocket_failure")}markConnectionHealthy(){Tn.remove("previous_websocket_failure")}appendFrame_(a){if(this.frames.push(a),this.frames.length===this.totalFrames){const p=this.frames.join("");this.frames=null;const b=(0,H.cI)(p);this.onMessage(b)}}handleNewFrameCount_(a){this.totalFrames=a,this.frames=[]}extractFrameCount_(a){if((0,H.hu)(null===this.frames,"We already have a frame buffer"),a.length<=6){const p=Number(a);if(!isNaN(p))return this.handleNewFrameCount_(p),null}return this.handleNewFrameCount_(1),a}handleIncomingFrame(a){if(null===this.mySock)return;const p=a.data;if(this.bytesReceived+=p.length,this.stats_.incrementCounter("bytes_received",p.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(p);else{const b=this.extractFrameCount_(p);null!==b&&this.appendFrame_(b)}}send(a){this.resetKeepAlive();const p=(0,H.Pz)(a);this.bytesSent+=p.length,this.stats_.incrementCounter("bytes_sent",p.length);const b=vs(p,16384);b.length>1&&this.sendString_(String(b.length));for(let M=0;M<b.length;M++)this.sendString_(b[M])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(a){try{this.mySock.send(a)}catch(p){this.log_("Exception thrown from WebSocket.send():",p.message||p.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return h.responsesRequiredToBeHealthy=2,h.healthyTimeout=3e4,h})();class Wi{constructor(l){this.initTransports_(l)}static get ALL_TRANSPORTS(){return[ci,ei]}initTransports_(l){const a=ei&&ei.isAvailable();let p=a&&!ei.previouslyFailed();if(l.webSocketOnly&&(a||Zr("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),p=!0),p)this.transports_=[ei];else{const b=this.transports_=[];for(const M of Wi.ALL_TRANSPORTS)M&&M.isAvailable()&&b.push(M)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class $a{constructor(l,a,p,b,M,U,ne,be,Be,It){this.id=l,this.repoInfo_=a,this.applicationId_=p,this.appCheckToken_=b,this.authToken_=M,this.onMessage_=U,this.onReady_=ne,this.onDisconnect_=be,this.onKill_=Be,this.lastSessionId=It,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Sr("c:"+this.id+":"),this.transportManager_=new Wi(a),this.log_("Connection created"),this.start_()}start_(){const l=this.transportManager_.initialTransport();this.conn_=new l(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=l.responsesRequiredToBeHealthy||0;const a=this.connReceiver_(this.conn_),p=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(a,p)},Math.floor(0));const b=l.healthyTimeout||0;b>0&&(this.healthyTimeout_=Ns(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(b)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(l){return a=>{l===this.conn_?this.onConnectionLost_(a):l===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(l){return a=>{2!==this.state_&&(l===this.rx_?this.onPrimaryMessageReceived_(a):l===this.secondaryConn_?this.onSecondaryMessageReceived_(a):this.log_("message on old connection"))}}sendRequest(l){this.sendData_({t:"d",d:l})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(l){if("t"in l){const a=l.t;"a"===a?this.upgradeIfSecondaryHealthy_():"r"===a?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===a&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(l){const a=xi("t",l),p=xi("d",l);if("c"===a)this.onSecondaryControl_(p);else{if("d"!==a)throw new Error("Unknown protocol layer: "+a);this.pendingDataMessages.push(p)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(l){const a=xi("t",l),p=xi("d",l);"c"===a?this.onControl_(p):"d"===a&&this.onDataMessage_(p)}onDataMessage_(l){this.onPrimaryResponse_(),this.onMessage_(l)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(l){const a=xi("t",l);if("d"in l){const p=l.d;if("h"===a)this.onHandshake_(p);else if("n"===a){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let b=0;b<this.pendingDataMessages.length;++b)this.onDataMessage_(this.pendingDataMessages[b]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===a?this.onConnectionShutdown_(p):"r"===a?this.onReset_(p):"e"===a?ii("Server Error: "+p):"o"===a?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):ii("Unknown control packet command: "+a)}}onHandshake_(l){const a=l.ts,p=l.v,b=l.h;this.sessionId=l.s,this.repoInfo_.host=b,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,a),"5"!==p&&Zr("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const l=this.transportManager_.upgradeTransport();l&&this.startUpgrade_(l)}startUpgrade_(l){this.secondaryConn_=new l(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=l.responsesRequiredToBeHealthy||0;const a=this.connReceiver_(this.secondaryConn_),p=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(a,p),Ns(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(l){this.log_("Reset packet received.  New host: "+l),this.repoInfo_.host=l,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(l,a){this.log_("Realtime connection established."),this.conn_=l,this.state_=1,this.onReady_&&(this.onReady_(a,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ns(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const l=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===l||this.rx_===l)&&this.close()}onConnectionLost_(l){this.conn_=null,l||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Tn.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(l){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(l),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(l){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(l)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Lo{put(l,a,p,b){}merge(l,a,p,b){}refreshAuthToken(l){}refreshAppCheckToken(l){}onDisconnectPut(l,a,p){}onDisconnectMerge(l,a,p){}onDisconnectCancel(l,a){}reportStats(l){}}class To{constructor(l){this.allowedEvents_=l,this.listeners_={},(0,H.hu)(Array.isArray(l)&&l.length>0,"Requires a non-empty array")}trigger(l,...a){if(Array.isArray(this.listeners_[l])){const p=[...this.listeners_[l]];for(let b=0;b<p.length;b++)p[b].callback.apply(p[b].context,a)}}on(l,a,p){this.validateEventType_(l),this.listeners_[l]=this.listeners_[l]||[],this.listeners_[l].push({callback:a,context:p});const b=this.getInitialEvent(l);b&&a.apply(p,b)}off(l,a,p){this.validateEventType_(l);const b=this.listeners_[l]||[];for(let M=0;M<b.length;M++)if(b[M].callback===a&&(!p||p===b[M].context))return void b.splice(M,1)}validateEventType_(l){(0,H.hu)(this.allowedEvents_.find(a=>a===l),"Unknown event: "+l)}}class oa extends To{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,H.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new oa}getInitialEvent(l){return(0,H.hu)("online"===l,"Unknown event type: "+l),[this.online_]}currentlyOnline(){return this.online_}}class kr{constructor(l,a){if(void 0===a){this.pieces_=l.split("/");let p=0;for(let b=0;b<this.pieces_.length;b++)this.pieces_[b].length>0&&(this.pieces_[p]=this.pieces_[b],p++);this.pieces_.length=p,this.pieceNum_=0}else this.pieces_=l,this.pieceNum_=a}toString(){let l="";for(let a=this.pieceNum_;a<this.pieces_.length;a++)""!==this.pieces_[a]&&(l+="/"+this.pieces_[a]);return l||"/"}}function hr(){return new kr("")}function pr(h){return h.pieceNum_>=h.pieces_.length?null:h.pieces_[h.pieceNum_]}function pi(h){return h.pieces_.length-h.pieceNum_}function _i(h){let l=h.pieceNum_;return l<h.pieces_.length&&l++,new kr(h.pieces_,l)}function Al(h){return h.pieceNum_<h.pieces_.length?h.pieces_[h.pieces_.length-1]:null}function Xo(h,l=0){return h.pieces_.slice(h.pieceNum_+l)}function Yl(h){if(h.pieceNum_>=h.pieces_.length)return null;const l=[];for(let a=h.pieceNum_;a<h.pieces_.length-1;a++)l.push(h.pieces_[a]);return new kr(l,0)}function gi(h,l){const a=[];for(let p=h.pieceNum_;p<h.pieces_.length;p++)a.push(h.pieces_[p]);if(l instanceof kr)for(let p=l.pieceNum_;p<l.pieces_.length;p++)a.push(l.pieces_[p]);else{const p=l.split("/");for(let b=0;b<p.length;b++)p[b].length>0&&a.push(p[b])}return new kr(a,0)}function ar(h){return h.pieceNum_>=h.pieces_.length}function qi(h,l){const a=pr(h),p=pr(l);if(null===a)return l;if(a===p)return qi(_i(h),_i(l));throw new Error("INTERNAL ERROR: innerPath ("+l+") is not within outerPath ("+h+")")}function la(h,l){const a=Xo(h,0),p=Xo(l,0);for(let b=0;b<a.length&&b<p.length;b++){const M=ls(a[b],p[b]);if(0!==M)return M}return a.length===p.length?0:a.length<p.length?-1:1}function Yi(h,l){if(pi(h)!==pi(l))return!1;for(let a=h.pieceNum_,p=l.pieceNum_;a<=h.pieces_.length;a++,p++)if(h.pieces_[a]!==l.pieces_[p])return!1;return!0}function qs(h,l){let a=h.pieceNum_,p=l.pieceNum_;if(pi(h)>pi(l))return!1;for(;a<h.pieces_.length;){if(h.pieces_[a]!==l.pieces_[p])return!1;++a,++p}return!0}class xl{constructor(l,a){this.errorPrefix_=a,this.parts_=Xo(l,0),this.byteLength_=Math.max(1,this.parts_.length);for(let p=0;p<this.parts_.length;p++)this.byteLength_+=(0,H.ug)(this.parts_[p]);Vo(this)}}function Vo(h){if(h.byteLength_>768)throw new Error(h.errorPrefix_+"has a key path longer than 768 bytes ("+h.byteLength_+").");if(h.parts_.length>32)throw new Error(h.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Ao(h))}function Ao(h){return 0===h.parts_.length?"":"in property '"+h.parts_.join(".")+"'"}class ji extends To{constructor(){let l,a;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(a="visibilitychange",l="hidden"):void 0!==document.mozHidden?(a="mozvisibilitychange",l="mozHidden"):void 0!==document.msHidden?(a="msvisibilitychange",l="msHidden"):void 0!==document.webkitHidden&&(a="webkitvisibilitychange",l="webkitHidden")),this.visible_=!0,a&&document.addEventListener(a,()=>{const p=!document[l];p!==this.visible_&&(this.visible_=p,this.trigger("visible",p))},!1)}static getInstance(){return new ji}getInitialEvent(l){return(0,H.hu)("visible"===l,"Unknown event type: "+l),[this.visible_]}}const ua=1e3;let di,_o=(()=>{class h extends Lo{constructor(a,p,b,M,U,ne,be,Be){if(super(),this.repoInfo_=a,this.applicationId_=p,this.onDataUpdate_=b,this.onConnectStatus_=M,this.onServerInfoUpdate_=U,this.authTokenProvider_=ne,this.appCheckTokenProvider_=be,this.authOverride_=Be,this.id=h.nextPersistentConnectionId_++,this.log_=Sr("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ua,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,Be&&!(0,H.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");ji.getInstance().on("visible",this.onVisible_,this),-1===a.host.indexOf("fblocal")&&oa.getInstance().on("online",this.onOnline_,this)}sendRequest(a,p,b){const M=++this.requestNumber_,U={r:M,a,b:p};this.log_((0,H.Pz)(U)),(0,H.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(U),b&&(this.requestCBHash_[M]=b)}get(a){this.initConnection_();const p=new H.BH,b={p:a._path.toString(),q:a._queryObject},M={action:"g",request:b,onComplete:ne=>{const be=ne.d;"ok"===ne.s?(this.onDataUpdate_(b.p,be,!1,null),p.resolve(be)):p.reject(be)}};this.outstandingGets_.push(M),this.outstandingGetCount_++;const U=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const ne=this.outstandingGets_[U];void 0===ne||M!==ne||(delete this.outstandingGets_[U],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+U+" timed out on connection"),p.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(U),p.promise}listen(a,p,b,M){this.initConnection_();const U=a._queryIdentifier,ne=a._path.toString();this.log_("Listen called for "+ne+" "+U),this.listens.has(ne)||this.listens.set(ne,new Map),(0,H.hu)(a._queryParams.isDefault()||!a._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,H.hu)(!this.listens.get(ne).has(U),"listen() called twice for same path/queryId.");const be={onComplete:M,hashFn:p,query:a,tag:b};this.listens.get(ne).set(U,be),this.connected_&&this.sendListen_(be)}sendGet_(a){const p=this.outstandingGets_[a];this.sendRequest("g",p.request,b=>{delete this.outstandingGets_[a],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),p.onComplete&&p.onComplete(b)})}sendListen_(a){const p=a.query,b=p._path.toString(),M=p._queryIdentifier;this.log_("Listen on "+b+" for "+M);const U={p:b};a.tag&&(U.q=p._queryObject,U.t=a.tag),U.h=a.hashFn(),this.sendRequest("q",U,be=>{const Be=be.d,It=be.s;h.warnOnListenWarnings_(Be,p),(this.listens.get(b)&&this.listens.get(b).get(M))===a&&(this.log_("listen response",be),"ok"!==It&&this.removeListen_(b,M),a.onComplete&&a.onComplete(It,Be))})}static warnOnListenWarnings_(a,p){if(a&&"object"==typeof a&&(0,H.r3)(a,"w")){const b=(0,H.DV)(a,"w");if(Array.isArray(b)&&~b.indexOf("no_index")){const M='".indexOn": "'+p._queryParams.getIndex().toString()+'"',U=p._path.toString();Zr(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${M} at ${U} to your security rules for better performance.`)}}}refreshAuthToken(a){this.authToken_=a,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(a)}reduceReconnectDelayIfAdminCredential_(a){(a&&40===a.length||(0,H.GJ)(a))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(a){this.appCheckToken_=a,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const a=this.authToken_,p=(0,H.w9)(a)?"auth":"gauth",b={cred:a};null===this.authOverride_?b.noauth=!0:"object"==typeof this.authOverride_&&(b.authvar=this.authOverride_),this.sendRequest(p,b,M=>{const U=M.s,ne=M.d||"error";this.authToken_===a&&("ok"===U?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(U,ne))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},a=>{const p=a.s,b=a.d||"error";"ok"===p?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(p,b)})}unlisten(a,p){const b=a._path.toString(),M=a._queryIdentifier;this.log_("Unlisten called for "+b+" "+M),(0,H.hu)(a._queryParams.isDefault()||!a._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(b,M)&&this.connected_&&this.sendUnlisten_(b,M,a._queryObject,p)}sendUnlisten_(a,p,b,M){this.log_("Unlisten on "+a+" for "+p);const U={p:a};M&&(U.q=b,U.t=M),this.sendRequest("n",U)}onDisconnectPut(a,p,b){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",a,p,b):this.onDisconnectRequestQueue_.push({pathString:a,action:"o",data:p,onComplete:b})}onDisconnectMerge(a,p,b){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",a,p,b):this.onDisconnectRequestQueue_.push({pathString:a,action:"om",data:p,onComplete:b})}onDisconnectCancel(a,p){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",a,null,p):this.onDisconnectRequestQueue_.push({pathString:a,action:"oc",data:null,onComplete:p})}sendOnDisconnect_(a,p,b,M){const U={p,d:b};this.log_("onDisconnect "+a,U),this.sendRequest(a,U,ne=>{M&&setTimeout(()=>{M(ne.s,ne.d)},Math.floor(0))})}put(a,p,b,M){this.putInternal("p",a,p,b,M)}merge(a,p,b,M){this.putInternal("m",a,p,b,M)}putInternal(a,p,b,M,U){this.initConnection_();const ne={p,d:b};void 0!==U&&(ne.h=U),this.outstandingPuts_.push({action:a,request:ne,onComplete:M}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+p)}sendPut_(a){const p=this.outstandingPuts_[a].action,b=this.outstandingPuts_[a].request,M=this.outstandingPuts_[a].onComplete;this.outstandingPuts_[a].queued=this.connected_,this.sendRequest(p,b,U=>{this.log_(p+" response",U),delete this.outstandingPuts_[a],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),M&&M(U.s,U.d)})}reportStats(a){if(this.connected_){const p={c:a};this.log_("reportStats",p),this.sendRequest("s",p,b=>{"ok"!==b.s&&this.log_("reportStats","Error sending stats: "+b.d)})}}onDataMessage_(a){if("r"in a){this.log_("from server: "+(0,H.Pz)(a));const p=a.r,b=this.requestCBHash_[p];b&&(delete this.requestCBHash_[p],b(a.b))}else{if("error"in a)throw"A server-side error has occurred: "+a.error;"a"in a&&this.onDataPush_(a.a,a.b)}}onDataPush_(a,p){this.log_("handleServerMessage",a,p),"d"===a?this.onDataUpdate_(p.p,p.d,!1,p.t):"m"===a?this.onDataUpdate_(p.p,p.d,!0,p.t):"c"===a?this.onListenRevoked_(p.p,p.q):"ac"===a?this.onAuthRevoked_(p.s,p.d):"apc"===a?this.onAppCheckRevoked_(p.s,p.d):"sd"===a?this.onSecurityDebugPacket_(p):ii("Unrecognized action received from server: "+(0,H.Pz)(a)+"\nAre you using the latest client?")}onReady_(a,p){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(a),this.lastSessionId=p,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(a){(0,H.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(a))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(a){a&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ua,this.realtime_||this.scheduleConnect_(0)),this.visible_=a}onOnline_(a){a?(this.log_("Browser went online."),this.reconnectDelay_=ua,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=ua),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const a=(new Date).getTime()-this.lastConnectionAttemptTime_;let p=Math.max(0,this.reconnectDelay_-a);p=Math.random()*p,this.log_("Trying to reconnect in "+p+"ms"),this.scheduleConnect_(p),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var a=this;return(0,ge.Z)(function*(){if(a.shouldReconnect_()){a.log_("Making a connection attempt"),a.lastConnectionAttemptTime_=(new Date).getTime(),a.lastConnectionEstablishedTime_=null;const p=a.onDataMessage_.bind(a),b=a.onReady_.bind(a),M=a.onRealtimeDisconnect_.bind(a),U=a.id+":"+h.nextConnectionId_++,ne=a.lastSessionId;let be=!1,Be=null;const It=function(){Be?Be.close():(be=!0,M())};a.realtime_={close:It,sendRequest:function(Cn){(0,H.hu)(Be,"sendRequest call when we're not connected not allowed."),Be.sendRequest(Cn)}};const Bt=a.forceTokenRefresh_;a.forceTokenRefresh_=!1;try{const[Cn,nr]=yield Promise.all([a.authTokenProvider_.getToken(Bt),a.appCheckTokenProvider_.getToken(Bt)]);be?rn("getToken() completed but was canceled"):(rn("getToken() completed. Creating connection."),a.authToken_=Cn&&Cn.accessToken,a.appCheckToken_=nr&&nr.token,Be=new $a(U,a.repoInfo_,a.applicationId_,a.appCheckToken_,a.authToken_,p,b,M,Hi=>{Zr(Hi+" ("+a.repoInfo_.toString()+")"),a.interrupt("server_kill")},ne))}catch(Cn){a.log_("Failed to get token: "+Cn),be||(a.repoInfo_.nodeAdmin&&Zr(Cn),It())}}})()}interrupt(a){rn("Interrupting connection for reason: "+a),this.interruptReasons_[a]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(a){rn("Resuming connection for reason: "+a),delete this.interruptReasons_[a],(0,H.xb)(this.interruptReasons_)&&(this.reconnectDelay_=ua,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(a){const p=a-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:p})}cancelSentTransactions_(){for(let a=0;a<this.outstandingPuts_.length;a++){const p=this.outstandingPuts_[a];p&&"h"in p.request&&p.queued&&(p.onComplete&&p.onComplete("disconnect"),delete this.outstandingPuts_[a],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(a,p){let b;b=p?p.map(U=>us(U)).join("$"):"default";const M=this.removeListen_(a,b);M&&M.onComplete&&M.onComplete("permission_denied")}removeListen_(a,p){const b=new kr(a).toString();let M;if(this.listens.has(b)){const U=this.listens.get(b);M=U.get(p),U.delete(p),0===U.size&&this.listens.delete(b)}else M=void 0;return M}onAuthRevoked_(a,p){rn("Auth token revoked: "+a+"/"+p),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===a||"permission_denied"===a)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(a,p){rn("App check token revoked: "+a+"/"+p),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===a||"permission_denied"===a)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(a){this.securityDebugCallback_?this.securityDebugCallback_(a):"msg"in a&&console.log("FIREBASE: "+a.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const a of this.listens.values())for(const p of a.values())this.sendListen_(p);for(let a=0;a<this.outstandingPuts_.length;a++)this.outstandingPuts_[a]&&this.sendPut_(a);for(;this.onDisconnectRequestQueue_.length;){const a=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(a.action,a.pathString,a.data,a.onComplete)}for(let a=0;a<this.outstandingGets_.length;a++)this.outstandingGets_[a]&&this.sendGet_(a)}sendConnectStats_(){const a={};let p="js";(0,H.Yr)()&&(p=this.repoInfo_.nodeAdmin?"admin_node":"node"),a["sdk."+p+"."+At.replace(/\./g,"-")]=1,(0,H.uI)()?a["framework.cordova"]=1:(0,H.b$)()&&(a["framework.reactnative"]=1),this.reportStats(a)}shouldReconnect_(){const a=oa.getInstance().currentlyOnline();return(0,H.xb)(this.interruptReasons_)&&a}}return h.nextPersistentConnectionId_=0,h.nextConnectionId_=0,h})();class gr{constructor(l,a){this.name=l,this.node=a}static Wrap(l,a){return new gr(l,a)}}class Ua{getCompare(){return this.compare.bind(this)}indexedValueChanged(l,a){const p=new gr(ki,l),b=new gr(ki,a);return 0!==this.compare(p,b)}minPost(){return gr.MIN}}class vu extends Ua{static get __EMPTY_NODE(){return di}static set __EMPTY_NODE(l){di=l}compare(l,a){return ls(l.name,a.name)}isDefinedOn(l){throw(0,H.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(l,a){return!1}minPost(){return gr.MIN}maxPost(){return new gr(zi,di)}makePost(l,a){return(0,H.hu)("string"==typeof l,"KeyIndex indexValue must always be a string."),new gr(l,di)}toString(){return".key"}}const Fi=new vu;class xo{constructor(l,a,p,b,M=null){this.isReverse_=b,this.resultGenerator_=M,this.nodeStack_=[];let U=1;for(;!l.isEmpty();)if(l=l,U=a?p(l.key,a):1,b&&(U*=-1),U<0)l=this.isReverse_?l.left:l.right;else{if(0===U){this.nodeStack_.push(l);break}this.nodeStack_.push(l),l=this.isReverse_?l.right:l.left}}getNext(){if(0===this.nodeStack_.length)return null;let a,l=this.nodeStack_.pop();if(a=this.resultGenerator_?this.resultGenerator_(l.key,l.value):{key:l.key,value:l.value},this.isReverse_)for(l=l.left;!l.isEmpty();)this.nodeStack_.push(l),l=l.right;else for(l=l.right;!l.isEmpty();)this.nodeStack_.push(l),l=l.left;return a}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const l=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(l.key,l.value):{key:l.key,value:l.value}}}let $o,ws=(()=>{class h{constructor(a,p,b,M,U){this.key=a,this.value=p,this.color=null!=b?b:h.RED,this.left=null!=M?M:hi.EMPTY_NODE,this.right=null!=U?U:hi.EMPTY_NODE}copy(a,p,b,M,U){return new h(null!=a?a:this.key,null!=p?p:this.value,null!=b?b:this.color,null!=M?M:this.left,null!=U?U:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(a){return this.left.inorderTraversal(a)||!!a(this.key,this.value)||this.right.inorderTraversal(a)}reverseTraversal(a){return this.right.reverseTraversal(a)||a(this.key,this.value)||this.left.reverseTraversal(a)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(a,p,b){let M=this;const U=b(a,M.key);return M=U<0?M.copy(null,null,null,M.left.insert(a,p,b),null):0===U?M.copy(null,p,null,null,null):M.copy(null,null,null,null,M.right.insert(a,p,b)),M.fixUp_()}removeMin_(){if(this.left.isEmpty())return hi.EMPTY_NODE;let a=this;return!a.left.isRed_()&&!a.left.left.isRed_()&&(a=a.moveRedLeft_()),a=a.copy(null,null,null,a.left.removeMin_(),null),a.fixUp_()}remove(a,p){let b,M;if(b=this,p(a,b.key)<0)!b.left.isEmpty()&&!b.left.isRed_()&&!b.left.left.isRed_()&&(b=b.moveRedLeft_()),b=b.copy(null,null,null,b.left.remove(a,p),null);else{if(b.left.isRed_()&&(b=b.rotateRight_()),!b.right.isEmpty()&&!b.right.isRed_()&&!b.right.left.isRed_()&&(b=b.moveRedRight_()),0===p(a,b.key)){if(b.right.isEmpty())return hi.EMPTY_NODE;M=b.right.min_(),b=b.copy(M.key,M.value,null,null,b.right.removeMin_())}b=b.copy(null,null,null,null,b.right.remove(a,p))}return b.fixUp_()}isRed_(){return this.color}fixUp_(){let a=this;return a.right.isRed_()&&!a.left.isRed_()&&(a=a.rotateLeft_()),a.left.isRed_()&&a.left.left.isRed_()&&(a=a.rotateRight_()),a.left.isRed_()&&a.right.isRed_()&&(a=a.colorFlip_()),a}moveRedLeft_(){let a=this.colorFlip_();return a.right.left.isRed_()&&(a=a.copy(null,null,null,null,a.right.rotateRight_()),a=a.rotateLeft_(),a=a.colorFlip_()),a}moveRedRight_(){let a=this.colorFlip_();return a.left.left.isRed_()&&(a=a.rotateRight_(),a=a.colorFlip_()),a}rotateLeft_(){const a=this.copy(null,null,h.RED,null,this.right.left);return this.right.copy(null,null,this.color,a,null)}rotateRight_(){const a=this.copy(null,null,h.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,a)}colorFlip_(){const a=this.left.copy(null,null,!this.left.color,null,null),p=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,a,p)}checkMaxDepth_(){const a=this.check_();return Math.pow(2,a)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const a=this.left.check_();if(a!==this.right.check_())throw new Error("Black depths differ");return a+(this.isRed_()?0:1)}}return h.RED=!0,h.BLACK=!1,h})();class hi{constructor(l,a=hi.EMPTY_NODE){this.comparator_=l,this.root_=a}insert(l,a){return new hi(this.comparator_,this.root_.insert(l,a,this.comparator_).copy(null,null,ws.BLACK,null,null))}remove(l){return new hi(this.comparator_,this.root_.remove(l,this.comparator_).copy(null,null,ws.BLACK,null,null))}get(l){let a,p=this.root_;for(;!p.isEmpty();){if(a=this.comparator_(l,p.key),0===a)return p.value;a<0?p=p.left:a>0&&(p=p.right)}return null}getPredecessorKey(l){let a,p=this.root_,b=null;for(;!p.isEmpty();){if(a=this.comparator_(l,p.key),0===a){if(p.left.isEmpty())return b?b.key:null;for(p=p.left;!p.right.isEmpty();)p=p.right;return p.key}a<0?p=p.left:a>0&&(b=p,p=p.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(l){return this.root_.inorderTraversal(l)}reverseTraversal(l){return this.root_.reverseTraversal(l)}getIterator(l){return new xo(this.root_,null,this.comparator_,!1,l)}getIteratorFrom(l,a){return new xo(this.root_,l,this.comparator_,!1,a)}getReverseIteratorFrom(l,a){return new xo(this.root_,l,this.comparator_,!0,a)}getReverseIterator(l){return new xo(this.root_,null,this.comparator_,!0,l)}}function ca(h,l){return ls(h.name,l.name)}function Bo(h,l){return ls(h,l)}hi.EMPTY_NODE=new class Gu{copy(l,a,p,b,M){return this}insert(l,a,p){return new ws(l,a,null)}remove(l,a){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(l){return!1}reverseTraversal(l){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Wt=function(h){return"number"==typeof h?"number:"+uo(h):"string:"+h},Mi=function(h){if(h.isLeafNode()){const l=h.val();(0,H.hu)("string"==typeof l||"number"==typeof l||"object"==typeof l&&(0,H.r3)(l,".sv"),"Priority must be a string or number.")}else(0,H.hu)(h===$o||h.isEmpty(),"priority of unexpected type.");(0,H.hu)(h===$o||h.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let As,Sn,Wn,ks=(()=>{class h{constructor(a,p=h.__childrenNodeConstructor.EMPTY_NODE){this.value_=a,this.priorityNode_=p,this.lazyHash_=null,(0,H.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Mi(this.priorityNode_)}static set __childrenNodeConstructor(a){As=a}static get __childrenNodeConstructor(){return As}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(a){return new h(this.value_,a)}getImmediateChild(a){return".priority"===a?this.priorityNode_:h.__childrenNodeConstructor.EMPTY_NODE}getChild(a){return ar(a)?this:".priority"===pr(a)?this.priorityNode_:h.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(a,p){return null}updateImmediateChild(a,p){return".priority"===a?this.updatePriority(p):p.isEmpty()&&".priority"!==a?this:h.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(a,p).updatePriority(this.priorityNode_)}updateChild(a,p){const b=pr(a);return null===b?p:p.isEmpty()&&".priority"!==b?this:((0,H.hu)(".priority"!==b||1===pi(a),".priority must be the last token in a path"),this.updateImmediateChild(b,h.__childrenNodeConstructor.EMPTY_NODE.updateChild(_i(a),p)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(a,p){return!1}val(a){return a&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let a="";this.priorityNode_.isEmpty()||(a+="priority:"+Wt(this.priorityNode_.val())+":");const p=typeof this.value_;a+=p+":",a+="number"===p?uo(this.value_):this.value_,this.lazyHash_=ze(a)}return this.lazyHash_}getValue(){return this.value_}compareTo(a){return a===h.__childrenNodeConstructor.EMPTY_NODE?1:a instanceof h.__childrenNodeConstructor?-1:((0,H.hu)(a.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(a))}compareToLeafNode_(a){const p=typeof a.value_,b=typeof this.value_,M=h.VALUE_TYPE_ORDER.indexOf(p),U=h.VALUE_TYPE_ORDER.indexOf(b);return(0,H.hu)(M>=0,"Unknown leaf type: "+p),(0,H.hu)(U>=0,"Unknown leaf type: "+b),M===U?"object"===b?0:this.value_<a.value_?-1:this.value_===a.value_?0:1:U-M}withIndex(){return this}isIndexed(){return!0}equals(a){if(a===this)return!0;if(a.isLeafNode()){const p=a;return this.value_===p.value_&&this.priorityNode_.equals(p.priorityNode_)}return!1}}return h.VALUE_TYPE_ORDER=["object","boolean","number","string"],h})();const T=new class Dt extends Ua{compare(l,a){const p=l.node.getPriority(),b=a.node.getPriority(),M=p.compareTo(b);return 0===M?ls(l.name,a.name):M}isDefinedOn(l){return!l.getPriority().isEmpty()}indexedValueChanged(l,a){return!l.getPriority().equals(a.getPriority())}minPost(){return gr.MIN}maxPost(){return new gr(zi,new ks("[PRIORITY-POST]",Wn))}makePost(l,a){const p=Sn(l);return new gr(a,new ks("[PRIORITY-POST]",p))}toString(){return".priority"}},S=Math.log(2);class D{constructor(l){this.count=parseInt(Math.log(l+1)/S,10),this.current_=this.count-1;const b=(M=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=l+1&b}nextBitIsOne(){const l=!(this.bits_&1<<this.current_);return this.current_--,l}}const V=function(h,l,a,p){h.sort(l);const b=function(be,Be){const It=Be-be;let wt,Bt;if(0===It)return null;if(1===It)return wt=h[be],Bt=a?a(wt):wt,new ws(Bt,wt.node,ws.BLACK,null,null);{const Cn=parseInt(It/2,10)+be,nr=b(be,Cn),Hi=b(Cn+1,Be);return wt=h[Cn],Bt=a?a(wt):wt,new ws(Bt,wt.node,ws.BLACK,nr,Hi)}},ne=function(be){let Be=null,It=null,wt=h.length;const Bt=function(nr,Hi){const go=wt-nr,cu=wt;wt-=nr;const wl=b(go+1,cu),Cc=h[go],zh=a?a(Cc):Cc;Cn(new ws(zh,Cc.node,Hi,null,wl))},Cn=function(nr){Be?(Be.left=nr,Be=nr):(It=nr,Be=nr)};for(let nr=0;nr<be.count;++nr){const Hi=be.nextBitIsOne(),go=Math.pow(2,be.count-(nr+1));Hi?Bt(go,ws.BLACK):(Bt(go,ws.BLACK),Bt(go,ws.RED))}return It}(new D(h.length));return new hi(p||l,ne)};let W;const se={};class Ae{constructor(l,a){this.indexes_=l,this.indexSet_=a}static get Default(){return(0,H.hu)(se&&T,"ChildrenNode.ts has not been loaded"),W=W||new Ae({".priority":se},{".priority":T}),W}get(l){const a=(0,H.DV)(this.indexes_,l);if(!a)throw new Error("No index defined for "+l);return a instanceof hi?a:null}hasIndex(l){return(0,H.r3)(this.indexSet_,l.toString())}addIndex(l,a){(0,H.hu)(l!==Fi,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const p=[];let b=!1;const M=a.getIterator(gr.Wrap);let ne,U=M.getNext();for(;U;)b=b||l.isDefinedOn(U.node),p.push(U),U=M.getNext();ne=b?V(p,l.getCompare()):se;const be=l.toString(),Be=Object.assign({},this.indexSet_);Be[be]=l;const It=Object.assign({},this.indexes_);return It[be]=ne,new Ae(It,Be)}addToIndexes(l,a){const p=(0,H.UI)(this.indexes_,(b,M)=>{const U=(0,H.DV)(this.indexSet_,M);if((0,H.hu)(U,"Missing index implementation for "+M),b===se){if(U.isDefinedOn(l.node)){const ne=[],be=a.getIterator(gr.Wrap);let Be=be.getNext();for(;Be;)Be.name!==l.name&&ne.push(Be),Be=be.getNext();return ne.push(l),V(ne,U.getCompare())}return se}{const ne=a.get(l.name);let be=b;return ne&&(be=be.remove(new gr(l.name,ne))),be.insert(l,l.node)}});return new Ae(p,this.indexSet_)}removeFromIndexes(l,a){const p=(0,H.UI)(this.indexes_,b=>{if(b===se)return b;{const M=a.get(l.name);return M?b.remove(new gr(l.name,M)):b}});return new Ae(p,this.indexSet_)}}let $e,gt=(()=>{class h{constructor(a,p,b){this.children_=a,this.priorityNode_=p,this.indexMap_=b,this.lazyHash_=null,this.priorityNode_&&Mi(this.priorityNode_),this.children_.isEmpty()&&(0,H.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return $e||($e=new h(new hi(Bo),null,Ae.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||$e}updatePriority(a){return this.children_.isEmpty()?this:new h(this.children_,a,this.indexMap_)}getImmediateChild(a){if(".priority"===a)return this.getPriority();{const p=this.children_.get(a);return null===p?$e:p}}getChild(a){const p=pr(a);return null===p?this:this.getImmediateChild(p).getChild(_i(a))}hasChild(a){return null!==this.children_.get(a)}updateImmediateChild(a,p){if((0,H.hu)(p,"We should always be passing snapshot nodes"),".priority"===a)return this.updatePriority(p);{const b=new gr(a,p);let M,U;p.isEmpty()?(M=this.children_.remove(a),U=this.indexMap_.removeFromIndexes(b,this.children_)):(M=this.children_.insert(a,p),U=this.indexMap_.addToIndexes(b,this.children_));const ne=M.isEmpty()?$e:this.priorityNode_;return new h(M,ne,U)}}updateChild(a,p){const b=pr(a);if(null===b)return p;{(0,H.hu)(".priority"!==pr(a)||1===pi(a),".priority must be the last token in a path");const M=this.getImmediateChild(b).updateChild(_i(a),p);return this.updateImmediateChild(b,M)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(a){if(this.isEmpty())return null;const p={};let b=0,M=0,U=!0;if(this.forEachChild(T,(ne,be)=>{p[ne]=be.val(a),b++,U&&h.INTEGER_REGEXP_.test(ne)?M=Math.max(M,Number(ne)):U=!1}),!a&&U&&M<2*b){const ne=[];for(const be in p)ne[be]=p[be];return ne}return a&&!this.getPriority().isEmpty()&&(p[".priority"]=this.getPriority().val()),p}hash(){if(null===this.lazyHash_){let a="";this.getPriority().isEmpty()||(a+="priority:"+Wt(this.getPriority().val())+":"),this.forEachChild(T,(p,b)=>{const M=b.hash();""!==M&&(a+=":"+p+":"+M)}),this.lazyHash_=""===a?"":ze(a)}return this.lazyHash_}getPredecessorChildName(a,p,b){const M=this.resolveIndex_(b);if(M){const U=M.getPredecessorKey(new gr(a,p));return U?U.name:null}return this.children_.getPredecessorKey(a)}getFirstChildName(a){const p=this.resolveIndex_(a);if(p){const b=p.minKey();return b&&b.name}return this.children_.minKey()}getFirstChild(a){const p=this.getFirstChildName(a);return p?new gr(p,this.children_.get(p)):null}getLastChildName(a){const p=this.resolveIndex_(a);if(p){const b=p.maxKey();return b&&b.name}return this.children_.maxKey()}getLastChild(a){const p=this.getLastChildName(a);return p?new gr(p,this.children_.get(p)):null}forEachChild(a,p){const b=this.resolveIndex_(a);return b?b.inorderTraversal(M=>p(M.name,M.node)):this.children_.inorderTraversal(p)}getIterator(a){return this.getIteratorFrom(a.minPost(),a)}getIteratorFrom(a,p){const b=this.resolveIndex_(p);if(b)return b.getIteratorFrom(a,M=>M);{const M=this.children_.getIteratorFrom(a.name,gr.Wrap);let U=M.peek();for(;null!=U&&p.compare(U,a)<0;)M.getNext(),U=M.peek();return M}}getReverseIterator(a){return this.getReverseIteratorFrom(a.maxPost(),a)}getReverseIteratorFrom(a,p){const b=this.resolveIndex_(p);if(b)return b.getReverseIteratorFrom(a,M=>M);{const M=this.children_.getReverseIteratorFrom(a.name,gr.Wrap);let U=M.peek();for(;null!=U&&p.compare(U,a)>0;)M.getNext(),U=M.peek();return M}}compareTo(a){return this.isEmpty()?a.isEmpty()?0:-1:a.isLeafNode()||a.isEmpty()?1:a===Dr?-1:0}withIndex(a){if(a===Fi||this.indexMap_.hasIndex(a))return this;{const p=this.indexMap_.addIndex(a,this.children_);return new h(this.children_,this.priorityNode_,p)}}isIndexed(a){return a===Fi||this.indexMap_.hasIndex(a)}equals(a){if(a===this)return!0;if(a.isLeafNode())return!1;{const p=a;if(this.getPriority().equals(p.getPriority())){if(this.children_.count()===p.children_.count()){const b=this.getIterator(T),M=p.getIterator(T);let U=b.getNext(),ne=M.getNext();for(;U&&ne;){if(U.name!==ne.name||!U.node.equals(ne.node))return!1;U=b.getNext(),ne=M.getNext()}return null===U&&null===ne}return!1}return!1}}resolveIndex_(a){return a===Fi?null:this.indexMap_.get(a.toString())}}return h.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,h})();const Dr=new class vn extends gt{constructor(){super(new hi(Bo),gt.EMPTY_NODE,Ae.Default)}compareTo(l){return l===this?0:1}equals(l){return l===this}getPriority(){return this}getImmediateChild(l){return gt.EMPTY_NODE}isEmpty(){return!1}};function jn(h,l=null){if(null===h)return gt.EMPTY_NODE;if("object"==typeof h&&".priority"in h&&(l=h[".priority"]),(0,H.hu)(null===l||"string"==typeof l||"number"==typeof l||"object"==typeof l&&".sv"in l,"Invalid priority type found: "+typeof l),"object"==typeof h&&".value"in h&&null!==h[".value"]&&(h=h[".value"]),"object"!=typeof h||".sv"in h)return new ks(h,jn(l));if(h instanceof Array){let a=gt.EMPTY_NODE;return si(h,(p,b)=>{if((0,H.r3)(h,p)&&"."!==p.substring(0,1)){const M=jn(b);(M.isLeafNode()||!M.isEmpty())&&(a=a.updateImmediateChild(p,M))}}),a.updatePriority(jn(l))}{const a=[];let p=!1;if(si(h,(U,ne)=>{if("."!==U.substring(0,1)){const be=jn(ne);be.isEmpty()||(p=p||!be.getPriority().isEmpty(),a.push(new gr(U,be)))}}),0===a.length)return gt.EMPTY_NODE;const M=V(a,ca,U=>U.name,Bo);if(p){const U=V(a,T.getCompare());return new gt(M,jn(l),new Ae({".priority":U},{".priority":T}))}return new gt(M,jn(l),Ae.Default)}}Object.defineProperties(gr,{MIN:{value:new gr(ki,gt.EMPTY_NODE)},MAX:{value:new gr(zi,Dr)}}),vu.__EMPTY_NODE=gt.EMPTY_NODE,ks.__childrenNodeConstructor=gt,function Ia(h){$o=h}(Dr),function cn(h){Wn=h}(Dr),function Rl(h){Sn=h}(jn);class Cr extends Ua{constructor(l){super(),this.indexPath_=l,(0,H.hu)(!ar(l)&&".priority"!==pr(l),"Can't create PathIndex with empty path or .priority key")}extractChild(l){return l.getChild(this.indexPath_)}isDefinedOn(l){return!l.getChild(this.indexPath_).isEmpty()}compare(l,a){const p=this.extractChild(l.node),b=this.extractChild(a.node),M=p.compareTo(b);return 0===M?ls(l.name,a.name):M}makePost(l,a){const p=jn(l),b=gt.EMPTY_NODE.updateChild(this.indexPath_,p);return new gr(a,b)}maxPost(){const l=gt.EMPTY_NODE.updateChild(this.indexPath_,Dr);return new gr(zi,l)}toString(){return Xo(this.indexPath_,0).join("/")}}const Fs=new class fr extends Ua{compare(l,a){const p=l.node.compareTo(a.node);return 0===p?ls(l.name,a.name):p}isDefinedOn(l){return!0}indexedValueChanged(l,a){return!l.equals(a)}minPost(){return gr.MIN}maxPost(){return gr.MAX}makePost(l,a){const p=jn(l);return new gr(a,p)}toString(){return".value"}},ro="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Ol=function(){let h=0;const l=[];return function(a){const p=a===h;let b;h=a;const M=new Array(8);for(b=7;b>=0;b--)M[b]=ro.charAt(a%64),a=Math.floor(a/64);(0,H.hu)(0===a,"Cannot push at time == 0");let U=M.join("");if(p){for(b=11;b>=0&&63===l[b];b--)l[b]=0;l[b]++}else for(b=0;b<12;b++)l[b]=Math.floor(64*Math.random());for(b=0;b<12;b++)U+=ro.charAt(l[b]);return(0,H.hu)(20===U.length,"nextPushId: Length should be 20."),U}}(),vd=function(h){if(h===""+$i)return"-";const l=$r(h);if(null!=l)return""+(l+1);const a=new Array(h.length);for(let U=0;U<a.length;U++)a[U]=h.charAt(U);if(a.length<786)return a.push("-"),a.join("");let p=a.length-1;for(;p>=0&&"z"===a[p];)p--;if(-1===p)return zi;const M=ro.charAt(ro.indexOf(a[p])+1);return a[p]=M,a.slice(0,p+1).join("")},Zl=function(h){if(h===""+Do)return ki;const l=$r(h);if(null!=l)return""+(l-1);const a=new Array(h.length);for(let p=0;p<a.length;p++)a[p]=h.charAt(p);return"-"===a[a.length-1]?1===a.length?""+$i:(delete a[a.length-1],a.join("")):(a[a.length-1]=ro.charAt(ro.indexOf(a[a.length-1])-1),a.join("")+"z".repeat(786-a.length))};function Wr(h){return{type:"value",snapshotNode:h}}function Pl(h,l){return{type:"child_added",snapshotNode:l,childName:h}}function ps(h,l){return{type:"child_removed",snapshotNode:l,childName:h}}function Ca(h,l,a){return{type:"child_changed",snapshotNode:l,childName:h,oldSnap:a}}class Is{constructor(l){this.index_=l}updateChild(l,a,p,b,M,U){(0,H.hu)(l.isIndexed(this.index_),"A node must be indexed if only a child is updated");const ne=l.getImmediateChild(a);return ne.getChild(b).equals(p.getChild(b))&&ne.isEmpty()===p.isEmpty()||(null!=U&&(p.isEmpty()?l.hasChild(a)?U.trackChildChange(ps(a,ne)):(0,H.hu)(l.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):ne.isEmpty()?U.trackChildChange(Pl(a,p)):U.trackChildChange(Ca(a,p,ne))),l.isLeafNode()&&p.isEmpty())?l:l.updateImmediateChild(a,p).withIndex(this.index_)}updateFullNode(l,a,p){return null!=p&&(l.isLeafNode()||l.forEachChild(T,(b,M)=>{a.hasChild(b)||p.trackChildChange(ps(b,M))}),a.isLeafNode()||a.forEachChild(T,(b,M)=>{if(l.hasChild(b)){const U=l.getImmediateChild(b);U.equals(M)||p.trackChildChange(Ca(b,M,U))}else p.trackChildChange(Pl(b,M))})),a.withIndex(this.index_)}updatePriority(l,a){return l.isEmpty()?gt.EMPTY_NODE:l.updatePriority(a)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Ki{constructor(l){this.indexedFilter_=new Is(l.getIndex()),this.index_=l.getIndex(),this.startPost_=Ki.getStartPost_(l),this.endPost_=Ki.getEndPost_(l)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(l){return this.index_.compare(this.getStartPost(),l)<=0&&this.index_.compare(l,this.getEndPost())<=0}updateChild(l,a,p,b,M,U){return this.matches(new gr(a,p))||(p=gt.EMPTY_NODE),this.indexedFilter_.updateChild(l,a,p,b,M,U)}updateFullNode(l,a,p){a.isLeafNode()&&(a=gt.EMPTY_NODE);let b=a.withIndex(this.index_);b=b.updatePriority(gt.EMPTY_NODE);const M=this;return a.forEachChild(T,(U,ne)=>{M.matches(new gr(U,ne))||(b=b.updateImmediateChild(U,gt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(l,b,p)}updatePriority(l,a){return l}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(l){if(l.hasStart()){const a=l.getIndexStartName();return l.getIndex().makePost(l.getIndexStartValue(),a)}return l.getIndex().minPost()}static getEndPost_(l){if(l.hasEnd()){const a=l.getIndexEndName();return l.getIndex().makePost(l.getIndexEndValue(),a)}return l.getIndex().maxPost()}}class da{constructor(l){this.rangedFilter_=new Ki(l),this.index_=l.getIndex(),this.limit_=l.getLimit(),this.reverse_=!l.isViewFromLeft()}updateChild(l,a,p,b,M,U){return this.rangedFilter_.matches(new gr(a,p))||(p=gt.EMPTY_NODE),l.getImmediateChild(a).equals(p)?l:l.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(l,a,p,b,M,U):this.fullLimitUpdateChild_(l,a,p,M,U)}updateFullNode(l,a,p){let b;if(a.isLeafNode()||a.isEmpty())b=gt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<a.numChildren()&&a.isIndexed(this.index_)){let M;b=gt.EMPTY_NODE.withIndex(this.index_),M=this.reverse_?a.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):a.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let U=0;for(;M.hasNext()&&U<this.limit_;){const ne=M.getNext();let be;if(be=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),ne)<=0:this.index_.compare(ne,this.rangedFilter_.getEndPost())<=0,!be)break;b=b.updateImmediateChild(ne.name,ne.node),U++}}else{let M,U,ne,be;if(b=a.withIndex(this.index_),b=b.updatePriority(gt.EMPTY_NODE),this.reverse_){be=b.getReverseIterator(this.index_),M=this.rangedFilter_.getEndPost(),U=this.rangedFilter_.getStartPost();const wt=this.index_.getCompare();ne=(Bt,Cn)=>wt(Cn,Bt)}else be=b.getIterator(this.index_),M=this.rangedFilter_.getStartPost(),U=this.rangedFilter_.getEndPost(),ne=this.index_.getCompare();let Be=0,It=!1;for(;be.hasNext();){const wt=be.getNext();!It&&ne(M,wt)<=0&&(It=!0),It&&Be<this.limit_&&ne(wt,U)<=0?Be++:b=b.updateImmediateChild(wt.name,gt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(l,b,p)}updatePriority(l,a){return l}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(l,a,p,b,M){let U;if(this.reverse_){const wt=this.index_.getCompare();U=(Bt,Cn)=>wt(Cn,Bt)}else U=this.index_.getCompare();const ne=l;(0,H.hu)(ne.numChildren()===this.limit_,"");const be=new gr(a,p),Be=this.reverse_?ne.getFirstChild(this.index_):ne.getLastChild(this.index_),It=this.rangedFilter_.matches(be);if(ne.hasChild(a)){const wt=ne.getImmediateChild(a);let Bt=b.getChildAfterChild(this.index_,Be,this.reverse_);for(;null!=Bt&&(Bt.name===a||ne.hasChild(Bt.name));)Bt=b.getChildAfterChild(this.index_,Bt,this.reverse_);const Cn=null==Bt?1:U(Bt,be);if(It&&!p.isEmpty()&&Cn>=0)return null!=M&&M.trackChildChange(Ca(a,p,wt)),ne.updateImmediateChild(a,p);{null!=M&&M.trackChildChange(ps(a,wt));const Hi=ne.updateImmediateChild(a,gt.EMPTY_NODE);return null!=Bt&&this.rangedFilter_.matches(Bt)?(null!=M&&M.trackChildChange(Pl(Bt.name,Bt.node)),Hi.updateImmediateChild(Bt.name,Bt.node)):Hi}}return p.isEmpty()?l:It&&U(Be,be)>=0?(null!=M&&(M.trackChildChange(ps(Be.name,Be.node)),M.trackChildChange(Pl(a,p))),ne.updateImmediateChild(a,p).updateImmediateChild(Be.name,gt.EMPTY_NODE)):l}}class vi{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=T}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,H.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,H.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ki}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,H.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,H.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:zi}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,H.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===T}copy(){const l=new vi;return l.limitSet_=this.limitSet_,l.limit_=this.limit_,l.startSet_=this.startSet_,l.indexStartValue_=this.indexStartValue_,l.startNameSet_=this.startNameSet_,l.indexStartName_=this.indexStartName_,l.endSet_=this.endSet_,l.indexEndValue_=this.indexEndValue_,l.endNameSet_=this.endNameSet_,l.indexEndName_=this.indexEndName_,l.index_=this.index_,l.viewFrom_=this.viewFrom_,l}}function Cs(h,l,a){const p=h.copy();return p.startSet_=!0,void 0===l&&(l=null),p.indexStartValue_=l,null!=a?(p.startNameSet_=!0,p.indexStartName_=a):(p.startNameSet_=!1,p.indexStartName_=""),p}function Vs(h,l,a){const p=h.copy();return p.endSet_=!0,void 0===l&&(l=null),p.indexEndValue_=l,void 0!==a?(p.endNameSet_=!0,p.indexEndName_=a):(p.endNameSet_=!1,p.indexEndName_=""),p}function vo(h,l){const a=h.copy();return a.index_=l,a}function bu(h){const l={};if(h.isDefault())return l;let a;return h.index_===T?a="$priority":h.index_===Fs?a="$value":h.index_===Fi?a="$key":((0,H.hu)(h.index_ instanceof Cr,"Unrecognized index type!"),a=h.index_.toString()),l.orderBy=(0,H.Pz)(a),h.startSet_&&(l.startAt=(0,H.Pz)(h.indexStartValue_),h.startNameSet_&&(l.startAt+=","+(0,H.Pz)(h.indexStartName_))),h.endSet_&&(l.endAt=(0,H.Pz)(h.indexEndValue_),h.endNameSet_&&(l.endAt+=","+(0,H.Pz)(h.indexEndName_))),h.limitSet_&&(h.isViewFromLeft()?l.limitToFirst=h.limit_:l.limitToLast=h.limit_),l}function dn(h){const l={};if(h.startSet_&&(l.sp=h.indexStartValue_,h.startNameSet_&&(l.sn=h.indexStartName_)),h.endSet_&&(l.ep=h.indexEndValue_,h.endNameSet_&&(l.en=h.indexEndName_)),h.limitSet_){l.l=h.limit_;let a=h.viewFrom_;""===a&&(a=h.isViewFromLeft()?"l":"r"),l.vf=a}return h.index_!==T&&(l.i=h.index_.toString()),l}class wu extends Lo{constructor(l,a,p,b){super(),this.repoInfo_=l,this.onDataUpdate_=a,this.authTokenProvider_=p,this.appCheckTokenProvider_=b,this.log_=Sr("p:rest:"),this.listens_={}}reportStats(l){throw new Error("Method not implemented.")}static getListenId_(l,a){return void 0!==a?"tag$"+a:((0,H.hu)(l._queryParams.isDefault(),"should have a tag if it's not a default query."),l._path.toString())}listen(l,a,p,b){const M=l._path.toString();this.log_("Listen called for "+M+" "+l._queryIdentifier);const U=wu.getListenId_(l,p),ne={};this.listens_[U]=ne;const be=bu(l._queryParams);this.restRequest_(M+".json",be,(Be,It)=>{let wt=It;if(404===Be&&(wt=null,Be=null),null===Be&&this.onDataUpdate_(M,wt,!1,p),(0,H.DV)(this.listens_,U)===ne){let Bt;Bt=Be?401===Be?"permission_denied":"rest_error:"+Be:"ok",b(Bt,null)}})}unlisten(l,a){const p=wu.getListenId_(l,a);delete this.listens_[p]}get(l){const a=bu(l._queryParams),p=l._path.toString(),b=new H.BH;return this.restRequest_(p+".json",a,(M,U)=>{let ne=U;404===M&&(ne=null,M=null),null===M?(this.onDataUpdate_(p,ne,!1,null),b.resolve(ne)):b.reject(new Error(ne))}),b.promise}refreshAuthToken(l){}restRequest_(l,a={},p){return a.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([b,M])=>{b&&b.accessToken&&(a.auth=b.accessToken),M&&M.token&&(a.ac=M.token);const U=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+l+"?ns="+this.repoInfo_.namespace+(0,H.xO)(a);this.log_("Sending REST request for "+U);const ne=new XMLHttpRequest;ne.onreadystatechange=()=>{if(p&&4===ne.readyState){this.log_("REST Response for "+U+" received. status:",ne.status,"response:",ne.responseText);let be=null;if(ne.status>=200&&ne.status<300){try{be=(0,H.cI)(ne.responseText)}catch(Be){Zr("Failed to parse JSON response for "+U+": "+ne.responseText)}p(null,be)}else 401!==ne.status&&404!==ne.status&&Zr("Got unsuccessful REST response for "+U+" Status: "+ne.status),p(ne.status);p=null}},ne.open("GET",U,!0),ne.send()})}}class Ed{constructor(){this.rootNode_=gt.EMPTY_NODE}getNode(l){return this.rootNode_.getChild(l)}updateSnapshot(l,a){this.rootNode_=this.rootNode_.updateChild(l,a)}}function Bs(){return{value:null,children:new Map}}function Ci(h,l,a){if(ar(l))h.value=a,h.children.clear();else if(null!==h.value)h.value=h.value.updateChild(l,a);else{const p=pr(l);h.children.has(p)||h.children.set(p,Bs()),Ci(h.children.get(p),l=_i(l),a)}}function Da(h,l){if(ar(l))return h.value=null,h.children.clear(),!0;if(null!==h.value){if(h.value.isLeafNode())return!1;{const a=h.value;return h.value=null,a.forEachChild(T,(p,b)=>{Ci(h,new kr(p),b)}),Da(h,l)}}if(h.children.size>0){const a=pr(l);return l=_i(l),h.children.has(a)&&Da(h.children.get(a),l)&&h.children.delete(a),0===h.children.size}return!0}function co(h,l,a){null!==h.value?a(l,h.value):function Ta(h,l){h.children.forEach((a,p)=>{l(p,a)})}(h,(p,b)=>{co(b,new kr(l.toString()+"/"+p),a)})}class ol{constructor(l){this.collection_=l,this.last_=null}get(){const l=this.collection_.get(),a=Object.assign({},l);return this.last_&&si(this.last_,(p,b)=>{a[p]=a[p]-b}),this.last_=l,a}}class Ha{constructor(l,a){this.server_=a,this.statsToReport_={},this.statsListener_=new ol(l);const p=1e4+2e4*Math.random();Ns(this.reportStats_.bind(this),Math.floor(p))}reportStats_(){const l=this.statsListener_.get(),a={};let p=!1;si(l,(b,M)=>{M>0&&(0,H.r3)(this.statsToReport_,b)&&(a[b]=M,p=!0)}),p&&this.server_.reportStats(a),Ns(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Mo=(()=>{return(h=Mo||(Mo={}))[h.OVERWRITE=0]="OVERWRITE",h[h.MERGE=1]="MERGE",h[h.ACK_USER_WRITE=2]="ACK_USER_WRITE",h[h.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",Mo;var h})();function N(h){return{fromUser:!1,fromServer:!0,queryId:h,tagged:!0}}class z{constructor(l,a,p){this.path=l,this.affectedTree=a,this.revert=p,this.type=Mo.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(l){if(ar(this.path)){if(null!=this.affectedTree.value)return(0,H.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const a=this.affectedTree.subtree(new kr(l));return new z(hr(),a,this.revert)}}return(0,H.hu)(pr(this.path)===l,"operationForChild called for unrelated child."),new z(_i(this.path),this.affectedTree,this.revert)}}class oe{constructor(l,a){this.source=l,this.path=a,this.type=Mo.LISTEN_COMPLETE}operationForChild(l){return ar(this.path)?new oe(this.source,hr()):new oe(this.source,_i(this.path))}}class xe{constructor(l,a,p){this.source=l,this.path=a,this.snap=p,this.type=Mo.OVERWRITE}operationForChild(l){return ar(this.path)?new xe(this.source,hr(),this.snap.getImmediateChild(l)):new xe(this.source,_i(this.path),this.snap)}}class it{constructor(l,a,p){this.source=l,this.path=a,this.children=p,this.type=Mo.MERGE}operationForChild(l){if(ar(this.path)){const a=this.children.subtree(new kr(l));return a.isEmpty()?null:a.value?new xe(this.source,hr(),a.value):new it(this.source,hr(),a)}return(0,H.hu)(pr(this.path)===l,"Can't get a merge for a child not on the path of the operation"),new it(this.source,_i(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class vt{constructor(l,a,p){this.node_=l,this.fullyInitialized_=a,this.filtered_=p}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(l){if(ar(l))return this.isFullyInitialized()&&!this.filtered_;const a=pr(l);return this.isCompleteForChild(a)}isCompleteForChild(l){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(l)}getNode(){return this.node_}}class Lt{constructor(l){this.query_=l,this.index_=this.query_._queryParams.getIndex()}}function lr(h,l,a,p,b,M){const U=p.filter(ne=>ne.type===a);U.sort((ne,be)=>function Fr(h,l,a){if(null==l.childName||null==a.childName)throw(0,H.g5)("Should only compare child_ events.");const p=new gr(l.childName,l.snapshotNode),b=new gr(a.childName,a.snapshotNode);return h.index_.compare(p,b)}(h,ne,be)),U.forEach(ne=>{const be=function tr(h,l,a){return"value"===l.type||"child_removed"===l.type||(l.prevName=a.getPredecessorChildName(l.childName,l.snapshotNode,h.index_)),l}(h,ne,M);b.forEach(Be=>{Be.respondsTo(ne.type)&&l.push(Be.createEvent(be,h.query_))})})}function ur(h,l){return{eventCache:h,serverCache:l}}function xs(h,l,a,p){return ur(new vt(l,a,p),h.serverCache)}function ti(h,l,a,p){return ur(h.eventCache,new vt(l,a,p))}function io(h){return h.eventCache.isFullyInitialized()?h.eventCache.getNode():null}function ea(h){return h.serverCache.isFullyInitialized()?h.serverCache.getNode():null}let Sa;class Pr{constructor(l,a=(()=>(Sa||(Sa=new hi(Hs)),Sa))()){this.value=l,this.children=a}static fromObject(l){let a=new Pr(null);return si(l,(p,b)=>{a=a.set(new kr(p),b)}),a}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(l,a){if(null!=this.value&&a(this.value))return{path:hr(),value:this.value};if(ar(l))return null;{const p=pr(l),b=this.children.get(p);if(null!==b){const M=b.findRootMostMatchingPathAndValue(_i(l),a);return null!=M?{path:gi(new kr(p),M.path),value:M.value}:null}return null}}findRootMostValueAndPath(l){return this.findRootMostMatchingPathAndValue(l,()=>!0)}subtree(l){if(ar(l))return this;{const a=pr(l),p=this.children.get(a);return null!==p?p.subtree(_i(l)):new Pr(null)}}set(l,a){if(ar(l))return new Pr(a,this.children);{const p=pr(l),M=(this.children.get(p)||new Pr(null)).set(_i(l),a),U=this.children.insert(p,M);return new Pr(this.value,U)}}remove(l){if(ar(l))return this.children.isEmpty()?new Pr(null):new Pr(null,this.children);{const a=pr(l),p=this.children.get(a);if(p){const b=p.remove(_i(l));let M;return M=b.isEmpty()?this.children.remove(a):this.children.insert(a,b),null===this.value&&M.isEmpty()?new Pr(null):new Pr(this.value,M)}return this}}get(l){if(ar(l))return this.value;{const a=pr(l),p=this.children.get(a);return p?p.get(_i(l)):null}}setTree(l,a){if(ar(l))return a;{const p=pr(l),M=(this.children.get(p)||new Pr(null)).setTree(_i(l),a);let U;return U=M.isEmpty()?this.children.remove(p):this.children.insert(p,M),new Pr(this.value,U)}}fold(l){return this.fold_(hr(),l)}fold_(l,a){const p={};return this.children.inorderTraversal((b,M)=>{p[b]=M.fold_(gi(l,b),a)}),a(l,this.value,p)}findOnPath(l,a){return this.findOnPath_(l,hr(),a)}findOnPath_(l,a,p){const b=!!this.value&&p(a,this.value);if(b)return b;if(ar(l))return null;{const M=pr(l),U=this.children.get(M);return U?U.findOnPath_(_i(l),gi(a,M),p):null}}foreachOnPath(l,a){return this.foreachOnPath_(l,hr(),a)}foreachOnPath_(l,a,p){if(ar(l))return this;{this.value&&p(a,this.value);const b=pr(l),M=this.children.get(b);return M?M.foreachOnPath_(_i(l),gi(a,b),p):new Pr(null)}}foreach(l){this.foreach_(hr(),l)}foreach_(l,a){this.children.inorderTraversal((p,b)=>{b.foreach_(gi(l,p),a)}),this.value&&a(l,this.value)}foreachChild(l){this.children.inorderTraversal((a,p)=>{p.value&&l(a,p.value)})}}class bo{constructor(l){this.writeTree_=l}static empty(){return new bo(new Pr(null))}}function za(h,l,a){if(ar(l))return new bo(new Pr(a));{const p=h.writeTree_.findRootMostValueAndPath(l);if(null!=p){const b=p.path;let M=p.value;const U=qi(b,l);return M=M.updateChild(U,a),new bo(h.writeTree_.set(b,M))}{const b=new Pr(a),M=h.writeTree_.setTree(l,b);return new bo(M)}}}function Aa(h,l,a){let p=h;return si(a,(b,M)=>{p=za(p,gi(l,b),M)}),p}function ll(h,l){if(ar(l))return bo.empty();{const a=h.writeTree_.setTree(l,new Pr(null));return new bo(a)}}function Ms(h,l){return null!=ha(h,l)}function ha(h,l){const a=h.writeTree_.findRootMostValueAndPath(l);return null!=a?h.writeTree_.get(a.path).getChild(qi(a.path,l)):null}function bd(h){const l=[],a=h.writeTree_.value;return null!=a?a.isLeafNode()||a.forEachChild(T,(p,b)=>{l.push(new gr(p,b))}):h.writeTree_.children.inorderTraversal((p,b)=>{null!=b.value&&l.push(new gr(p,b.value))}),l}function ul(h,l){if(ar(l))return h;{const a=ha(h,l);return new bo(null!=a?new Pr(a):h.writeTree_.subtree(l))}}function Xl(h){return h.writeTree_.isEmpty()}function xa(h,l){return wd(hr(),h.writeTree_,l)}function wd(h,l,a){if(null!=l.value)return a.updateChild(h,l.value);{let p=null;return l.children.inorderTraversal((b,M)=>{".priority"===b?((0,H.hu)(null!==M.value,"Priority writes must always be leaf nodes"),p=M.value):a=wd(gi(h,b),M,a)}),!a.getChild(h).isEmpty()&&null!==p&&(a=a.updateChild(gi(h,".priority"),p)),a}}function Rc(h,l){return kc(l,h)}function ch(h,l){if(h.snap)return qs(h.path,l);for(const a in h.children)if(h.children.hasOwnProperty(a)&&qs(gi(h.path,a),l))return!0;return!1}function fa(h){return h.visible}function dh(h,l,a){let p=bo.empty();for(let b=0;b<h.length;++b){const M=h[b];if(l(M)){const U=M.path;let ne;if(M.snap)qs(a,U)?(ne=qi(a,U),p=za(p,ne,M.snap)):qs(U,a)&&(ne=qi(U,a),p=za(p,hr(),M.snap.getChild(ne)));else{if(!M.children)throw(0,H.g5)("WriteRecord should have .snap or .children");if(qs(a,U))ne=qi(a,U),p=Aa(p,ne,M.children);else if(qs(U,a))if(ne=qi(U,a),ar(ne))p=Aa(p,hr(),M.children);else{const be=(0,H.DV)(M.children,pr(ne));if(be){const Be=be.getChild(_i(ne));p=za(p,hr(),Be)}}}}}return p}function Jl(h,l,a,p,b){if(p||b){const M=ul(h.visibleWrites,l);return!b&&Xl(M)?a:b||null!=a||Ms(M,hr())?xa(dh(h.allWrites,function(Be){return(Be.visible||b)&&(!p||!~p.indexOf(Be.writeId))&&(qs(Be.path,l)||qs(l,Be.path))},l),a||gt.EMPTY_NODE):null}{const M=ha(h.visibleWrites,l);if(null!=M)return M;{const U=ul(h.visibleWrites,l);return Xl(U)?a:null!=a||Ms(U,hr())?xa(U,a||gt.EMPTY_NODE):null}}}function ho(h,l,a,p){return Jl(h.writeTree,h.treePath,l,a,p)}function Cd(h,l){return function Oc(h,l,a){let p=gt.EMPTY_NODE;const b=ha(h.visibleWrites,l);if(b)return b.isLeafNode()||b.forEachChild(T,(M,U)=>{p=p.updateImmediateChild(M,U)}),p;if(a){const M=ul(h.visibleWrites,l);return a.forEachChild(T,(U,ne)=>{const be=xa(ul(M,new kr(U)),ne);p=p.updateImmediateChild(U,be)}),bd(M).forEach(U=>{p=p.updateImmediateChild(U.name,U.node)}),p}return bd(ul(h.visibleWrites,l)).forEach(U=>{p=p.updateImmediateChild(U.name,U.node)}),p}(h.writeTree,h.treePath,l)}function cl(h,l,a,p){return function Pc(h,l,a,p,b){(0,H.hu)(p||b,"Either existingEventSnap or existingServerSnap must exist");const M=gi(l,a);if(Ms(h.visibleWrites,M))return null;{const U=ul(h.visibleWrites,M);return Xl(U)?b.getChild(a):xa(U,b.getChild(a))}}(h.writeTree,h.treePath,l,a,p)}function eu(h,l){return function zu(h,l){return ha(h.visibleWrites,l)}(h.writeTree,gi(h.treePath,l))}function Tu(h,l,a){return function Cu(h,l,a,p){const b=gi(l,a),M=ha(h.visibleWrites,b);return null!=M?M:p.isCompleteForChild(a)?xa(ul(h.visibleWrites,b),p.getNode().getImmediateChild(a)):null}(h.writeTree,h.treePath,l,a)}function Wu(h,l){return kc(gi(h.treePath,l),h.writeTree)}function kc(h,l){return{treePath:h,writeTree:l}}class uf{constructor(){this.changeMap=new Map}trackChildChange(l){const a=l.type,p=l.childName;(0,H.hu)("child_added"===a||"child_changed"===a||"child_removed"===a,"Only child changes supported for tracking"),(0,H.hu)(".priority"!==p,"Only non-priority child changes can be tracked.");const b=this.changeMap.get(p);if(b){const M=b.type;if("child_added"===a&&"child_removed"===M)this.changeMap.set(p,Ca(p,l.snapshotNode,b.snapshotNode));else if("child_removed"===a&&"child_added"===M)this.changeMap.delete(p);else if("child_removed"===a&&"child_changed"===M)this.changeMap.set(p,ps(p,b.oldSnap));else if("child_changed"===a&&"child_added"===M)this.changeMap.set(p,Pl(p,l.snapshotNode));else{if("child_changed"!==a||"child_changed"!==M)throw(0,H.g5)("Illegal combination of changes: "+l+" occurred after "+b);this.changeMap.set(p,Ca(p,l.snapshotNode,b.oldSnap))}}else this.changeMap.set(p,l)}getChanges(){return Array.from(this.changeMap.values())}}const Dd=new class hh{getCompleteChild(l){return null}getChildAfterChild(l,a,p){return null}};class Su{constructor(l,a,p=null){this.writes_=l,this.viewCache_=a,this.optCompleteServerCache_=p}getCompleteChild(l){const a=this.viewCache_.eventCache;if(a.isCompleteForChild(l))return a.getNode().getImmediateChild(l);{const p=null!=this.optCompleteServerCache_?new vt(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Tu(this.writes_,l,p)}}getChildAfterChild(l,a,p){const b=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:ea(this.viewCache_),M=function Nc(h,l,a,p,b,M){return function Nl(h,l,a,p,b,M,U){let ne;const be=ul(h.visibleWrites,l),Be=ha(be,hr());if(null!=Be)ne=Be;else{if(null==a)return[];ne=xa(be,a)}if(ne=ne.withIndex(U),ne.isEmpty()||ne.isLeafNode())return[];{const It=[],wt=U.getCompare(),Bt=M?ne.getReverseIteratorFrom(p,U):ne.getIteratorFrom(p,U);let Cn=Bt.getNext();for(;Cn&&It.length<b;)0!==wt(Cn,p)&&It.push(Cn),Cn=Bt.getNext();return It}}(h.writeTree,h.treePath,l,a,p,b,M)}(this.writes_,b,a,1,p,l);return 0===M.length?null:M[0]}}function Au(h,l,a,p,b,M){const U=l.eventCache;if(null!=eu(p,a))return l;{let ne,be;if(ar(a))if((0,H.hu)(l.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),l.serverCache.isFiltered()){const Be=ea(l),wt=Cd(p,Be instanceof gt?Be:gt.EMPTY_NODE);ne=h.filter.updateFullNode(l.eventCache.getNode(),wt,M)}else{const Be=ho(p,ea(l));ne=h.filter.updateFullNode(l.eventCache.getNode(),Be,M)}else{const Be=pr(a);if(".priority"===Be){(0,H.hu)(1===pi(a),"Can't have a priority with additional path components");const It=U.getNode();be=l.serverCache.getNode();const wt=cl(p,a,It,be);ne=null!=wt?h.filter.updatePriority(It,wt):U.getNode()}else{const It=_i(a);let wt;if(U.isCompleteForChild(Be)){be=l.serverCache.getNode();const Bt=cl(p,a,U.getNode(),be);wt=null!=Bt?U.getNode().getImmediateChild(Be).updateChild(It,Bt):U.getNode().getImmediateChild(Be)}else wt=Tu(p,Be,l.serverCache);ne=null!=wt?h.filter.updateChild(U.getNode(),Be,wt,It,b,M):U.getNode()}}return xs(l,ne,U.isFullyInitialized()||ar(a),h.filter.filtersNodes())}}function Ma(h,l,a,p,b,M,U,ne){const be=l.serverCache;let Be;const It=U?h.filter:h.filter.getIndexedFilter();if(ar(a))Be=It.updateFullNode(be.getNode(),p,null);else if(It.filtersNodes()&&!be.isFiltered()){const Cn=be.getNode().updateChild(a,p);Be=It.updateFullNode(be.getNode(),Cn,null)}else{const Cn=pr(a);if(!be.isCompleteForPath(a)&&pi(a)>1)return l;const nr=_i(a),go=be.getNode().getImmediateChild(Cn).updateChild(nr,p);Be=".priority"===Cn?It.updatePriority(be.getNode(),go):It.updateChild(be.getNode(),Cn,go,nr,Dd,null)}const wt=ti(l,Be,be.isFullyInitialized()||ar(a),It.filtersNodes());return Au(h,wt,a,b,new Su(b,wt,M),ne)}function Sd(h,l,a,p,b,M,U){const ne=l.eventCache;let be,Be;const It=new Su(b,l,M);if(ar(a))Be=h.filter.updateFullNode(l.eventCache.getNode(),p,U),be=xs(l,Be,!0,h.filter.filtersNodes());else{const wt=pr(a);if(".priority"===wt)Be=h.filter.updatePriority(l.eventCache.getNode(),p),be=xs(l,Be,ne.isFullyInitialized(),ne.isFiltered());else{const Bt=_i(a),Cn=ne.getNode().getImmediateChild(wt);let nr;if(ar(Bt))nr=p;else{const Hi=It.getCompleteChild(wt);nr=null!=Hi?".priority"===Al(Bt)&&Hi.getChild(Yl(Bt)).isEmpty()?Hi:Hi.updateChild(Bt,p):gt.EMPTY_NODE}be=Cn.equals(nr)?l:xs(l,h.filter.updateChild(ne.getNode(),wt,nr,Bt,It,U),ne.isFullyInitialized(),h.filter.filtersNodes())}}return be}function kl(h,l){return h.eventCache.isCompleteForChild(l)}function Fl(h,l,a){return a.foreach((p,b)=>{l=l.updateChild(p,b)}),l}function Lc(h,l,a,p,b,M,U,ne){if(l.serverCache.getNode().isEmpty()&&!l.serverCache.isFullyInitialized())return l;let Be,be=l;Be=ar(a)?p:new Pr(null).setTree(a,p);const It=l.serverCache.getNode();return Be.children.inorderTraversal((wt,Bt)=>{if(It.hasChild(wt)){const nr=Fl(0,l.serverCache.getNode().getImmediateChild(wt),Bt);be=Ma(h,be,new kr(wt),nr,b,M,U,ne)}}),Be.children.inorderTraversal((wt,Bt)=>{const Cn=!l.serverCache.isCompleteForChild(wt)&&void 0===Bt.value;if(!It.hasChild(wt)&&!Cn){const Hi=Fl(0,l.serverCache.getNode().getImmediateChild(wt),Bt);be=Ma(h,be,new kr(wt),Hi,b,M,U,ne)}}),be}class ip{constructor(l,a){this.query_=l,this.eventRegistrations_=[];const p=this.query_._queryParams,b=new Is(p.getIndex()),M=function ja(h){return h.loadsAllData()?new Is(h.getIndex()):h.hasLimit()?new da(h):new Ki(h)}(p);this.processor_=function Fc(h){return{filter:h}}(M);const U=a.serverCache,ne=a.eventCache,be=b.updateFullNode(gt.EMPTY_NODE,U.getNode(),null),Be=M.updateFullNode(gt.EMPTY_NODE,ne.getNode(),null),It=new vt(be,U.isFullyInitialized(),b.filtersNodes()),wt=new vt(Be,ne.isFullyInitialized(),M.filtersNodes());this.viewCache_=ur(wt,It),this.eventGenerator_=new Lt(this.query_)}get query(){return this.query_}}function Yu(h,l){const a=ea(h.viewCache_);return a&&(h.query._queryParams.loadsAllData()||!ar(l)&&!a.getImmediateChild(pr(l)).isEmpty())?a.getChild(l):null}function ta(h){return 0===h.eventRegistrations_.length}function Ad(h,l,a){const p=[];if(a){(0,H.hu)(null==l,"A cancel should cancel all event registrations.");const b=h.query._path;h.eventRegistrations_.forEach(M=>{const U=M.createCancelEvent(a,b);U&&p.push(U)})}if(l){let b=[];for(let M=0;M<h.eventRegistrations_.length;++M){const U=h.eventRegistrations_[M];if(U.matches(l)){if(l.hasAnyCallback()){b=b.concat(h.eventRegistrations_.slice(M+1));break}}else b.push(U)}h.eventRegistrations_=b}else h.eventRegistrations_=[];return p}function xu(h,l,a,p){l.type===Mo.MERGE&&null!==l.source.queryId&&((0,H.hu)(ea(h.viewCache_),"We should always have a full cache before handling merges"),(0,H.hu)(io(h.viewCache_),"Missing event cache, even though we have a server cache"));const b=h.viewCache_,M=function qu(h,l,a,p,b){const M=new uf;let U,ne;if(a.type===Mo.OVERWRITE){const Be=a;Be.source.fromUser?U=Sd(h,l,Be.path,Be.snap,p,b,M):((0,H.hu)(Be.source.fromServer,"Unknown source."),ne=Be.source.tagged||l.serverCache.isFiltered()&&!ar(Be.path),U=Ma(h,l,Be.path,Be.snap,p,b,ne,M))}else if(a.type===Mo.MERGE){const Be=a;Be.source.fromUser?U=function fh(h,l,a,p,b,M,U){let ne=l;return p.foreach((be,Be)=>{const It=gi(a,be);kl(l,pr(It))&&(ne=Sd(h,ne,It,Be,b,M,U))}),p.foreach((be,Be)=>{const It=gi(a,be);kl(l,pr(It))||(ne=Sd(h,ne,It,Be,b,M,U))}),ne}(h,l,Be.path,Be.children,p,b,M):((0,H.hu)(Be.source.fromServer,"Unknown source."),ne=Be.source.tagged||l.serverCache.isFiltered(),U=Lc(h,l,Be.path,Be.children,p,b,ne,M))}else if(a.type===Mo.ACK_USER_WRITE){const Be=a;U=Be.revert?function tu(h,l,a,p,b,M){let U;if(null!=eu(p,a))return l;{const ne=new Su(p,l,b),be=l.eventCache.getNode();let Be;if(ar(a)||".priority"===pr(a)){let It;if(l.serverCache.isFullyInitialized())It=ho(p,ea(l));else{const wt=l.serverCache.getNode();(0,H.hu)(wt instanceof gt,"serverChildren would be complete if leaf node"),It=Cd(p,wt)}It=It,Be=h.filter.updateFullNode(be,It,M)}else{const It=pr(a);let wt=Tu(p,It,l.serverCache);null==wt&&l.serverCache.isCompleteForChild(It)&&(wt=be.getImmediateChild(It)),Be=null!=wt?h.filter.updateChild(be,It,wt,_i(a),ne,M):l.eventCache.getNode().hasChild(It)?h.filter.updateChild(be,It,gt.EMPTY_NODE,_i(a),ne,M):be,Be.isEmpty()&&l.serverCache.isFullyInitialized()&&(U=ho(p,ea(l)),U.isLeafNode()&&(Be=h.filter.updateFullNode(Be,U,M)))}return U=l.serverCache.isFullyInitialized()||null!=eu(p,hr()),xs(l,Be,U,h.filter.filtersNodes())}}(h,l,Be.path,p,b,M):function ph(h,l,a,p,b,M,U){if(null!=eu(b,a))return l;const ne=l.serverCache.isFiltered(),be=l.serverCache;if(null!=p.value){if(ar(a)&&be.isFullyInitialized()||be.isCompleteForPath(a))return Ma(h,l,a,be.getNode().getChild(a),b,M,ne,U);if(ar(a)){let Be=new Pr(null);return be.getNode().forEachChild(Fi,(It,wt)=>{Be=Be.set(new kr(It),wt)}),Lc(h,l,a,Be,b,M,ne,U)}return l}{let Be=new Pr(null);return p.foreach((It,wt)=>{const Bt=gi(a,It);be.isCompleteForPath(Bt)&&(Be=Be.set(It,be.getNode().getChild(Bt)))}),Lc(h,l,a,Be,b,M,ne,U)}}(h,l,Be.path,Be.affectedTree,p,b,M)}else{if(a.type!==Mo.LISTEN_COMPLETE)throw(0,H.g5)("Unknown operation type: "+a.type);U=function Vc(h,l,a,p,b){const M=l.serverCache;return Au(h,ti(l,M.getNode(),M.isFullyInitialized()||ar(a),M.isFiltered()),a,p,Dd,b)}(h,l,a.path,p,M)}const be=M.getChanges();return function Td(h,l,a){const p=l.eventCache;if(p.isFullyInitialized()){const b=p.getNode().isLeafNode()||p.getNode().isEmpty(),M=io(h);(a.length>0||!h.eventCache.isFullyInitialized()||b&&!p.getNode().equals(M)||!p.getNode().getPriority().equals(M.getPriority()))&&a.push(Wr(io(l)))}}(l,U,be),{viewCache:U,changes:be}}(h.processor_,b,l,a,p);return function qa(h,l){(0,H.hu)(l.eventCache.getNode().isIndexed(h.filter.getIndex()),"Event snap not indexed"),(0,H.hu)(l.serverCache.getNode().isIndexed(h.filter.getIndex()),"Server snap not indexed")}(h.processor_,M.viewCache),(0,H.hu)(M.viewCache.serverCache.isFullyInitialized()||!b.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),h.viewCache_=M.viewCache,Ku(h,M.changes,M.viewCache.eventCache.getNode(),null)}function Ku(h,l,a,p){return function Mn(h,l,a,p){const b=[],M=[];return l.forEach(U=>{"child_changed"===U.type&&h.index_.indexedValueChanged(U.oldSnap,U.snapshotNode)&&M.push(function il(h,l){return{type:"child_moved",snapshotNode:l,childName:h}}(U.childName,U.snapshotNode))}),lr(h,b,"child_removed",l,p,a),lr(h,b,"child_added",l,p,a),lr(h,b,"child_moved",M,p,a),lr(h,b,"child_changed",l,p,a),lr(h,b,"value",l,p,a),b}(h.eventGenerator_,l,a,p?[p]:h.eventRegistrations_)}let Ra,Ri;class gh{constructor(){this.views=new Map}}function Uc(h,l,a,p){const b=l.source.queryId;if(null!==b){const M=h.views.get(b);return(0,H.hu)(null!=M,"SyncTree gave us an op for an invalid query."),xu(M,l,a,p)}{let M=[];for(const U of h.views.values())M=M.concat(xu(U,l,a,p));return M}}function mh(h,l,a,p,b){const U=h.views.get(l._queryIdentifier);if(!U){let ne=ho(a,b?p:null),be=!1;ne?be=!0:p instanceof gt?(ne=Cd(a,p),be=!1):(ne=gt.EMPTY_NODE,be=!1);const Be=ur(new vt(ne,be,!1),new vt(p,b,!1));return new ip(l,Be)}return U}function Md(h){const l=[];for(const a of h.views.values())a.query._queryParams.loadsAllData()||l.push(a);return l}function Oa(h,l){let a=null;for(const p of h.views.values())a=a||Yu(p,l);return a}function Pa(h,l){return l._queryParams.loadsAllData()?ys(h):h.views.get(l._queryIdentifier)}function ms(h,l){return null!=Pa(h,l)}function jo(h){return null!=ys(h)}function ys(h){for(const l of h.views.values())if(l.query._queryParams.loadsAllData())return l;return null}let _h=1;class na{constructor(l){this.listenProvider_=l,this.syncPointTree_=new Pr(null),this.pendingWriteTree_=function Du(){return{visibleWrites:bo.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Zu(h,l,a,p,b){return function af(h,l,a,p,b){(0,H.hu)(p>h.lastWriteId,"Stacking an older write on top of newer ones"),void 0===b&&(b=!0),h.allWrites.push({path:l,snap:a,writeId:p,visible:b}),b&&(h.visibleWrites=za(h.visibleWrites,l,a)),h.lastWriteId=p}(h.pendingWriteTree_,l,a,p,b),b?pl(h,new xe({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},l,a)):[]}function pa(h,l,a=!1){const p=function Wa(h,l){for(let a=0;a<h.allWrites.length;a++){const p=h.allWrites[a];if(p.writeId===l)return p}return null}(h.pendingWriteTree_,l);if(function lf(h,l){const a=h.allWrites.findIndex(ne=>ne.writeId===l);(0,H.hu)(a>=0,"removeWrite called with nonexistent writeId.");const p=h.allWrites[a];h.allWrites.splice(a,1);let b=p.visible,M=!1,U=h.allWrites.length-1;for(;b&&U>=0;){const ne=h.allWrites[U];ne.visible&&(U>=a&&ch(ne,p.path)?b=!1:qs(p.path,ne.path)&&(M=!0)),U--}return!!b&&(M?(function Id(h){h.visibleWrites=dh(h.allWrites,fa,hr()),h.lastWriteId=h.allWrites.length>0?h.allWrites[h.allWrites.length-1].writeId:-1}(h),!0):(p.snap?h.visibleWrites=ll(h.visibleWrites,p.path):si(p.children,be=>{h.visibleWrites=ll(h.visibleWrites,gi(p.path,be))}),!0))}(h.pendingWriteTree_,l)){let M=new Pr(null);return null!=p.snap?M=M.set(hr(),!0):si(p.children,U=>{M=M.set(new kr(U),!0)}),pl(h,new z(p.path,M,a))}return[]}function Ll(h,l,a){return pl(h,new xe({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},l,a))}function Qu(h,l,a,p){const b=l._path,M=h.syncPointTree_.get(b);let U=[];if(M&&("default"===l._queryIdentifier||ms(M,l))){const ne=function mi(h,l,a,p){const b=l._queryIdentifier,M=[];let U=[];const ne=jo(h);if("default"===b)for(const[be,Be]of h.views.entries())U=U.concat(Ad(Be,a,p)),ta(Be)&&(h.views.delete(be),Be.query._queryParams.loadsAllData()||M.push(Be.query));else{const be=h.views.get(b);be&&(U=U.concat(Ad(be,a,p)),ta(be)&&(h.views.delete(b),be.query._queryParams.loadsAllData()||M.push(be.query)))}return ne&&!jo(h)&&M.push(new(function $c(){return(0,H.hu)(Ra,"Reference.ts has not been loaded"),Ra}())(l._repo,l._path)),{removed:M,events:U}}(M,l,a,p);(function ru(h){return 0===h.views.size})(M)&&(h.syncPointTree_=h.syncPointTree_.remove(b));const be=ne.removed;U=ne.events;const Be=-1!==be.findIndex(wt=>wt._queryParams.loadsAllData()),It=h.syncPointTree_.findOnPath(b,(wt,Bt)=>jo(Bt));if(Be&&!It){const wt=h.syncPointTree_.subtree(b);if(!wt.isEmpty()){const Bt=function Rd(h){return h.fold((l,a,p)=>{if(a&&jo(a))return[ys(a)];{let b=[];return a&&(b=Md(a)),si(p,(M,U)=>{b=b.concat(U)}),b}})}(wt);for(let Cn=0;Cn<Bt.length;++Cn){const nr=Bt[Cn],Hi=nr.query,go=Ju(h,nr);h.listenProvider_.startListening(_s(Hi),wo(h,Hi),go.hashFn,go.onComplete)}}}!It&&be.length>0&&!p&&(Be?h.listenProvider_.stopListening(_s(l),null):be.forEach(wt=>{const Bt=h.queryToTagMap.get(Vl(wt));h.listenProvider_.stopListening(_s(wt),Bt)})),function Gc(h,l){for(let a=0;a<l.length;++a){const p=l[a];if(!p._queryParams.loadsAllData()){const b=Vl(p),M=h.queryToTagMap.get(b);h.queryToTagMap.delete(b),h.tagToQueryMap.delete(M)}}}(h,be)}return U}function Us(h,l,a){const p=l._path;let b=null,M=!1;h.syncPointTree_.foreachOnPath(p,(wt,Bt)=>{const Cn=qi(wt,p);b=b||Oa(Bt,Cn),M=M||jo(Bt)});let ne,U=h.syncPointTree_.get(p);U?(M=M||jo(U),b=b||Oa(U,hr())):(U=new gh,h.syncPointTree_=h.syncPointTree_.set(p,U)),null!=b?ne=!0:(ne=!1,b=gt.EMPTY_NODE,h.syncPointTree_.subtree(p).foreachChild((Bt,Cn)=>{const nr=Oa(Cn,hr());nr&&(b=b.updateImmediateChild(Bt,nr))}));const be=ms(U,l);if(!be&&!l._queryParams.loadsAllData()){const wt=Vl(l);(0,H.hu)(!h.queryToTagMap.has(wt),"View does not exist, but we have a tag");const Bt=function vh(){return _h++}();h.queryToTagMap.set(wt,Bt),h.tagToQueryMap.set(Bt,wt)}let It=function gs(h,l,a,p,b,M){const U=mh(h,l,p,b,M);return h.views.has(l._queryIdentifier)||h.views.set(l._queryIdentifier,U),function nu(h,l){h.eventRegistrations_.push(l)}(U,a),function xd(h,l){const a=h.viewCache_.eventCache,p=[];return a.getNode().isLeafNode()||a.getNode().forEachChild(T,(M,U)=>{p.push(Pl(M,U))}),a.isFullyInitialized()&&p.push(Wr(a.getNode())),Ku(h,p,a.getNode(),l)}(U,a)}(U,l,a,Rc(h.pendingWriteTree_,p),b,ne);if(!be&&!M){const wt=Pa(U,l);It=It.concat(function Ho(h,l,a){const p=l._path,b=wo(h,l),M=Ju(h,a),U=h.listenProvider_.startListening(_s(l),b,M.hashFn,M.onComplete),ne=h.syncPointTree_.subtree(p);if(b)(0,H.hu)(!jo(ne.value),"If we're adding a query, it shouldn't be shadowed");else{const be=ne.fold((Be,It,wt)=>{if(!ar(Be)&&It&&jo(It))return[ys(It).query];{let Bt=[];return It&&(Bt=Bt.concat(Md(It).map(Cn=>Cn.query))),si(wt,(Cn,nr)=>{Bt=Bt.concat(nr)}),Bt}});for(let Be=0;Be<be.length;++Be){const It=be[Be];h.listenProvider_.stopListening(_s(It),wo(h,It))}}return U}(h,l,wt))}return It}function fl(h,l,a){const b=h.pendingWriteTree_,M=h.syncPointTree_.findOnPath(l,(U,ne)=>{const Be=Oa(ne,qi(U,l));if(Be)return Be});return Jl(b,l,M,a,!0)}function pl(h,l){return fo(l,h.syncPointTree_,null,Rc(h.pendingWriteTree_,hr()))}function fo(h,l,a,p){if(ar(h.path))return gl(h,l,a,p);{const b=l.get(hr());null==a&&null!=b&&(a=Oa(b,hr()));let M=[];const U=pr(h.path),ne=h.operationForChild(U),be=l.children.get(U);if(be&&ne){const Be=a?a.getImmediateChild(U):null,It=Wu(p,U);M=M.concat(fo(ne,be,Be,It))}return b&&(M=M.concat(Uc(b,h,p,a))),M}}function gl(h,l,a,p){const b=l.get(hr());null==a&&null!=b&&(a=Oa(b,hr()));let M=[];return l.children.inorderTraversal((U,ne)=>{const be=a?a.getImmediateChild(U):null,Be=Wu(p,U),It=h.operationForChild(U);It&&(M=M.concat(gl(It,ne,be,Be)))}),b&&(M=M.concat(Uc(b,h,p,a))),M}function Ju(h,l){const a=l.query,p=wo(h,a);return{hashFn:()=>(function $s(h){return h.viewCache_.serverCache.getNode()}(l)||gt.EMPTY_NODE).hash(),onComplete:b=>{if("ok"===b)return p?function df(h,l,a){const p=ec(h,a);if(p){const b=iu(p),M=b.path,U=b.queryId,ne=qi(M,l);return su(h,M,new oe(N(U),ne))}return[]}(h,a._path,p):function Di(h,l){return pl(h,new oe({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},l))}(h,a._path);{const M=function Ts(h,l){let a="Unknown Error";"too_big"===h?a="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===h?a="Client doesn't have permission to access the desired data.":"unavailable"===h&&(a="The service is unavailable");const p=new Error(h+" at "+l._path.toString()+": "+a);return p.code=h.toUpperCase(),p}(b,a);return Qu(h,a,null,M)}}}}function wo(h,l){const a=Vl(l);return h.queryToTagMap.get(a)}function Vl(h){return h._path.toString()+"$"+h._queryIdentifier}function ec(h,l){return h.tagToQueryMap.get(l)}function iu(h){const l=h.indexOf("$");return(0,H.hu)(-1!==l&&l<h.length-1,"Bad queryKey."),{queryId:h.substr(l+1),path:new kr(h.substr(0,l))}}function su(h,l,a){const p=h.syncPointTree_.get(l);return(0,H.hu)(p,"Missing sync point for query tag that we're tracking"),Uc(p,a,Rc(h.pendingWriteTree_,l),null)}function _s(h){return h._queryParams.loadsAllData()&&!h._queryParams.isDefault()?new(function ss(){return(0,H.hu)(Ri,"Reference.ts has not been loaded"),Ri}())(h._repo,h._path):h}class ra{constructor(l){this.node_=l}getImmediateChild(l){const a=this.node_.getImmediateChild(l);return new ra(a)}node(){return this.node_}}class tc{constructor(l,a){this.syncTree_=l,this.path_=a}getImmediateChild(l){const a=gi(this.path_,l);return new tc(this.syncTree_,a)}node(){return fl(this.syncTree_,this.path_)}}const Mu=function(h,l,a){return h&&"object"==typeof h?((0,H.hu)(".sv"in h,"Unexpected leaf node or priority contents"),"string"==typeof h[".sv"]?Od(h[".sv"],l,a):"object"==typeof h[".sv"]?so(h[".sv"],l):void(0,H.hu)(!1,"Unexpected server value: "+JSON.stringify(h,null,2))):h},Od=function(h,l,a){if("timestamp"===h)return a.timestamp;(0,H.hu)(!1,"Unexpected server value: "+h)},so=function(h,l,a){h.hasOwnProperty("increment")||(0,H.hu)(!1,"Unexpected server value: "+JSON.stringify(h,null,2));const p=h.increment;"number"!=typeof p&&(0,H.hu)(!1,"Unexpected increment value: "+p);const b=l.node();if((0,H.hu)(null!=b,"Expected ChildrenNode.EMPTY_NODE for nulls"),!b.isLeafNode())return p;const U=b.getValue();return"number"!=typeof U?p:U+p},nc=function(h,l,a,p){return Pd(l,new tc(a,h),p)},rc=function(h,l,a){return Pd(h,new ra(l),a)};function Pd(h,l,a){const p=h.getPriority().val(),b=Mu(p,l.getImmediateChild(".priority"),a);let M;if(h.isLeafNode()){const U=h,ne=Mu(U.getValue(),l,a);return ne!==U.getValue()||b!==U.getPriority().val()?new ks(ne,jn(b)):h}{const U=h;return M=U,b!==U.getPriority().val()&&(M=M.updatePriority(new ks(b))),U.forEachChild(T,(ne,be)=>{const Be=Pd(be,l.getImmediateChild(ne),a);Be!==be&&(M=M.updateImmediateChild(ne,Be))}),M}}class Oo{constructor(l="",a=null,p={children:{},childCount:0}){this.name=l,this.parent=a,this.node=p}}function Ya(h,l){let a=l instanceof kr?l:new kr(l),p=h,b=pr(a);for(;null!==b;){const M=(0,H.DV)(p.node.children,b)||{children:{},childCount:0};p=new Oo(b,p,M),a=_i(a),b=pr(a)}return p}function ml(h){return h.node.value}function ic(h,l){h.node.value=l,w(h)}function Nd(h){return h.node.childCount>0}function qc(h,l){si(h.node.children,(a,p)=>{l(new Oo(a,h,p))})}function kd(h,l,a,p){a&&!p&&l(h),qc(h,b=>{kd(b,l,!0,p)}),a&&p&&l(h)}function sc(h){return new kr(null===h.parent?h.name:sc(h.parent)+"/"+h.name)}function w(h){null!==h.parent&&function g(h,l,a){const p=function Wc(h){return void 0===ml(h)&&!Nd(h)}(a),b=(0,H.r3)(h.node.children,l);p&&b?(delete h.node.children[l],h.node.childCount--,w(h)):!p&&!b&&(h.node.children[l]=a.node,h.node.childCount++,w(h))}(h.parent,h.name,h)}const y=/[\[\].#$\/\u0000-\u001F\u007F]/,A=/[\[\].#$\u0000-\u001F\u007F]/,q=10485760,fe=function(h){return"string"==typeof h&&0!==h.length&&!y.test(h)},et=function(h){return"string"==typeof h&&0!==h.length&&!A.test(h)},sn=function(h){return null===h||"string"==typeof h||"number"==typeof h&&!hs(h)||h&&"object"==typeof h&&(0,H.r3)(h,".sv")},un=function(h,l,a,p){p&&void 0===l||Zn((0,H.gK)(h,"value"),l,a)},Zn=function(h,l,a){const p=a instanceof kr?new xl(a,h):a;if(void 0===l)throw new Error(h+"contains undefined "+Ao(p));if("function"==typeof l)throw new Error(h+"contains a function "+Ao(p)+" with contents = "+l.toString());if(hs(l))throw new Error(h+"contains "+l.toString()+" "+Ao(p));if("string"==typeof l&&l.length>q/3&&(0,H.ug)(l)>q)throw new Error(h+"contains a string greater than "+q+" utf8 bytes "+Ao(p)+" ('"+l.substring(0,50)+"...')");if(l&&"object"==typeof l){let b=!1,M=!1;if(si(l,(U,ne)=>{if(".value"===U)b=!0;else if(".priority"!==U&&".sv"!==U&&(M=!0,!fe(U)))throw new Error(h+" contains an invalid key ("+U+") "+Ao(p)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function So(h,l){h.parts_.length>0&&(h.byteLength_+=1),h.parts_.push(l),h.byteLength_+=(0,H.ug)(l),Vo(h)})(p,U),Zn(h,ne,p),function Jo(h){const l=h.parts_.pop();h.byteLength_-=(0,H.ug)(l),h.parts_.length>0&&(h.byteLength_-=1)}(p)}),b&&M)throw new Error(h+' contains ".value" child '+Ao(p)+" in addition to actual children.")}},os=function(h,l,a,p){if(p&&void 0===l)return;const b=(0,H.gK)(h,"values");if(!l||"object"!=typeof l||Array.isArray(l))throw new Error(b+" must be an object containing the children to replace.");const M=[];si(l,(U,ne)=>{const be=new kr(U);if(Zn(b,ne,gi(a,be)),".priority"===Al(be)&&!sn(ne))throw new Error(b+"contains an invalid value for '"+be.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");M.push(be)}),function(h,l){let a,p;for(a=0;a<l.length;a++){p=l[a];const M=Xo(p);for(let U=0;U<M.length;U++)if((".priority"!==M[U]||U!==M.length-1)&&!fe(M[U]))throw new Error(h+"contains an invalid key ("+M[U]+") in path "+p.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}l.sort(la);let b=null;for(a=0;a<l.length;a++){if(p=l[a],null!==b&&qs(b,p))throw new Error(h+"contains a path "+b.toString()+" that is ancestor of another path "+p.toString());b=p}}(b,M)},Go=function(h,l,a){if(!a||void 0!==l){if(hs(l))throw new Error((0,H.gK)(h,"priority")+"is "+l.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!sn(l))throw new Error((0,H.gK)(h,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},yl=function(h,l,a,p){if(!(p&&void 0===a||fe(a)))throw new Error((0,H.gK)(h,l)+'was an invalid key = "'+a+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Bl=function(h,l,a,p){if(!(p&&void 0===a||et(a)))throw new Error((0,H.gK)(h,l)+'was an invalid path = "'+a+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},zo=function(h,l){if(".info"===pr(l))throw new Error(h+" failed = Can't modify data under /.info/")},Eh=function(h,l){const a=l.path.toString();if("string"!=typeof l.repoInfo.host||0===l.repoInfo.host.length||!fe(l.repoInfo.namespace)&&"localhost"!==l.repoInfo.host.split(":")[0]||0!==a.length&&!function(h){return h&&(h=h.replace(/^\/*\.info(\/|$)/,"/")),et(h)}(a))throw new Error((0,H.gK)(h,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class $l{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function ou(h,l){let a=null;for(let p=0;p<l.length;p++){const b=l[p],M=b.getPath();null!==a&&!Yi(M,a.path)&&(h.eventLists_.push(a),a=null),null===a&&(a={events:[],path:M}),a.events.push(b)}a&&h.eventLists_.push(a)}function ac(h,l,a){ou(h,a),lc(h,p=>Yi(p,l))}function Wo(h,l,a){ou(h,a),lc(h,p=>qs(p,l)||qs(l,p))}function lc(h,l){h.recursionDepth_++;let a=!0;for(let p=0;p<h.eventLists_.length;p++){const b=h.eventLists_[p];b&&(l(b.path)?(ff(h.eventLists_[p]),h.eventLists_[p]=null):a=!1)}a&&(h.eventLists_=[]),h.recursionDepth_--}function ff(h){for(let l=0;l<h.events.length;l++){const a=h.events[l];if(null!==a){h.events[l]=null;const p=a.getEventRunner();lt&&rn("event: "+a.toString()),Qr(p)}}}const Yc="repo_interrupt";class gg{constructor(l,a,p,b){this.repoInfo_=l,this.forceRestClient_=a,this.authTokenProvider_=p,this.appCheckProvider_=b,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new $l,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Bs(),this.transactionQueueTree_=new Oo,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function op(h){const a=h.infoData_.getNode(new kr(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+a}function uc(h){return function(h){return(h=h||{}).timestamp=h.timestamp||(new Date).getTime(),h}({timestamp:op(h)})}function bh(h,l,a,p,b){h.dataUpdateCount++;const M=new kr(l);a=h.interceptServerDataCallback_?h.interceptServerDataCallback_(l,a):a;let U=[];if(b)if(p){const be=(0,H.UI)(a,Be=>jn(Be));U=function hl(h,l,a,p){const b=ec(h,p);if(b){const M=iu(b),U=M.path,ne=M.queryId,be=qi(U,l),Be=Pr.fromObject(a);return su(h,U,new it(N(ne),be,Be))}return[]}(h.serverSyncTree_,M,be,b)}else{const be=jn(a);U=function Hc(h,l,a,p){const b=ec(h,p);if(null!=b){const M=iu(b),U=M.path,ne=M.queryId,be=qi(U,l);return su(h,U,new xe(N(ne),be,a))}return[]}(h.serverSyncTree_,M,be,b)}else if(p){const be=(0,H.UI)(a,Be=>jn(Be));U=function cf(h,l,a){const p=Pr.fromObject(a);return pl(h,new it({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},l,p))}(h.serverSyncTree_,M,be)}else{const be=jn(a);U=Ll(h.serverSyncTree_,M,be)}let ne=M;U.length>0&&(ne=ga(h,M)),Wo(h.eventQueue_,ne,U)}function wh(h,l){Pt(h,"connected",l),!1===l&&function Ru(h){au(h,"onDisconnectEvents");const l=uc(h),a=Bs();co(h.onDisconnect_,hr(),(b,M)=>{const U=nc(b,M,h.serverSyncTree_,l);Ci(a,b,U)});let p=[];co(a,hr(),(b,M)=>{p=p.concat(Ll(h.serverSyncTree_,b,M));const U=Zc(h,b);ga(h,U)}),h.onDisconnect_=Bs(),Wo(h.eventQueue_,hr(),p)}(h)}function Pt(h,l,a){const p=new kr("/.info/"+l),b=jn(a);h.infoData_.updateSnapshot(p,b);const M=Ll(h.infoSyncTree_,p,b);Wo(h.eventQueue_,p,M)}function cc(h){return h.nextWriteId_++}function Ch(h,l,a,p,b){au(h,"set",{path:l.toString(),value:a,priority:p});const M=uc(h),U=jn(a,p),ne=fl(h.serverSyncTree_,l),be=rc(U,ne,M),Be=cc(h),It=Zu(h.serverSyncTree_,l,be,Be,!0);ou(h.eventQueue_,It),h.server_.put(l.toString(),U.val(!0),(Bt,Cn)=>{const nr="ok"===Bt;nr||Zr("set at "+l+" failed: "+Bt);const Hi=pa(h.serverSyncTree_,Be,!nr);Wo(h.eventQueue_,l,Hi),Io(0,b,Bt,Cn)});const wt=Zc(h,l);ga(h,wt),Wo(h.eventQueue_,wt,[])}function ap(h,l,a){h.server_.onDisconnectCancel(l.toString(),(p,b)=>{"ok"===p&&Da(h.onDisconnect_,l),Io(0,a,p,b)})}function Ou(h,l,a,p){const b=jn(a);h.server_.onDisconnectPut(l.toString(),b.val(!0),(M,U)=>{"ok"===M&&Ci(h.onDisconnect_,l,b),Io(0,p,M,U)})}function Ks(h,l,a){let p;p=".info"===pr(l._path)?Qu(h.infoSyncTree_,l,a):Qu(h.serverSyncTree_,l,a),ac(h.eventQueue_,l._path,p)}function Ld(h){h.persistentConnection_&&h.persistentConnection_.interrupt(Yc)}function au(h,...l){let a="";h.persistentConnection_&&(a=h.persistentConnection_.id+":"),rn(a,...l)}function Io(h,l,a,p){l&&Qr(()=>{if("ok"===a)l(null);else{const b=(a||"error").toUpperCase();let M=b;p&&(M+=": "+p);const U=new Error(M);U.code=b,l(U)}})}function Dh(h,l,a){return fl(h.serverSyncTree_,l,a)||gt.EMPTY_NODE}function dc(h,l=h.transactionQueueTree_){if(l||Kc(h,l),ml(l)){const a=fc(h,l);(0,H.hu)(a.length>0,"Sending zero length transaction queue"),a.every(b=>0===b.status)&&function $d(h,l,a){const p=a.map(Be=>Be.currentWriteId),b=Dh(h,l,p);let M=b;const U=b.hash();for(let Be=0;Be<a.length;Be++){const It=a[Be];(0,H.hu)(0===It.status,"tryToSendTransactionQueue_: items in queue should all be run."),It.status=1,It.retryCount++;const wt=qi(l,It.path);M=M.updateChild(wt,It.currentOutputSnapshotRaw)}const ne=M.val(!0),be=l;h.server_.put(be.toString(),ne,Be=>{au(h,"transaction put response",{path:be.toString(),status:Be});let It=[];if("ok"===Be){const wt=[];for(let Bt=0;Bt<a.length;Bt++)a[Bt].status=2,It=It.concat(pa(h.serverSyncTree_,a[Bt].currentWriteId)),a[Bt].onComplete&&wt.push(()=>a[Bt].onComplete(null,!0,a[Bt].currentOutputSnapshotResolved)),a[Bt].unwatcher();Kc(h,Ya(h.transactionQueueTree_,l)),dc(h,h.transactionQueueTree_),Wo(h.eventQueue_,l,It);for(let Bt=0;Bt<wt.length;Bt++)Qr(wt[Bt])}else{if("datastale"===Be)for(let wt=0;wt<a.length;wt++)a[wt].status=3===a[wt].status?4:0;else{Zr("transaction at "+be.toString()+" failed: "+Be);for(let wt=0;wt<a.length;wt++)a[wt].status=4,a[wt].abortReason=Be}ga(h,l)}},U)}(h,sc(l),a)}else Nd(l)&&qc(l,a=>{dc(h,a)})}function ga(h,l){const a=hc(h,l),p=sc(a);return function vl(h,l,a){if(0===l.length)return;const p=[];let b=[];const U=l.filter(ne=>0===ne.status).map(ne=>ne.currentWriteId);for(let ne=0;ne<l.length;ne++){const be=l[ne],Be=qi(a,be.path);let wt,It=!1;if((0,H.hu)(null!==Be,"rerunTransactionsUnderNode_: relativePath should not be null."),4===be.status)It=!0,wt=be.abortReason,b=b.concat(pa(h.serverSyncTree_,be.currentWriteId,!0));else if(0===be.status)if(be.retryCount>=25)It=!0,wt="maxretry",b=b.concat(pa(h.serverSyncTree_,be.currentWriteId,!0));else{const Bt=Dh(h,be.path,U);be.currentInputSnapshot=Bt;const Cn=l[ne].update(Bt.val());if(void 0!==Cn){Zn("transaction failed: Data returned ",Cn,be.path);let nr=jn(Cn);"object"==typeof Cn&&null!=Cn&&(0,H.r3)(Cn,".priority")||(nr=nr.updatePriority(Bt.getPriority()));const go=be.currentWriteId,cu=uc(h),wl=rc(nr,Bt,cu);be.currentOutputSnapshotRaw=nr,be.currentOutputSnapshotResolved=wl,be.currentWriteId=cc(h),U.splice(U.indexOf(go),1),b=b.concat(Zu(h.serverSyncTree_,be.path,wl,be.currentWriteId,be.applyLocally)),b=b.concat(pa(h.serverSyncTree_,go,!0))}else It=!0,wt="nodata",b=b.concat(pa(h.serverSyncTree_,be.currentWriteId,!0))}Wo(h.eventQueue_,a,b),b=[],It&&(l[ne].status=2,setTimeout(l[ne].unwatcher,Math.floor(0)),l[ne].onComplete&&p.push("nodata"===wt?()=>l[ne].onComplete(null,!1,l[ne].currentInputSnapshot):()=>l[ne].onComplete(new Error(wt),!1,null)))}Kc(h,h.transactionQueueTree_);for(let ne=0;ne<p.length;ne++)Qr(p[ne]);dc(h,h.transactionQueueTree_)}(h,fc(h,a),p),p}function hc(h,l){let a,p=h.transactionQueueTree_;for(a=pr(l);null!==a&&void 0===ml(p);)p=Ya(p,a),a=pr(l=_i(l));return p}function fc(h,l){const a=[];return yf(h,l,a),a.sort((p,b)=>p.order-b.order),a}function yf(h,l,a){const p=ml(l);if(p)for(let b=0;b<p.length;b++)a.push(p[b]);qc(l,b=>{yf(h,b,a)})}function Kc(h,l){const a=ml(l);if(a){let p=0;for(let b=0;b<a.length;b++)2!==a[b].status&&(a[p]=a[b],p++);a.length=p,ic(l,a.length>0?a:void 0)}qc(l,p=>{Kc(h,p)})}function Zc(h,l){const a=sc(hc(h,l)),p=Ya(h.transactionQueueTree_,l);return function hf(h,l,a){let p=a?h:h.parent;for(;null!==p;){if(l(p))return!0;p=p.parent}}(p,b=>{Qc(h,b)}),Qc(h,p),kd(p,b=>{Qc(h,b)}),a}function Qc(h,l){const a=ml(l);if(a){const p=[];let b=[],M=-1;for(let U=0;U<a.length;U++)3===a[U].status||(1===a[U].status?((0,H.hu)(M===U-1,"All SENT items should be at beginning of queue."),M=U,a[U].status=3,a[U].abortReason="set"):((0,H.hu)(0===a[U].status,"Unexpected transaction status in abort"),a[U].unwatcher(),b=b.concat(pa(h.serverSyncTree_,a[U].currentWriteId,!0)),a[U].onComplete&&p.push(a[U].onComplete.bind(null,new Error("set"),!1,null))));-1===M?ic(l,void 0):a.length=M+1,Wo(h.eventQueue_,sc(l),b);for(let U=0;U<p.length;U++)Qr(p[U])}}const Ud=function(h,l){const a=_f(h),p=a.namespace;return"firebase.com"===a.domain&&Xn(a.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!p||"undefined"===p)&&"localhost"!==a.domain&&Xn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),a.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Zr("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Yt(a.host,a.secure,p,l,"ws"===a.scheme||"wss"===a.scheme,"",p!==a.subdomain),path:new kr(a.pathString)}},_f=function(h){let l="",a="",p="",b="",M="",U=!0,ne="https",be=443;if("string"==typeof h){let Be=h.indexOf("//");Be>=0&&(ne=h.substring(0,Be-1),h=h.substring(Be+2));let It=h.indexOf("/");-1===It&&(It=h.length);let wt=h.indexOf("?");-1===wt&&(wt=h.length),l=h.substring(0,Math.min(It,wt)),It<wt&&(b=function lp(h){let l="";const a=h.split("/");for(let p=0;p<a.length;p++)if(a[p].length>0){let b=a[p];try{b=decodeURIComponent(b.replace(/\+/g," "))}catch(M){}l+="/"+b}return l}(h.substring(It,wt)));const Bt=function mg(h){const l={};"?"===h.charAt(0)&&(h=h.substring(1));for(const a of h.split("&")){if(0===a.length)continue;const p=a.split("=");2===p.length?l[decodeURIComponent(p[0])]=decodeURIComponent(p[1]):Zr(`Invalid query segment '${a}' in query '${h}'`)}return l}(h.substring(Math.min(h.length,wt)));Be=l.indexOf(":"),Be>=0?(U="https"===ne||"wss"===ne,be=parseInt(l.substring(Be+1),10)):Be=l.length;const Cn=l.slice(0,Be);if("localhost"===Cn.toLowerCase())a="localhost";else if(Cn.split(".").length<=2)a=Cn;else{const nr=l.indexOf(".");p=l.substring(0,nr).toLowerCase(),a=l.substring(nr+1),M=p}"ns"in Bt&&(M=Bt.ns)}return{host:l,port:be,domain:a,subdomain:p,secure:U,scheme:ne,pathString:b,namespace:M}};class pc{constructor(l,a,p,b){this.eventType=l,this.eventRegistration=a,this.snapshot=p,this.prevName=b}getPath(){const l=this.snapshot.ref;return"value"===this.eventType?l._path:l.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,H.Pz)(this.snapshot.exportVal())}}class gc{constructor(l,a,p){this.eventRegistration=l,this.error=a,this.path=p}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class up{constructor(l,a){this.snapshotCallback=l,this.cancelCallback=a}onValue(l,a){this.snapshotCallback.call(null,l,a)}onCancel(l){return(0,H.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,l)}get hasCancelCallback(){return!!this.cancelCallback}matches(l){return this.snapshotCallback===l.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===l.snapshotCallback.userCallback&&this.snapshotCallback.context===l.snapshotCallback.context}}class Na{constructor(l,a){this._repo=l,this._path=a}cancel(){const l=new H.BH;return ap(this._repo,this._path,l.wrapCallback(()=>{})),l.promise}remove(){zo("OnDisconnect.remove",this._path);const l=new H.BH;return Ou(this._repo,this._path,null,l.wrapCallback(()=>{})),l.promise}set(l){zo("OnDisconnect.set",this._path),un("OnDisconnect.set",l,this._path,!1);const a=new H.BH;return Ou(this._repo,this._path,l,a.wrapCallback(()=>{})),a.promise}setWithPriority(l,a){zo("OnDisconnect.setWithPriority",this._path),un("OnDisconnect.setWithPriority",l,this._path,!1),Go("OnDisconnect.setWithPriority",a,!1);const p=new H.BH;return function Fd(h,l,a,p,b){const M=jn(a,p);h.server_.onDisconnectPut(l.toString(),M.val(!0),(U,ne)=>{"ok"===U&&Ci(h.onDisconnect_,l,M),Io(0,b,U,ne)})}(this._repo,this._path,l,a,p.wrapCallback(()=>{})),p.promise}update(l){zo("OnDisconnect.update",this._path),os("OnDisconnect.update",l,this._path,!1);const a=new H.BH;return function gf(h,l,a,p){if((0,H.xb)(a))return rn("onDisconnect().update() called with empty data.  Don't do anything."),void Io(0,p,"ok",void 0);h.server_.onDisconnectMerge(l.toString(),a,(b,M)=>{"ok"===b&&si(a,(U,ne)=>{const be=jn(ne);Ci(h.onDisconnect_,gi(l,U),be)}),Io(0,p,b,M)})}(this._repo,this._path,l,a.wrapCallback(()=>{})),a.promise}}class ma{constructor(l,a,p,b){this._repo=l,this._path=a,this._queryParams=p,this._orderByCalled=b}get key(){return ar(this._path)?null:Al(this._path)}get ref(){return new po(this._repo,this._path)}get _queryIdentifier(){const l=dn(this._queryParams),a=us(l);return"{}"===a?"default":a}get _queryObject(){return dn(this._queryParams)}isEqual(l){if(!((l=(0,H.m9)(l))instanceof ma))return!1;const a=this._repo===l._repo,p=Yi(this._path,l._path);return a&&p&&this._queryIdentifier===l._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function _u(h){let l="";for(let a=h.pieceNum_;a<h.pieces_.length;a++)""!==h.pieces_[a]&&(l+="/"+encodeURIComponent(String(h.pieces_[a])));return l||"/"}(this._path)}}function jd(h,l){if(!0===h._orderByCalled)throw new Error(l+": You can't combine multiple orderBy calls.")}function Pu(h){let l=null,a=null;if(h.hasStart()&&(l=h.getIndexStartValue()),h.hasEnd()&&(a=h.getIndexEndValue()),h.getIndex()===Fi){const p="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",b="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(h.hasStart()){if(h.getIndexStartName()!==ki)throw new Error(p);if("string"!=typeof l)throw new Error(b)}if(h.hasEnd()){if(h.getIndexEndName()!==zi)throw new Error(p);if("string"!=typeof a)throw new Error(b)}}else if(h.getIndex()===T){if(null!=l&&!sn(l)||null!=a&&!sn(a))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,H.hu)(h.getIndex()instanceof Cr||h.getIndex()===Fs,"unknown index type."),null!=l&&"object"==typeof l||null!=a&&"object"==typeof a)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function mc(h){if(h.hasStart()&&h.hasEnd()&&h.hasLimit()&&!h.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class po extends ma{constructor(l,a){super(l,a,new vi,!1)}get parent(){const l=Yl(this._path);return null===l?null:new po(this._repo,l)}get root(){let l=this;for(;null!==l.parent;)l=l.parent;return l}}class ka{constructor(l,a,p){this._node=l,this.ref=a,this._index=p}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(l){const a=new kr(l),p=yc(this.ref,l);return new ka(this._node.getChild(a),p,T)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(l){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(p,b)=>l(new ka(b,yc(this.ref,p),T)))}hasChild(l){const a=new kr(l);return!this._node.getChild(a).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Th(h,l){return(h=(0,H.m9)(h))._checkNotDeleted("ref"),void 0!==l?yc(h._root,l):h._root}function cp(h,l){(h=(0,H.m9)(h))._checkNotDeleted("refFromURL");const a=Ud(l,h._repo.repoInfo_.nodeAdmin);Eh("refFromURL",a);const p=a.repoInfo;return!h._repo.repoInfo_.isCustomHost()&&p.host!==h._repo.repoInfo_.host&&Xn("refFromURL: Host name does not match the current database: (found "+p.host+" but expected "+h._repo.repoInfo_.host+")"),Th(h,a.path.toString())}function yc(h,l){return null===pr((h=(0,H.m9)(h))._path)?(a=l,a&&(a=a.replace(/^\/*\.info(\/|$)/,"/")),Bl("child","path",a,!1)):Bl("child","path",l,!1),new po(h._repo,gi(h._path,l));var a}function Hd(h,l){h=(0,H.m9)(h),zo("set",h._path),un("set",l,h._path,!1);const a=new H.BH;return Ch(h._repo,h._path,l,null,a.wrapCallback(()=>{})),a.promise}function ya(h,l){os("update",l,h._path,!1);const a=new H.BH;return function _l(h,l,a,p){au(h,"update",{path:l.toString(),value:a});let b=!0;const M=uc(h),U={};if(si(a,(ne,be)=>{b=!1,U[ne]=nc(gi(l,ne),jn(be),h.serverSyncTree_,M)}),b)rn("update() called with empty data.  Don't do anything."),Io(0,p,"ok",void 0);else{const ne=cc(h),be=function jc(h,l,a,p){!function Ro(h,l,a,p){(0,H.hu)(p>h.lastWriteId,"Stacking an older merge on top of newer ones"),h.allWrites.push({path:l,children:a,writeId:p,visible:!0}),h.visibleWrites=Aa(h.visibleWrites,l,a),h.lastWriteId=p}(h.pendingWriteTree_,l,a,p);const b=Pr.fromObject(a);return pl(h,new it({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},l,b))}(h.serverSyncTree_,l,U,ne);ou(h.eventQueue_,be),h.server_.merge(l.toString(),a,(Be,It)=>{const wt="ok"===Be;wt||Zr("update at "+l+" failed: "+Be);const Bt=pa(h.serverSyncTree_,ne,!wt),Cn=Bt.length>0?ga(h,l):l;Wo(h.eventQueue_,Cn,Bt),Io(0,p,Be,It)}),si(a,Be=>{const It=Zc(h,gi(l,Be));ga(h,It)}),Wo(h.eventQueue_,l,[])}}(h._repo,h._path,l,a.wrapCallback(()=>{})),a.promise}function vf(h){return function Ka(h,l){const a=function Xu(h,l){const a=l._path;let p=null;h.syncPointTree_.foreachOnPath(a,(Be,It)=>{const wt=qi(Be,a);p=p||Oa(It,wt)});let b=h.syncPointTree_.get(a);b?p=p||Oa(b,hr()):(b=new gh,h.syncPointTree_=h.syncPointTree_.set(a,b));const M=null!=p,U=M?new vt(p,!0,!1):null;return function dl(h){return io(h.viewCache_)}(mh(b,l,Rc(h.pendingWriteTree_,l._path),M?U.getNode():gt.EMPTY_NODE,M))}(h.serverSyncTree_,l);return null!=a?Promise.resolve(a):h.server_.get(l).then(p=>{const b=jn(p).withIndex(l._queryParams.getIndex()),M=Ll(h.serverSyncTree_,l._path,b);return ac(h.eventQueue_,l._path,M),Promise.resolve(b)},p=>(au(h,"get for query "+(0,H.Pz)(l)+" failed: "+p),Promise.reject(new Error(p))))}((h=(0,H.m9)(h))._repo,h).then(l=>new ka(l,new po(h._repo,h._path),h._queryParams.getIndex()))}class Po{constructor(l){this.callbackContext=l}respondsTo(l){return"value"===l}createEvent(l,a){const p=a._queryParams.getIndex();return new pc("value",this,new ka(l.snapshotNode,new po(a._repo,a._path),p))}getEventRunner(l){return"cancel"===l.getEventType()?()=>this.callbackContext.onCancel(l.error):()=>this.callbackContext.onValue(l.snapshot,null)}createCancelEvent(l,a){return this.callbackContext.hasCancelCallback?new gc(this,l,a):null}matches(l){return l instanceof Po&&(!l.callbackContext||!this.callbackContext||l.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class vc{constructor(l,a){this.eventType=l,this.callbackContext=a}respondsTo(l){let a="children_added"===l?"child_added":l;return a="children_removed"===a?"child_removed":a,this.eventType===a}createCancelEvent(l,a){return this.callbackContext.hasCancelCallback?new gc(this,l,a):null}createEvent(l,a){(0,H.hu)(null!=l.childName,"Child events should have a childName.");const p=yc(new po(a._repo,a._path),l.childName),b=a._queryParams.getIndex();return new pc(l.type,this,new ka(l.snapshotNode,p,b),l.prevName)}getEventRunner(l){return"cancel"===l.getEventType()?()=>this.callbackContext.onCancel(l.error):()=>this.callbackContext.onValue(l.snapshot,l.prevName)}matches(l){return l instanceof vc&&this.eventType===l.eventType&&(!this.callbackContext||!l.callbackContext||this.callbackContext.matches(l.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function qo(h,l,a,p,b){let M;if("object"==typeof p&&(M=void 0,b=p),"function"==typeof p&&(M=p),b&&b.onlyOnce){const be=a,Be=(It,wt)=>{Ks(h._repo,h,ne),be(It,wt)};Be.userCallback=a.userCallback,Be.context=a.context,a=Be}const U=new up(a,M||void 0),ne="value"===l?new Po(U):new vc(l,U);return function mf(h,l,a){let p;p=".info"===pr(l._path)?Us(h.infoSyncTree_,l,a):Us(h.serverSyncTree_,l,a),ac(h.eventQueue_,l._path,p)}(h._repo,h,ne),()=>Ks(h._repo,h,ne)}function Ec(h,l,a,p){return qo(h,"value",l,a,p)}function Sh(h,l,a,p){return qo(h,"child_added",l,a,p)}function El(h,l,a,p){return qo(h,"child_changed",l,a,p)}function Jc(h,l,a,p){return qo(h,"child_moved",l,a,p)}function Ah(h,l,a,p){return qo(h,"child_removed",l,a,p)}function bc(h,l,a){let p=null;const b=a?new up(a):null;"value"===l?p=new Po(b):l&&(p=new vc(l,b)),Ks(h._repo,h,p)}class _a{}class Ul extends _a{constructor(l,a){super(),this._value=l,this._key=a}_apply(l){un("endAt",this._value,l._path,!0);const a=Vs(l._queryParams,this._value,this._key);if(mc(a),Pu(a),l._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ma(l._repo,l._path,a,l._orderByCalled)}}class jl extends _a{constructor(l,a){super(),this._value=l,this._key=a}_apply(l){un("endBefore",this._value,l._path,!1);const a=function Ys(h,l,a){let p,b;return h.index_===Fi?("string"==typeof l&&(l=Zl(l)),b=Vs(h,l,a)):(p=null==a?ki:Zl(a),b=Vs(h,l,p)),b.endBeforeSet_=!0,b}(l._queryParams,this._value,this._key);if(mc(a),Pu(a),l._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ma(l._repo,l._path,a,l._orderByCalled)}}class Ef extends _a{constructor(l,a){super(),this._value=l,this._key=a}_apply(l){un("startAt",this._value,l._path,!0);const a=Cs(l._queryParams,this._value,this._key);if(mc(a),Pu(a),l._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new ma(l._repo,l._path,a,l._orderByCalled)}}class yg extends _a{constructor(l,a){super(),this._value=l,this._key=a}_apply(l){un("startAfter",this._value,l._path,!1);const a=function Eu(h,l,a){let p;if(h.index_===Fi)"string"==typeof l&&(l=vd(l)),p=Cs(h,l,a);else{let b;b=null==a?zi:vd(a),p=Cs(h,l,b)}return p.startAfterSet_=!0,p}(l._queryParams,this._value,this._key);if(mc(a),Pu(a),l._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new ma(l._repo,l._path,a,l._orderByCalled)}}class vg extends _a{constructor(l){super(),this._limit=l}_apply(l){if(l._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new ma(l._repo,l._path,function sl(h,l){const a=h.copy();return a.limitSet_=!0,a.limit_=l,a.viewFrom_="l",a}(l._queryParams,this._limit),l._orderByCalled)}}class bf extends _a{constructor(l){super(),this._limit=l}_apply(l){if(l._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new ma(l._repo,l._path,function Ls(h,l){const a=h.copy();return a.limitSet_=!0,a.limit_=l,a.viewFrom_="r",a}(l._queryParams,this._limit),l._orderByCalled)}}class jm extends _a{constructor(l){super(),this._path=l}_apply(l){jd(l,"orderByChild");const a=new kr(this._path);if(ar(a))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const p=new Cr(a),b=vo(l._queryParams,p);return Pu(b),new ma(l._repo,l._path,b,!0)}}class wf extends _a{_apply(l){jd(l,"orderByKey");const a=vo(l._queryParams,Fi);return Pu(a),new ma(l._repo,l._path,a,!0)}}class Ic extends _a{_apply(l){jd(l,"orderByPriority");const a=vo(l._queryParams,T);return Pu(a),new ma(l._repo,l._path,a,!0)}}class bg extends _a{_apply(l){jd(l,"orderByValue");const a=vo(l._queryParams,Fs);return Pu(a),new ma(l._repo,l._path,a,!0)}}class wg extends _a{constructor(l,a){super(),this._value=l,this._key=a}_apply(l){if(un("equalTo",this._value,l._path,!1),l._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(l._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Ul(this._value,this._key)._apply(new Ef(this._value,this._key)._apply(l))}}function Za(h,...l){let a=(0,H.m9)(h);for(const p of l)a=p._apply(a);return a}(function Bc(h){(0,H.hu)(!Ra,"__referenceConstructor has already been defined"),Ra=h})(po),function yh(h){(0,H.hu)(!Ri,"__referenceConstructor has already been defined"),Ri=h}(po);const Gd={};function bl(h,l,a,p,b){let M=p||h.options.databaseURL;void 0===M&&(h.options.projectId||Xn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),rn("Using default host for project ",h.options.projectId),M=`${h.options.projectId}-default-rtdb.firebaseio.com`);let be,Be,U=Ud(M,b),ne=U.repoInfo;"undefined"!=typeof process&&(Be=process.env.FIREBASE_DATABASE_EMULATOR_HOST),Be?(be=!0,M=`http://${Be}?ns=${ne.namespace}`,U=Ud(M,b),ne=U.repoInfo):be=!U.repoInfo.secure;const It=b&&be?new Ss(Ss.OWNER):new zs(h.name,h.options,l);Eh("Invalid Firebase Database URL",U),ar(U.path)||Xn("Database URL must point to the root of a Firebase Database (not including a child path).");const wt=function Ig(h,l,a,p){let b=Gd[l.name];b||(b={},Gd[l.name]=b);let M=b[h.toURLString()];return M&&Xn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),M=new gg(h,false,a,p),b[h.toURLString()]=M,M}(ne,h,It,new cs(h.name,a));return new Oh(wt,h)}class Oh{constructor(l,a){this._repoInternal=l,this.app=a,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function sp(h,l,a){if(h.stats_=Xr(h.repoInfo_),h.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)h.server_=new wu(h.repoInfo_,(p,b,M,U)=>{bh(h,p,b,M,U)},h.authTokenProvider_,h.appCheckProvider_),setTimeout(()=>wh(h,!0),0);else{if(null!=a){if("object"!=typeof a)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,H.Pz)(a)}catch(p){throw new Error("Invalid authOverride provided: "+p)}}h.persistentConnection_=new _o(h.repoInfo_,l,(p,b,M,U)=>{bh(h,p,b,M,U)},p=>{wh(h,p)},p=>{!function Ih(h,l){si(l,(a,p)=>{Pt(h,a,p)})}(h,p)},h.authTokenProvider_,h.appCheckProvider_,a),h.server_=h.persistentConnection_}h.authTokenProvider_.addTokenChangeListener(p=>{h.server_.refreshAuthToken(p)}),h.appCheckProvider_.addTokenChangeListener(p=>{h.server_.refreshAppCheckToken(p.token)}),h.statsReporter_=function ui(h,l){const a=h.toString();return fi[a]||(fi[a]=l()),fi[a]}(h.repoInfo_,()=>new Ha(h.stats_,h.server_)),h.infoData_=new Ed,h.infoSyncTree_=new na({startListening:(p,b,M,U)=>{let ne=[];const be=h.infoData_.getNode(p._path);return be.isEmpty()||(ne=Ll(h.infoSyncTree_,p._path,be),setTimeout(()=>{U("ok")},0)),ne},stopListening:()=>{}}),Pt(h,"connected",!1),h.serverSyncTree_=new na({startListening:(p,b,M,U)=>(h.server_.listen(p,M,b,(ne,be)=>{const Be=U(ne,be);Wo(h.eventQueue_,p._path,Be)}),[]),stopListening:(p,b)=>{h.server_.unlisten(p,b)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new po(this._repo,hr())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function Rh(h,l){const a=Gd[l];(!a||a[h.key]!==h)&&Xn(`Database ${l}(${h.repoInfo_}) has already been deleted.`),Ld(h),delete a[h.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(l){null===this._rootInternal&&Xn("Cannot call "+l+" on a deleted database.")}}function Sf(h,l){zt(h,l)}const ku={".sv":"timestamp"};class Nh{constructor(l,a){this.committed=l,this.snapshot=a}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}_o.prototype.simpleListen=function(h,l){this.sendRequest("q",{p:h},l)},_o.prototype.echo=function(h,l){this.sendRequest("echo",{d:h},l)},function Cg(h){Nt(le.SDK_VERSION),(0,le._registerComponent)(new Q.wA("database",(l,{instanceIdentifier:a})=>bl(l.getProvider("app").getImmediate(),l.getProvider("auth-internal"),l.getProvider("app-check-internal"),a),"PUBLIC").setMultipleInstances(!0)),(0,le.registerVersion)(tt,"0.12.7",h),(0,le.registerVersion)(tt,"0.12.7","esm2017")}();const Wd=new He.Yd("@firebase/database-compat"),uu=function(h){Wd.warn("FIREBASE WARNING: "+h)};class kh{constructor(l){this._delegate=l}cancel(l){(0,H.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,H.Wj)("OnDisconnect.cancel","onComplete",l,!0);const a=this._delegate.cancel();return l&&a.then(()=>l(null),p=>l(p)),a}remove(l){(0,H.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,H.Wj)("OnDisconnect.remove","onComplete",l,!0);const a=this._delegate.remove();return l&&a.then(()=>l(null),p=>l(p)),a}set(l,a){(0,H.Dv)("OnDisconnect.set",1,2,arguments.length),(0,H.Wj)("OnDisconnect.set","onComplete",a,!0);const p=this._delegate.set(l);return a&&p.then(()=>a(null),b=>a(b)),p}setWithPriority(l,a,p){(0,H.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,H.Wj)("OnDisconnect.setWithPriority","onComplete",p,!0);const b=this._delegate.setWithPriority(l,a);return p&&b.then(()=>p(null),M=>p(M)),b}update(l,a){if((0,H.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(l)){const b={};for(let M=0;M<l.length;++M)b[""+M]=l[M];l=b,uu("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,H.Wj)("OnDisconnect.update","onComplete",a,!0);const p=this._delegate.update(l);return a&&p.then(()=>a(null),b=>a(b)),p}}class oo{constructor(l,a){this.committed=l,this.snapshot=a}toJSON(){return(0,H.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Hl{constructor(l,a){this._database=l,this._delegate=a}val(){return(0,H.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,H.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,H.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,H.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(l){return(0,H.Dv)("DataSnapshot.child",0,1,arguments.length),l=String(l),Bl("DataSnapshot.child","path",l,!1),new Hl(this._database,this._delegate.child(l))}hasChild(l){return(0,H.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Bl("DataSnapshot.hasChild","path",l,!1),this._delegate.hasChild(l)}getPriority(){return(0,H.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(l){return(0,H.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,H.Wj)("DataSnapshot.forEach","action",l,!1),this._delegate.forEach(a=>l(new Hl(this._database,a)))}hasChildren(){return(0,H.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,H.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,H.Dv)("DataSnapshot.ref",0,0,arguments.length),new Yo(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Co{constructor(l,a){this.database=l,this._delegate=a}on(l,a,p,b){var M;(0,H.Dv)("Query.on",2,4,arguments.length),(0,H.Wj)("Query.on","callback",a,!1);const U=Co.getCancelAndContextArgs_("Query.on",p,b),ne=(Be,It)=>{a.call(U.context,new Hl(this.database,Be),It)};ne.userCallback=a,ne.context=U.context;const be=null===(M=U.cancel)||void 0===M?void 0:M.bind(U.context);switch(l){case"value":return Ec(this._delegate,ne,be),a;case"child_added":return Sh(this._delegate,ne,be),a;case"child_removed":return Ah(this._delegate,ne,be),a;case"child_changed":return El(this._delegate,ne,be),a;case"child_moved":return Jc(this._delegate,ne,be),a;default:throw new Error((0,H.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(l,a,p){if((0,H.Dv)("Query.off",0,3,arguments.length),function(h,l,a){if(void 0!==l)switch(l){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,H.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,l),(0,H.Wj)("Query.off","callback",a,!0),(0,H.lb)("Query.off","context",p,!0),a){const b=()=>{};b.userCallback=a,b.context=p,bc(this._delegate,l,b)}else bc(this._delegate,l)}get(){return vf(this._delegate).then(l=>new Hl(this.database,l))}once(l,a,p,b){(0,H.Dv)("Query.once",1,4,arguments.length),(0,H.Wj)("Query.once","callback",a,!0);const M=Co.getCancelAndContextArgs_("Query.once",p,b),U=new H.BH,ne=(Be,It)=>{const wt=new Hl(this.database,Be);a&&a.call(M.context,wt,It),U.resolve(wt)};ne.userCallback=a,ne.context=M.context;const be=Be=>{M.cancel&&M.cancel.call(M.context,Be),U.reject(Be)};switch(l){case"value":Ec(this._delegate,ne,be,{onlyOnce:!0});break;case"child_added":Sh(this._delegate,ne,be,{onlyOnce:!0});break;case"child_removed":Ah(this._delegate,ne,be,{onlyOnce:!0});break;case"child_changed":El(this._delegate,ne,be,{onlyOnce:!0});break;case"child_moved":Jc(this._delegate,ne,be,{onlyOnce:!0});break;default:throw new Error((0,H.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return U.promise}limitToFirst(l){return(0,H.Dv)("Query.limitToFirst",1,1,arguments.length),new Co(this.database,Za(this._delegate,function pp(h){if("number"!=typeof h||Math.floor(h)!==h||h<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new vg(h)}(l)))}limitToLast(l){return(0,H.Dv)("Query.limitToLast",1,1,arguments.length),new Co(this.database,Za(this._delegate,function gp(h){if("number"!=typeof h||Math.floor(h)!==h||h<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new bf(h)}(l)))}orderByChild(l){return(0,H.Dv)("Query.orderByChild",1,1,arguments.length),new Co(this.database,Za(this._delegate,function mp(h){if("$key"===h)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===h)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===h)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Bl("orderByChild","path",h,!1),new jm(h)}(l)))}orderByKey(){return(0,H.Dv)("Query.orderByKey",0,0,arguments.length),new Co(this.database,Za(this._delegate,function wc(){return new wf}()))}orderByPriority(){return(0,H.Dv)("Query.orderByPriority",0,0,arguments.length),new Co(this.database,Za(this._delegate,function Eg(){return new Ic}()))}orderByValue(){return(0,H.Dv)("Query.orderByValue",0,0,arguments.length),new Co(this.database,Za(this._delegate,function Hm(){return new bg}()))}startAt(l=null,a){return(0,H.Dv)("Query.startAt",0,2,arguments.length),new Co(this.database,Za(this._delegate,function fp(h=null,l){return yl("startAt","key",l,!0),new Ef(h,l)}(l,a)))}startAfter(l=null,a){return(0,H.Dv)("Query.startAfter",0,2,arguments.length),new Co(this.database,Za(this._delegate,function _g(h,l){return yl("startAfter","key",l,!0),new yg(h,l)}(l,a)))}endAt(l=null,a){return(0,H.Dv)("Query.endAt",0,2,arguments.length),new Co(this.database,Za(this._delegate,function xh(h,l){return yl("endAt","key",l,!0),new Ul(h,l)}(l,a)))}endBefore(l=null,a){return(0,H.Dv)("Query.endBefore",0,2,arguments.length),new Co(this.database,Za(this._delegate,function lu(h,l){return yl("endBefore","key",l,!0),new jl(h,l)}(l,a)))}equalTo(l,a){return(0,H.Dv)("Query.equalTo",1,2,arguments.length),new Co(this.database,Za(this._delegate,function yp(h,l){return yl("equalTo","key",l,!0),new wg(h,l)}(l,a)))}toString(){return(0,H.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,H.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(l){if((0,H.Dv)("Query.isEqual",1,1,arguments.length),!(l instanceof Co))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(l._delegate)}static getCancelAndContextArgs_(l,a,p){const b={cancel:void 0,context:void 0};if(a&&p)b.cancel=a,(0,H.Wj)(l,"cancel",b.cancel,!0),b.context=p,(0,H.lb)(l,"context",b.context,!0);else if(a)if("object"==typeof a&&null!==a)b.context=a;else{if("function"!=typeof a)throw new Error((0,H.gK)(l,"cancelOrContext")+" must either be a cancel callback or a context object.");b.cancel=a}return b}get ref(){return new Yo(this.database,new po(this._delegate._repo,this._delegate._path))}}class Yo extends Co{constructor(l,a){super(l,new ma(a._repo,a._path,new vi,!1)),this.database=l,this._delegate=a}getKey(){return(0,H.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(l){return(0,H.Dv)("Reference.child",1,1,arguments.length),"number"==typeof l&&(l=String(l)),new Yo(this.database,yc(this._delegate,l))}getParent(){(0,H.Dv)("Reference.parent",0,0,arguments.length);const l=this._delegate.parent;return l?new Yo(this.database,l):null}getRoot(){return(0,H.Dv)("Reference.root",0,0,arguments.length),new Yo(this.database,this._delegate.root)}set(l,a){(0,H.Dv)("Reference.set",1,2,arguments.length),(0,H.Wj)("Reference.set","onComplete",a,!0);const p=Hd(this._delegate,l);return a&&p.then(()=>a(null),b=>a(b)),p}update(l,a){if((0,H.Dv)("Reference.update",1,2,arguments.length),Array.isArray(l)){const b={};for(let M=0;M<l.length;++M)b[""+M]=l[M];l=b,uu("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}zo("Reference.update",this._delegate._path),(0,H.Wj)("Reference.update","onComplete",a,!0);const p=ya(this._delegate,l);return a&&p.then(()=>a(null),b=>a(b)),p}setWithPriority(l,a,p){(0,H.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,H.Wj)("Reference.setWithPriority","onComplete",p,!0);const b=function _c(h,l,a){if(zo("setWithPriority",h._path),un("setWithPriority",l,h._path,!1),Go("setWithPriority",a,!1),".length"===h.key||".keys"===h.key)throw"setWithPriority failed: "+h.key+" is a read-only object.";const p=new H.BH;return Ch(h._repo,h._path,l,a,p.wrapCallback(()=>{})),p.promise}(this._delegate,l,a);return p&&b.then(()=>p(null),M=>p(M)),b}remove(l){(0,H.Dv)("Reference.remove",0,1,arguments.length),(0,H.Wj)("Reference.remove","onComplete",l,!0);const a=function hp(h){return zo("remove",h._path),Hd(h,null)}(this._delegate);return l&&a.then(()=>l(null),p=>l(p)),a}transaction(l,a,p){(0,H.Dv)("Reference.transaction",1,3,arguments.length),(0,H.Wj)("Reference.transaction","transactionUpdate",l,!1),(0,H.Wj)("Reference.transaction","onComplete",a,!0),function(h,l,a,p){if(void 0!==a&&"boolean"!=typeof a)throw new Error((0,H.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,p);const b=function vp(h,l,a){var p;if(h=(0,H.m9)(h),zo("Reference.transaction",h._path),".length"===h.key||".keys"===h.key)throw"Reference.transaction failed: "+h.key+" is a read-only object.";const b=null===(p=null==a?void 0:a.applyLocally)||void 0===p||p,M=new H.BH,ne=Ec(h,()=>{});return function Bd(h,l,a,p,b,M){au(h,"transaction on "+l);const U={path:l,update:a,onComplete:p,status:null,order:Xi(),applyLocally:M,retryCount:0,unwatcher:b,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},ne=Dh(h,l,void 0);U.currentInputSnapshot=ne;const be=U.update(ne.val());if(void 0===be)U.unwatcher(),U.currentOutputSnapshotRaw=null,U.currentOutputSnapshotResolved=null,U.onComplete&&U.onComplete(null,!1,U.currentInputSnapshot);else{Zn("transaction failed: Data returned ",be,U.path),U.status=0;const Be=Ya(h.transactionQueueTree_,l),It=ml(Be)||[];let wt;It.push(U),ic(Be,It),"object"==typeof be&&null!==be&&(0,H.r3)(be,".priority")?(wt=(0,H.DV)(be,".priority"),(0,H.hu)(sn(wt),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):wt=(fl(h.serverSyncTree_,l)||gt.EMPTY_NODE).getPriority().val();const Bt=uc(h),Cn=jn(be,wt),nr=rc(Cn,ne,Bt);U.currentOutputSnapshotRaw=Cn,U.currentOutputSnapshotResolved=nr,U.currentWriteId=cc(h);const Hi=Zu(h.serverSyncTree_,l,nr,U.currentWriteId,U.applyLocally);Wo(h.eventQueue_,l,Hi),dc(h,h.transactionQueueTree_)}}(h._repo,h._path,l,(be,Be,It)=>{let wt=null;be?M.reject(be):(wt=new ka(It,new po(h._repo,h._path),T),M.resolve(new Nh(Be,wt)))},ne,b),M.promise}(this._delegate,l,{applyLocally:p}).then(M=>new oo(M.committed,new Hl(this.database,M.snapshot)));return a&&b.then(M=>a(null,M.committed,M.snapshot),M=>a(M,!1,null)),b}setPriority(l,a){(0,H.Dv)("Reference.setPriority",1,2,arguments.length),(0,H.Wj)("Reference.setPriority","onComplete",a,!0);const p=function Xc(h,l){h=(0,H.m9)(h),zo("setPriority",h._path),Go("setPriority",l,!1);const a=new H.BH;return Ch(h._repo,gi(h._path,".priority"),l,null,a.wrapCallback(()=>{})),a.promise}(this._delegate,l);return a&&p.then(()=>a(null),b=>a(b)),p}push(l,a){(0,H.Dv)("Reference.push",0,2,arguments.length),(0,H.Wj)("Reference.push","onComplete",a,!0);const p=function Ar(h,l){h=(0,H.m9)(h),zo("push",h._path),un("push",l,h._path,!0);const a=op(h._repo),p=Ol(a),b=yc(h,p),M=yc(h,p);let U;return U=null!=l?Hd(M,l).then(()=>M):Promise.resolve(M),b.then=U.then.bind(U),b.catch=U.then.bind(U,void 0),b}(this._delegate,l),b=p.then(U=>new Yo(this.database,U));a&&b.then(()=>a(null),U=>a(U));const M=new Yo(this.database,p);return M.then=b.then.bind(b),M.catch=b.catch.bind(b,void 0),M}onDisconnect(){return zo("Reference.onDisconnect",this._delegate._path),new kh(new Na(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class qd{constructor(l,a){this._delegate=l,this.app=a,this.INTERNAL={delete:()=>this._delegate._delete()}}useEmulator(l,a,p={}){!function Tf(h,l,a,p={}){(h=(0,H.m9)(h))._checkNotDeleted("useEmulator"),h._instanceStarted&&Xn("Cannot call useEmulator() after instance has already been initialized.");const b=h._repoInternal;let M;if(b.repoInfo_.nodeAdmin)p.mockUserToken&&Xn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),M=new Ss(Ss.OWNER);else if(p.mockUserToken){const U="string"==typeof p.mockUserToken?p.mockUserToken:(0,H.Sg)(p.mockUserToken,h.app.options.projectId);M=new Ss(U)}!function Gm(h,l,a,p){h.repoInfo_=new Yt(`${l}:${a}`,!1,h.repoInfo_.namespace,h.repoInfo_.webSocketOnly,h.repoInfo_.nodeAdmin,h.repoInfo_.persistenceKey,h.repoInfo_.includeNamespaceInQueryParams),p&&(h.authTokenProvider_=p)}(b,l,a,M)}(this._delegate,l,a,p)}ref(l){if((0,H.Dv)("database.ref",0,1,arguments.length),l instanceof Yo){const a=cp(this._delegate,l.toString());return new Yo(this,a)}{const a=Th(this._delegate,l);return new Yo(this,a)}}refFromURL(l){(0,H.Dv)("database.refFromURL",1,1,arguments.length);const p=cp(this._delegate,l);return new Yo(this,p)}goOffline(){return(0,H.Dv)("database.goOffline",0,0,arguments.length),function _p(h){(h=(0,H.m9)(h))._checkNotDeleted("goOffline"),Ld(h._repo)}(this._delegate)}goOnline(){return(0,H.Dv)("database.goOnline",0,0,arguments.length),function Nu(h){(h=(0,H.m9)(h))._checkNotDeleted("goOnline"),function Vd(h){h.persistentConnection_&&h.persistentConnection_.resume(Yc)}(h._repo)}(this._delegate)}}qd.ServerValue={TIMESTAMP:function ed(){return ku}(),increment:h=>function Ph(h){return{".sv":{increment:h}}}(h)};var zm=Object.freeze({__proto__:null,initStandalone:function bp({app:h,url:l,version:a,customAuthImpl:p,namespace:b,nodeAdmin:M=!1}){Nt(a);const U=new Q.zt("auth-internal",new Q.H0("database-standalone"));return U.setComponent(new Q.wA("auth-internal",()=>p,"PRIVATE")),{instance:new qd(bl(h,U,void 0,l,M),h),namespace:b}}});const Fh=qd.ServerValue;!function xf(h){h.INTERNAL.registerComponent(new Q.wA("database-compat",(l,{instanceIdentifier:a})=>{const p=l.getProvider("app-compat").getImmediate(),b=l.getProvider("database").getImmediate({identifier:a});return new qd(b,p)},"PUBLIC").setServiceProps({Reference:Yo,Query:Co,Database:qd,DataSnapshot:Hl,enableLogging:Sf,INTERNAL:zm,ServerValue:Fh}).setMultipleInstances(!0)),h.registerVersion("@firebase/database-compat","0.1.7")}(Ai.Z);var wp=j(440),Lh=j(127);function No(h){return null==h}function Bh(h){return"function"==typeof h.set}function $h(h,l){return Bh(l)?l:h.ref(l)}function Mf(h,l){if(function Vh(h){return"string"==typeof h}(h))return l.stringCase();if(Bh(h))return l.firebaseCase();if(function Yd(h){return"function"==typeof h.exportVal}(h))return l.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof h)}function Kd(h,l,a="on",p=bi.z){return new Vr.y(b=>{let M=null;return M=h[a](l,(U,ne)=>{p.schedule(()=>{b.next({snapshot:U,prevKey:ne})}),"once"===a&&p.schedule(()=>b.complete())},U=>{p.schedule(()=>b.error(U))}),"on"===a?{unsubscribe(){null!=M&&h.off(l,M)}}:{unsubscribe(){}}}).pipe((0,Bn.U)(b=>{const{snapshot:M,prevKey:U}=b;let ne=null;return M.exists()&&(ne=M.key),{type:l,payload:M,prevKey:U,key:ne}}),(0,sr.B)())}function Cp(h,l){const a=h.length;for(let p=0;p<a;p++)if(h[p].payload.key===l)return p;return-1}function Rf(h,l){const{payload:a,prevKey:p,key:b}=l,M=Cp(h,b),U=function Tg(h,l){if(No(l))return 0;{const a=Cp(h,l);return-1===a?h.length:a+1}}(h,p);switch(l.type){case"value":if(l.payload&&l.payload.exists()){let ne=null;l.payload.forEach(be=>{const Be={payload:be,type:"value",prevKey:ne,key:be.key};return ne=be.key,h=[...h,Be],!1})}return h;case"child_added":if(M>-1){const ne=h[M-1];(ne&&ne.key||null)!==p&&(h=h.filter(be=>be.payload.key!==a.key)).splice(U,0,l)}else{if(null==p)return[l,...h];(h=h.slice()).splice(U,0,l)}return h;case"child_removed":return h.filter(ne=>ne.payload.key!==a.key);case"child_changed":return h.map(ne=>ne.payload.key===b?l:ne);case"child_moved":if(M>-1){const ne=h.splice(M,1)[0];return(h=h.slice()).splice(U,0,ne),h}return h;default:return h}}function Of(h){return(No(h)||0===h.length)&&(h=["child_added","child_removed","child_changed","child_moved"]),h}function Pf(h,l,a){return function Ip(h,l,a){return Kd(h,"value","once",a).pipe((0,yr.w)(p=>{const b=[(0,Mt.of)(p)];return l.forEach(M=>b.push(Kd(h,M,"on",a))),(0,mn.T)(...b).pipe((0,Kr.R)(Rf,[]))}),(0,Gr.x)())}(h,l=Of(l),a)}function Zd(h,l,a){const p=(l=Of(l)).map(b=>Kd(h,b,"on",a));return(0,mn.T)(...p)}function Nf(h,l){return function(p,b){return Mf(p,{stringCase:()=>h.child(p)[l](b),firebaseCase:()=>p[l](b),snapshotCase:()=>p.ref[l](b)})}}function Sg(h){return function(a){return a?Mf(a,{stringCase:()=>h.child(a).remove(),firebaseCase:()=>a.remove(),snapshotCase:()=>a.ref.remove()}):h.remove()}}function kf(h,l){return function(){return Kd(h,"value","on",l)}}const Xd=new re.OlP("angularfire2.realtimeDatabaseURL"),Qa=new re.OlP("angularfire2.database.use-emulator");let Lu=(()=>{class h{constructor(a,p,b,M,U,ne,be,Be,It,wt,Bt,Cn,nr,Hi,go){this.schedulers=ne;const cu=be,wl=(0,Mr.on)(a,U,p);Be&&(0,Er.nw)(wl,U,It,Bt,Cn,nr,wt,Hi),this.database=(0,Mr.cc)(`${wl.name}.database.${b}`,"AngularFireDatabase",wl.name,()=>{const Cc=U.runOutsideAngular(()=>wl.database(b||void 0));return cu&&Cc.useEmulator(...cu),Cc},[cu])}list(a,p){const b=this.schedulers.ngZone.runOutsideAngular(()=>$h(this.database,a));let M=b;return p&&(M=p(b)),function Ag(h,l){const a=l.schedulers.outsideAngular,p=l.schedulers.ngZone.run(()=>h.ref);return{query:h,update:Nf(p,"update"),set:Nf(p,"set"),push:b=>p.push(b),remove:Sg(p),snapshotChanges:b=>Pf(h,b,a).pipe(Tr.iC),stateChanges:b=>Zd(h,b,a).pipe(Tr.iC),auditTrail:b=>function Qd(h,l,a){return function Dp(h,l,a){return function Uh(h,l){return Kd(h,"value","on",l).pipe((0,Bn.U)(a=>{let p;return a.payload.forEach(b=>(p=b.key,!1)),{data:a,lastKeyToLoad:p}}))}(h,a).pipe(function Br(...h){return l=>{let a;return"function"==typeof h[h.length-1]&&(a=h.pop()),l.lift(new Vi(h,a))}}(l),(0,Bn.U)(([b,M])=>{const U=b.lastKeyToLoad,ne=M.map(be=>be.key);return{actions:M,lastKeyToLoad:U,loadedKeys:ne}}),function Qi(h){return l=>l.lift(new Pi(h))}(b=>-1===b.loadedKeys.indexOf(b.lastKeyToLoad)),(0,Bn.U)(b=>b.actions))}(h,Zd(h,l).pipe((0,Kr.R)((b,M)=>[...b,M],[])),a)}(h,b,a).pipe(Tr.iC),valueChanges:(b,M)=>Pf(h,b,a).pipe((0,Bn.U)(ne=>ne.map(be=>M&&M.idField?Object.assign(Object.assign({},be.payload.val()),{[M.idField]:be.key}):be.payload.val())),Tr.iC)}}(M,this)}object(a){return function Tp(h,l){return{query:h,snapshotChanges:()=>kf(h,l.schedulers.outsideAngular)().pipe(Tr.iC),update:a=>h.ref.update(a),set:a=>h.ref.set(a),remove:()=>h.ref.remove(),valueChanges:()=>kf(h,l.schedulers.outsideAngular)().pipe(Tr.iC,(0,Bn.U)(p=>p.payload.exists()?p.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>$h(this.database,a)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return h.\u0275fac=function(a){return new(a||h)(re.LFG(Mr.Dh),re.LFG(Mr.xv,8),re.LFG(Xd,8),re.LFG(re.Lbi),re.LFG(re.R0b),re.LFG(Tr.HU),re.LFG(Qa,8),re.LFG(Er.zQ,8),re.LFG(Er.Qv,8),re.LFG(Er.L6,8),re.LFG(Er._Q,8),re.LFG(Er.rT,8),re.LFG(Er.lh,8),re.LFG(Er.f7,8),re.LFG(wp.nm,8))},h.\u0275prov=re.Yz7({token:h,factory:h.\u0275fac,providedIn:"any"}),h})(),Ff=(()=>{class h{constructor(){Lh.Z.registerVersion("angularfire",Tr.q4.full,"rtdb-compat")}}return h.\u0275fac=function(a){return new(a||h)},h.\u0275mod=re.oAB({type:h}),h.\u0275inj=re.cJS({providers:[Lu]}),h})();var jh=j(2796),Hh=j(6237),Gh=j(6893);let Sp=(()=>{class h{}return h.\u0275fac=function(a){return new(a||h)},h.\u0275mod=re.oAB({type:h,bootstrap:[Yr]}),h.\u0275inj=re.cJS({providers:[{provide:In.wN,useClass:Qn.r4},Hh.a,Gh.e],imports:[[Kn,Qn.Pc.forRoot(),Fn,Mr.hO.initializeApp(as),Er.ww,Or.u5,jh.yb,Ff]]}),h})();(0,re.G48)(),mr().bootstrapModule(Sp).catch(h=>console.log(h))},5867:(Jt,ct,j)=>{"use strict";j.d(ct,{Mq:()=>u.getApp,C6:()=>u.getApps});var u=j(9681);(0,u.registerVersion)("firebase","9.6.10","app")},127:(Jt,ct,j)=>{"use strict";j.d(ct,{Z:()=>u.Z});var u=j(3942);u.Z.registerVersion("firebase","9.6.10","app-compat")},4087:(Jt,ct,j)=>{"use strict";j.r(ct);var u=j(5861),re=j(3942),Z=j(2090),Ne=j(9681),Se=j(655),ae=j(1877),Ie=j(4859);const Oe=function he(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},_e=function Ue(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Pe=new Z.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ht=new ae.Yd("@firebase/auth");function ve(w,...g){ht.logLevel<=ae.in.ERROR&&ht.error(`Auth (${Ne.SDK_VERSION}): ${w}`,...g)}function ot(w,...g){throw St(w,...g)}function Le(w,...g){return St(w,...g)}function rt(w,g,y){const A=Object.assign(Object.assign({},_e()),{[g]:y});return new Z.LL("auth","Firebase",A).create(g,{appName:w.name})}function _t(w,g,y){if(!(g instanceof y))throw y.name!==g.constructor.name&&ot(w,"argument-error"),rt(w,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function St(w,...g){if("string"!=typeof w){const y=g[0],A=[...g.slice(1)];return A[0]&&(A[0].appName=w.name),w._errorFactory.create(y,...A)}return Pe.create(w,...g)}function qe(w,g,...y){if(!w)throw St(g,...y)}function pe(w){const g="INTERNAL ASSERTION FAILED: "+w;throw ve(g),new Error(g)}function Ve(w,g){w||pe(g)}const Ee=new Map;function Te(w){Ve(w instanceof Function,"Expected a class definition");let g=Ee.get(w);return g?(Ve(g instanceof w,"Instance stored in cache mismatched with class"),g):(g=new w,Ee.set(w,g),g)}function Ut(){var w;return"undefined"!=typeof self&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function Xt(){return"http:"===pt()||"https:"===pt()}function pt(){var w;return"undefined"!=typeof self&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class nt{constructor(g,y){this.shortDelay=g,this.longDelay=y,Ve(y>g,"Short delay should be less than long delay!"),this.isMobile=(0,Z.uI)()||(0,Z.b$)()}get(){return function st(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Xt()||(0,Z.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function at(w,g){Ve(w.emulator,"Emulator should always be set here");const{url:y}=w.emulator;return g?`${y}${g.startsWith("/")?g.slice(1):g}`:y}class Re{static initialize(g,y,A){this.fetchImpl=g,y&&(this.headersImpl=y),A&&(this.responseImpl=A)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void pe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void pe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void pe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Xe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Tt=new nt(3e4,6e4);function ft(w,g){return w.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:w.tenantId}):g}function Zt(w,g,y,A){return gn.apply(this,arguments)}function gn(){return(gn=(0,u.Z)(function*(w,g,y,A,q={}){return An(w,q,(0,u.Z)(function*(){let fe={},et={};A&&("GET"===g?et=A:fe={body:JSON.stringify(A)});const xt=(0,Z.xO)(Object.assign({key:w.config.apiKey},et)).slice(1),sn=yield w._getAdditionalHeaders();return sn["Content-Type"]="application/json",w.languageCode&&(sn["X-Firebase-Locale"]=w.languageCode),Re.fetch()(xr(w,w.config.apiHost,y,xt),Object.assign({method:g,headers:sn,referrerPolicy:"no-referrer"},fe))}))})).apply(this,arguments)}function An(w,g,y){return ln.apply(this,arguments)}function ln(){return(ln=(0,u.Z)(function*(w,g,y){w._canInitEmulator=!1;const A=Object.assign(Object.assign({},Xe),g);try{const q=new Kn(w),fe=yield Promise.race([y(),q.promise]);q.clearNetworkTimeout();const et=yield fe.json();if("needConfirmation"in et)throw Yn(w,"account-exists-with-different-credential",et);if(fe.ok&&!("errorMessage"in et))return et;{const xt=fe.ok?et.errorMessage:et.error.message,[sn,un]=xt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===sn)throw Yn(w,"credential-already-in-use",et);if("EMAIL_EXISTS"===sn)throw Yn(w,"email-already-in-use",et);const Zn=A[sn]||sn.toLowerCase().replace(/[_\s]+/g,"-");if(un)throw rt(w,Zn,un);ot(w,Zn)}}catch(q){if(q instanceof Z.ZR)throw q;ot(w,"network-request-failed")}})).apply(this,arguments)}function tn(w,g,y,A){return mr.apply(this,arguments)}function mr(){return(mr=(0,u.Z)(function*(w,g,y,A,q={}){const fe=yield Zt(w,g,y,A,q);return"mfaPendingCredential"in fe&&ot(w,"multi-factor-auth-required",{_serverResponse:fe}),fe})).apply(this,arguments)}function xr(w,g,y,A){const q=`${g}${y}?${A}`;return w.config.emulator?at(w.config,q):`${w.config.apiScheme}://${q}`}class Kn{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((y,A)=>{this.timer=setTimeout(()=>A(Le(this.auth,"network-request-failed")),Tt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Yn(w,g,y){const A={appName:w.name};y.email&&(A.email=y.email),y.phoneNumber&&(A.phoneNumber=y.phoneNumber);const q=Le(w,g,A);return q.customData._tokenResponse=y,q}function ir(){return(ir=(0,u.Z)(function*(w,g){return Zt(w,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function Hr(w,g){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,u.Z)(function*(w,g){return Zt(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function cr(w,g){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,u.Z)(function*(w,g){return Zt(w,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function on(w){if(w)try{const g=new Date(Number(w));if(!isNaN(g.getTime()))return g.toUTCString()}catch(g){}}function ni(){return(ni=(0,u.Z)(function*(w,g=!1){const y=(0,Z.m9)(w),A=yield y.getIdToken(g),q=hn(A);qe(q&&q.exp&&q.auth_time&&q.iat,y.auth,"internal-error");const fe="object"==typeof q.firebase?q.firebase:void 0,et=null==fe?void 0:fe.sign_in_provider;return{claims:q,token:A,authTime:on(kn(q.auth_time)),issuedAtTime:on(kn(q.iat)),expirationTime:on(kn(q.exp)),signInProvider:et||null,signInSecondFactor:(null==fe?void 0:fe.sign_in_second_factor)||null}})).apply(this,arguments)}function kn(w){return 1e3*Number(w)}function hn(w){const[g,y,A]=w.split(".");if(void 0===g||void 0===y||void 0===A)return ve("JWT malformed, contained fewer than 3 sections"),null;try{const q=(0,Z.tV)(y);return q?JSON.parse(q):(ve("Failed to decode base64 JWT payload"),null)}catch(q){return ve("Caught error parsing JWT payload as JSON",q),null}}function jr(w,g){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,u.Z)(function*(w,g,y=!1){if(y)return g;try{return yield g}catch(A){throw A instanceof Z.ZR&&Vn(A)&&w.auth.currentUser===w&&(yield w.auth.signOut()),A}})).apply(this,arguments)}function Vn({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}class Pn{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var y;if(g){const A=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),A}{this.errorBackoff=3e4;const q=(null!==(y=this.user.stsTokenManager.expirationTime)&&void 0!==y?y:0)-Date.now()-3e5;return Math.max(0,q)}}schedule(g=!1){var y=this;if(!this.isRunning)return;const A=this.getInterval(g);this.timerId=setTimeout((0,u.Z)(function*(){yield y.iteration()}),A)}iteration(){var g=this;return(0,u.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(y){return void("auth/network-request-failed"===y.code&&g.schedule(!0))}g.schedule()})()}}class ai{constructor(g,y){this.createdAt=g,this.lastLoginAt=y,this._initializeTime()}_initializeTime(){this.lastSignInTime=on(this.lastLoginAt),this.creationTime=on(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Nr(w){return wn.apply(this,arguments)}function wn(){return(wn=(0,u.Z)(function*(w){var g;const y=w.auth,A=yield w.getIdToken(),q=yield jr(w,cr(y,{idToken:A}));qe(null==q?void 0:q.users.length,y,"internal-error");const fe=q.users[0];w._notifyReloadListener(fe);const et=(null===(g=fe.providerUserInfo)||void 0===g?void 0:g.length)?kt(fe.providerUserInfo):[],xt=nn(w.providerData,et),Zn=!!w.isAnonymous&&!(w.email&&fe.passwordHash||(null==xt?void 0:xt.length)),Gn={uid:fe.localId,displayName:fe.displayName||null,photoURL:fe.photoUrl||null,email:fe.email||null,emailVerified:fe.emailVerified||!1,phoneNumber:fe.phoneNumber||null,tenantId:fe.tenantId||null,providerData:xt,metadata:new ai(fe.createdAt,fe.lastLoginAt),isAnonymous:Zn};Object.assign(w,Gn)})).apply(this,arguments)}function er(){return(er=(0,u.Z)(function*(w){const g=(0,Z.m9)(w);yield Nr(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function nn(w,g){return[...w.filter(A=>!g.some(q=>q.providerId===A.providerId)),...g]}function kt(w){return w.map(g=>{var{providerId:y}=g,A=(0,Se._T)(g,["providerId"]);return{providerId:y,uid:A.rawId||"",displayName:A.displayName||null,email:A.email||null,phoneNumber:A.phoneNumber||null,photoURL:A.photoUrl||null}})}function yn(){return(yn=(0,u.Z)(function*(w,g){const y=yield An(w,{},(0,u.Z)(function*(){const A=(0,Z.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:q,apiKey:fe}=w.config,et=xr(w,q,"/v1/token",`key=${fe}`),xt=yield w._getAdditionalHeaders();return xt["Content-Type"]="application/x-www-form-urlencoded",Re.fetch()(et,{method:"POST",headers:xt,body:A})}));return{accessToken:y.access_token,expiresIn:y.expires_in,refreshToken:y.refresh_token}})).apply(this,arguments)}class _n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){qe(g.idToken,"internal-error"),qe(void 0!==g.idToken,"internal-error"),qe(void 0!==g.refreshToken,"internal-error");const y="expiresIn"in g&&void 0!==g.expiresIn?Number(g.expiresIn):function Dn(w){const g=hn(w);return qe(g,"internal-error"),qe(void 0!==g.exp,"internal-error"),qe(void 0!==g.iat,"internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,y)}getToken(g,y=!1){var A=this;return(0,u.Z)(function*(){return qe(!A.accessToken||A.refreshToken,g,"user-token-expired"),y||!A.accessToken||A.isExpired?A.refreshToken?(yield A.refresh(g,A.refreshToken),A.accessToken):null:A.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,y){var A=this;return(0,u.Z)(function*(){const{accessToken:q,refreshToken:fe,expiresIn:et}=yield function en(w,g){return yn.apply(this,arguments)}(g,y);A.updateTokensAndExpiration(q,fe,Number(et))})()}updateTokensAndExpiration(g,y,A){this.refreshToken=y||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*A}static fromJSON(g,y){const{refreshToken:A,accessToken:q,expirationTime:fe}=y,et=new _n;return A&&(qe("string"==typeof A,"internal-error",{appName:g}),et.refreshToken=A),q&&(qe("string"==typeof q,"internal-error",{appName:g}),et.accessToken=q),fe&&(qe("number"==typeof fe,"internal-error",{appName:g}),et.expirationTime=fe),et}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new _n,this.toJSON())}_performRefresh(){return pe("not implemented")}}function Rn(w,g){qe("string"==typeof w||void 0===w,"internal-error",{appName:g})}class Fe{constructor(g){var{uid:y,auth:A,stsTokenManager:q}=g,fe=(0,Se._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Pn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=y,this.auth=A,this.stsTokenManager=q,this.accessToken=q.accessToken,this.displayName=fe.displayName||null,this.email=fe.email||null,this.emailVerified=fe.emailVerified||!1,this.phoneNumber=fe.phoneNumber||null,this.photoURL=fe.photoURL||null,this.isAnonymous=fe.isAnonymous||!1,this.tenantId=fe.tenantId||null,this.providerData=fe.providerData?[...fe.providerData]:[],this.metadata=new ai(fe.createdAt||void 0,fe.lastLoginAt||void 0)}getIdToken(g){var y=this;return(0,u.Z)(function*(){const A=yield jr(y,y.stsTokenManager.getToken(y.auth,g));return qe(A,y.auth,"internal-error"),y.accessToken!==A&&(y.accessToken=A,yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)),A})()}getIdTokenResult(g){return function Gt(w){return ni.apply(this,arguments)}(this,g)}reload(){return function li(w){return er.apply(this,arguments)}(this)}_assign(g){this!==g&&(qe(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(y=>Object.assign({},y)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new Fe(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){qe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,y=!1){var A=this;return(0,u.Z)(function*(){let q=!1;g.idToken&&g.idToken!==A.stsTokenManager.accessToken&&(A.stsTokenManager.updateFromServerResponse(g),q=!0),y&&(yield Nr(A)),yield A.auth._persistUserIfCurrent(A),q&&A.auth._notifyListenersIfCurrent(A)})()}delete(){var g=this;return(0,u.Z)(function*(){const y=yield g.getIdToken();return yield jr(g,function jt(w,g){return ir.apply(this,arguments)}(g.auth,{idToken:y})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,y){var A,q,fe,et,xt,sn,un,Zn;const Gn=null!==(A=y.displayName)&&void 0!==A?A:void 0,os=null!==(q=y.email)&&void 0!==q?q:void 0,Go=null!==(fe=y.phoneNumber)&&void 0!==fe?fe:void 0,yl=null!==(et=y.photoURL)&&void 0!==et?et:void 0,Bl=null!==(xt=y.tenantId)&&void 0!==xt?xt:void 0,oc=null!==(sn=y._redirectEventId)&&void 0!==sn?sn:void 0,zo=null!==(un=y.createdAt)&&void 0!==un?un:void 0,Eh=null!==(Zn=y.lastLoginAt)&&void 0!==Zn?Zn:void 0,{uid:$l,emailVerified:ou,isAnonymous:ac,providerData:Wo,stsTokenManager:lc}=y;qe($l&&lc,g,"internal-error");const ff=_n.fromJSON(this.name,lc);qe("string"==typeof $l,g,"internal-error"),Rn(Gn,g.name),Rn(os,g.name),qe("boolean"==typeof ou,g,"internal-error"),qe("boolean"==typeof ac,g,"internal-error"),Rn(Go,g.name),Rn(yl,g.name),Rn(Bl,g.name),Rn(oc,g.name),Rn(zo,g.name),Rn(Eh,g.name);const Yc=new Fe({uid:$l,auth:g,email:os,emailVerified:ou,displayName:Gn,isAnonymous:ac,photoURL:yl,phoneNumber:Go,tenantId:Bl,stsTokenManager:ff,createdAt:zo,lastLoginAt:Eh});return Wo&&Array.isArray(Wo)&&(Yc.providerData=Wo.map(pf=>Object.assign({},pf))),oc&&(Yc._redirectEventId=oc),Yc}static _fromIdTokenResponse(g,y,A=!1){return(0,u.Z)(function*(){const q=new _n;q.updateFromServerResponse(y);const fe=new Fe({uid:y.localId,auth:g,stsTokenManager:q,isAnonymous:A});return yield Nr(fe),fe})()}}const je=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,u.Z)(function*(){return!0})()}_set(y,A){var q=this;return(0,u.Z)(function*(){q.storage[y]=A})()}_get(y){var A=this;return(0,u.Z)(function*(){const q=A.storage[y];return void 0===q?null:q})()}_remove(y){var A=this;return(0,u.Z)(function*(){delete A.storage[y]})()}_addListener(y,A){}_removeListener(y,A){}}return w.type="NONE",w})();function Et(w,g,y){return`firebase:${w}:${g}:${y}`}class ut{constructor(g,y,A){this.persistence=g,this.auth=y,this.userKey=A;const{config:q,name:fe}=this.auth;this.fullUserKey=Et(this.userKey,q.apiKey,fe),this.fullPersistenceKey=Et("persistence",q.apiKey,fe),this.boundEventHandler=y._onStorageEvent.bind(y),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,u.Z)(function*(){const y=yield g.persistence._get(g.fullUserKey);return y?Fe._fromJSON(g.auth,y):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var y=this;return(0,u.Z)(function*(){if(y.persistence===g)return;const A=yield y.getCurrentUser();return yield y.removeCurrentUser(),y.persistence=g,A?y.setCurrentUser(A):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,y,A="authUser"){return(0,u.Z)(function*(){if(!y.length)return new ut(Te(je),g,A);const q=(yield Promise.all(y.map(function(){var un=(0,u.Z)(function*(Zn){if(yield Zn._isAvailable())return Zn});return function(Zn){return un.apply(this,arguments)}}()))).filter(un=>un);let fe=q[0]||Te(je);const et=Et(A,g.config.apiKey,g.name);let xt=null;for(const un of y)try{const Zn=yield un._get(et);if(Zn){const Gn=Fe._fromJSON(g,Zn);un!==fe&&(xt=Gn),fe=un;break}}catch(Zn){}const sn=q.filter(un=>un._shouldAllowMigration);return fe._shouldAllowMigration&&sn.length?(fe=sn[0],xt&&(yield fe._set(et,xt.toJSON())),yield Promise.all(y.map(function(){var un=(0,u.Z)(function*(Zn){if(Zn!==fe)try{yield Zn._remove(et)}catch(Gn){}});return function(Zn){return un.apply(this,arguments)}}())),new ut(fe,g,A)):new ut(fe,g,A)})()}}function qt(w){const g=w.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(Bn(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(In(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(Un(g))return"Blackberry";if(br(g))return"Webos";if(Qn(g))return"Safari";if((g.includes("chrome/")||Yr(g))&&!g.includes("edge/"))return"Chrome";if(Er(g))return"Android";{const A=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==A?void 0:A.length))return A[1]}return"Other"}function In(w=(0,Z.z$)()){return/firefox\//i.test(w)}function Qn(w=(0,Z.z$)()){const g=w.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function Yr(w=(0,Z.z$)()){return/crios\//i.test(w)}function Bn(w=(0,Z.z$)()){return/iemobile/i.test(w)}function Er(w=(0,Z.z$)()){return/android/i.test(w)}function Un(w=(0,Z.z$)()){return/blackberry/i.test(w)}function br(w=(0,Z.z$)()){return/webos/i.test(w)}function Rr(w=(0,Z.z$)()){return/iphone|ipad|ipod/i.test(w)}function Mr(w=(0,Z.z$)()){return Rr(w)||Er(w)||br(w)||Un(w)||/windows phone/i.test(w)||Bn(w)}function bi(w,g=[]){let y;switch(w){case"Browser":y=qt((0,Z.z$)());break;case"Worker":y=`${qt((0,Z.z$)())}-${w}`;break;default:y=w}const A=g.length?g.join(","):"FirebaseCore-web";return`${y}/JsCore/${Ne.SDK_VERSION}/${A}`}class Vr{constructor(g,y,A){this.app=g,this.heartbeatServiceProvider=y,this.config=A,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new mn(this),this.idTokenSubscription=new mn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Pe,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=A.sdkClientVersion}_initializeWithPersistence(g,y){var A=this;return y&&(this._popupRedirectResolver=Te(y)),this._initializationPromise=this.queue((0,u.Z)(function*(){var q,fe;if(!A._deleted&&(A.persistenceManager=yield ut.create(A,g),!A._deleted)){if(null===(q=A._popupRedirectResolver)||void 0===q?void 0:q._shouldInitProactively)try{yield A._popupRedirectResolver._initialize(A)}catch(et){}yield A.initializeCurrentUser(y),A.lastNotifiedUid=(null===(fe=A.currentUser)||void 0===fe?void 0:fe.uid)||null,!A._deleted&&(A._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,u.Z)(function*(){if(g._deleted)return;const y=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||y){if(g.currentUser&&y&&g.currentUser.uid===y.uid)return g._currentUser._assign(y),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(y)}})()}initializeCurrentUser(g){var y=this;return(0,u.Z)(function*(){var A;let q=yield y.assertedPersistence.getCurrentUser();if(g&&y.config.authDomain){yield y.getOrInitRedirectPersistenceManager();const fe=null===(A=y.redirectUser)||void 0===A?void 0:A._redirectEventId,et=null==q?void 0:q._redirectEventId,xt=yield y.tryRedirectSignIn(g);(!fe||fe===et)&&(null==xt?void 0:xt.user)&&(q=xt.user)}return q?q._redirectEventId?(qe(y._popupRedirectResolver,y,"argument-error"),yield y.getOrInitRedirectPersistenceManager(),y.redirectUser&&y.redirectUser._redirectEventId===q._redirectEventId?y.directlySetCurrentUser(q):y.reloadAndSetCurrentUserOrClear(q)):y.reloadAndSetCurrentUserOrClear(q):y.directlySetCurrentUser(null)})()}tryRedirectSignIn(g){var y=this;return(0,u.Z)(function*(){let A=null;try{A=yield y._popupRedirectResolver._completeRedirectFn(y,g,!0)}catch(q){yield y._setRedirectUser(null)}return A})()}reloadAndSetCurrentUserOrClear(g){var y=this;return(0,u.Z)(function*(){try{yield Nr(g)}catch(A){if("auth/network-request-failed"!==A.code)return y.directlySetCurrentUser(null)}return y.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function Qe(){if("undefined"==typeof navigator)return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var g=this;return(0,u.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var y=this;return(0,u.Z)(function*(){const A=g?(0,Z.m9)(g):null;return A&&qe(A.auth.config.apiKey===y.config.apiKey,y,"invalid-user-token"),y._updateCurrentUser(A&&A._clone(y))})()}_updateCurrentUser(g){var y=this;return(0,u.Z)(function*(){if(!y._deleted)return g&&qe(y.tenantId===g.tenantId,y,"tenant-id-mismatch"),y.queue((0,u.Z)(function*(){yield y.directlySetCurrentUser(g),y.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,u.Z)(function*(){return(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null)})()}setPersistence(g){var y=this;return this.queue((0,u.Z)(function*(){yield y.assertedPersistence.setPersistence(Te(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new Z.LL("auth","Firebase",g())}onAuthStateChanged(g,y,A){return this.registerStateListener(this.authStateSubscription,g,y,A)}onIdTokenChanged(g,y,A){return this.registerStateListener(this.idTokenSubscription,g,y,A)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,y){var A=this;return(0,u.Z)(function*(){const q=yield A.getOrInitRedirectPersistenceManager(y);return null===g?q.removeCurrentUser():q.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var y=this;return(0,u.Z)(function*(){if(!y.redirectPersistenceManager){const A=g&&Te(g)||y._popupRedirectResolver;qe(A,y,"argument-error"),y.redirectPersistenceManager=yield ut.create(y,[Te(A._redirectPersistence)],"redirectUser"),y.redirectUser=yield y.redirectPersistenceManager.getCurrentUser()}return y.redirectPersistenceManager})()}_redirectUserForId(g){var y=this;return(0,u.Z)(function*(){var A,q;return y._isInitialized&&(yield y.queue((0,u.Z)(function*(){}))),(null===(A=y._currentUser)||void 0===A?void 0:A._redirectEventId)===g?y._currentUser:(null===(q=y.redirectUser)||void 0===q?void 0:q._redirectEventId)===g?y.redirectUser:null})()}_persistUserIfCurrent(g){var y=this;return(0,u.Z)(function*(){if(g===y.currentUser)return y.queue((0,u.Z)(function*(){return y.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,y;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const A=null!==(y=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==y?y:null;this.lastNotifiedUid!==A&&(this.lastNotifiedUid=A,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,y,A,q){if(this._deleted)return()=>{};const fe="function"==typeof y?y:y.next.bind(y),et=this._isInitialized?Promise.resolve():this._initializationPromise;return qe(et,this,"internal-error"),et.then(()=>fe(this.currentUser)),"function"==typeof y?g.addObserver(y,A,q):g.addObserver(y)}directlySetCurrentUser(g){var y=this;return(0,u.Z)(function*(){y.currentUser&&y.currentUser!==g&&(y._currentUser._stopProactiveRefresh(),g&&y.isProactiveRefreshEnabled&&g._startProactiveRefresh()),y.currentUser=g,g?yield y.assertedPersistence.setCurrentUser(g):yield y.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return qe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=bi(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,u.Z)(function*(){var y;const A={"X-Client-Version":g.clientVersion};g.app.options.appId&&(A["X-Firebase-gmpid"]=g.app.options.appId);const q=yield null===(y=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===y?void 0:y.getHeartbeatsHeader();return q&&(A["X-Firebase-Client"]=q),A})()}}function Mt(w){return(0,Z.m9)(w)}class mn{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,Z.ne)(y=>this.observer=y)}get next(){return qe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function yr(w){const g=w.indexOf(":");return g<0?"":w.substr(0,g+1)}function Gr(w){if(!w)return null;const g=Number(w);return isNaN(g)?null:g}class dr{constructor(g,y){this.providerId=g,this.signInMethod=y}toJSON(){return pe("not implemented")}_getIdTokenResponse(g){return pe("not implemented")}_linkToIdToken(g,y){return pe("not implemented")}_getReauthenticationResolver(g){return pe("not implemented")}}function Br(w,g){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,u.Z)(function*(w,g){return Zt(w,"POST","/v1/accounts:resetPassword",ft(w,g))})).apply(this,arguments)}function Ln(w,g){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,u.Z)(function*(w,g){return Zt(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Qi(w,g){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,u.Z)(function*(w,g){return Zt(w,"POST","/v1/accounts:update",ft(w,g))})).apply(this,arguments)}function Tr(){return(Tr=(0,u.Z)(function*(w,g){return tn(w,"POST","/v1/accounts:signInWithPassword",ft(w,g))})).apply(this,arguments)}function Bi(w,g){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,u.Z)(function*(w,g){return Zt(w,"POST","/v1/accounts:sendOobCode",ft(w,g))})).apply(this,arguments)}function Q(w,g){return ge.apply(this,arguments)}function ge(){return(ge=(0,u.Z)(function*(w,g){return Bi(w,g)})).apply(this,arguments)}function le(w,g){return H.apply(this,arguments)}function H(){return(H=(0,u.Z)(function*(w,g){return Bi(w,g)})).apply(this,arguments)}function He(w,g){return tt.apply(this,arguments)}function tt(){return(tt=(0,u.Z)(function*(w,g){return Bi(w,g)})).apply(this,arguments)}function bt(w,g){return At.apply(this,arguments)}function At(){return(At=(0,u.Z)(function*(w,g){return Bi(w,g)})).apply(this,arguments)}function Rt(){return(Rt=(0,u.Z)(function*(w,g){return tn(w,"POST","/v1/accounts:signInWithEmailLink",ft(w,g))})).apply(this,arguments)}function xn(){return(xn=(0,u.Z)(function*(w,g){return tn(w,"POST","/v1/accounts:signInWithEmailLink",ft(w,g))})).apply(this,arguments)}class Tn extends dr{constructor(g,y,A,q=null){super("password",A),this._email=g,this._password=y,this._tenantId=q}static _fromEmailAndPassword(g,y){return new Tn(g,y,"password")}static _fromEmailAndCode(g,y,A=null){return new Tn(g,y,"emailLink",A)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g;if((null==y?void 0:y.email)&&(null==y?void 0:y.password)){if("password"===y.signInMethod)return this._fromEmailAndPassword(y.email,y.password);if("emailLink"===y.signInMethod)return this._fromEmailAndCode(y.email,y.password,y.tenantId)}return null}_getIdTokenResponse(g){var y=this;return(0,u.Z)(function*(){switch(y.signInMethod){case"password":return function Ni(w,g){return Tr.apply(this,arguments)}(g,{returnSecureToken:!0,email:y._email,password:y._password});case"emailLink":return function Nt(w,g){return Rt.apply(this,arguments)}(g,{email:y._email,oobCode:y._password});default:ot(g,"internal-error")}})()}_linkToIdToken(g,y){var A=this;return(0,u.Z)(function*(){switch(A.signInMethod){case"password":return Ln(g,{idToken:y,returnSecureToken:!0,email:A._email,password:A._password});case"emailLink":return function pn(w,g){return xn.apply(this,arguments)}(g,{idToken:y,email:A._email,oobCode:A._password});default:ot(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function zn(w,g){return ri.apply(this,arguments)}function ri(){return(ri=(0,u.Z)(function*(w,g){return tn(w,"POST","/v1/accounts:signInWithIdp",ft(w,g))})).apply(this,arguments)}class ze extends dr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const y=new ze(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(y.idToken=g.idToken),g.accessToken&&(y.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(y.nonce=g.nonce),g.pendingToken&&(y.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(y.accessToken=g.oauthToken,y.secret=g.oauthTokenSecret):ot("argument-error"),y}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g,{providerId:A,signInMethod:q}=y,fe=(0,Se._T)(y,["providerId","signInMethod"]);if(!A||!q)return null;const et=new ze(A,q);return et.idToken=fe.idToken||void 0,et.accessToken=fe.accessToken||void 0,et.secret=fe.secret,et.nonce=fe.nonce,et.pendingToken=fe.pendingToken||null,et}_getIdTokenResponse(g){return zn(g,this.buildRequest())}_linkToIdToken(g,y){const A=this.buildRequest();return A.idToken=y,zn(g,A)}_getReauthenticationResolver(g){const y=this.buildRequest();return y.autoCreate=!1,zn(g,y)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const y={};this.idToken&&(y.id_token=this.idToken),this.accessToken&&(y.access_token=this.accessToken),this.secret&&(y.oauth_token_secret=this.secret),y.providerId=this.providerId,this.nonce&&!this.pendingToken&&(y.nonce=this.nonce),g.postBody=(0,Z.xO)(y)}return g}}function We(w,g){return lt.apply(this,arguments)}function lt(){return(lt=(0,u.Z)(function*(w,g){return Zt(w,"POST","/v1/accounts:sendVerificationCode",ft(w,g))})).apply(this,arguments)}function zt(){return(zt=(0,u.Z)(function*(w,g){return tn(w,"POST","/v1/accounts:signInWithPhoneNumber",ft(w,g))})).apply(this,arguments)}function Sr(){return(Sr=(0,u.Z)(function*(w,g){const y=yield tn(w,"POST","/v1/accounts:signInWithPhoneNumber",ft(w,g));if(y.temporaryProof)throw Yn(w,"account-exists-with-different-credential",y);return y})).apply(this,arguments)}const ii={USER_NOT_FOUND:"user-not-found"};function Zr(){return(Zr=(0,u.Z)(function*(w,g){return tn(w,"POST","/v1/accounts:signInWithPhoneNumber",ft(w,Object.assign(Object.assign({},g),{operation:"REAUTH"})),ii)})).apply(this,arguments)}class Ji extends dr{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,y){return new Ji({verificationId:g,verificationCode:y})}static _fromTokenResponse(g,y){return new Ji({phoneNumber:g,temporaryProof:y})}_getIdTokenResponse(g){return function Ot(w,g){return zt.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,y){return function rn(w,g){return Sr.apply(this,arguments)}(g,Object.assign({idToken:y},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function Xn(w,g){return Zr.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:y,verificationId:A,verificationCode:q}=this.params;return g&&y?{temporaryProof:g,phoneNumber:y}:{sessionInfo:A,code:q}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:y,verificationCode:A,phoneNumber:q,temporaryProof:fe}=g;return A||y||q||fe?new Ji({verificationId:y,verificationCode:A,phoneNumber:q,temporaryProof:fe}):null}}class ki{constructor(g){var y,A,q,fe,et,xt;const sn=(0,Z.zd)((0,Z.pd)(g)),un=null!==(y=sn.apiKey)&&void 0!==y?y:null,Zn=null!==(A=sn.oobCode)&&void 0!==A?A:null,Gn=function hs(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(q=sn.mode)&&void 0!==q?q:null);qe(un&&Zn&&Gn,"argument-error"),this.apiKey=un,this.operation=Gn,this.code=Zn,this.continueUrl=null!==(fe=sn.continueUrl)&&void 0!==fe?fe:null,this.languageCode=null!==(et=sn.languageCode)&&void 0!==et?et:null,this.tenantId=null!==(xt=sn.tenantId)&&void 0!==xt?xt:null}static parseLink(g){const y=function Js(w){const g=(0,Z.zd)((0,Z.pd)(w)).link,y=g?(0,Z.zd)((0,Z.pd)(g)).deep_link_id:null,A=(0,Z.zd)((0,Z.pd)(w)).deep_link_id;return(A?(0,Z.zd)((0,Z.pd)(A)).link:null)||A||y||g||w}(g);try{return new ki(y)}catch(A){return null}}}let ls=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(y,A){return Tn._fromEmailAndPassword(y,A)}static credentialWithLink(y,A){const q=ki.parseLink(A);return qe(q,"argument-error"),Tn._fromEmailAndCode(y,q.code,q.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class Hs{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class xi extends Hs{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class us extends xi{static credentialFromJSON(g){const y="string"==typeof g?JSON.parse(g):g;return qe("providerId"in y&&"signInMethod"in y,"argument-error"),ze._fromParams(y)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return qe(g.idToken||g.accessToken,"argument-error"),ze._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return us.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return us.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:y,oauthAccessToken:A,oauthTokenSecret:q,pendingToken:fe,nonce:et,providerId:xt}=g;if(!A&&!q&&!y&&!fe||!xt)return null;try{return new us(xt)._credential({idToken:y,accessToken:A,nonce:et,pendingToken:fe})}catch(sn){return null}}}let vs=(()=>{class w extends xi{constructor(){super("facebook.com")}static credential(y){return ze._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return w.credential(y.oauthAccessToken)}catch(A){return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),si=(()=>{class w extends xi{constructor(){super("google.com"),this.addScope("profile")}static credential(y,A){return ze._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:y,accessToken:A})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthIdToken:A,oauthAccessToken:q}=y;if(!A&&!q)return null;try{return w.credential(A,q)}catch(fe){return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),uo=(()=>{class w extends xi{constructor(){super("github.com")}static credential(y){return ze._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return w.credential(y.oauthAccessToken)}catch(A){return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class Gs extends dr{constructor(g,y){super(g,g),this.pendingToken=y}_getIdTokenResponse(g){return zn(g,this.buildRequest())}_linkToIdToken(g,y){const A=this.buildRequest();return A.idToken=y,zn(g,A)}_getReauthenticationResolver(g){const y=this.buildRequest();return y.autoCreate=!1,zn(g,y)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g,{providerId:A,signInMethod:q,pendingToken:fe}=y;return A&&q&&fe&&A===q?new Gs(A,fe):null}static _create(g,y){return new Gs(g,y)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class es extends Hs{constructor(g){qe(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return es.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return es.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const y=Gs.fromJSON(g);return qe(y,"argument-error"),y}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:y,providerId:A}=g;if(!y||!A)return null;try{return Gs._create(A,y)}catch(q){return null}}}let Do=(()=>{class w extends xi{constructor(){super("twitter.com")}static credential(y,A){return ze._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:y,oauthTokenSecret:A})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthAccessToken:A,oauthTokenSecret:q}=y;if(!A||!q)return null;try{return w.credential(A,q)}catch(fe){return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function $i(w,g){return $r.apply(this,arguments)}function $r(){return($r=(0,u.Z)(function*(w,g){return tn(w,"POST","/v1/accounts:signUp",ft(w,g))})).apply(this,arguments)}class Qr{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,y,A,q=!1){return(0,u.Z)(function*(){const fe=yield Fe._fromIdTokenResponse(g,A,q),et=Ps(A);return new Qr({user:fe,providerId:et,_tokenResponse:A,operationType:y})})()}static _forOperation(g,y,A){return(0,u.Z)(function*(){yield g._updateTokensIfNecessary(A,!0);const q=Ps(A);return new Qr({user:g,providerId:q,_tokenResponse:A,operationType:y})})()}}function Ps(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function cs(){return(cs=(0,u.Z)(function*(w){var g;const y=Mt(w);if(yield y._initializationPromise,null===(g=y.currentUser)||void 0===g?void 0:g.isAnonymous)return new Qr({user:y.currentUser,providerId:null,operationType:"signIn"});const A=yield $i(y,{returnSecureToken:!0}),q=yield Qr._fromIdTokenResponse(y,"signIn",A,!0);return yield y._updateCurrentUser(q.user),q})).apply(this,arguments)}class zs extends Z.ZR{constructor(g,y,A,q){var fe;super(y.code,y.message),this.operationType=A,this.user=q,Object.setPrototypeOf(this,zs.prototype),this.customData={appName:g.name,tenantId:null!==(fe=g.tenantId)&&void 0!==fe?fe:void 0,_serverResponse:y.customData._serverResponse,operationType:A}}static _fromErrorAndOperation(g,y,A,q){return new zs(g,y,A,q)}}function Ss(w,g,y,A){return("reauthenticate"===g?y._getReauthenticationResolver(w):y._getIdTokenResponse(w)).catch(fe=>{throw"auth/multi-factor-auth-required"===fe.code?zs._fromErrorAndOperation(w,fe,g,A):fe})}function Ei(w){return new Set(w.map(({providerId:g})=>g).filter(g=>!!g))}function Fo(){return(Fo=(0,u.Z)(function*(w,g){const y=(0,Z.m9)(w);yield ee(!0,y,g);const{providerUserInfo:A}=yield Hr(y.auth,{idToken:yield y.getIdToken(),deleteProvider:[g]}),q=Ei(A||[]);return y.providerData=y.providerData.filter(fe=>q.has(fe.providerId)),q.has("phone")||(y.phoneNumber=null),yield y.auth._persistUserIfCurrent(y),y})).apply(this,arguments)}function wr(w,g){return B.apply(this,arguments)}function B(){return(B=(0,u.Z)(function*(w,g,y=!1){const A=yield jr(w,g._linkToIdToken(w.auth,yield w.getIdToken()),y);return Qr._forOperation(w,"link",A)})).apply(this,arguments)}function ee(w,g,y){return $.apply(this,arguments)}function $(){return($=(0,u.Z)(function*(w,g,y){yield Nr(g);const q=!1===w?"provider-already-linked":"no-such-provider";qe(Ei(g.providerData).has(y)===w,g.auth,q)})).apply(this,arguments)}function ce(w,g){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,u.Z)(function*(w,g,y=!1){const{auth:A}=w,q="reauthenticate";try{const fe=yield jr(w,Ss(A,q,g,w),y);qe(fe.idToken,A,"internal-error");const et=hn(fe.idToken);qe(et,A,"internal-error");const{sub:xt}=et;return qe(w.uid===xt,A,"user-mismatch"),Qr._forOperation(w,q,fe)}catch(fe){throw"auth/user-not-found"===(null==fe?void 0:fe.code)&&ot(A,"user-mismatch"),fe}})).apply(this,arguments)}function mt(w,g){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,u.Z)(function*(w,g,y=!1){const A="signIn",q=yield Ss(w,A,g),fe=yield Qr._fromIdTokenResponse(w,A,q);return y||(yield w._updateCurrentUser(fe.user)),fe})).apply(this,arguments)}function Yt(w,g){return zr.apply(this,arguments)}function zr(){return(zr=(0,u.Z)(function*(w,g){return mt(Mt(w),g)})).apply(this,arguments)}function Ir(w,g){return or.apply(this,arguments)}function or(){return(or=(0,u.Z)(function*(w,g){const y=(0,Z.m9)(w);return yield ee(!1,y,g.providerId),wr(y,g)})).apply(this,arguments)}function _r(w,g){return fi.apply(this,arguments)}function fi(){return(fi=(0,u.Z)(function*(w,g){return ce((0,Z.m9)(w),g)})).apply(this,arguments)}function Xr(w,g){return ui.apply(this,arguments)}function ui(){return(ui=(0,u.Z)(function*(w,g){return tn(w,"POST","/v1/accounts:signInWithCustomToken",ft(w,g))})).apply(this,arguments)}function rs(){return(rs=(0,u.Z)(function*(w,g){const y=Mt(w),A=yield Xr(y,{token:g,returnSecureToken:!0}),q=yield Qr._fromIdTokenResponse(y,"signIn",A);return yield y._updateCurrentUser(q.user),q})).apply(this,arguments)}class On{constructor(g,y){this.factorId=g,this.uid=y.mfaEnrollmentId,this.enrollmentTime=new Date(y.enrolledAt).toUTCString(),this.displayName=y.displayName}static _fromServerResponse(g,y){return"phoneInfo"in y?fs._fromServerResponse(g,y):ot(g,"internal-error")}}class fs extends On{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,y){return new fs(y)}}function G(w,g,y){var A;qe((null===(A=y.url)||void 0===A?void 0:A.length)>0,w,"invalid-continue-uri"),qe(void 0===y.dynamicLinkDomain||y.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),g.continueUrl=y.url,g.dynamicLinkDomain=y.dynamicLinkDomain,g.canHandleCodeInApp=y.handleCodeInApp,y.iOS&&(qe(y.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),g.iOSBundleId=y.iOS.bundleId),y.android&&(qe(y.android.packageName.length>0,w,"missing-android-pkg-name"),g.androidInstallApp=y.android.installApp,g.androidMinimumVersionCode=y.android.minimumVersion,g.androidPackageName=y.android.packageName)}function P(){return(P=(0,u.Z)(function*(w,g,y){const A=(0,Z.m9)(w),q={requestType:"PASSWORD_RESET",email:g};y&&G(A,q,y),yield le(A,q)})).apply(this,arguments)}function v(){return(v=(0,u.Z)(function*(w,g,y){yield Br((0,Z.m9)(w),{oobCode:g,newPassword:y})})).apply(this,arguments)}function E(){return(E=(0,u.Z)(function*(w,g){yield Qi((0,Z.m9)(w),{oobCode:g})})).apply(this,arguments)}function F(w,g){return ue.apply(this,arguments)}function ue(){return(ue=(0,u.Z)(function*(w,g){const y=(0,Z.m9)(w),A=yield Br(y,{oobCode:g}),q=A.requestType;switch(qe(q,y,"internal-error"),q){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":qe(A.newEmail,y,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":qe(A.mfaInfo,y,"internal-error");default:qe(A.email,y,"internal-error")}let fe=null;return A.mfaInfo&&(fe=On._fromServerResponse(Mt(y),A.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===A.requestType?A.newEmail:A.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===A.requestType?A.email:A.newEmail)||null,multiFactorInfo:fe},operation:q}})).apply(this,arguments)}function Kt(){return(Kt=(0,u.Z)(function*(w,g){const{data:y}=yield F((0,Z.m9)(w),g);return y.email})).apply(this,arguments)}function Nn(){return(Nn=(0,u.Z)(function*(w,g,y){const A=Mt(w),q=yield $i(A,{returnSecureToken:!0,email:g,password:y}),fe=yield Qr._fromIdTokenResponse(A,"signIn",q);return yield A._updateCurrentUser(fe.user),fe})).apply(this,arguments)}function wi(){return(wi=(0,u.Z)(function*(w,g,y){const A=(0,Z.m9)(w),q={requestType:"EMAIL_SIGNIN",email:g};qe(y.handleCodeInApp,A,"argument-error"),y&&G(A,q,y),yield He(A,q)})).apply(this,arguments)}function ts(){return(ts=(0,u.Z)(function*(w,g,y){const A=(0,Z.m9)(w),q=ls.credentialWithLink(g,y||Ut());return qe(q._tenantId===(A.tenantId||null),A,"tenant-id-mismatch"),Yt(A,q)})).apply(this,arguments)}function ei(w,g){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,u.Z)(function*(w,g){return Zt(w,"POST","/v1/accounts:createAuthUri",ft(w,g))})).apply(this,arguments)}function Qo(){return(Qo=(0,u.Z)(function*(w,g){const A={identifier:g,continueUri:Xt()?Ut():"http://localhost"},{signinMethods:q}=yield ei((0,Z.m9)(w),A);return q||[]})).apply(this,arguments)}function ba(){return(ba=(0,u.Z)(function*(w,g){const y=(0,Z.m9)(w),q={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};g&&G(y.auth,q,g);const{email:fe}=yield Q(y.auth,q);fe!==w.email&&(yield w.reload())})).apply(this,arguments)}function Ui(){return(Ui=(0,u.Z)(function*(w,g,y){const A=(0,Z.m9)(w),fe={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:g};y&&G(A.auth,fe,y);const{email:et}=yield bt(A.auth,fe);et!==w.email&&(yield w.reload())})).apply(this,arguments)}function Tl(w,g){return La.apply(this,arguments)}function La(){return(La=(0,u.Z)(function*(w,g){return Zt(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Va(){return(Va=(0,u.Z)(function*(w,{displayName:g,photoURL:y}){if(void 0===g&&void 0===y)return;const A=(0,Z.m9)(w),fe={idToken:yield A.getIdToken(),displayName:g,photoUrl:y,returnSecureToken:!0},et=yield jr(A,Tl(A.auth,fe));A.displayName=et.displayName||null,A.photoURL=et.photoUrl||null;const xt=A.providerData.find(({providerId:sn})=>"password"===sn);xt&&(xt.displayName=A.displayName,xt.photoURL=A.photoURL),yield A._updateTokensIfNecessary(et)})).apply(this,arguments)}function Ba(w,g,y){return sa.apply(this,arguments)}function sa(){return(sa=(0,u.Z)(function*(w,g,y){const{auth:A}=w,fe={idToken:yield w.getIdToken(),returnSecureToken:!0};g&&(fe.email=g),y&&(fe.password=y);const et=yield jr(w,Ln(A,fe));yield w._updateTokensIfNecessary(et,!0)})).apply(this,arguments)}class Lo{constructor(g,y,A={}){this.isNewUser=g,this.providerId=y,this.profile=A}}class To extends Lo{constructor(g,y,A,q){super(g,y,A),this.username=q}}class oa extends Lo{constructor(g,y){super(g,"facebook.com",y)}}class aa extends To{constructor(g,y){super(g,"github.com",y,"string"==typeof(null==y?void 0:y.login)?null==y?void 0:y.login:null)}}class nl extends Lo{constructor(g,y){super(g,"google.com",y)}}class kr extends To{constructor(g,y,A){super(g,"twitter.com",y,A)}}function hr(w){const{user:g,_tokenResponse:y}=w;return g.isAnonymous&&!y?{providerId:null,isNewUser:!1,profile:null}:function $a(w){var g,y;if(!w)return null;const{providerId:A}=w,q=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},fe=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!A&&(null==w?void 0:w.idToken)){const et=null===(y=null===(g=hn(w.idToken))||void 0===g?void 0:g.firebase)||void 0===y?void 0:y.sign_in_provider;if(et)return new Lo(fe,"anonymous"!==et&&"custom"!==et?et:null)}if(!A)return null;switch(A){case"facebook.com":return new oa(fe,q);case"github.com":return new aa(fe,q);case"google.com":return new nl(fe,q);case"twitter.com":return new kr(fe,q,w.screenName||null);case"custom":case"anonymous":return new Lo(fe,null);default:return new Lo(fe,A,q)}}(y)}class ar{constructor(g,y){this.type=g,this.credential=y}static _fromIdtoken(g){return new ar("enroll",g)}static _fromMfaPendingCredential(g){return new ar("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var y,A;if(null==g?void 0:g.multiFactorSession){if(null===(y=g.multiFactorSession)||void 0===y?void 0:y.pendingCredential)return ar._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null===(A=g.multiFactorSession)||void 0===A?void 0:A.idToken)return ar._fromIdtoken(g.multiFactorSession.idToken)}return null}}class qi{constructor(g,y,A){this.session=g,this.hints=y,this.signInResolver=A}static _fromError(g,y){const A=Mt(g),q=y.customData._serverResponse,fe=(q.mfaInfo||[]).map(xt=>On._fromServerResponse(A,xt));qe(q.mfaPendingCredential,A,"internal-error");const et=ar._fromMfaPendingCredential(q.mfaPendingCredential);return new qi(et,fe,function(){var xt=(0,u.Z)(function*(sn){const un=yield sn._process(A,et);delete q.mfaInfo,delete q.mfaPendingCredential;const Zn=Object.assign(Object.assign({},q),{idToken:un.idToken,refreshToken:un.refreshToken});switch(y.operationType){case"signIn":const Gn=yield Qr._fromIdTokenResponse(A,y.operationType,Zn);return yield A._updateCurrentUser(Gn.user),Gn;case"reauthenticate":return qe(y.user,A,"internal-error"),Qr._forOperation(y.user,y.operationType,Zn);default:ot(A,"internal-error")}});return function(sn){return xt.apply(this,arguments)}}())}resolveSignIn(g){var y=this;return(0,u.Z)(function*(){return y.signInResolver(g)})()}}function Yi(w,g){return Zt(w,"POST","/v2/accounts/mfaEnrollment:start",ft(w,g))}class So{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(y=>{y.mfaInfo&&(this.enrolledFactors=y.mfaInfo.map(A=>On._fromServerResponse(g.auth,A)))})}static _fromUser(g){return new So(g)}getSession(){var g=this;return(0,u.Z)(function*(){return ar._fromIdtoken(yield g.user.getIdToken())})()}enroll(g,y){var A=this;return(0,u.Z)(function*(){const q=g,fe=yield A.getSession(),et=yield jr(A.user,q._process(A.user.auth,fe,y));return yield A.user._updateTokensIfNecessary(et),A.user.reload()})()}unenroll(g){var y=this;return(0,u.Z)(function*(){const A="string"==typeof g?g:g.uid,q=yield y.user.getIdToken(),fe=yield jr(y.user,function xl(w,g){return Zt(w,"POST","/v2/accounts/mfaEnrollment:withdraw",ft(w,g))}(y.user.auth,{idToken:q,mfaEnrollmentId:A}));y.enrolledFactors=y.enrolledFactors.filter(({uid:et})=>et!==A),yield y.user._updateTokensIfNecessary(fe);try{yield y.user.reload()}catch(et){if("auth/user-token-expired"!==et.code)throw et}})()}}const Jo=new WeakMap,Ao="__sak";class ji{constructor(g,y){this.storageRetriever=g,this.type=y}_isAvailable(){try{return this.storage?(this.storage.setItem(Ao,"1"),this.storage.removeItem(Ao),Promise.resolve(!0)):Promise.resolve(!1)}catch(g){return Promise.resolve(!1)}}_set(g,y){return this.storage.setItem(g,JSON.stringify(y)),Promise.resolve()}_get(g){const y=this.storage.getItem(g);return Promise.resolve(y?JSON.parse(y):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const is=(()=>{class w extends ji{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(y,A)=>this.onStorageEvent(y,A),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function ua(){const w=(0,Z.z$)();return Qn(w)||Rr(w)}()&&function Or(){try{return!(!window||window===window.top)}catch(w){return!1}}(),this.fallbackToPolling=Mr(),this._shouldAllowMigration=!0}forAllChangedKeys(y){for(const A of Object.keys(this.listeners)){const q=this.storage.getItem(A),fe=this.localCache[A];q!==fe&&y(A,fe,q)}}onStorageEvent(y,A=!1){if(!y.key)return void this.forAllChangedKeys((xt,sn,un)=>{this.notifyListeners(xt,un)});const q=y.key;if(A?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const xt=this.storage.getItem(q);if(y.newValue!==xt)null!==y.newValue?this.storage.setItem(q,y.newValue):this.storage.removeItem(q);else if(this.localCache[q]===y.newValue&&!A)return}const fe=()=>{const xt=this.storage.getItem(q);!A&&this.localCache[q]===xt||this.notifyListeners(q,xt)},et=this.storage.getItem(q);!function as(){return(0,Z.w1)()&&10===document.documentMode}()||et===y.newValue||y.newValue===y.oldValue?fe():setTimeout(fe,10)}notifyListeners(y,A){this.localCache[y]=A;const q=this.listeners[y];if(q)for(const fe of Array.from(q))fe(A&&JSON.parse(A))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((y,A,q)=>{this.onStorageEvent(new StorageEvent("storage",{key:y,oldValue:A,newValue:q}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(y,A){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[y]||(this.listeners[y]=new Set,this.localCache[y]=this.storage.getItem(y)),this.listeners[y].add(A)}_removeListener(y,A){this.listeners[y]&&(this.listeners[y].delete(A),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(y,A){var q=()=>super._set,fe=this;return(0,u.Z)(function*(){yield q().call(fe,y,A),fe.localCache[y]=JSON.stringify(A)})()}_get(y){var A=()=>super._get,q=this;return(0,u.Z)(function*(){const fe=yield A().call(q,y);return q.localCache[y]=JSON.stringify(fe),fe})()}_remove(y){var A=()=>super._remove,q=this;return(0,u.Z)(function*(){yield A().call(q,y),delete q.localCache[y]})()}}return w.type="LOCAL",w})(),no=(()=>{class w extends ji{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(y,A){}_removeListener(y,A){}}return w.type="SESSION",w})();let _o=(()=>{class w{constructor(y){this.eventTarget=y,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(y){const A=this.receivers.find(fe=>fe.isListeningto(y));if(A)return A;const q=new w(y);return this.receivers.push(q),q}isListeningto(y){return this.eventTarget===y}handleEvent(y){var A=this;return(0,u.Z)(function*(){const q=y,{eventId:fe,eventType:et,data:xt}=q.data,sn=A.handlersMap[et];if(!(null==sn?void 0:sn.size))return;q.ports[0].postMessage({status:"ack",eventId:fe,eventType:et});const un=Array.from(sn).map(function(){var Gn=(0,u.Z)(function*(os){return os(q.origin,xt)});return function(os){return Gn.apply(this,arguments)}}()),Zn=yield function rl(w){return Promise.all(w.map(function(){var g=(0,u.Z)(function*(y){try{return{fulfilled:!0,value:yield y}}catch(A){return{fulfilled:!1,reason:A}}});return function(y){return g.apply(this,arguments)}}()))}(un);q.ports[0].postMessage({status:"done",eventId:fe,eventType:et,response:Zn})})()}_subscribe(y,A){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[y]||(this.handlersMap[y]=new Set),this.handlersMap[y].add(A)}_unsubscribe(y,A){this.handlersMap[y]&&A&&this.handlersMap[y].delete(A),(!A||0===this.handlersMap[y].size)&&delete this.handlersMap[y],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function gr(w="",g=10){let y="";for(let A=0;A<g;A++)y+=Math.floor(10*Math.random());return w+y}class Ua{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,y,A=50){var q=this;return(0,u.Z)(function*(){const fe="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!fe)throw new Error("connection_unavailable");let et,xt;return new Promise((sn,un)=>{const Zn=gr("",20);fe.port1.start();const Gn=setTimeout(()=>{un(new Error("unsupported_event"))},A);xt={messageChannel:fe,onMessage(os){const Go=os;if(Go.data.eventId===Zn)switch(Go.data.status){case"ack":clearTimeout(Gn),et=setTimeout(()=>{un(new Error("timeout"))},3e3);break;case"done":clearTimeout(et),sn(Go.data.response);break;default:clearTimeout(Gn),clearTimeout(et),un(new Error("invalid_response"))}}},q.handlers.add(xt),fe.port1.addEventListener("message",xt.onMessage),q.target.postMessage({eventType:g,eventId:Zn,data:y},[fe.port2])}).finally(()=>{xt&&q.removeMessageHandler(xt)})})()}}function di(){return window}function Fi(){return void 0!==di().WorkerGlobalScope&&"function"==typeof di().importScripts}function ws(){return(ws=(0,u.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(w){return null}})).apply(this,arguments)}const ca="firebaseLocalStorageDb",$o="firebaseLocalStorage",Ia="fbase_key";class Wt{constructor(g){this.request=g}toPromise(){return new Promise((g,y)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{y(this.request.error)})})}}function Mi(w,g){return w.transaction([$o],g?"readwrite":"readonly").objectStore($o)}function ks(){const w=indexedDB.open(ca,1);return new Promise((g,y)=>{w.addEventListener("error",()=>{y(w.error)}),w.addEventListener("upgradeneeded",()=>{const A=w.result;try{A.createObjectStore($o,{keyPath:Ia})}catch(q){y(q)}}),w.addEventListener("success",(0,u.Z)(function*(){const A=w.result;A.objectStoreNames.contains($o)?g(A):(A.close(),yield function As(){const w=indexedDB.deleteDatabase(ca);return new Wt(w).toPromise()}(),g(yield ks()))}))})}function Sn(w,g,y){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,u.Z)(function*(w,g,y){const A=Mi(w,!0).put({[Ia]:g,value:y});return new Wt(A).toPromise()})).apply(this,arguments)}function cn(){return(cn=(0,u.Z)(function*(w,g){const y=Mi(w,!1).get(g),A=yield new Wt(y).toPromise();return void 0===A?null:A.value})).apply(this,arguments)}function Dt(w,g){const y=Mi(w,!0).delete(g);return new Wt(y).toPromise()}const V=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var y=this;return(0,u.Z)(function*(){return y.db||(y.db=yield ks()),y.db})()}_withRetries(y){var A=this;return(0,u.Z)(function*(){let q=0;for(;;)try{const fe=yield A._openDb();return yield y(fe)}catch(fe){if(q++>3)throw fe;A.db&&(A.db.close(),A.db=void 0)}})()}initializeServiceWorkerMessaging(){var y=this;return(0,u.Z)(function*(){return Fi()?y.initializeReceiver():y.initializeSender()})()}initializeReceiver(){var y=this;return(0,u.Z)(function*(){y.receiver=_o._getInstance(function hi(){return Fi()?self:null}()),y.receiver._subscribe("keyChanged",function(){var A=(0,u.Z)(function*(q,fe){return{keyProcessed:(yield y._poll()).includes(fe.key)}});return function(q,fe){return A.apply(this,arguments)}}()),y.receiver._subscribe("ping",function(){var A=(0,u.Z)(function*(q,fe){return["keyChanged"]});return function(q,fe){return A.apply(this,arguments)}}())})()}initializeSender(){var y=this;return(0,u.Z)(function*(){var A,q;if(y.activeServiceWorker=yield function xo(){return ws.apply(this,arguments)}(),!y.activeServiceWorker)return;y.sender=new Ua(y.activeServiceWorker);const fe=yield y.sender._send("ping",{},800);!fe||(null===(A=fe[0])||void 0===A?void 0:A.fulfilled)&&(null===(q=fe[0])||void 0===q?void 0:q.value.includes("keyChanged"))&&(y.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(y){var A=this;return(0,u.Z)(function*(){if(A.sender&&A.activeServiceWorker&&function Gu(){var w;return(null===(w=null==navigator?void 0:navigator.serviceWorker)||void 0===w?void 0:w.controller)||null}()===A.activeServiceWorker)try{yield A.sender._send("keyChanged",{key:y},A.serviceWorkerReceiverAvailable?800:50)}catch(q){}})()}_isAvailable(){return(0,u.Z)(function*(){try{if(!indexedDB)return!1;const y=yield ks();return yield Sn(y,Ao,"1"),yield Dt(y,Ao),!0}catch(y){}return!1})()}_withPendingWrite(y){var A=this;return(0,u.Z)(function*(){A.pendingWrites++;try{yield y()}finally{A.pendingWrites--}})()}_set(y,A){var q=this;return(0,u.Z)(function*(){return q._withPendingWrite((0,u.Z)(function*(){return yield q._withRetries(fe=>Sn(fe,y,A)),q.localCache[y]=A,q.notifyServiceWorker(y)}))})()}_get(y){var A=this;return(0,u.Z)(function*(){const q=yield A._withRetries(fe=>function Rl(w,g){return cn.apply(this,arguments)}(fe,y));return A.localCache[y]=q,q})()}_remove(y){var A=this;return(0,u.Z)(function*(){return A._withPendingWrite((0,u.Z)(function*(){return yield A._withRetries(q=>Dt(q,y)),delete A.localCache[y],A.notifyServiceWorker(y)}))})()}_poll(){var y=this;return(0,u.Z)(function*(){const A=yield y._withRetries(et=>{const xt=Mi(et,!1).getAll();return new Wt(xt).toPromise()});if(!A)return[];if(0!==y.pendingWrites)return[];const q=[],fe=new Set;for(const{fbase_key:et,value:xt}of A)fe.add(et),JSON.stringify(y.localCache[et])!==JSON.stringify(xt)&&(y.notifyListeners(et,xt),q.push(et));for(const et of Object.keys(y.localCache))y.localCache[et]&&!fe.has(et)&&(y.notifyListeners(et,null),q.push(et));return q})()}notifyListeners(y,A){this.localCache[y]=A;const q=this.listeners[y];if(q)for(const fe of Array.from(q))fe(A)}startPolling(){var y=this;this.stopPolling(),this.pollTimer=setInterval((0,u.Z)(function*(){return y._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(y,A){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[y]||(this.listeners[y]=new Set,this._get(y)),this.listeners[y].add(A)}_removeListener(y,A){this.listeners[y]&&(this.listeners[y].delete(A),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})();function W(w,g){return Zt(w,"POST","/v2/accounts/mfaSignIn:start",ft(w,g))}function $e(){return($e=(0,u.Z)(function*(w){return(yield Zt(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function vn(w){return new Promise((g,y)=>{const A=document.createElement("script");A.setAttribute("src",w),A.onload=g,A.onerror=q=>{const fe=Le("internal-error");fe.customData=q,y(fe)},A.type="text/javascript",A.charset="UTF-8",function gt(){var w,g;return null!==(g=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==g?g:document}().appendChild(A)})}function Dr(w){return`__${w}${Math.floor(1e6*Math.random())}`}const Cr=1e12;class fr{constructor(g){this.auth=g,this.counter=Cr,this._widgets=new Map}render(g,y){const A=this.counter;return this._widgets.set(A,new Fs(g,this.auth.name,y||{})),this.counter++,A}reset(g){var y;const A=g||Cr;null===(y=this._widgets.get(A))||void 0===y||y.delete(),this._widgets.delete(A)}getResponse(g){var y;return(null===(y=this._widgets.get(g||Cr))||void 0===y?void 0:y.getResponse())||""}execute(g){var y=this;return(0,u.Z)(function*(){var A;return null===(A=y._widgets.get(g||Cr))||void 0===A||A.execute(),""})()}}class Fs{constructor(g,y,A){this.params=A,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const q="string"==typeof g?document.getElementById(g):g;qe(q,"argument-error",{appName:y}),this.container=q,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function ro(w){const g=[],y="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let A=0;A<w;A++)g.push(y.charAt(Math.floor(Math.random()*y.length)));return g.join("")}(50);const{callback:g,"expired-callback":y}=this.params;if(g)try{g(this.responseToken)}catch(A){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,y)try{y()}catch(A){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Ii=Dr("rcb"),qn=new nt(3e4,6e4);class Ol{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!di().grecaptcha}load(g,y=""){return qe(function vd(w){return w.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w)}(y),g,"argument-error"),this.shouldResolveImmediately(y)?Promise.resolve(di().grecaptcha):new Promise((A,q)=>{const fe=di().setTimeout(()=>{q(Le(g,"network-request-failed"))},qn.get());di()[Ii]=()=>{di().clearTimeout(fe),delete di()[Ii];const xt=di().grecaptcha;if(!xt)return void q(Le(g,"internal-error"));const sn=xt.render;xt.render=(un,Zn)=>{const Gn=sn(un,Zn);return this.counter++,Gn},this.hostLanguage=y,A(xt)},vn(`https://www.google.com/recaptcha/api.js??${(0,Z.xO)({onload:Ii,render:"explicit",hl:y})}`).catch(()=>{clearTimeout(fe),q(Le(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){return!!di().grecaptcha&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Zl{load(g){return(0,u.Z)(function*(){return new fr(g)})()}clearedOneInstance(){}}const Wr="recaptcha",Pl={theme:"light",type:"image"};class ps{constructor(g,y=Object.assign({},Pl),A){this.parameters=y,this.type=Wr,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Mt(A),this.isInvisible="invisible"===this.parameters.size,qe("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const q="string"==typeof g?document.getElementById(g):g;qe(q,this.auth,"argument-error"),this.container=q,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Zl:new Ol,this.validateStartingState()}verify(){var g=this;return(0,u.Z)(function*(){g.assertNotDestroyed();const y=yield g.render(),A=g.getAssertedRecaptcha();return A.getResponse(y)||new Promise(fe=>{const et=xt=>{!xt||(g.tokenChangeListeners.delete(et),fe(xt))};g.tokenChangeListeners.add(et),g.isInvisible&&A.execute(y)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){qe(!this.parameters.sitekey,this.auth,"argument-error"),qe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),qe("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return y=>{if(this.tokenChangeListeners.forEach(A=>A(y)),"function"==typeof g)g(y);else if("string"==typeof g){const A=di()[g];"function"==typeof A&&A(y)}}}assertNotDestroyed(){qe(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,u.Z)(function*(){if(yield g.init(),!g.widgetId){let y=g.container;if(!g.isInvisible){const A=document.createElement("div");y.appendChild(A),y=A}g.widgetId=g.getAssertedRecaptcha().render(y,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,u.Z)(function*(){qe(Xt()&&!Fi(),g.auth,"internal-error"),yield function Ca(){let w=null;return new Promise(g=>{"complete"!==document.readyState?(w=()=>g(),window.addEventListener("load",w)):g()}).catch(g=>{throw w&&window.removeEventListener("load",w),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const y=yield function Ae(w){return $e.apply(this,arguments)}(g.auth);qe(y,g.auth,"internal-error"),g.parameters.sitekey=y})()}getAssertedRecaptcha(){return qe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class il{constructor(g,y){this.verificationId=g,this.onConfirmation=y}confirm(g){const y=Ji._fromVerification(this.verificationId,g);return this.onConfirmation(y)}}function Ki(){return(Ki=(0,u.Z)(function*(w,g,y){const A=Mt(w),q=yield Ls(A,g,(0,Z.m9)(y));return new il(q,fe=>Yt(A,fe))})).apply(this,arguments)}function vi(){return(vi=(0,u.Z)(function*(w,g,y){const A=(0,Z.m9)(w);yield ee(!1,A,"phone");const q=yield Ls(A.auth,g,(0,Z.m9)(y));return new il(q,fe=>Ir(A,fe))})).apply(this,arguments)}function sl(){return(sl=(0,u.Z)(function*(w,g,y){const A=(0,Z.m9)(w),q=yield Ls(A.auth,g,(0,Z.m9)(y));return new il(q,fe=>_r(A,fe))})).apply(this,arguments)}function Ls(w,g,y){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,u.Z)(function*(w,g,y){var A;const q=yield y.verify();try{let fe;if(qe("string"==typeof q,w,"argument-error"),qe(y.type===Wr,w,"argument-error"),fe="string"==typeof g?{phoneNumber:g}:g,"session"in fe){const et=fe.session;if("phoneNumber"in fe)return qe("enroll"===et.type,w,"internal-error"),(yield Yi(w,{idToken:et.credential,phoneEnrollmentInfo:{phoneNumber:fe.phoneNumber,recaptchaToken:q}})).phoneSessionInfo.sessionInfo;{qe("signin"===et.type,w,"internal-error");const xt=(null===(A=fe.multiFactorHint)||void 0===A?void 0:A.uid)||fe.multiFactorUid;return qe(xt,w,"missing-multi-factor-info"),(yield W(w,{mfaPendingCredential:et.credential,mfaEnrollmentId:xt,phoneSignInInfo:{recaptchaToken:q}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:et}=yield We(w,{phoneNumber:fe.phoneNumber,recaptchaToken:q});return et}}finally{y._reset()}})).apply(this,arguments)}function Vs(){return(Vs=(0,u.Z)(function*(w,g){yield wr((0,Z.m9)(w),g)})).apply(this,arguments)}let Ys=(()=>{class w{constructor(y){this.providerId=w.PROVIDER_ID,this.auth=Mt(y)}verifyPhoneNumber(y,A){return Ls(this.auth,y,(0,Z.m9)(A))}static credential(y,A){return Ji._fromVerification(y,A)}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{phoneNumber:A,temporaryProof:q}=y;return A&&q?Ji._fromTokenResponse(A,q):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function vo(w,g){return g?Te(g):(qe(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class bu extends dr{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return zn(g,this._buildIdpRequest())}_linkToIdToken(g,y){return zn(g,this._buildIdpRequest(y))}_getReauthenticationResolver(g){return zn(g,this._buildIdpRequest())}_buildIdpRequest(g){const y={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(y.idToken=g),y}}function dn(w){return mt(w.auth,new bu(w),w.bypassAuthState)}function wu(w){const{auth:g,user:y}=w;return qe(y,g,"internal-error"),ce(y,new bu(w),w.bypassAuthState)}function Ed(w){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,u.Z)(function*(w){const{auth:g,user:y}=w;return qe(y,g,"internal-error"),wr(y,new bu(w),w.bypassAuthState)})).apply(this,arguments)}class Ci{constructor(g,y,A,q,fe=!1){this.auth=g,this.resolver=A,this.user=q,this.bypassAuthState=fe,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(y)?y:[y]}execute(){var g=this;return new Promise(function(){var y=(0,u.Z)(function*(A,q){g.pendingPromise={resolve:A,reject:q};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(fe){g.reject(fe)}});return function(A,q){return y.apply(this,arguments)}}())}onAuthEvent(g){var y=this;return(0,u.Z)(function*(){const{urlResponse:A,sessionId:q,postBody:fe,tenantId:et,error:xt,type:sn}=g;if(xt)return void y.reject(xt);const un={auth:y.auth,requestUri:A,sessionId:q,tenantId:et||void 0,postBody:fe||void 0,user:y.user,bypassAuthState:y.bypassAuthState};try{y.resolve(yield y.getIdpTask(sn)(un))}catch(Zn){y.reject(Zn)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return dn;case"linkViaPopup":case"linkViaRedirect":return Ed;case"reauthViaPopup":case"reauthViaRedirect":return wu;default:ot(this.auth,"internal-error")}}resolve(g){Ve(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){Ve(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Da=new nt(2e3,1e4);function Ta(){return(Ta=(0,u.Z)(function*(w,g,y){const A=Mt(w);_t(w,g,Hs);const q=vo(A,y);return new Ha(A,"signInViaPopup",g,q).executeNotNull()})).apply(this,arguments)}function Uo(){return(Uo=(0,u.Z)(function*(w,g,y){const A=(0,Z.m9)(w);_t(A.auth,g,Hs);const q=vo(A.auth,y);return new Ha(A.auth,"reauthViaPopup",g,q,A).executeNotNull()})).apply(this,arguments)}function Iu(){return(Iu=(0,u.Z)(function*(w,g,y){const A=(0,Z.m9)(w);_t(A.auth,g,Hs);const q=vo(A.auth,y);return new Ha(A.auth,"linkViaPopup",g,q,A).executeNotNull()})).apply(this,arguments)}let Ha=(()=>{class w extends Ci{constructor(y,A,q,fe,et){super(y,A,fe,et),this.provider=q,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var y=this;return(0,u.Z)(function*(){const A=yield y.execute();return qe(A,y.auth,"internal-error"),A})()}onExecution(){var y=this;return(0,u.Z)(function*(){Ve(1===y.filter.length,"Popup operations only handle one event");const A=gr();y.authWindow=yield y.resolver._openPopup(y.auth,y.provider,y.filter[0],A),y.authWindow.associatedEvent=A,y.resolver._originValidation(y.auth).catch(q=>{y.reject(q)}),y.resolver._isIframeWebStorageSupported(y.auth,q=>{q||y.reject(Le(y.auth,"web-storage-unsupported"))}),y.pollUserCancellation()})()}get eventId(){var y;return(null===(y=this.authWindow)||void 0===y?void 0:y.associatedEvent)||null}cancel(){this.reject(Le(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const y=()=>{var A,q;this.pollId=(null===(q=null===(A=this.authWindow)||void 0===A?void 0:A.window)||void 0===q?void 0:q.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Le(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(y,Da.get())};y()}}return w.currentPopupAction=null,w})();const Ga=new Map;class al extends Ci{constructor(g,y,A=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],y,void 0,A),this.eventId=null}execute(){var g=()=>super.execute,y=this;return(0,u.Z)(function*(){let A=Ga.get(y.auth._key());if(!A){try{const fe=(yield function N(w,g){return z.apply(this,arguments)}(y.resolver,y.auth))?yield g().call(y):null;A=()=>Promise.resolve(fe)}catch(q){A=()=>Promise.reject(q)}Ga.set(y.auth._key(),A)}return y.bypassAuthState||Ga.set(y.auth._key(),()=>Promise.resolve(null)),A()})()}onAuthEvent(g){var y=()=>super.onAuthEvent,A=this;return(0,u.Z)(function*(){if("signInViaRedirect"===g.type)return y().call(A,g);if("unknown"!==g.type){if(g.eventId){const q=yield A.auth._redirectUserForId(g.eventId);if(q)return A.user=q,y().call(A,g);A.resolve(null)}}else A.resolve(null)})()}onExecution(){return(0,u.Z)(function*(){})()}cleanUp(){}}function z(){return(z=(0,u.Z)(function*(w,g){const y=Lt(g),A=vt(w);if(!(yield A._isAvailable()))return!1;const q="true"===(yield A._get(y));return yield A._remove(y),q})).apply(this,arguments)}function oe(w,g){return xe.apply(this,arguments)}function xe(){return(xe=(0,u.Z)(function*(w,g){return vt(w)._set(Lt(g),"true")})).apply(this,arguments)}function vt(w){return Te(w._redirectPersistence)}function Lt(w){return Et("pendingRedirect",w.config.apiKey,w.name)}function tr(){return(tr=(0,u.Z)(function*(w,g,y){const A=Mt(w);_t(w,g,Hs);const q=vo(A,y);return yield oe(q,A),q._openRedirect(A,g,"signInViaRedirect")})).apply(this,arguments)}function xs(){return(xs=(0,u.Z)(function*(w,g,y){const A=(0,Z.m9)(w);_t(A.auth,g,Hs);const q=vo(A.auth,y);yield oe(q,A.auth);const fe=yield za(A);return q._openRedirect(A.auth,g,"reauthViaRedirect",fe)})).apply(this,arguments)}function ea(){return(ea=(0,u.Z)(function*(w,g,y){const A=(0,Z.m9)(w);_t(A.auth,g,Hs);const q=vo(A.auth,y);yield ee(!1,A,g.providerId),yield oe(q,A.auth);const fe=yield za(A);return q._openRedirect(A.auth,g,"linkViaRedirect",fe)})).apply(this,arguments)}function Eo(){return(Eo=(0,u.Z)(function*(w,g){return yield Mt(w)._initializationPromise,Pr(w,g,!1)})).apply(this,arguments)}function Pr(w,g){return bo.apply(this,arguments)}function bo(){return(bo=(0,u.Z)(function*(w,g,y=!1){const A=Mt(w),q=vo(A,g),et=yield new al(A,q,y).execute();return et&&!y&&(delete et.user._redirectEventId,yield A._persistUserIfCurrent(et.user),yield A._setRedirectUser(null,g)),et})).apply(this,arguments)}function za(w){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,u.Z)(function*(w){const g=gr(`${w.uid}:::`);return w._redirectEventId=g,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),g})).apply(this,arguments)}class Ms{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let y=!1;return this.consumers.forEach(A=>{this.isEventForConsumer(g,A)&&(y=!0,this.sendToConsumer(g,A),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function ul(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return bd(w);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,y||(this.queuedRedirectEvent=g,y=!0)),y}sendToConsumer(g,y){var A;if(g.error&&!bd(g)){const q=(null===(A=g.error.code)||void 0===A?void 0:A.split("auth/")[1])||"internal-error";y.onError(Le(this.auth,q))}else y.onAuthEvent(g)}isEventForConsumer(g,y){const A=null===y.eventId||!!g.eventId&&g.eventId===y.eventId;return y.filter.includes(g.type)&&A}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ha(g))}saveEventToCache(g){this.cachedEventUids.add(ha(g)),this.lastProcessedEventTime=Date.now()}}function ha(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(g=>g).join("-")}function bd({type:w,error:g}){return"unknown"===w&&"auth/no-auth-event"===(null==g?void 0:g.code)}function Xl(w){return xa.apply(this,arguments)}function xa(){return(xa=(0,u.Z)(function*(w,g={}){return Zt(w,"GET","/v1/projects",g)})).apply(this,arguments)}const wd=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Rc=/^https?/;function Ro(){return(Ro=(0,u.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:g}=yield Xl(w);for(const y of g)try{if(Wa(y))return}catch(A){}ot(w,"unauthorized-domain")})).apply(this,arguments)}function Wa(w){const g=Ut(),{protocol:y,hostname:A}=new URL(g);if(w.startsWith("chrome-extension://")){const et=new URL(w);return""===et.hostname&&""===A?"chrome-extension:"===y&&w.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===y&&et.hostname===A}if(!Rc.test(y))return!1;if(wd.test(w))return A===w;const q=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+q+"|"+q+")$","i").test(A)}const lf=new nt(3e4,6e4);function ch(){const w=di().___jsl;if(null==w?void 0:w.H)for(const g of Object.keys(w.H))if(w.H[g].r=w.H[g].r||[],w.H[g].L=w.H[g].L||[],w.H[g].r=[...w.H[g].L],w.CP)for(let y=0;y<w.CP.length;y++)w.CP[y]=null}let fa=null;function dh(w){return fa=fa||function Id(w){return new Promise((g,y)=>{var A,q,fe;function et(){ch(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{ch(),y(Le(w,"network-request-failed"))},timeout:lf.get()})}if(null===(q=null===(A=di().gapi)||void 0===A?void 0:A.iframes)||void 0===q?void 0:q.Iframe)g(gapi.iframes.getContext());else{if(!(null===(fe=di().gapi)||void 0===fe?void 0:fe.load)){const xt=Dr("iframefcb");return di()[xt]=()=>{gapi.load?et():y(Le(w,"network-request-failed"))},vn(`https://apis.google.com/js/api.js?onload=${xt}`).catch(sn=>y(sn))}et()}}).catch(g=>{throw fa=null,g})}(w),fa}const Jl=new nt(5e3,15e3),Cu={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},zu=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Nl(w){const g=w.config;qe(g.authDomain,w,"auth-domain-config-required");const y=g.emulator?at(g,"emulator/auth/iframe"):`https://${w.config.authDomain}/__/auth/iframe`,A={apiKey:g.apiKey,appName:w.name,v:Ne.SDK_VERSION},q=zu.get(w.config.apiHost);q&&(A.eid=q);const fe=w._getFrameworks();return fe.length&&(A.fw=fe.join(",")),`${y}?${(0,Z.xO)(A).slice(1)}`}function ho(){return ho=(0,u.Z)(function*(w){const g=yield dh(w),y=di().gapi;return qe(y,w,"internal-error"),g.open({where:document.body,url:Nl(w),messageHandlersFilter:y.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Cu,dontclear:!0},A=>new Promise(function(){var q=(0,u.Z)(function*(fe,et){yield A.restyle({setHideOnLeave:!1});const xt=Le(w,"network-request-failed"),sn=di().setTimeout(()=>{et(xt)},Jl.get());function un(){di().clearTimeout(sn),fe(A)}A.ping(un).then(un,()=>{et(xt)})});return function(fe,et){return q.apply(this,arguments)}}()))}),ho.apply(this,arguments)}const Cd={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Wu{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(g){}}}function Su(w,g,y,A,q,fe){qe(w.config.authDomain,w,"auth-domain-config-required"),qe(w.config.apiKey,w,"invalid-api-key");const et={apiKey:w.config.apiKey,appName:w.name,authType:y,redirectUrl:A,v:Ne.SDK_VERSION,eventId:q};if(g instanceof Hs){g.setDefaultLanguage(w.languageCode),et.providerId=g.providerId||"",(0,Z.xb)(g.getCustomParameters())||(et.customParameters=JSON.stringify(g.getCustomParameters()));for(const[sn,un]of Object.entries(fe||{}))et[sn]=un}if(g instanceof xi){const sn=g.getScopes().filter(un=>""!==un);sn.length>0&&(et.scopes=sn.join(","))}w.tenantId&&(et.tid=w.tenantId);const xt=et;for(const sn of Object.keys(xt))void 0===xt[sn]&&delete xt[sn];return`${function Fc({config:w}){return w.emulator?at(w,"emulator/auth/handler"):`https://${w.authDomain}/__/auth/handler`}(w)}?${(0,Z.xO)(xt).slice(1)}`}const qa="webStorageSupport";class Ma extends class Au{constructor(g){this.factorId=g}_process(g,y,A){switch(y.type){case"enroll":return this._finalizeEnroll(g,y.credential,A);case"signin":return this._finalizeSignIn(g,y.credential);default:return pe("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new Ma(g)}_finalizeEnroll(g,y,A){return function qs(w,g){return Zt(w,"POST","/v2/accounts/mfaEnrollment:finalize",ft(w,g))}(g,{idToken:y,displayName:A,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,y){return function se(w,g){return Zt(w,"POST","/v2/accounts/mfaSignIn:finalize",ft(w,g))}(g,{mfaPendingCredential:y,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Sd=(()=>{class w{constructor(){}static assertion(y){return Ma._fromCredential(y)}}return w.FACTOR_ID="phone",w})();var kl="@firebase/auth",fh="0.19.11";class Fl{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var y=this;return(0,u.Z)(function*(){return y.assertAuthConfigured(),yield y.auth._initializationPromise,y.auth.currentUser?{accessToken:yield y.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const y=this.auth.onIdTokenChanged(A=>{var q;g((null===(q=A)||void 0===q?void 0:q.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,y),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const y=this.internalListeners.get(g);!y||(this.internalListeners.delete(g),y(),this.updateProactiveRefresh())}assertAuthConfigured(){qe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function tu(){return window}function dl(){return(dl=(0,u.Z)(function*(w,g,y){var A;const{BuildInfo:q}=tu();Ve(g.sessionId,"AuthEvent did not contain a session ID");const fe=yield Ku(g.sessionId),et={};return Rr()?et.ibi=q.packageName:Er()?et.apn=q.packageName:ot(w,"operation-not-supported-in-this-environment"),q.displayName&&(et.appDisplayName=q.displayName),et.sessionId=fe,Su(w,y,g.type,void 0,null!==(A=g.eventId)&&void 0!==A?A:void 0,et)})).apply(this,arguments)}function ta(){return(ta=(0,u.Z)(function*(w){const{BuildInfo:g}=tu(),y={};Rr()?y.iosBundleId=g.packageName:Er()?y.androidPackageName=g.packageName:ot(w,"operation-not-supported-in-this-environment"),yield Xl(w,y)})).apply(this,arguments)}function xu(){return(xu=(0,u.Z)(function*(w,g,y){const{cordova:A}=tu();let q=()=>{};try{yield new Promise((fe,et)=>{let xt=null;function sn(){var Gn;fe();const os=null===(Gn=A.plugins.browsertab)||void 0===Gn?void 0:Gn.close;"function"==typeof os&&os(),"function"==typeof(null==y?void 0:y.close)&&y.close()}function un(){xt||(xt=window.setTimeout(()=>{et(Le(w,"redirect-cancelled-by-user"))},2e3))}function Zn(){"visible"===(null==document?void 0:document.visibilityState)&&un()}g.addPassiveListener(sn),document.addEventListener("resume",un,!1),Er()&&document.addEventListener("visibilitychange",Zn,!1),q=()=>{g.removePassiveListener(sn),document.removeEventListener("resume",un,!1),document.removeEventListener("visibilitychange",Zn,!1),xt&&window.clearTimeout(xt)}})}finally{q()}})).apply(this,arguments)}function Ku(w){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,u.Z)(function*(w){const g=gh(w),y=yield crypto.subtle.digest("SHA-256",g);return Array.from(new Uint8Array(y)).map(q=>q.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function gh(w){if(Ve(/[0-9a-zA-Z]+/.test(w),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(w);const g=new ArrayBuffer(w.length),y=new Uint8Array(g);for(let A=0;A<w.length;A++)y[A]=w.charCodeAt(A);return y}!function ph(w){(0,Ne._registerComponent)(new Ie.wA("auth",(g,{options:y})=>{const A=g.getProvider("app").getImmediate(),q=g.getProvider("heartbeat"),{apiKey:fe,authDomain:et}=A.options;return((xt,sn)=>{qe(fe&&!fe.includes(":"),"invalid-api-key",{appName:xt.name}),qe(!(null==et?void 0:et.includes(":")),"argument-error",{appName:xt.name});const un={apiKey:fe,authDomain:et,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:bi(w)},Zn=new Vr(xt,sn,un);return function Ze(w,g){const y=(null==g?void 0:g.persistence)||[],A=(Array.isArray(y)?y:[y]).map(Te);(null==g?void 0:g.errorMap)&&w._updateErrorMap(g.errorMap),w._initializeWithPersistence(A,null==g?void 0:g.popupRedirectResolver)}(Zn,y),Zn})(A,q)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,y,A)=>{g.getProvider("auth-internal").initialize()})),(0,Ne._registerComponent)(new Ie.wA("auth-internal",g=>{const y=Mt(g.getProvider("auth").getImmediate());return new Fl(y)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Ne.registerVersion)(kl,fh,function Lc(w){switch(w){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(w)),(0,Ne.registerVersion)(kl,fh,"esm2017")}("Browser");class $c extends Ms{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(g=>{this.resolveInialized=g})}addPassiveListener(g){this.passiveListeners.add(g)}removePassiveListener(g){this.passiveListeners.delete(g)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(g){return this.resolveInialized(),this.passiveListeners.forEach(y=>y(g)),super.onEvent(g)}initialized(){var g=this;return(0,u.Z)(function*(){yield g.initPromise})()}}function mh(w){return gs.apply(this,arguments)}function gs(){return(gs=(0,u.Z)(function*(w){const g=yield Oa()._get(Pa(w));return g&&(yield Oa()._remove(Pa(w))),g})).apply(this,arguments)}function Md(){const w=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let y=0;y<20;y++){const A=Math.floor(Math.random()*g.length);w.push(g.charAt(A))}return w.join("")}function Oa(){return Te(is)}function Pa(w){return Et("authEvent",w.config.apiKey,w.name)}function ys(w){if(!(null==w?void 0:w.includes("?")))return{};const[g,...y]=w.split("?");return(0,Z.zd)(y.join("?"))}function _h(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Le("no-auth-event")}}function Ll(){var w;return(null===(w=null==self?void 0:self.location)||void 0===w?void 0:w.protocol)||null}function Di(w=(0,Z.z$)()){return!("file:"!==Ll()&&"ionic:"!==Ll()||!w.toLowerCase().match(/iphone|ipad|ipod|android/))}function Us(){try{const w=self.localStorage,g=gr();if(w)return w.setItem(g,"1"),w.removeItem(g),!function hl(w=(0,Z.z$)()){return function Qu(){return(0,Z.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Hc(w=(0,Z.z$)()){return/Edge\/\d+/.test(w)}(w)}()||(0,Z.hl)()}catch(w){return fl()&&(0,Z.hl)()}return!1}function fl(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Xu(){return(function cf(){return"http:"===Ll()||"https:"===Ll()}()||(0,Z.ru)()||Di())&&!function df(){return(0,Z.b$)()||(0,Z.UG)()}()&&Us()&&!fl()}function pl(){return Di()&&"undefined"!=typeof document}function gl(){return(gl=(0,u.Z)(function*(){return!!pl()&&new Promise(w=>{const g=setTimeout(()=>{w(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(g),w(!0)})})})).apply(this,arguments)}const wo={LOCAL:"local",NONE:"none",SESSION:"session"},Vl=qe,ec="persistence";function su(w){return Rd.apply(this,arguments)}function Rd(){return(Rd=(0,u.Z)(function*(w){yield w._initializationPromise;const g=Gc(),y=Et(ec,w.config.apiKey,w.name);g&&g.setItem(y,w._getPersistence())})).apply(this,arguments)}function Gc(){var w;try{return(null===(w=function Ju(){return"undefined"!=typeof window?window:null}())||void 0===w?void 0:w.sessionStorage)||null}catch(g){return null}}const vh=qe;class Ho{constructor(){this.browserResolver=Te(class qu{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=no,this._completeRedirectFn=Pr}_openPopup(g,y,A,q){var fe=this;return(0,u.Z)(function*(){var et;Ve(null===(et=fe.eventManagers[g._key()])||void 0===et?void 0:et.manager,"_initialize() not called before _openPopup()");const xt=Su(g,y,A,Ut(),q);return function kc(w,g,y,A=500,q=600){const fe=Math.max((window.screen.availHeight-q)/2,0).toString(),et=Math.max((window.screen.availWidth-A)/2,0).toString();let xt="";const sn=Object.assign(Object.assign({},Cd),{width:A.toString(),height:q.toString(),top:fe,left:et}),un=(0,Z.z$)().toLowerCase();y&&(xt=Yr(un)?"_blank":y),In(un)&&(g=g||"http://localhost",sn.scrollbars="yes");const Zn=Object.entries(sn).reduce((os,[Go,yl])=>`${os}${Go}=${yl},`,"");if(function Li(w=(0,Z.z$)()){var g;return Rr(w)&&!!(null===(g=window.navigator)||void 0===g?void 0:g.standalone)}(un)&&"_self"!==xt)return function uf(w,g){const y=document.createElement("a");y.href=w,y.target=g;const A=document.createEvent("MouseEvent");A.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),y.dispatchEvent(A)}(g||"",xt),new Wu(null);const Gn=window.open(g||"",xt,Zn);qe(Gn,w,"popup-blocked");try{Gn.focus()}catch(os){}return new Wu(Gn)}(g,xt,gr())})()}_openRedirect(g,y,A,q){var fe=this;return(0,u.Z)(function*(){return yield fe._originValidation(g),function vu(w){di().location.href=w}(Su(g,y,A,Ut(),q)),new Promise(()=>{})})()}_initialize(g){const y=g._key();if(this.eventManagers[y]){const{manager:q,promise:fe}=this.eventManagers[y];return q?Promise.resolve(q):(Ve(fe,"If manager is not set, promise should be"),fe)}const A=this.initAndGetManager(g);return this.eventManagers[y]={promise:A},A.catch(()=>{delete this.eventManagers[y]}),A}initAndGetManager(g){var y=this;return(0,u.Z)(function*(){const A=yield function Du(w){return ho.apply(this,arguments)}(g),q=new Ms(g);return A.register("authEvent",fe=>(qe(null==fe?void 0:fe.authEvent,g,"invalid-auth-event"),{status:q.onEvent(fe.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),y.eventManagers[g._key()]={manager:q},y.iframes[g._key()]=A,q})()}_isIframeWebStorageSupported(g,y){this.iframes[g._key()].send(qa,{type:qa},q=>{var fe;const et=null===(fe=null==q?void 0:q[0])||void 0===fe?void 0:fe[qa];void 0!==et&&y(!!et),ot(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const y=g._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function af(w){return Ro.apply(this,arguments)}(g)),this.originValidationPromises[y]}get _shouldInitProactively(){return Mr()||Qn()||Rr()}}),this.cordovaResolver=Te(class yh{constructor(){this._redirectPersistence=no,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Pr}_initialize(g){var y=this;return(0,u.Z)(function*(){const A=g._key();let q=y.eventManagers.get(A);return q||(q=new $c(g),y.eventManagers.set(A,q),y.attachCallbackListeners(g,q)),q})()}_openPopup(g){ot(g,"operation-not-supported-in-this-environment")}_openRedirect(g,y,A,q){var fe=this;return(0,u.Z)(function*(){!function xd(w){var g,y,A,q,fe,et,xt,sn,un,Zn;const Gn=tu();qe("function"==typeof(null===(g=null==Gn?void 0:Gn.universalLinks)||void 0===g?void 0:g.subscribe),w,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),qe(void 0!==(null===(y=null==Gn?void 0:Gn.BuildInfo)||void 0===y?void 0:y.packageName),w,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),qe("function"==typeof(null===(fe=null===(q=null===(A=null==Gn?void 0:Gn.cordova)||void 0===A?void 0:A.plugins)||void 0===q?void 0:q.browsertab)||void 0===fe?void 0:fe.openUrl),w,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),qe("function"==typeof(null===(sn=null===(xt=null===(et=null==Gn?void 0:Gn.cordova)||void 0===et?void 0:et.plugins)||void 0===xt?void 0:xt.browsertab)||void 0===sn?void 0:sn.isAvailable),w,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),qe("function"==typeof(null===(Zn=null===(un=null==Gn?void 0:Gn.cordova)||void 0===un?void 0:un.InAppBrowser)||void 0===Zn?void 0:Zn.open),w,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(g);const et=yield fe._initialize(g);yield et.initialized(),et.resetRedirect(),function it(){Ga.clear()}(),yield fe._originValidation(g);const xt=function ru(w,g,y=null){return{type:g,eventId:y,urlResponse:null,sessionId:Md(),postBody:null,tenantId:w.tenantId,error:Le(w,"no-auth-event")}}(g,A,q);yield function Uc(w,g){return Oa()._set(Pa(w),g)}(g,xt);const sn=yield function $s(w,g,y){return dl.apply(this,arguments)}(g,xt,y),un=yield function nu(w){const{cordova:g}=tu();return new Promise(y=>{g.plugins.browsertab.isAvailable(A=>{let q=null;A?g.plugins.browsertab.openUrl(w):q=g.InAppBrowser.open(w,function Fn(w=(0,Z.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}()?"_blank":"_system","location=yes"),y(q)})})}(sn);return function Ad(w,g,y){return xu.apply(this,arguments)}(g,et,un)})()}_isIframeWebStorageSupported(g,y){throw new Error("Method not implemented.")}_originValidation(g){const y=g._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function Yu(w){return ta.apply(this,arguments)}(g)),this.originValidationPromises[y]}attachCallbackListeners(g,y){const{universalLinks:A,handleOpenURL:q,BuildInfo:fe}=tu(),et=setTimeout((0,u.Z)(function*(){yield mh(g),y.onEvent(_h())}),500),xt=function(){var Zn=(0,u.Z)(function*(Gn){clearTimeout(et);const os=yield mh(g);let Go=null;os&&(null==Gn?void 0:Gn.url)&&(Go=function mi(w,g){var y,A;const q=function jo(w){const g=ys(w),y=g.link?decodeURIComponent(g.link):void 0,A=ys(y).link,q=g.deep_link_id?decodeURIComponent(g.deep_link_id):void 0;return ys(q).link||q||A||y||w}(g);if(q.includes("/__/auth/callback")){const fe=ys(q),et=fe.firebaseError?function ms(w){try{return JSON.parse(w)}catch(g){return null}}(decodeURIComponent(fe.firebaseError)):null,xt=null===(A=null===(y=null==et?void 0:et.code)||void 0===y?void 0:y.split("auth/"))||void 0===A?void 0:A[1],sn=xt?Le(xt):null;return sn?{type:w.type,eventId:w.eventId,tenantId:w.tenantId,error:sn,urlResponse:null,sessionId:null,postBody:null}:{type:w.type,eventId:w.eventId,tenantId:w.tenantId,sessionId:w.sessionId,urlResponse:q,postBody:null}}return null}(os,Gn.url)),y.onEvent(Go||_h())});return function(os){return Zn.apply(this,arguments)}}();void 0!==A&&"function"==typeof A.subscribe&&A.subscribe(null,xt);const sn=q,un=`${fe.packageName.toLowerCase()}://`;tu().handleOpenURL=function(){var Zn=(0,u.Z)(function*(Gn){if(Gn.toLowerCase().startsWith(un)&&xt({url:Gn}),"function"==typeof sn)try{sn(Gn)}catch(os){console.error(os)}});return function(Gn){return Zn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=no,this._completeRedirectFn=Pr}_initialize(g){var y=this;return(0,u.Z)(function*(){return yield y.selectUnderlyingResolver(),y.assertedUnderlyingResolver._initialize(g)})()}_openPopup(g,y,A,q){var fe=this;return(0,u.Z)(function*(){return yield fe.selectUnderlyingResolver(),fe.assertedUnderlyingResolver._openPopup(g,y,A,q)})()}_openRedirect(g,y,A,q){var fe=this;return(0,u.Z)(function*(){return yield fe.selectUnderlyingResolver(),fe.assertedUnderlyingResolver._openRedirect(g,y,A,q)})()}_isIframeWebStorageSupported(g,y){this.assertedUnderlyingResolver._isIframeWebStorageSupported(g,y)}_originValidation(g){return this.assertedUnderlyingResolver._originValidation(g)}get _shouldInitProactively(){return pl()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return vh(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var g=this;return(0,u.Z)(function*(){if(g.underlyingResolver)return;const y=yield function fo(){return gl.apply(this,arguments)}();g.underlyingResolver=y?g.cordovaResolver:g.browserResolver})()}}function ra(w){return w.unwrap()}function zc(w){return Od(w)}function Od(w){const{_tokenResponse:g}=w instanceof Z.ZR?w.customData:w;if(!g)return null;if(!(w instanceof Z.ZR)&&"temporaryProof"in g&&"phoneNumber"in g)return Ys.credentialFromResult(w);const y=g.providerId;if(!y||"password"===y)return null;let A;switch(y){case"google.com":A=si;break;case"facebook.com":A=vs;break;case"github.com":A=uo;break;case"twitter.com":A=Do;break;default:const{oauthIdToken:q,oauthAccessToken:fe,oauthTokenSecret:et,pendingToken:xt,nonce:sn}=g;return fe||et||q||xt?xt?y.startsWith("saml.")?Gs._create(y,xt):ze._fromParams({providerId:y,signInMethod:y,pendingToken:xt,idToken:q,accessToken:fe}):new us(y).credential({idToken:q,accessToken:fe,rawNonce:sn}):null}return w instanceof Z.ZR?A.credentialFromError(w):A.credentialFromResult(w)}function so(w,g){return g.catch(y=>{throw y instanceof Z.ZR&&function Mu(w,g){var y;const A=null===(y=g.customData)||void 0===y?void 0:y._tokenResponse;if("auth/multi-factor-auth-required"===g.code)g.resolver=new Pd(w,function la(w,g){var y;const A=(0,Z.m9)(w),q=g;return qe(g.customData.operationType,A,"argument-error"),qe(null===(y=q.customData._serverResponse)||void 0===y?void 0:y.mfaPendingCredential,A,"argument-error"),qi._fromError(A,q)}(w,g));else if(A){const q=Od(g),fe=g;q&&(fe.credential=q,fe.tenantId=A.tenantId||void 0,fe.email=A.email||void 0,fe.phoneNumber=A.phoneNumber||void 0)}}(w,y),y}).then(y=>{const q=y.user;return{operationType:y.operationType,credential:zc(y),additionalUserInfo:hr(y),user:Oo.getOrCreate(q)}})}function nc(w,g){return rc.apply(this,arguments)}function rc(){return(rc=(0,u.Z)(function*(w,g){const y=yield g;return{verificationId:y.verificationId,confirm:A=>so(w,y.confirm(A))}})).apply(this,arguments)}class Pd{constructor(g,y){this.resolver=y,this.auth=function tc(w){return w.wrapped()}(g)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(g){return so(ra(this.auth),this.resolver.resolveSignIn(g))}}class Oo{constructor(g){this._delegate=g,this.multiFactor=function Vo(w){const g=(0,Z.m9)(w);return Jo.has(g)||Jo.set(g,So._fromUser(g)),Jo.get(g)}(g)}static getOrCreate(g){return Oo.USER_MAP.has(g)||Oo.USER_MAP.set(g,new Oo(g)),Oo.USER_MAP.get(g)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(g){return this._delegate.getIdTokenResult(g)}getIdToken(g){return this._delegate.getIdToken(g)}linkAndRetrieveDataWithCredential(g){return this.linkWithCredential(g)}linkWithCredential(g){var y=this;return(0,u.Z)(function*(){return so(y.auth,Ir(y._delegate,g))})()}linkWithPhoneNumber(g,y){var A=this;return(0,u.Z)(function*(){return nc(A.auth,function da(w,g,y){return vi.apply(this,arguments)}(A._delegate,g,y))})()}linkWithPopup(g){var y=this;return(0,u.Z)(function*(){return so(y.auth,function Ql(w,g,y){return Iu.apply(this,arguments)}(y._delegate,g,Ho))})()}linkWithRedirect(g){var y=this;return(0,u.Z)(function*(){return yield su(Mt(y.auth)),function ti(w,g,y){return function io(w,g,y){return ea.apply(this,arguments)}(w,g,y)}(y._delegate,g,Ho)})()}reauthenticateAndRetrieveDataWithCredential(g){return this.reauthenticateWithCredential(g)}reauthenticateWithCredential(g){var y=this;return(0,u.Z)(function*(){return so(y.auth,_r(y._delegate,g))})()}reauthenticateWithPhoneNumber(g,y){return nc(this.auth,function ja(w,g,y){return sl.apply(this,arguments)}(this._delegate,g,y))}reauthenticateWithPopup(g){return so(this.auth,function ol(w,g,y){return Uo.apply(this,arguments)}(this._delegate,g,Ho))}reauthenticateWithRedirect(g){var y=this;return(0,u.Z)(function*(){return yield su(Mt(y.auth)),function Fr(w,g,y){return function ur(w,g,y){return xs.apply(this,arguments)}(w,g,y)}(y._delegate,g,Ho)})()}sendEmailVerification(g){return function Ws(w,g){return ba.apply(this,arguments)}(this._delegate,g)}unlink(g){var y=this;return(0,u.Z)(function*(){return yield function Es(w,g){return Fo.apply(this,arguments)}(y._delegate,g),y})()}updateEmail(g){return function Sl(w,g){return Ba((0,Z.m9)(w),g,null)}(this._delegate,g)}updatePassword(g){return function tl(w,g){return Ba((0,Z.m9)(w),null,g)}(this._delegate,g)}updatePhoneNumber(g){return function Eu(w,g){return Vs.apply(this,arguments)}(this._delegate,g)}updateProfile(g){return function el(w,g){return Va.apply(this,arguments)}(this._delegate,g)}verifyBeforeUpdateEmail(g,y){return function Fa(w,g,y){return Ui.apply(this,arguments)}(this._delegate,g,y)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Oo.USER_MAP=new WeakMap;const Ya=qe;let ml=(()=>{class w{constructor(y,A){if(this.app=y,A.isInitialized())return this._delegate=A.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:q}=y.options;Ya(q,"invalid-api-key",{appName:y.name}),Ya(q,"invalid-api-key",{appName:y.name});const fe="undefined"!=typeof window?Ho:void 0;this._delegate=A.initialize({options:{persistence:Nd(q,y.name),popupRedirectResolver:fe}}),this._delegate._updateErrorMap(Oe),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Oo.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(y){this._delegate.languageCode=y}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(y){this._delegate.tenantId=y}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(y,A){!function sr(w,g,y){const A=Mt(w);qe(A._canInitEmulator,A,"emulator-config-failed"),qe(/^https?:\/\//.test(g),A,"invalid-emulator-scheme");const q=!!(null==y?void 0:y.disableWarnings),fe=yr(g),{host:et,port:xt}=function Kr(w){const g=yr(w),y=/(\/\/)?([^?#/]+)/.exec(w.substr(g.length));if(!y)return{host:"",port:null};const A=y[2].split("@").pop()||"",q=/^(\[[^\]]+\])(:|$)/.exec(A);if(q){const fe=q[1];return{host:fe,port:Gr(A.substr(fe.length+1))}}{const[fe,et]=A.split(":");return{host:fe,port:Gr(et)}}}(g);A.config.emulator={url:`${fe}//${et}${null===xt?"":`:${xt}`}/`},A.settings.appVerificationDisabledForTesting=!0,A.emulatorConfig=Object.freeze({host:et,port:xt,protocol:fe.replace(":",""),options:Object.freeze({disableWarnings:q})}),q||function yi(){function w(){const g=document.createElement("p"),y=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",y.position="fixed",y.width="100%",y.backgroundColor="#ffffff",y.border=".1em solid #000000",y.color="#b50000",y.bottom="0px",y.left="0px",y.margin="0px",y.zIndex="10000",y.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}(this._delegate,y,A)}applyActionCode(y){return function L(w,g){return E.apply(this,arguments)}(this._delegate,y)}checkActionCode(y){return F(this._delegate,y)}confirmPasswordReset(y,A){return function ie(w,g,y){return v.apply(this,arguments)}(this._delegate,y,A)}createUserWithEmailAndPassword(y,A){var q=this;return(0,u.Z)(function*(){return so(q._delegate,function En(w,g,y){return Nn.apply(this,arguments)}(q._delegate,y,A))})()}fetchProvidersForEmail(y){return this.fetchSignInMethodsForEmail(y)}fetchSignInMethodsForEmail(y){return function ia(w,g){return Qo.apply(this,arguments)}(this._delegate,y)}isSignInWithEmailLink(y){return function eo(w,g){const y=ki.parseLink(g);return"EMAIL_SIGNIN"===(null==y?void 0:y.operation)}(0,y)}getRedirectResult(){var y=this;return(0,u.Z)(function*(){Ya(Xu(),y._delegate,"operation-not-supported-in-this-environment");const A=yield function Sa(w,g){return Eo.apply(this,arguments)}(y._delegate,Ho);return A?so(y._delegate,Promise.resolve(A)):{credential:null,user:null}})()}addFrameworkForLogging(y){!function na(w,g){Mt(w)._logFramework(g)}(this._delegate,y)}onAuthStateChanged(y,A,q){const{next:fe,error:et,complete:xt}=ic(y,A,q);return this._delegate.onAuthStateChanged(fe,et,xt)}onIdTokenChanged(y,A,q){const{next:fe,error:et,complete:xt}=ic(y,A,q);return this._delegate.onIdTokenChanged(fe,et,xt)}sendSignInLinkToEmail(y,A){return function ci(w,g,y){return wi.apply(this,arguments)}(this._delegate,y,A)}sendPasswordResetEmail(y,A){return function k(w,g,y){return P.apply(this,arguments)}(this._delegate,y,A||void 0)}setPersistence(y){var A=this;return(0,u.Z)(function*(){let q;switch(function iu(w,g){Vl(Object.values(wo).includes(g),w,"invalid-persistence-type"),(0,Z.b$)()?Vl(g!==wo.SESSION,w,"unsupported-persistence-type"):(0,Z.UG)()?Vl(g===wo.NONE,w,"unsupported-persistence-type"):fl()?Vl(g===wo.NONE||g===wo.LOCAL&&(0,Z.hl)(),w,"unsupported-persistence-type"):Vl(g===wo.NONE||Us(),w,"unsupported-persistence-type")}(A._delegate,y),y){case wo.SESSION:q=no;break;case wo.LOCAL:q=(yield Te(V)._isAvailable())?V:is;break;case wo.NONE:q=je;break;default:return ot("argument-error",{appName:A._delegate.name})}return A._delegate.setPersistence(q)})()}signInAndRetrieveDataWithCredential(y){return this.signInWithCredential(y)}signInAnonymously(){return so(this._delegate,function Ns(w){return cs.apply(this,arguments)}(this._delegate))}signInWithCredential(y){return so(this._delegate,Yt(this._delegate,y))}signInWithCustomToken(y){return so(this._delegate,function yo(w,g){return rs.apply(this,arguments)}(this._delegate,y))}signInWithEmailAndPassword(y,A){return so(this._delegate,function Jr(w,g,y){return Yt((0,Z.m9)(w),ls.credential(g,y))}(this._delegate,y,A))}signInWithEmailLink(y,A){return so(this._delegate,function bs(w,g,y){return ts.apply(this,arguments)}(this._delegate,y,A))}signInWithPhoneNumber(y,A){return nc(this._delegate,function Is(w,g,y){return Ki.apply(this,arguments)}(this._delegate,y,A))}signInWithPopup(y){var A=this;return(0,u.Z)(function*(){return Ya(Xu(),A._delegate,"operation-not-supported-in-this-environment"),so(A._delegate,function co(w,g,y){return Ta.apply(this,arguments)}(A._delegate,y,Ho))})()}signInWithRedirect(y){var A=this;return(0,u.Z)(function*(){return Ya(Xu(),A._delegate,"operation-not-supported-in-this-environment"),yield su(A._delegate),function Mn(w,g,y){return function lr(w,g,y){return tr.apply(this,arguments)}(w,g,y)}(A._delegate,y,Ho)})()}updateCurrentUser(y){return this._delegate.updateCurrentUser(y)}verifyPasswordResetCode(y){return function dt(w,g){return Kt.apply(this,arguments)}(this._delegate,y)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return w.Persistence=wo,w})();function ic(w,g,y){let A=w;"function"!=typeof w&&({next:A,error:g,complete:y}=w);const q=A;return{next:et=>q(et&&Oo.getOrCreate(et)),error:g,complete:y}}function Nd(w,g){const y=function _s(w,g){const y=Gc();if(!y)return[];const A=Et(ec,w,g);switch(y.getItem(A)){case wo.NONE:return[je];case wo.LOCAL:return[V,no];case wo.SESSION:return[no];default:return[]}}(w,g);if("undefined"!=typeof self&&!y.includes(V)&&y.push(V),"undefined"!=typeof window)for(const A of[is,no])y.includes(A)||y.push(A);return y.includes(je)||y.push(je),y}class Wc{constructor(){this.providerId="phone",this._delegate=new Ys(ra(re.Z.auth()))}static credential(g,y){return Ys.credential(g,y)}verifyPhoneNumber(g,y){return this._delegate.verifyPhoneNumber(g,y)}unwrap(){return this._delegate}}Wc.PHONE_SIGN_IN_METHOD=Ys.PHONE_SIGN_IN_METHOD,Wc.PROVIDER_ID=Ys.PROVIDER_ID;const qc=qe;class kd{constructor(g,y,A=re.Z.app()){var q;qc(null===(q=A.options)||void 0===q?void 0:q.apiKey,"invalid-api-key",{appName:A.name}),this._delegate=new ps(g,y,A.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function sc(w){w.INTERNAL.registerComponent(new Ie.wA("auth-compat",g=>{const y=g.getProvider("app-compat").getImmediate(),A=g.getProvider("auth");return new ml(y,A)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:ls,FacebookAuthProvider:vs,GithubAuthProvider:uo,GoogleAuthProvider:si,OAuthProvider:us,SAMLAuthProvider:es,PhoneAuthProvider:Wc,PhoneMultiFactorGenerator:Sd,RecaptchaVerifier:kd,TwitterAuthProvider:Do,Auth:ml,AuthCredential:dr,Error:Z.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),w.registerVersion("@firebase/auth-compat","0.2.11")}(re.Z)},591:(Jt,ct,j)=>{"use strict";j.d(ct,{X:()=>Z});var u=j(8929),re=j(5279);class Z extends u.xQ{constructor(Se){super(),this._value=Se}get value(){return this.getValue()}_subscribe(Se){const ae=super._subscribe(Se);return ae&&!ae.closed&&Se.next(this._value),ae}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new re.N;return this._value}next(Se){super.next(this._value=Se)}}},2916:(Jt,ct,j)=>{"use strict";j.d(ct,{y:()=>me});var u=j(3489),Z=j(7668),Ne=j(3292),ae=j(3821),Ie=j(5379);var de=j(2830);let me=(()=>{class he{constructor(Oe){this._isScalar=!1,Oe&&(this._subscribe=Oe)}lift(Oe){const _e=new he;return _e.source=this,_e.operator=Oe,_e}subscribe(Oe,_e,Pe){const{operator:ke}=this,ht=function Se(he,Ue,Oe){if(he){if(he instanceof u.L)return he;if(he[Z.b])return he[Z.b]()}return he||Ue||Oe?new u.L(he,Ue,Oe):new u.L(Ne.c)}(Oe,_e,Pe);if(ht.add(ke?ke.call(ht,this.source):this.source||de.v.useDeprecatedSynchronousErrorHandling&&!ht.syncErrorThrowable?this._subscribe(ht):this._trySubscribe(ht)),de.v.useDeprecatedSynchronousErrorHandling&&ht.syncErrorThrowable&&(ht.syncErrorThrowable=!1,ht.syncErrorThrown))throw ht.syncErrorValue;return ht}_trySubscribe(Oe){try{return this._subscribe(Oe)}catch(_e){de.v.useDeprecatedSynchronousErrorHandling&&(Oe.syncErrorThrown=!0,Oe.syncErrorValue=_e),function re(he){for(;he;){const{closed:Ue,destination:Oe,isStopped:_e}=he;if(Ue||_e)return!1;he=Oe&&Oe instanceof u.L?Oe:null}return!0}(Oe)?Oe.error(_e):console.warn(_e)}}forEach(Oe,_e){return new(_e=te(_e))((Pe,ke)=>{let ht;ht=this.subscribe(ve=>{try{Oe(ve)}catch(ot){ke(ot),ht&&ht.unsubscribe()}},ke,Pe)})}_subscribe(Oe){const{source:_e}=this;return _e&&_e.subscribe(Oe)}[ae.L](){return this}pipe(...Oe){return 0===Oe.length?this:function ye(he){return 0===he.length?Ie.y:1===he.length?he[0]:function(Oe){return he.reduce((_e,Pe)=>Pe(_e),Oe)}}(Oe)(this)}toPromise(Oe){return new(Oe=te(Oe))((_e,Pe)=>{let ke;this.subscribe(ht=>ke=ht,ht=>Pe(ht),()=>_e(ke))})}}return he.create=Ue=>new he(Ue),he})();function te(he){if(he||(he=de.v.Promise||Promise),!he)throw new Error("no Promise impl found");return he}},3292:(Jt,ct,j)=>{"use strict";j.d(ct,{c:()=>Z});var u=j(2830),re=j(2782);const Z={closed:!0,next(Ne){},error(Ne){if(u.v.useDeprecatedSynchronousErrorHandling)throw Ne;(0,re.z)(Ne)},complete(){}}},826:(Jt,ct,j)=>{"use strict";j.d(ct,{L:()=>re});var u=j(3489);class re extends u.L{notifyNext(Ne,Se,ae,Ie,we){this.destination.next(Se)}notifyError(Ne,Se){this.destination.error(Ne)}notifyComplete(Ne){this.destination.complete()}}},8929:(Jt,ct,j)=>{"use strict";j.d(ct,{Yc:()=>Ie,xQ:()=>we});var u=j(2916),re=j(3489),Z=j(2654),Ne=j(5279),Se=j(5283),ae=j(7668);class Ie extends re.L{constructor(me){super(me),this.destination=me}}let we=(()=>{class de extends u.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[ae.b](){return new Ie(this)}lift(te){const he=new ye(this,this);return he.operator=te,he}next(te){if(this.closed)throw new Ne.N;if(!this.isStopped){const{observers:he}=this,Ue=he.length,Oe=he.slice();for(let _e=0;_e<Ue;_e++)Oe[_e].next(te)}}error(te){if(this.closed)throw new Ne.N;this.hasError=!0,this.thrownError=te,this.isStopped=!0;const{observers:he}=this,Ue=he.length,Oe=he.slice();for(let _e=0;_e<Ue;_e++)Oe[_e].error(te);this.observers.length=0}complete(){if(this.closed)throw new Ne.N;this.isStopped=!0;const{observers:te}=this,he=te.length,Ue=te.slice();for(let Oe=0;Oe<he;Oe++)Ue[Oe].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(te){if(this.closed)throw new Ne.N;return super._trySubscribe(te)}_subscribe(te){if(this.closed)throw new Ne.N;return this.hasError?(te.error(this.thrownError),Z.w.EMPTY):this.isStopped?(te.complete(),Z.w.EMPTY):(this.observers.push(te),new Se.W(this,te))}asObservable(){const te=new u.y;return te.source=this,te}}return de.create=(me,te)=>new ye(me,te),de})();class ye extends we{constructor(me,te){super(),this.destination=me,this.source=te}next(me){const{destination:te}=this;te&&te.next&&te.next(me)}error(me){const{destination:te}=this;te&&te.error&&this.destination.error(me)}complete(){const{destination:me}=this;me&&me.complete&&this.destination.complete()}_subscribe(me){const{source:te}=this;return te?this.source.subscribe(me):Z.w.EMPTY}}},5283:(Jt,ct,j)=>{"use strict";j.d(ct,{W:()=>re});var u=j(2654);class re extends u.w{constructor(Ne,Se){super(),this.subject=Ne,this.subscriber=Se,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const Ne=this.subject,Se=Ne.observers;if(this.subject=null,!Se||0===Se.length||Ne.isStopped||Ne.closed)return;const ae=Se.indexOf(this.subscriber);-1!==ae&&Se.splice(ae,1)}}},3489:(Jt,ct,j)=>{"use strict";j.d(ct,{L:()=>Ie});var u=j(7043),re=j(3292),Z=j(2654),Ne=j(7668),Se=j(2830),ae=j(2782);class Ie extends Z.w{constructor(de,me,te){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=re.c;break;case 1:if(!de){this.destination=re.c;break}if("object"==typeof de){de instanceof Ie?(this.syncErrorThrowable=de.syncErrorThrowable,this.destination=de,de.add(this)):(this.syncErrorThrowable=!0,this.destination=new we(this,de));break}default:this.syncErrorThrowable=!0,this.destination=new we(this,de,me,te)}}[Ne.b](){return this}static create(de,me,te){const he=new Ie(de,me,te);return he.syncErrorThrowable=!1,he}next(de){this.isStopped||this._next(de)}error(de){this.isStopped||(this.isStopped=!0,this._error(de))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(de){this.destination.next(de)}_error(de){this.destination.error(de),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:de}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=de,this}}class we extends Ie{constructor(de,me,te,he){super(),this._parentSubscriber=de;let Ue,Oe=this;(0,u.m)(me)?Ue=me:me&&(Ue=me.next,te=me.error,he=me.complete,me!==re.c&&(Oe=Object.create(me),(0,u.m)(Oe.unsubscribe)&&this.add(Oe.unsubscribe.bind(Oe)),Oe.unsubscribe=this.unsubscribe.bind(this))),this._context=Oe,this._next=Ue,this._error=te,this._complete=he}next(de){if(!this.isStopped&&this._next){const{_parentSubscriber:me}=this;Se.v.useDeprecatedSynchronousErrorHandling&&me.syncErrorThrowable?this.__tryOrSetError(me,this._next,de)&&this.unsubscribe():this.__tryOrUnsub(this._next,de)}}error(de){if(!this.isStopped){const{_parentSubscriber:me}=this,{useDeprecatedSynchronousErrorHandling:te}=Se.v;if(this._error)te&&me.syncErrorThrowable?(this.__tryOrSetError(me,this._error,de),this.unsubscribe()):(this.__tryOrUnsub(this._error,de),this.unsubscribe());else if(me.syncErrorThrowable)te?(me.syncErrorValue=de,me.syncErrorThrown=!0):(0,ae.z)(de),this.unsubscribe();else{if(this.unsubscribe(),te)throw de;(0,ae.z)(de)}}}complete(){if(!this.isStopped){const{_parentSubscriber:de}=this;if(this._complete){const me=()=>this._complete.call(this._context);Se.v.useDeprecatedSynchronousErrorHandling&&de.syncErrorThrowable?(this.__tryOrSetError(de,me),this.unsubscribe()):(this.__tryOrUnsub(me),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(de,me){try{de.call(this._context,me)}catch(te){if(this.unsubscribe(),Se.v.useDeprecatedSynchronousErrorHandling)throw te;(0,ae.z)(te)}}__tryOrSetError(de,me,te){if(!Se.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{me.call(this._context,te)}catch(he){return Se.v.useDeprecatedSynchronousErrorHandling?(de.syncErrorValue=he,de.syncErrorThrown=!0,!0):((0,ae.z)(he),!0)}return!1}_unsubscribe(){const{_parentSubscriber:de}=this;this._context=null,this._parentSubscriber=null,de.unsubscribe()}}},2654:(Jt,ct,j)=>{"use strict";j.d(ct,{w:()=>ae});var u=j(6688),re=j(7830),Z=j(7043);const Se=(()=>{function we(ye){return Error.call(this),this.message=ye?`${ye.length} errors occurred during unsubscription:\n${ye.map((de,me)=>`${me+1}) ${de.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ye,this}return we.prototype=Object.create(Error.prototype),we})();class ae{constructor(ye){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,ye&&(this._ctorUnsubscribe=!0,this._unsubscribe=ye)}unsubscribe(){let ye;if(this.closed)return;let{_parentOrParents:de,_ctorUnsubscribe:me,_unsubscribe:te,_subscriptions:he}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,de instanceof ae)de.remove(this);else if(null!==de)for(let Ue=0;Ue<de.length;++Ue)de[Ue].remove(this);if((0,Z.m)(te)){me&&(this._unsubscribe=void 0);try{te.call(this)}catch(Ue){ye=Ue instanceof Se?Ie(Ue.errors):[Ue]}}if((0,u.k)(he)){let Ue=-1,Oe=he.length;for(;++Ue<Oe;){const _e=he[Ue];if((0,re.K)(_e))try{_e.unsubscribe()}catch(Pe){ye=ye||[],Pe instanceof Se?ye=ye.concat(Ie(Pe.errors)):ye.push(Pe)}}}if(ye)throw new Se(ye)}add(ye){let de=ye;if(!ye)return ae.EMPTY;switch(typeof ye){case"function":de=new ae(ye);case"object":if(de===this||de.closed||"function"!=typeof de.unsubscribe)return de;if(this.closed)return de.unsubscribe(),de;if(!(de instanceof ae)){const he=de;de=new ae,de._subscriptions=[he]}break;default:throw new Error("unrecognized teardown "+ye+" added to Subscription.")}let{_parentOrParents:me}=de;if(null===me)de._parentOrParents=this;else if(me instanceof ae){if(me===this)return de;de._parentOrParents=[me,this]}else{if(-1!==me.indexOf(this))return de;me.push(this)}const te=this._subscriptions;return null===te?this._subscriptions=[de]:te.push(de),de}remove(ye){const de=this._subscriptions;if(de){const me=de.indexOf(ye);-1!==me&&de.splice(me,1)}}}var we;function Ie(we){return we.reduce((ye,de)=>ye.concat(de instanceof Se?de.errors:de),[])}ae.EMPTY=((we=new ae).closed=!0,we)},2830:(Jt,ct,j)=>{"use strict";j.d(ct,{v:()=>re});let u=!1;const re={Promise:void 0,set useDeprecatedSynchronousErrorHandling(Z){if(Z){const Ne=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+Ne.stack)}else u&&console.log("RxJS: Back to a better error behavior. Thank you. <3");u=Z},get useDeprecatedSynchronousErrorHandling(){return u}}},1177:(Jt,ct,j)=>{"use strict";j.d(ct,{IY:()=>Ne,Ds:()=>ae,ft:()=>we});var u=j(3489),re=j(2916),Z=j(9249);class Ne extends u.L{constructor(de){super(),this.parent=de}_next(de){this.parent.notifyNext(de)}_error(de){this.parent.notifyError(de),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class ae extends u.L{notifyNext(de){this.destination.next(de)}notifyError(de){this.destination.error(de)}notifyComplete(){this.destination.complete()}}function we(ye,de){if(de.closed)return;if(ye instanceof re.y)return ye.subscribe(de);let me;try{me=(0,Z.s)(ye)(de)}catch(te){de.error(te)}return me}},1762:(Jt,ct,j)=>{"use strict";j.d(ct,{c:()=>Se,N:()=>ae});var u=j(8929),re=j(2916),Z=j(2654),Ne=j(4327);class Se extends re.y{constructor(me,te){super(),this.source=me,this.subjectFactory=te,this._refCount=0,this._isComplete=!1}_subscribe(me){return this.getSubject().subscribe(me)}getSubject(){const me=this._subject;return(!me||me.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let me=this._connection;return me||(this._isComplete=!1,me=this._connection=new Z.w,me.add(this.source.subscribe(new Ie(this.getSubject(),this))),me.closed&&(this._connection=null,me=Z.w.EMPTY)),me}refCount(){return(0,Ne.x)()(this)}}const ae=(()=>{const de=Se.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:de._subscribe},_isComplete:{value:de._isComplete,writable:!0},getSubject:{value:de.getSubject},connect:{value:de.connect},refCount:{value:de.refCount}}})();class Ie extends u.Yc{constructor(me,te){super(me),this.connectable=te}_error(me){this._unsubscribe(),super._error(me)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const me=this.connectable;if(me){this.connectable=null;const te=me._connection;me._refCount=0,me._subject=null,me._connection=null,te&&te.unsubscribe()}}}},1221:(Jt,ct,j)=>{"use strict";j.d(ct,{z:()=>Ne});var u=j(1086),re=j(9146);function Ne(...Se){return function Z(){return(0,re.J)(1)}()((0,u.of)(...Se))}},8896:(Jt,ct,j)=>{"use strict";j.d(ct,{E:()=>re,c:()=>Z});var u=j(2916);const re=new u.y(Se=>Se.complete());function Z(Se){return Se?function Ne(Se){return new u.y(ae=>Se.schedule(()=>ae.complete()))}(Se):re}},5254:(Jt,ct,j)=>{"use strict";j.d(ct,{D:()=>Oe});var u=j(2916),re=j(9249),Z=j(2654),Ne=j(3821),Ie=j(6454),we=j(5430),me=j(8955),te=j(8515);function Oe(_e,Pe){return Pe?function Ue(_e,Pe){if(null!=_e){if(function de(_e){return _e&&"function"==typeof _e[Ne.L]}(_e))return function Se(_e,Pe){return new u.y(ke=>{const ht=new Z.w;return ht.add(Pe.schedule(()=>{const ve=_e[Ne.L]();ht.add(ve.subscribe({next(ot){ht.add(Pe.schedule(()=>ke.next(ot)))},error(ot){ht.add(Pe.schedule(()=>ke.error(ot)))},complete(){ht.add(Pe.schedule(()=>ke.complete()))}}))})),ht})}(_e,Pe);if((0,me.t)(_e))return function ae(_e,Pe){return new u.y(ke=>{const ht=new Z.w;return ht.add(Pe.schedule(()=>_e.then(ve=>{ht.add(Pe.schedule(()=>{ke.next(ve),ht.add(Pe.schedule(()=>ke.complete()))}))},ve=>{ht.add(Pe.schedule(()=>ke.error(ve)))}))),ht})}(_e,Pe);if((0,te.z)(_e))return(0,Ie.r)(_e,Pe);if(function he(_e){return _e&&"function"==typeof _e[we.hZ]}(_e)||"string"==typeof _e)return function ye(_e,Pe){if(!_e)throw new Error("Iterable cannot be null");return new u.y(ke=>{const ht=new Z.w;let ve;return ht.add(()=>{ve&&"function"==typeof ve.return&&ve.return()}),ht.add(Pe.schedule(()=>{ve=_e[we.hZ](),ht.add(Pe.schedule(function(){if(ke.closed)return;let ot,Le;try{const rt=ve.next();ot=rt.value,Le=rt.done}catch(rt){return void ke.error(rt)}Le?ke.complete():(ke.next(ot),this.schedule())}))})),ht})}(_e,Pe)}throw new TypeError((null!==_e&&typeof _e||_e)+" is not observable")}(_e,Pe):_e instanceof u.y?_e:new u.y((0,re.s)(_e))}},3009:(Jt,ct,j)=>{"use strict";j.d(ct,{n:()=>Ne});var u=j(2916),re=j(3650),Z=j(6454);function Ne(Se,ae){return ae?(0,Z.r)(Se,ae):new u.y((0,re.V)(Se))}},6787:(Jt,ct,j)=>{"use strict";j.d(ct,{T:()=>Se});var u=j(2916),re=j(2866),Z=j(9146),Ne=j(3009);function Se(...ae){let Ie=Number.POSITIVE_INFINITY,we=null,ye=ae[ae.length-1];return(0,re.K)(ye)?(we=ae.pop(),ae.length>1&&"number"==typeof ae[ae.length-1]&&(Ie=ae.pop())):"number"==typeof ye&&(Ie=ae.pop()),null===we&&1===ae.length&&ae[0]instanceof u.y?ae[0]:(0,Z.J)(Ie)((0,Ne.n)(ae,we))}},1086:(Jt,ct,j)=>{"use strict";j.d(ct,{of:()=>Ne});var u=j(2866),re=j(3009),Z=j(6454);function Ne(...Se){let ae=Se[Se.length-1];return(0,u.K)(ae)?(Se.pop(),(0,Z.r)(Se,ae)):(0,re.n)(Se)}},1737:(Jt,ct,j)=>{"use strict";j.d(ct,{_:()=>re});var u=j(2916);function re(Ne,Se){return new u.y(Se?ae=>Se.schedule(Z,0,{error:Ne,subscriber:ae}):ae=>ae.error(Ne))}function Z({error:Ne,subscriber:Se}){Se.error(Ne)}},7314:(Jt,ct,j)=>{"use strict";j.d(ct,{d:()=>re});var u=j(3489);function re(Se=null){return ae=>ae.lift(new Z(Se))}class Z{constructor(ae){this.defaultValue=ae}call(ae,Ie){return Ie.subscribe(new Ne(ae,this.defaultValue))}}class Ne extends u.L{constructor(ae,Ie){super(ae),this.defaultValue=Ie,this.isEmpty=!0}_next(ae){this.isEmpty=!1,this.destination.next(ae)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}},5778:(Jt,ct,j)=>{"use strict";j.d(ct,{x:()=>re});var u=j(3489);function re(Se,ae){return Ie=>Ie.lift(new Z(Se,ae))}class Z{constructor(ae,Ie){this.compare=ae,this.keySelector=Ie}call(ae,Ie){return Ie.subscribe(new Ne(ae,this.compare,this.keySelector))}}class Ne extends u.L{constructor(ae,Ie,we){super(ae),this.keySelector=we,this.hasKey=!1,"function"==typeof Ie&&(this.compare=Ie)}compare(ae,Ie){return ae===Ie}_next(ae){let Ie;try{const{keySelector:ye}=this;Ie=ye?ye(ae):ae}catch(ye){return this.destination.error(ye)}let we=!1;if(this.hasKey)try{const{compare:ye}=this;we=ye(this.key,Ie)}catch(ye){return this.destination.error(ye)}else this.hasKey=!0;we||(this.key=Ie,this.destination.next(ae))}}},2198:(Jt,ct,j)=>{"use strict";j.d(ct,{h:()=>re});var u=j(3489);function re(Se,ae){return function(we){return we.lift(new Z(Se,ae))}}class Z{constructor(ae,Ie){this.predicate=ae,this.thisArg=Ie}call(ae,Ie){return Ie.subscribe(new Ne(ae,this.predicate,this.thisArg))}}class Ne extends u.L{constructor(ae,Ie,we){super(ae),this.predicate=Ie,this.thisArg=we,this.count=0}_next(ae){let Ie;try{Ie=this.predicate.call(this.thisArg,ae,this.count++)}catch(we){return void this.destination.error(we)}Ie&&this.destination.next(ae)}}},7224:(Jt,ct,j)=>{"use strict";j.d(ct,{P:()=>Ie});var u=j(4450),re=j(2198),Z=j(2986),Ne=j(7314),Se=j(4907),ae=j(5379);function Ie(we,ye){const de=arguments.length>=2;return me=>me.pipe(we?(0,re.h)((te,he)=>we(te,he,me)):ae.y,(0,Z.q)(1),de?(0,Ne.d)(ye):(0,Se.T)(()=>new u.K))}},4850:(Jt,ct,j)=>{"use strict";j.d(ct,{U:()=>re});var u=j(3489);function re(Se,ae){return function(we){if("function"!=typeof Se)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return we.lift(new Z(Se,ae))}}class Z{constructor(ae,Ie){this.project=ae,this.thisArg=Ie}call(ae,Ie){return Ie.subscribe(new Ne(ae,this.project,this.thisArg))}}class Ne extends u.L{constructor(ae,Ie,we){super(ae),this.project=Ie,this.count=0,this.thisArg=we||this}_next(ae){let Ie;try{Ie=this.project.call(this.thisArg,ae,this.count++)}catch(we){return void this.destination.error(we)}this.destination.next(Ie)}}},9146:(Jt,ct,j)=>{"use strict";j.d(ct,{J:()=>Z});var u=j(1709),re=j(5379);function Z(Ne=Number.POSITIVE_INFINITY){return(0,u.zg)(re.y,Ne)}},1709:(Jt,ct,j)=>{"use strict";j.d(ct,{zg:()=>Ne});var u=j(4850),re=j(5254),Z=j(1177);function Ne(we,ye,de=Number.POSITIVE_INFINITY){return"function"==typeof ye?me=>me.pipe(Ne((te,he)=>(0,re.D)(we(te,he)).pipe((0,u.U)((Ue,Oe)=>ye(te,Ue,he,Oe))),de)):("number"==typeof ye&&(de=ye),me=>me.lift(new Se(we,de)))}class Se{constructor(ye,de=Number.POSITIVE_INFINITY){this.project=ye,this.concurrent=de}call(ye,de){return de.subscribe(new ae(ye,this.project,this.concurrent))}}class ae extends Z.Ds{constructor(ye,de,me=Number.POSITIVE_INFINITY){super(ye),this.project=de,this.concurrent=me,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(ye){this.active<this.concurrent?this._tryNext(ye):this.buffer.push(ye)}_tryNext(ye){let de;const me=this.index++;try{de=this.project(ye,me)}catch(te){return void this.destination.error(te)}this.active++,this._innerSub(de)}_innerSub(ye){const de=new Z.IY(this),me=this.destination;me.add(de);const te=(0,Z.ft)(ye,de);te!==de&&me.add(te)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(ye){this.destination.next(ye)}notifyComplete(){const ye=this.buffer;this.active--,ye.length>0?this._next(ye.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},2102:(Jt,ct,j)=>{"use strict";j.d(ct,{ht:()=>ye,QV:()=>Ie});var u=j(3489),re=j(8896),Z=j(1086),Ne=j(1737);class ae{constructor(te,he,Ue){this.kind=te,this.value=he,this.error=Ue,this.hasValue="N"===te}observe(te){switch(this.kind){case"N":return te.next&&te.next(this.value);case"E":return te.error&&te.error(this.error);case"C":return te.complete&&te.complete()}}do(te,he,Ue){switch(this.kind){case"N":return te&&te(this.value);case"E":return he&&he(this.error);case"C":return Ue&&Ue()}}accept(te,he,Ue){return te&&"function"==typeof te.next?this.observe(te):this.do(te,he,Ue)}toObservable(){switch(this.kind){case"N":return(0,Z.of)(this.value);case"E":return(0,Ne._)(this.error);case"C":return(0,re.c)()}throw new Error("unexpected notification kind value")}static createNext(te){return void 0!==te?new ae("N",te):ae.undefinedValueNotification}static createError(te){return new ae("E",void 0,te)}static createComplete(){return ae.completeNotification}}function Ie(me,te=0){return function(Ue){return Ue.lift(new we(me,te))}}ae.completeNotification=new ae("C"),ae.undefinedValueNotification=new ae("N",void 0);class we{constructor(te,he=0){this.scheduler=te,this.delay=he}call(te,he){return he.subscribe(new ye(te,this.scheduler,this.delay))}}class ye extends u.L{constructor(te,he,Ue=0){super(te),this.scheduler=he,this.delay=Ue}static dispatch(te){const{notification:he,destination:Ue}=te;he.observe(Ue),this.unsubscribe()}scheduleMessage(te){this.destination.add(this.scheduler.schedule(ye.dispatch,this.delay,new de(te,this.destination)))}_next(te){this.scheduleMessage(ae.createNext(te))}_error(te){this.scheduleMessage(ae.createError(te)),this.unsubscribe()}_complete(){this.scheduleMessage(ae.createComplete()),this.unsubscribe()}}class de{constructor(te,he){this.notification=te,this.destination=he}}},4327:(Jt,ct,j)=>{"use strict";j.d(ct,{x:()=>re});var u=j(3489);function re(){return function(ae){return ae.lift(new Z(ae))}}class Z{constructor(ae){this.connectable=ae}call(ae,Ie){const{connectable:we}=this;we._refCount++;const ye=new Ne(ae,we),de=Ie.subscribe(ye);return ye.closed||(ye.connection=we.connect()),de}}class Ne extends u.L{constructor(ae,Ie){super(ae),this.connectable=Ie}_unsubscribe(){const{connectable:ae}=this;if(!ae)return void(this.connection=null);this.connectable=null;const Ie=ae._refCount;if(Ie<=0)return void(this.connection=null);if(ae._refCount=Ie-1,Ie>1)return void(this.connection=null);const{connection:we}=this,ye=ae._connection;this.connection=null,ye&&(!we||ye===we)&&ye.unsubscribe()}}},2014:(Jt,ct,j)=>{"use strict";j.d(ct,{R:()=>re});var u=j(3489);function re(Se,ae){let Ie=!1;return arguments.length>=2&&(Ie=!0),function(ye){return ye.lift(new Z(Se,ae,Ie))}}class Z{constructor(ae,Ie,we=!1){this.accumulator=ae,this.seed=Ie,this.hasSeed=we}call(ae,Ie){return Ie.subscribe(new Ne(ae,this.accumulator,this.seed,this.hasSeed))}}class Ne extends u.L{constructor(ae,Ie,we,ye){super(ae),this.accumulator=Ie,this._seed=we,this.hasSeed=ye,this.index=0}get seed(){return this._seed}set seed(ae){this.hasSeed=!0,this._seed=ae}_next(ae){if(this.hasSeed)return this._tryNext(ae);this.seed=ae,this.destination.next(ae)}_tryNext(ae){const Ie=this.index++;let we;try{we=this.accumulator(this.seed,ae,Ie)}catch(ye){this.destination.error(ye)}this.seed=we,this.destination.next(we)}}},2474:(Jt,ct,j)=>{"use strict";j.d(ct,{B:()=>Ie});var u=j(1762);class Z{constructor(ye,de){this.subjectFactory=ye,this.selector=de}call(ye,de){const{selector:me}=this,te=this.subjectFactory(),he=me(te).subscribe(ye);return he.add(de.subscribe(te)),he}}var Ne=j(4327),Se=j(8929);function ae(){return new Se.xQ}function Ie(){return we=>(0,Ne.x)()(function re(we,ye){return function(me){let te;if(te="function"==typeof we?we:function(){return we},"function"==typeof ye)return me.lift(new Z(te,ye));const he=Object.create(me,u.N);return he.source=me,he.subjectFactory=te,he}}(ae)(we))}},1059:(Jt,ct,j)=>{"use strict";j.d(ct,{O:()=>Z});var u=j(1221),re=j(2866);function Z(...Ne){const Se=Ne[Ne.length-1];return(0,re.K)(Se)?(Ne.pop(),ae=>(0,u.z)(Ne,ae,Se)):ae=>(0,u.z)(Ne,ae)}},8915:(Jt,ct,j)=>{"use strict";j.d(ct,{R:()=>Pe});var u=j(2916);let re=1;const Z=Promise.resolve(),Ne={};function Se(ht){return ht in Ne&&(delete Ne[ht],!0)}const ae={setImmediate(ht){const ve=re++;return Ne[ve]=!0,Z.then(()=>Se(ve)&&ht()),ve},clearImmediate(ht){Se(ht)}};var we=j(6686),de=j(2268);const he=new class me extends de.v{flush(ve){this.active=!0,this.scheduled=void 0;const{actions:ot}=this;let Le,rt=-1,_t=ot.length;ve=ve||ot.shift();do{if(Le=ve.execute(ve.state,ve.delay))break}while(++rt<_t&&(ve=ot.shift()));if(this.active=!1,Le){for(;++rt<_t&&(ve=ot.shift());)ve.unsubscribe();throw Le}}}(class ye extends we.o{constructor(ve,ot){super(ve,ot),this.scheduler=ve,this.work=ot}requestAsyncId(ve,ot,Le=0){return null!==Le&&Le>0?super.requestAsyncId(ve,ot,Le):(ve.actions.push(this),ve.scheduled||(ve.scheduled=ae.setImmediate(ve.flush.bind(ve,null))))}recycleAsyncId(ve,ot,Le=0){if(null!==Le&&Le>0||null===Le&&this.delay>0)return super.recycleAsyncId(ve,ot,Le);0===ve.actions.length&&(ae.clearImmediate(ot),ve.scheduled=void 0)}});var Ue=j(6688);class _e extends u.y{constructor(ve,ot=0,Le=he){super(),this.source=ve,this.delayTime=ot,this.scheduler=Le,(!function Oe(ht){return!(0,Ue.k)(ht)&&ht-parseFloat(ht)+1>=0}(ot)||ot<0)&&(this.delayTime=0),(!Le||"function"!=typeof Le.schedule)&&(this.scheduler=he)}static create(ve,ot=0,Le=he){return new _e(ve,ot,Le)}static dispatch(ve){const{source:ot,subscriber:Le}=ve;return this.add(ot.subscribe(Le))}_subscribe(ve){return this.scheduler.schedule(_e.dispatch,this.delayTime,{source:this.source,subscriber:ve})}}function Pe(ht,ve=0){return function(Le){return Le.lift(new ke(ht,ve))}}class ke{constructor(ve,ot){this.scheduler=ve,this.delay=ot}call(ve,ot){return new _e(ot,this.delay,this.scheduler).subscribe(ve)}}},7545:(Jt,ct,j)=>{"use strict";j.d(ct,{w:()=>Ne});var u=j(4850),re=j(5254),Z=j(1177);function Ne(Ie,we){return"function"==typeof we?ye=>ye.pipe(Ne((de,me)=>(0,re.D)(Ie(de,me)).pipe((0,u.U)((te,he)=>we(de,te,me,he))))):ye=>ye.lift(new Se(Ie))}class Se{constructor(we){this.project=we}call(we,ye){return ye.subscribe(new ae(we,this.project))}}class ae extends Z.Ds{constructor(we,ye){super(we),this.project=ye,this.index=0}_next(we){let ye;const de=this.index++;try{ye=this.project(we,de)}catch(me){return void this.destination.error(me)}this._innerSub(ye)}_innerSub(we){const ye=this.innerSubscription;ye&&ye.unsubscribe();const de=new Z.IY(this),me=this.destination;me.add(de),this.innerSubscription=(0,Z.ft)(we,de),this.innerSubscription!==de&&me.add(this.innerSubscription)}_complete(){const{innerSubscription:we}=this;(!we||we.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(we){this.destination.next(we)}}},2986:(Jt,ct,j)=>{"use strict";j.d(ct,{q:()=>Ne});var u=j(3489),re=j(4231),Z=j(8896);function Ne(Ie){return we=>0===Ie?(0,Z.c)():we.lift(new Se(Ie))}class Se{constructor(we){if(this.total=we,this.total<0)throw new re.W}call(we,ye){return ye.subscribe(new ae(we,this.total))}}class ae extends u.L{constructor(we,ye){super(we),this.total=ye,this.count=0}_next(we){const ye=this.total,de=++this.count;de<=ye&&(this.destination.next(we),de===ye&&(this.destination.complete(),this.unsubscribe()))}}},2868:(Jt,ct,j)=>{"use strict";j.d(ct,{b:()=>Ne});var u=j(3489);function re(){}var Z=j(7043);function Ne(Ie,we,ye){return function(me){return me.lift(new Se(Ie,we,ye))}}class Se{constructor(we,ye,de){this.nextOrObserver=we,this.error=ye,this.complete=de}call(we,ye){return ye.subscribe(new ae(we,this.nextOrObserver,this.error,this.complete))}}class ae extends u.L{constructor(we,ye,de,me){super(we),this._tapNext=re,this._tapError=re,this._tapComplete=re,this._tapError=de||re,this._tapComplete=me||re,(0,Z.m)(ye)?(this._context=this,this._tapNext=ye):ye&&(this._context=ye,this._tapNext=ye.next||re,this._tapError=ye.error||re,this._tapComplete=ye.complete||re)}_next(we){try{this._tapNext.call(this._context,we)}catch(ye){return void this.destination.error(ye)}this.destination.next(we)}_error(we){try{this._tapError.call(this._context,we)}catch(ye){return void this.destination.error(ye)}this.destination.error(we)}_complete(){try{this._tapComplete.call(this._context)}catch(we){return void this.destination.error(we)}return this.destination.complete()}}},4907:(Jt,ct,j)=>{"use strict";j.d(ct,{T:()=>Z});var u=j(4450),re=j(3489);function Z(Ie=ae){return we=>we.lift(new Ne(Ie))}class Ne{constructor(we){this.errorFactory=we}call(we,ye){return ye.subscribe(new Se(we,this.errorFactory))}}class Se extends re.L{constructor(we,ye){super(we),this.errorFactory=ye,this.hasValue=!1}_next(we){this.hasValue=!0,this.destination.next(we)}_complete(){if(this.hasValue)return this.destination.complete();{let we;try{we=this.errorFactory()}catch(ye){we=ye}this.destination.error(we)}}}function ae(){return new u.K}},6454:(Jt,ct,j)=>{"use strict";j.d(ct,{r:()=>Z});var u=j(2916),re=j(2654);function Z(Ne,Se){return new u.y(ae=>{const Ie=new re.w;let we=0;return Ie.add(Se.schedule(function(){we!==Ne.length?(ae.next(Ne[we++]),ae.closed||Ie.add(this.schedule())):ae.complete()})),Ie})}},6686:(Jt,ct,j)=>{"use strict";j.d(ct,{o:()=>Z});var u=j(2654);class re extends u.w{constructor(Se,ae){super()}schedule(Se,ae=0){return this}}class Z extends re{constructor(Se,ae){super(Se,ae),this.scheduler=Se,this.work=ae,this.pending=!1}schedule(Se,ae=0){if(this.closed)return this;this.state=Se;const Ie=this.id,we=this.scheduler;return null!=Ie&&(this.id=this.recycleAsyncId(we,Ie,ae)),this.pending=!0,this.delay=ae,this.id=this.id||this.requestAsyncId(we,this.id,ae),this}requestAsyncId(Se,ae,Ie=0){return setInterval(Se.flush.bind(Se,this),Ie)}recycleAsyncId(Se,ae,Ie=0){if(null!==Ie&&this.delay===Ie&&!1===this.pending)return ae;clearInterval(ae)}execute(Se,ae){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ie=this._execute(Se,ae);if(Ie)return Ie;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Se,ae){let we,Ie=!1;try{this.work(Se)}catch(ye){Ie=!0,we=!!ye&&ye||new Error(ye)}if(Ie)return this.unsubscribe(),we}_unsubscribe(){const Se=this.id,ae=this.scheduler,Ie=ae.actions,we=Ie.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==we&&Ie.splice(we,1),null!=Se&&(this.id=this.recycleAsyncId(ae,Se,null)),this.delay=null}}},2268:(Jt,ct,j)=>{"use strict";j.d(ct,{v:()=>re});let u=(()=>{class Z{constructor(Se,ae=Z.now){this.SchedulerAction=Se,this.now=ae}schedule(Se,ae=0,Ie){return new this.SchedulerAction(this,Se).schedule(Ie,ae)}}return Z.now=()=>Date.now(),Z})();class re extends u{constructor(Ne,Se=u.now){super(Ne,()=>re.delegate&&re.delegate!==this?re.delegate.now():Se()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(Ne,Se=0,ae){return re.delegate&&re.delegate!==this?re.delegate.schedule(Ne,Se,ae):super.schedule(Ne,Se,ae)}flush(Ne){const{actions:Se}=this;if(this.active)return void Se.push(Ne);let ae;this.active=!0;do{if(ae=Ne.execute(Ne.state,Ne.delay))break}while(Ne=Se.shift());if(this.active=!1,ae){for(;Ne=Se.shift();)Ne.unsubscribe();throw ae}}}},353:(Jt,ct,j)=>{"use strict";j.d(ct,{z:()=>Z});var u=j(6686);const Z=new(j(2268).v)(u.o)},341:(Jt,ct,j)=>{"use strict";j.d(ct,{c:()=>ae,N:()=>Se});var u=j(6686),Z=j(2268);const Se=new class Ne extends Z.v{}(class re extends u.o{constructor(we,ye){super(we,ye),this.scheduler=we,this.work=ye}schedule(we,ye=0){return ye>0?super.schedule(we,ye):(this.delay=ye,this.state=we,this.scheduler.flush(this),this)}execute(we,ye){return ye>0||this.closed?super.execute(we,ye):this._execute(we,ye)}requestAsyncId(we,ye,de=0){return null!==de&&de>0||null===de&&this.delay>0?super.requestAsyncId(we,ye,de):we.flush(this)}}),ae=Se},5430:(Jt,ct,j)=>{"use strict";j.d(ct,{hZ:()=>re});const re=function u(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},3821:(Jt,ct,j)=>{"use strict";j.d(ct,{L:()=>u});const u="function"==typeof Symbol&&Symbol.observable||"@@observable"},7668:(Jt,ct,j)=>{"use strict";j.d(ct,{b:()=>u});const u="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},4231:(Jt,ct,j)=>{"use strict";j.d(ct,{W:()=>re});const re=(()=>{function Z(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return Z.prototype=Object.create(Error.prototype),Z})()},4450:(Jt,ct,j)=>{"use strict";j.d(ct,{K:()=>re});const re=(()=>{function Z(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return Z.prototype=Object.create(Error.prototype),Z})()},5279:(Jt,ct,j)=>{"use strict";j.d(ct,{N:()=>re});const re=(()=>{function Z(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return Z.prototype=Object.create(Error.prototype),Z})()},2782:(Jt,ct,j)=>{"use strict";function u(re){setTimeout(()=>{throw re},0)}j.d(ct,{z:()=>u})},5379:(Jt,ct,j)=>{"use strict";function u(re){return re}j.d(ct,{y:()=>u})},6688:(Jt,ct,j)=>{"use strict";j.d(ct,{k:()=>u});const u=Array.isArray||(re=>re&&"number"==typeof re.length)},8515:(Jt,ct,j)=>{"use strict";j.d(ct,{z:()=>u});const u=re=>re&&"number"==typeof re.length&&"function"!=typeof re},7043:(Jt,ct,j)=>{"use strict";function u(re){return"function"==typeof re}j.d(ct,{m:()=>u})},7830:(Jt,ct,j)=>{"use strict";function u(re){return null!==re&&"object"==typeof re}j.d(ct,{K:()=>u})},8955:(Jt,ct,j)=>{"use strict";function u(re){return!!re&&"function"!=typeof re.subscribe&&"function"==typeof re.then}j.d(ct,{t:()=>u})},2866:(Jt,ct,j)=>{"use strict";function u(re){return re&&"function"==typeof re.schedule}j.d(ct,{K:()=>u})},9249:(Jt,ct,j)=>{"use strict";j.d(ct,{s:()=>me});var u=j(3650),re=j(2782),Ne=j(5430),ae=j(3821),we=j(8515),ye=j(8955),de=j(7830);const me=te=>{if(te&&"function"==typeof te[ae.L])return(te=>he=>{const Ue=te[ae.L]();if("function"!=typeof Ue.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return Ue.subscribe(he)})(te);if((0,we.z)(te))return(0,u.V)(te);if((0,ye.t)(te))return(te=>he=>(te.then(Ue=>{he.closed||(he.next(Ue),he.complete())},Ue=>he.error(Ue)).then(null,re.z),he))(te);if(te&&"function"==typeof te[Ne.hZ])return(te=>he=>{const Ue=te[Ne.hZ]();for(;;){let Oe;try{Oe=Ue.next()}catch(_e){return he.error(_e),he}if(Oe.done){he.complete();break}if(he.next(Oe.value),he.closed)break}return"function"==typeof Ue.return&&he.add(()=>{Ue.return&&Ue.return()}),he})(te);{const Ue=`You provided ${(0,de.K)(te)?"an invalid object":`'${te}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(Ue)}}},3650:(Jt,ct,j)=>{"use strict";j.d(ct,{V:()=>u});const u=re=>Z=>{for(let Ne=0,Se=re.length;Ne<Se&&!Z.closed;Ne++)Z.next(re[Ne]);Z.complete()}},448:(Jt,ct,j)=>{"use strict";j.d(ct,{D:()=>Se});var u=j(3489);class re extends u.L{constructor(Ie,we,ye){super(),this.parent=Ie,this.outerValue=we,this.outerIndex=ye,this.index=0}_next(Ie){this.parent.notifyNext(this.outerValue,Ie,this.outerIndex,this.index++,this)}_error(Ie){this.parent.notifyError(Ie,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var Z=j(9249),Ne=j(2916);function Se(ae,Ie,we,ye,de=new re(ae,we,ye)){if(!de.closed)return Ie instanceof Ne.y?Ie.subscribe(de):(0,Z.s)(Ie)(de)}},863:(Jt,ct,j)=>{var u={"./ion-accordion_2.entry.js":[9654,8592,9654],"./ion-action-sheet.entry.js":[3648,8592,3648],"./ion-alert.entry.js":[1118,8592,1118],"./ion-app_8.entry.js":[53,8592,53],"./ion-avatar_3.entry.js":[4753,8592,4753],"./ion-back-button.entry.js":[2073,8592,2073],"./ion-backdrop.entry.js":[8939,8939],"./ion-breadcrumb_2.entry.js":[7544,8592,7544],"./ion-button_2.entry.js":[5652,8592,5652],"./ion-card_5.entry.js":[388,8592,388],"./ion-checkbox.entry.js":[9922,8592,9922],"./ion-chip.entry.js":[657,8592,657],"./ion-col_3.entry.js":[9824,9824],"./ion-datetime_3.entry.js":[4959,8592,4959],"./ion-fab_3.entry.js":[5836,8592,5836],"./ion-img.entry.js":[1033,1033],"./ion-infinite-scroll_2.entry.js":[8034,8592,8034],"./ion-input.entry.js":[1217,8592,1217],"./ion-item-option_3.entry.js":[2933,8592,2933],"./ion-item_8.entry.js":[4711,8592,4711],"./ion-loading.entry.js":[9434,8592,9434],"./ion-menu_3.entry.js":[8136,8592,8136],"./ion-modal.entry.js":[2349,8592,2349],"./ion-nav_2.entry.js":[5349,8592,5349],"./ion-picker-column-internal.entry.js":[7602,8592,7602],"./ion-picker-internal.entry.js":[9016,9016],"./ion-popover.entry.js":[3804,8592,3804],"./ion-progress-bar.entry.js":[4174,8592,4174],"./ion-radio_2.entry.js":[4432,8592,4432],"./ion-range.entry.js":[3545,8592,1709],"./ion-refresher_2.entry.js":[3326,8592,3326],"./ion-reorder_2.entry.js":[3583,8592,3583],"./ion-ripple-effect.entry.js":[9958,9958],"./ion-route_4.entry.js":[4330,8592,4330],"./ion-searchbar.entry.js":[8628,8592,8628],"./ion-segment_2.entry.js":[9325,8592,9325],"./ion-select_3.entry.js":[2773,8592,2773],"./ion-slide_2.entry.js":[1650,1650],"./ion-spinner.entry.js":[4908,8592,4908],"./ion-split-pane.entry.js":[9536,9536],"./ion-tab-bar_2.entry.js":[438,8592,438],"./ion-tab_2.entry.js":[1536,8592,1536],"./ion-text.entry.js":[4376,8592,4376],"./ion-textarea.entry.js":[6560,8592,6560],"./ion-toast.entry.js":[6120,8592,6120],"./ion-toggle.entry.js":[5168,8592,5168],"./ion-virtual-scroll.entry.js":[2289,2289]};function re(Z){if(!j.o(u,Z))return Promise.resolve().then(()=>{var ae=new Error("Cannot find module '"+Z+"'");throw ae.code="MODULE_NOT_FOUND",ae});var Ne=u[Z],Se=Ne[0];return Promise.all(Ne.slice(1).map(j.e)).then(()=>j(Se))}re.keys=()=>Object.keys(u),re.id=863,Jt.exports=re},655:(Jt,ct,j)=>{"use strict";function Ne(pe,Ve){var Ee={};for(var Te in pe)Object.prototype.hasOwnProperty.call(pe,Te)&&Ve.indexOf(Te)<0&&(Ee[Te]=pe[Te]);if(null!=pe&&"function"==typeof Object.getOwnPropertySymbols){var Je=0;for(Te=Object.getOwnPropertySymbols(pe);Je<Te.length;Je++)Ve.indexOf(Te[Je])<0&&Object.prototype.propertyIsEnumerable.call(pe,Te[Je])&&(Ee[Te[Je]]=pe[Te[Je]])}return Ee}function Se(pe,Ve,Ee,Te){var Ut,Je=arguments.length,Ze=Je<3?Ve:null===Te?Te=Object.getOwnPropertyDescriptor(Ve,Ee):Te;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Ze=Reflect.decorate(pe,Ve,Ee,Te);else for(var Xt=pe.length-1;Xt>=0;Xt--)(Ut=pe[Xt])&&(Ze=(Je<3?Ut(Ze):Je>3?Ut(Ve,Ee,Ze):Ut(Ve,Ee))||Ze);return Je>3&&Ze&&Object.defineProperty(Ve,Ee,Ze),Ze}function we(pe,Ve,Ee,Te){return new(Ee||(Ee=Promise))(function(Ze,Ut){function Xt(Qe){try{st(Te.next(Qe))}catch(nt){Ut(nt)}}function pt(Qe){try{st(Te.throw(Qe))}catch(nt){Ut(nt)}}function st(Qe){Qe.done?Ze(Qe.value):function Je(Ze){return Ze instanceof Ee?Ze:new Ee(function(Ut){Ut(Ze)})}(Qe.value).then(Xt,pt)}st((Te=Te.apply(pe,Ve||[])).next())})}j.d(ct,{_T:()=>Ne,gn:()=>Se,mG:()=>we})},9808:(Jt,ct,j)=>{"use strict";j.d(ct,{mr:()=>ht,ez:()=>Gs,K0:()=>Ie,Do:()=>ot,V_:()=>de,Ye:()=>Le,S$:()=>Pe,sg:()=>Tr,O5:()=>Q,tP:()=>xn,b0:()=>ve,lw:()=>we,EM:()=>zs,JF:()=>wr,PM:()=>Qr,w_:()=>ae,bD:()=>Ts,q:()=>Z,Mx:()=>Zi,HT:()=>Se});var u=j(5e3);let re=null;function Z(){return re}function Se(B){re||(re=B)}class ae{}const Ie=new u.OlP("DocumentToken");let we=(()=>{class B{historyGo($){throw new Error("Not implemented")}}return B.\u0275fac=function($){return new($||B)},B.\u0275prov=u.Yz7({token:B,factory:function(){return function ye(){return(0,u.LFG)(me)}()},providedIn:"platform"}),B})();const de=new u.OlP("Location Initialized");let me=(()=>{class B extends we{constructor($){super(),this._doc=$,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Z().getBaseHref(this._doc)}onPopState($){const ce=Z().getGlobalEventTarget(this._doc,"window");return ce.addEventListener("popstate",$,!1),()=>ce.removeEventListener("popstate",$)}onHashChange($){const ce=Z().getGlobalEventTarget(this._doc,"window");return ce.addEventListener("hashchange",$,!1),()=>ce.removeEventListener("hashchange",$)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname($){this.location.pathname=$}pushState($,ce,Ge){te()?this._history.pushState($,ce,Ge):this.location.hash=Ge}replaceState($,ce,Ge){te()?this._history.replaceState($,ce,Ge):this.location.hash=Ge}forward(){this._history.forward()}back(){this._history.back()}historyGo($=0){this._history.go($)}getState(){return this._history.state}}return B.\u0275fac=function($){return new($||B)(u.LFG(Ie))},B.\u0275prov=u.Yz7({token:B,factory:function(){return function he(){return new me((0,u.LFG)(Ie))}()},providedIn:"platform"}),B})();function te(){return!!window.history.pushState}function Ue(B,ee){if(0==B.length)return ee;if(0==ee.length)return B;let $=0;return B.endsWith("/")&&$++,ee.startsWith("/")&&$++,2==$?B+ee.substring(1):1==$?B+ee:B+"/"+ee}function Oe(B){const ee=B.match(/#|\?|$/),$=ee&&ee.index||B.length;return B.slice(0,$-("/"===B[$-1]?1:0))+B.slice($)}function _e(B){return B&&"?"!==B[0]?"?"+B:B}let Pe=(()=>{class B{historyGo($){throw new Error("Not implemented")}}return B.\u0275fac=function($){return new($||B)},B.\u0275prov=u.Yz7({token:B,factory:function(){return function ke(B){const ee=(0,u.LFG)(Ie).location;return new ve((0,u.LFG)(we),ee&&ee.origin||"")}()},providedIn:"root"}),B})();const ht=new u.OlP("appBaseHref");let ve=(()=>{class B extends Pe{constructor($,ce){if(super(),this._platformLocation=$,this._removeListenerFns=[],null==ce&&(ce=this._platformLocation.getBaseHrefFromDOM()),null==ce)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=ce}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState($){this._removeListenerFns.push(this._platformLocation.onPopState($),this._platformLocation.onHashChange($))}getBaseHref(){return this._baseHref}prepareExternalUrl($){return Ue(this._baseHref,$)}path($=!1){const ce=this._platformLocation.pathname+_e(this._platformLocation.search),Ge=this._platformLocation.hash;return Ge&&$?`${ce}${Ge}`:ce}pushState($,ce,Ge,mt){const Ft=this.prepareExternalUrl(Ge+_e(mt));this._platformLocation.pushState($,ce,Ft)}replaceState($,ce,Ge,mt){const Ft=this.prepareExternalUrl(Ge+_e(mt));this._platformLocation.replaceState($,ce,Ft)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo($=0){var ce,Ge;null===(Ge=(ce=this._platformLocation).historyGo)||void 0===Ge||Ge.call(ce,$)}}return B.\u0275fac=function($){return new($||B)(u.LFG(we),u.LFG(ht,8))},B.\u0275prov=u.Yz7({token:B,factory:B.\u0275fac}),B})(),ot=(()=>{class B extends Pe{constructor($,ce){super(),this._platformLocation=$,this._baseHref="",this._removeListenerFns=[],null!=ce&&(this._baseHref=ce)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState($){this._removeListenerFns.push(this._platformLocation.onPopState($),this._platformLocation.onHashChange($))}getBaseHref(){return this._baseHref}path($=!1){let ce=this._platformLocation.hash;return null==ce&&(ce="#"),ce.length>0?ce.substring(1):ce}prepareExternalUrl($){const ce=Ue(this._baseHref,$);return ce.length>0?"#"+ce:ce}pushState($,ce,Ge,mt){let Ft=this.prepareExternalUrl(Ge+_e(mt));0==Ft.length&&(Ft=this._platformLocation.pathname),this._platformLocation.pushState($,ce,Ft)}replaceState($,ce,Ge,mt){let Ft=this.prepareExternalUrl(Ge+_e(mt));0==Ft.length&&(Ft=this._platformLocation.pathname),this._platformLocation.replaceState($,ce,Ft)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo($=0){var ce,Ge;null===(Ge=(ce=this._platformLocation).historyGo)||void 0===Ge||Ge.call(ce,$)}}return B.\u0275fac=function($){return new($||B)(u.LFG(we),u.LFG(ht,8))},B.\u0275prov=u.Yz7({token:B,factory:B.\u0275fac}),B})(),Le=(()=>{class B{constructor($,ce){this._subject=new u.vpe,this._urlChangeListeners=[],this._platformStrategy=$;const Ge=this._platformStrategy.getBaseHref();this._platformLocation=ce,this._baseHref=Oe(St(Ge)),this._platformStrategy.onPopState(mt=>{this._subject.emit({url:this.path(!0),pop:!0,state:mt.state,type:mt.type})})}path($=!1){return this.normalize(this._platformStrategy.path($))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo($,ce=""){return this.path()==this.normalize($+_e(ce))}normalize($){return B.stripTrailingSlash(function _t(B,ee){return B&&ee.startsWith(B)?ee.substring(B.length):ee}(this._baseHref,St($)))}prepareExternalUrl($){return $&&"/"!==$[0]&&($="/"+$),this._platformStrategy.prepareExternalUrl($)}go($,ce="",Ge=null){this._platformStrategy.pushState(Ge,"",$,ce),this._notifyUrlChangeListeners(this.prepareExternalUrl($+_e(ce)),Ge)}replaceState($,ce="",Ge=null){this._platformStrategy.replaceState(Ge,"",$,ce),this._notifyUrlChangeListeners(this.prepareExternalUrl($+_e(ce)),Ge)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo($=0){var ce,Ge;null===(Ge=(ce=this._platformStrategy).historyGo)||void 0===Ge||Ge.call(ce,$)}onUrlChange($){this._urlChangeListeners.push($),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(ce=>{this._notifyUrlChangeListeners(ce.url,ce.state)}))}_notifyUrlChangeListeners($="",ce){this._urlChangeListeners.forEach(Ge=>Ge($,ce))}subscribe($,ce,Ge){return this._subject.subscribe({next:$,error:ce,complete:Ge})}}return B.normalizeQueryParams=_e,B.joinWithSlash=Ue,B.stripTrailingSlash=Oe,B.\u0275fac=function($){return new($||B)(u.LFG(Pe),u.LFG(we))},B.\u0275prov=u.Yz7({token:B,factory:function(){return function rt(){return new Le((0,u.LFG)(Pe),(0,u.LFG)(we))}()},providedIn:"root"}),B})();function St(B){return B.replace(/\/index.html$/,"")}function Zi(B,ee){ee=encodeURIComponent(ee);for(const $ of B.split(";")){const ce=$.indexOf("="),[Ge,mt]=-1==ce?[$,""]:[$.slice(0,ce),$.slice(ce+1)];if(Ge.trim()===ee)return decodeURIComponent(mt)}return null}class Ni{constructor(ee,$,ce,Ge){this.$implicit=ee,this.ngForOf=$,this.index=ce,this.count=Ge}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Tr=(()=>{class B{constructor($,ce,Ge){this._viewContainer=$,this._template=ce,this._differs=Ge,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf($){this._ngForOf=$,this._ngForOfDirty=!0}set ngForTrackBy($){this._trackByFn=$}get ngForTrackBy(){return this._trackByFn}set ngForTemplate($){$&&(this._template=$)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const $=this._ngForOf;!this._differ&&$&&(this._differ=this._differs.find($).create(this.ngForTrackBy))}if(this._differ){const $=this._differ.diff(this._ngForOf);$&&this._applyChanges($)}}_applyChanges($){const ce=this._viewContainer;$.forEachOperation((Ge,mt,Ft)=>{if(null==Ge.previousIndex)ce.createEmbeddedView(this._template,new Ni(Ge.item,this._ngForOf,-1,-1),null===Ft?void 0:Ft);else if(null==Ft)ce.remove(null===mt?void 0:mt);else if(null!==mt){const Yt=ce.get(mt);ce.move(Yt,Ft),Bi(Yt,Ge)}});for(let Ge=0,mt=ce.length;Ge<mt;Ge++){const Yt=ce.get(Ge).context;Yt.index=Ge,Yt.count=mt,Yt.ngForOf=this._ngForOf}$.forEachIdentityChange(Ge=>{Bi(ce.get(Ge.currentIndex),Ge)})}static ngTemplateContextGuard($,ce){return!0}}return B.\u0275fac=function($){return new($||B)(u.Y36(u.s_b),u.Y36(u.Rgc),u.Y36(u.ZZ4))},B.\u0275dir=u.lG2({type:B,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),B})();function Bi(B,ee){B.context.$implicit=ee.item}let Q=(()=>{class B{constructor($,ce){this._viewContainer=$,this._context=new ge,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=ce}set ngIf($){this._context.$implicit=this._context.ngIf=$,this._updateView()}set ngIfThen($){le("ngIfThen",$),this._thenTemplateRef=$,this._thenViewRef=null,this._updateView()}set ngIfElse($){le("ngIfElse",$),this._elseTemplateRef=$,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard($,ce){return!0}}return B.\u0275fac=function($){return new($||B)(u.Y36(u.s_b),u.Y36(u.Rgc))},B.\u0275dir=u.lG2({type:B,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),B})();class ge{constructor(){this.$implicit=null,this.ngIf=null}}function le(B,ee){if(ee&&!ee.createEmbeddedView)throw new Error(`${B} must be a TemplateRef, but received '${(0,u.AaK)(ee)}'.`)}let xn=(()=>{class B{constructor($){this._viewContainerRef=$,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}ngOnChanges($){if($.ngTemplateOutlet){const ce=this._viewContainerRef;this._viewRef&&ce.remove(ce.indexOf(this._viewRef)),this._viewRef=this.ngTemplateOutlet?ce.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext):null}else this._viewRef&&$.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return B.\u0275fac=function($){return new($||B)(u.Y36(u.s_b))},B.\u0275dir=u.lG2({type:B,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet"},features:[u.TTD]}),B})(),Gs=(()=>{class B{}return B.\u0275fac=function($){return new($||B)},B.\u0275mod=u.oAB({type:B}),B.\u0275inj=u.cJS({}),B})();const Ts="browser";function Qr(B){return"server"===B}let zs=(()=>{class B{}return B.\u0275prov=(0,u.Yz7)({token:B,providedIn:"root",factory:()=>new Ss((0,u.LFG)(Ie),window)}),B})();class Ss{constructor(ee,$){this.document=ee,this.window=$,this.offset=()=>[0,0]}setOffset(ee){this.offset=Array.isArray(ee)?()=>ee:ee}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(ee){this.supportsScrolling()&&this.window.scrollTo(ee[0],ee[1])}scrollToAnchor(ee){if(!this.supportsScrolling())return;const $=function Es(B,ee){const $=B.getElementById(ee)||B.getElementsByName(ee)[0];if($)return $;if("function"==typeof B.createTreeWalker&&B.body&&(B.body.createShadowRoot||B.body.attachShadow)){const ce=B.createTreeWalker(B.body,NodeFilter.SHOW_ELEMENT);let Ge=ce.currentNode;for(;Ge;){const mt=Ge.shadowRoot;if(mt){const Ft=mt.getElementById(ee)||mt.querySelector(`[name="${ee}"]`);if(Ft)return Ft}Ge=ce.nextNode()}}return null}(this.document,ee);$&&(this.scrollToElement($),$.focus())}setHistoryScrollRestoration(ee){if(this.supportScrollRestoration()){const $=this.window.history;$&&$.scrollRestoration&&($.scrollRestoration=ee)}}scrollToElement(ee){const $=ee.getBoundingClientRect(),ce=$.left+this.window.pageXOffset,Ge=$.top+this.window.pageYOffset,mt=this.offset();this.window.scrollTo(ce-mt[0],Ge-mt[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const ee=Ei(this.window.history)||Ei(Object.getPrototypeOf(this.window.history));return!(!ee||!ee.writable&&!ee.set)}catch(ee){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(ee){return!1}}}function Ei(B){return Object.getOwnPropertyDescriptor(B,"scrollRestoration")}class wr{}},5e3:(Jt,ct,j)=>{"use strict";j.d(ct,{deG:()=>Ol,tb:()=>uE,AFp:()=>sE,ip1:()=>iE,CZH:()=>vv,hGG:()=>nI,z2F:()=>Tv,sBO:()=>$w,Sil:()=>Ew,_Vd:()=>Qy,EJc:()=>_w,SBq:()=>Fm,qLn:()=>so,vpe:()=>_d,tBr:()=>Aa,XFs:()=>jt,OlP:()=>ns,zs3:()=>Gl,ZZ4:()=>Ov,aQg:()=>Pv,soG:()=>bv,YKP:()=>b0,h0i:()=>hg,PXZ:()=>Ow,R0b:()=>xc,FiY:()=>ll,Lbi:()=>lE,g9A:()=>aE,Qsj:()=>db,FYo:()=>m0,JOm:()=>xt,tp0:()=>ha,Rgc:()=>$m,dDg:()=>fE,q4F:()=>_0,GfV:()=>y0,s_b:()=>e_,ifc:()=>kn,eFA:()=>mE,G48:()=>Bw,Gpc:()=>me,X6Q:()=>Vw,_c5:()=>tI,VLi:()=>xw,c2e:()=>cE,zSh:()=>Vf,wAp:()=>rr,vHH:()=>Oe,cg1:()=>Pm,kL8:()=>lh,dqk:()=>Vn,sIi:()=>nh,CqO:()=>fu,QGY:()=>hu,F4k:()=>D_,RDi:()=>Ei,AaK:()=>we,qOj:()=>Fp,TTD:()=>vs,_Bn:()=>f0,xp6:()=>hp,uIk:()=>Bf,ekj:()=>bm,Suo:()=>L0,Xpm:()=>Rn,lG2:()=>Qn,Yz7:()=>Xe,cJS:()=>ft,oAB:()=>ut,Yjl:()=>Yr,Y36:()=>Gp,_UZ:()=>fm,GkF:()=>gm,qZA:()=>Wp,TgZ:()=>Wf,EpF:()=>mm,n5z:()=>gt,LFG:()=>ti,$8M:()=>Dr,$Z:()=>mo,NdJ:()=>Ac,CRH:()=>V0,oxw:()=>Yf,Hsn:()=>Kf,F$t:()=>cd,Q6J:()=>zp,iGM:()=>k0,CHM:()=>ue,LSH:()=>Zu,YNc:()=>$p,_uU:()=>My,Oqu:()=>Im,hij:()=>rg,AsE:()=>Cm,Gf:()=>F0});var u=j(8929),re=j(2654),Z=j(2916),Ne=j(6787),Se=j(2474);function ae(n){for(let r in n)if(n[r]===ae)return r;throw Error("Could not find renamed property on target object.")}function Ie(n,r){for(const s in r)r.hasOwnProperty(s)&&!n.hasOwnProperty(s)&&(n[s]=r[s])}function we(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(we).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const r=n.toString();if(null==r)return""+r;const s=r.indexOf("\n");return-1===s?r:r.substring(0,s)}function ye(n,r){return null==n||""===n?null===r?"":r:null==r||""===r?n:n+" "+r}const de=ae({__forward_ref__:ae});function me(n){return n.__forward_ref__=me,n.toString=function(){return we(this())},n}function te(n){return he(n)?n():n}function he(n){return"function"==typeof n&&n.hasOwnProperty(de)&&n.__forward_ref__===me}class Oe extends Error{constructor(r,s){super(function _e(n,r){return`NG0${Math.abs(n)}${r?": "+r:""}`}(r,s)),this.code=r}}function Pe(n){return"string"==typeof n?n:null==n?"":String(n)}function ke(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Pe(n)}function Le(n,r){const s=r?` in ${r}`:"";throw new Oe(-201,`No provider for ${ke(n)} found${s}`)}function st(n,r){null==n&&function Qe(n,r,s,c){throw new Error(`ASSERTION ERROR: ${n}`+(null==c?"":` [Expected=> ${s} ${c} ${r} <=Actual]`))}(r,n,null,"!=")}function Xe(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function ft(n){return{providers:n.providers||[],imports:n.imports||[]}}function Zt(n){return gn(n,mr)||gn(n,Kn)}function gn(n,r){return n.hasOwnProperty(r)?n[r]:null}function tn(n){return n&&(n.hasOwnProperty(xr)||n.hasOwnProperty(Yn))?n[xr]:null}const mr=ae({\u0275prov:ae}),xr=ae({\u0275inj:ae}),Kn=ae({ngInjectableDef:ae}),Yn=ae({ngInjectorDef:ae});var jt=(()=>((jt=jt||{})[jt.Default=0]="Default",jt[jt.Host=1]="Host",jt[jt.Self=2]="Self",jt[jt.SkipSelf=4]="SkipSelf",jt[jt.Optional=8]="Optional",jt))();let ir;function Jn(n){const r=ir;return ir=n,r}function cr(n,r,s){const c=Zt(n);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:s&jt.Optional?null:void 0!==r?r:void Le(we(n),"Injector")}function on(n){return{toString:n}.toString()}var qr=(()=>((qr=qr||{})[qr.OnPush=0]="OnPush",qr[qr.Default=1]="Default",qr))(),kn=(()=>{return(n=kn||(kn={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",kn;var n})();const hn="undefined"!=typeof globalThis&&globalThis,Dn="undefined"!=typeof window&&window,jr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Vn=hn||"undefined"!=typeof global&&global||Dn||jr,Nr={},wn=[],li=ae({\u0275cmp:ae}),er=ae({\u0275dir:ae}),nn=ae({\u0275pipe:ae}),kt=ae({\u0275mod:ae}),en=ae({\u0275fac:ae}),yn=ae({__NG_ELEMENT_ID__:ae});let _n=0;function Rn(n){return on(()=>{const s={},c={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:s,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===qr.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||wn,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||kn.Emulated,id:"c",styles:n.styles||wn,_:null,setInput:null,schemas:n.schemas||null,tView:null},f=n.directives,m=n.features,I=n.pipes;return c.id+=_n++,c.inputs=In(n.inputs,s),c.outputs=In(n.outputs),m&&m.forEach(x=>x(c)),c.directiveDefs=f?()=>("function"==typeof f?f():f).map(Ce):null,c.pipeDefs=I?()=>("function"==typeof I?I():I).map(je):null,c})}function Ce(n){return Bn(n)||function Er(n){return n[er]||null}(n)}function je(n){return function Un(n){return n[nn]||null}(n)}const Et={};function ut(n){return on(()=>{const r={type:n.type,bootstrap:n.bootstrap||wn,declarations:n.declarations||wn,imports:n.imports||wn,exports:n.exports||wn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(Et[n.id]=n.type),r})}function In(n,r){if(null==n)return Nr;const s={};for(const c in n)if(n.hasOwnProperty(c)){let f=n[c],m=f;Array.isArray(f)&&(m=f[1],f=f[0]),s[f]=c,r&&(r[f]=m)}return s}const Qn=Rn;function Yr(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,onDestroy:n.type.prototype.ngOnDestroy||null}}function Bn(n){return n[li]||null}function br(n,r){const s=n[kt]||null;if(!s&&!0===r)throw new Error(`Type ${we(n)} does not have '\u0275mod' property.`);return s}const Q=19;function He(n){return Array.isArray(n)&&"object"==typeof n[1]}function tt(n){return Array.isArray(n)&&!0===n[1]}function bt(n){return 0!=(8&n.flags)}function At(n){return 2==(2&n.flags)}function Nt(n){return 1==(1&n.flags)}function Rt(n){return null!==n.template}function pn(n){return 0!=(512&n[2])}function xi(n,r){return n.hasOwnProperty(en)?n[en]:null}class us{constructor(r,s,c){this.previousValue=r,this.currentValue=s,this.firstChange=c}isFirstChange(){return this.firstChange}}function vs(){return si}function si(n){return n.type.prototype.ngOnChanges&&(n.setInput=Zo),uo}function uo(){const n=Ts(this),r=null==n?void 0:n.current;if(r){const s=n.previous;if(s===Nr)n.previous=r;else for(let c in r)s[c]=r[c];n.current=null,this.ngOnChanges(r)}}function Zo(n,r,s,c){const f=Ts(n)||function es(n,r){return n[Gs]=r}(n,{previous:Nr,current:null}),m=f.current||(f.current={}),I=f.previous,x=this.declaredInputs[s],O=I[x];m[x]=new us(O&&O.currentValue,r,I===Nr),n[c]=r}vs.ngInherit=!0;const Gs="__ngSimpleChanges__";function Ts(n){return n[Gs]||null}let Ss;function Ei(n){Ss=n}function wr(n){return!!n.listen}const B={createRenderer:(n,r)=>function Es(){return void 0!==Ss?Ss:"undefined"!=typeof document?document:void 0}()};function $(n){for(;Array.isArray(n);)n=n[0];return n}function mt(n,r){return $(r[n])}function Ft(n,r){return $(r[n.index])}function zr(n,r){return n.data[r]}function or(n,r){const s=r[n];return He(s)?s:s[0]}function _r(n){return 4==(4&n[2])}function fi(n){return 128==(128&n[2])}function ui(n,r){return null==r?null:n[r]}function yo(n){n[18]=0}function rs(n,r){n[5]+=r;let s=n,c=n[3];for(;null!==c&&(1===r&&1===s[5]||-1===r&&0===s[5]);)c[5]+=r,s=c,c=c[3]}const On={lFrame:Lo(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function ie(){return On.bindingsEnabled}function E(){return On.lFrame.lView}function F(){return On.lFrame.tView}function ue(n){return On.lFrame.contextLView=n,n[8]}function dt(){let n=Kt();for(;null!==n&&64===n.type;)n=n.parent;return n}function Kt(){return On.lFrame.currentTNode}function Nn(n,r){const s=On.lFrame;s.currentTNode=n,s.isParent=r}function Jr(){return On.lFrame.isParent}function ci(){On.lFrame.isParent=!1}function bs(){return On.isInCheckNoChangesMode}function ts(n){On.isInCheckNoChangesMode=n}function Qo(){return On.lFrame.bindingIndex++}function Ws(n){const r=On.lFrame,s=r.bindingIndex;return r.bindingIndex=r.bindingIndex+n,s}function Ui(n,r){const s=On.lFrame;s.bindingIndex=s.bindingRootIndex=n,La(r)}function La(n){On.lFrame.currentDirectiveIndex=n}function Va(){return On.lFrame.currentQueryIndex}function Sl(n){On.lFrame.currentQueryIndex=n}function tl(n){const r=n[1];return 2===r.type?r.declTNode:1===r.type?n[6]:null}function Ba(n,r,s){if(s&jt.SkipSelf){let f=r,m=n;for(;!(f=f.parent,null!==f||s&jt.Host||(f=tl(m),null===f||(m=m[15],10&f.type))););if(null===f)return!1;r=f,n=m}const c=On.lFrame=$a();return c.currentTNode=r,c.lView=n,!0}function sa(n){const r=$a(),s=n[1];On.lFrame=r,r.currentTNode=s.firstChild,r.lView=n,r.tView=s,r.contextLView=n,r.bindingIndex=s.bindingStartIndex,r.inI18n=!1}function $a(){const n=On.lFrame,r=null===n?null:n.child;return null===r?Lo(n):r}function Lo(n){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=r),r}function To(){const n=On.lFrame;return On.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const oa=To;function aa(){const n=To();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function hr(){return On.lFrame.selectedIndex}function pr(n){On.lFrame.selectedIndex=n}function pi(){const n=On.lFrame;return zr(n.tView,n.selectedIndex)}function ar(n,r){for(let s=r.directiveStart,c=r.directiveEnd;s<c;s++){const m=n.data[s].type.prototype,{ngAfterContentInit:I,ngAfterContentChecked:x,ngAfterViewInit:O,ngAfterViewChecked:Y,ngOnDestroy:X}=m;I&&(n.contentHooks||(n.contentHooks=[])).push(-s,I),x&&((n.contentHooks||(n.contentHooks=[])).push(s,x),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(s,x)),O&&(n.viewHooks||(n.viewHooks=[])).push(-s,O),Y&&((n.viewHooks||(n.viewHooks=[])).push(s,Y),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(s,Y)),null!=X&&(n.destroyHooks||(n.destroyHooks=[])).push(s,X)}}function qi(n,r,s){qs(n,r,3,s)}function la(n,r,s,c){(3&n[2])===s&&qs(n,r,s,c)}function Yi(n,r){let s=n[2];(3&s)===r&&(s&=2047,s+=1,n[2]=s)}function qs(n,r,s,c){const m=null!=c?c:-1,I=r.length-1;let x=0;for(let O=void 0!==c?65535&n[18]:0;O<I;O++)if("number"==typeof r[O+1]){if(x=r[O],null!=c&&x>=c)break}else r[O]<0&&(n[18]+=65536),(x<m||-1==m)&&(xl(n,s,r,O),n[18]=(4294901760&n[18])+O+2),O++}function xl(n,r,s,c){const f=s[c]<0,m=s[c+1],x=n[f?-s[c]:s[c]];if(f){if(n[2]>>11<n[18]>>16&&(3&n[2])===r){n[2]+=2048;try{m.call(x)}finally{}}}else try{m.call(x)}finally{}}class Jo{constructor(r,s,c){this.factory=r,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=c}}function Ml(n,r,s){const c=wr(n);let f=0;for(;f<s.length;){const m=s[f];if("number"==typeof m){if(0!==m)break;f++;const I=s[f++],x=s[f++],O=s[f++];c?n.setAttribute(r,x,O,I):r.setAttributeNS(I,x,O)}else{const I=m,x=s[++f];rl(I)?c&&n.setProperty(r,I,x):c?n.setAttribute(r,I,x):r.setAttribute(I,x),f++}}return f}function no(n){return 3===n||4===n||6===n}function rl(n){return 64===n.charCodeAt(0)}function _o(n,r){if(null!==r&&0!==r.length)if(null===n||0===n.length)n=r.slice();else{let s=-1;for(let c=0;c<r.length;c++){const f=r[c];"number"==typeof f?s=f:0===s||gr(n,s,f,null,-1===s||2===s?r[++c]:null)}}return n}function gr(n,r,s,c,f){let m=0,I=n.length;if(-1===r)I=-1;else for(;m<n.length;){const x=n[m++];if("number"==typeof x){if(x===r){I=-1;break}if(x>r){I=m-1;break}}}for(;m<n.length;){const x=n[m];if("number"==typeof x)break;if(x===s){if(null===c)return void(null!==f&&(n[m+1]=f));if(c===n[m+1])return void(n[m+2]=f)}m++,null!==c&&m++,null!==f&&m++}-1!==I&&(n.splice(I,0,r),m=I+1),n.splice(m++,0,s),null!==c&&n.splice(m++,0,c),null!==f&&n.splice(m++,0,f)}function Ua(n){return-1!==n}function di(n){return 32767&n}function Fi(n,r){let s=function vu(n){return n>>16}(n),c=r;for(;s>0;)c=c[15],s--;return c}let xo=!0;function ws(n){const r=xo;return xo=n,r}let Bo=0;function Ia(n,r){const s=Mi(n,r);if(-1!==s)return s;const c=r[1];c.firstCreatePass&&(n.injectorIndex=r.length,Wt(c.data,n),Wt(r,null),Wt(c.blueprint,null));const f=As(n,r),m=n.injectorIndex;if(Ua(f)){const I=di(f),x=Fi(f,r),O=x[1].data;for(let Y=0;Y<8;Y++)r[m+Y]=x[I+Y]|O[I+Y]}return r[m+8]=f,m}function Wt(n,r){n.push(0,0,0,0,0,0,0,0,r)}function Mi(n,r){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===r[n.injectorIndex+8]?-1:n.injectorIndex}function As(n,r){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let s=0,c=null,f=r;for(;null!==f;){const m=f[1],I=m.type;if(c=2===I?m.declTNode:1===I?f[6]:null,null===c)return-1;if(s++,f=f[15],-1!==c.injectorIndex)return c.injectorIndex|s<<16}return-1}function ks(n,r,s){!function $o(n,r,s){let c;"string"==typeof s?c=s.charCodeAt(0)||0:s.hasOwnProperty(yn)&&(c=s[yn]),null==c&&(c=s[yn]=Bo++);const f=255&c;r.data[n+(f>>5)]|=1<<f}(n,r,s)}function Wn(n,r,s){if(s&jt.Optional)return n;Le(r,"NodeInjector")}function Rl(n,r,s,c){if(s&jt.Optional&&void 0===c&&(c=null),0==(s&(jt.Self|jt.Host))){const f=n[9],m=Jn(void 0);try{return f?f.get(r,c,s&jt.Optional):cr(r,c,s&jt.Optional)}finally{Jn(m)}}return Wn(c,r,s)}function cn(n,r,s,c=jt.Default,f){if(null!==n){const m=function W(n){if("string"==typeof n)return n.charCodeAt(0)||0;const r=n.hasOwnProperty(yn)?n[yn]:void 0;return"number"==typeof r?r>=0?255&r:T:r}(s);if("function"==typeof m){if(!Ba(r,n,c))return c&jt.Host?Wn(f,s,c):Rl(r,s,c,f);try{const I=m(c);if(null!=I||c&jt.Optional)return I;Le(s)}finally{oa()}}else if("number"==typeof m){let I=null,x=Mi(n,r),O=-1,Y=c&jt.Host?r[16][6]:null;for((-1===x||c&jt.SkipSelf)&&(O=-1===x?As(n,r):r[x+8],-1!==O&&Ae(c,!1)?(I=r[1],x=di(O),r=Fi(O,r)):x=-1);-1!==x;){const X=r[1];if(se(m,x,X.data)){const De=S(x,r,s,I,c,Y);if(De!==Dt)return De}O=r[x+8],-1!==O&&Ae(c,r[1].data[x+8]===Y)&&se(m,x,r)?(I=X,x=di(O),r=Fi(O,r)):x=-1}}}return Rl(r,s,c,f)}const Dt={};function T(){return new $e(dt(),E())}function S(n,r,s,c,f,m){const I=r[1],x=I.data[n+8],X=D(x,I,s,null==c?At(x)&&xo:c!=I&&0!=(3&x.type),f&jt.Host&&m===x);return null!==X?V(r,I,X,x):Dt}function D(n,r,s,c,f){const m=n.providerIndexes,I=r.data,x=1048575&m,O=n.directiveStart,X=m>>20,Ke=f?x+X:n.directiveEnd;for(let yt=c?x:x+X;yt<Ke;yt++){const Vt=I[yt];if(yt<O&&s===Vt||yt>=O&&Vt.type===s)return yt}if(f){const yt=I[O];if(yt&&Rt(yt)&&yt.type===s)return O}return null}function V(n,r,s,c){let f=n[s];const m=r.data;if(function Vo(n){return n instanceof Jo}(f)){const I=f;I.resolving&&function ht(n,r){const s=r?`. Dependency path: ${r.join(" > ")} > ${n}`:"";throw new Oe(-200,`Circular dependency in DI detected for ${n}${s}`)}(ke(m[s]));const x=ws(I.canSeeViewProviders);I.resolving=!0;const O=I.injectImpl?Jn(I.injectImpl):null;Ba(n,c,jt.Default);try{f=n[s]=I.factory(void 0,m,n,c),r.firstCreatePass&&s>=c.directiveStart&&function gi(n,r,s){const{ngOnChanges:c,ngOnInit:f,ngDoCheck:m}=r.type.prototype;if(c){const I=si(r);(s.preOrderHooks||(s.preOrderHooks=[])).push(n,I),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,I)}f&&(s.preOrderHooks||(s.preOrderHooks=[])).push(0-n,f),m&&((s.preOrderHooks||(s.preOrderHooks=[])).push(n,m),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,m))}(s,m[s],r)}finally{null!==O&&Jn(O),ws(x),I.resolving=!1,oa()}}return f}function se(n,r,s){return!!(s[r+(n>>5)]&1<<n)}function Ae(n,r){return!(n&jt.Self||n&jt.Host&&r)}class $e{constructor(r,s){this._tNode=r,this._lView=s}get(r,s,c){return cn(this._tNode,this._lView,r,c,s)}}function gt(n){return on(()=>{const r=n.prototype.constructor,s=r[en]||vn(r),c=Object.prototype;let f=Object.getPrototypeOf(n.prototype).constructor;for(;f&&f!==c;){const m=f[en]||vn(f);if(m&&m!==s)return m;f=Object.getPrototypeOf(f)}return m=>new m})}function vn(n){return he(n)?()=>{const r=vn(te(n));return r&&r()}:xi(n)}function Dr(n){return function Sn(n,r){if("class"===r)return n.classes;if("style"===r)return n.styles;const s=n.attrs;if(s){const c=s.length;let f=0;for(;f<c;){const m=s[f];if(no(m))break;if(0===m)f+=2;else if("number"==typeof m)for(f++;f<c&&"string"==typeof s[f];)f++;else{if(m===r)return s[f+1];f+=2}}}return null}(dt(),n)}const jn="__parameters__";function ro(n,r,s){return on(()=>{const c=function Fs(n){return function(...s){if(n){const c=n(...s);for(const f in c)this[f]=c[f]}}}(r);function f(...m){if(this instanceof f)return c.apply(this,m),this;const I=new f(...m);return x.annotation=I,x;function x(O,Y,X){const De=O.hasOwnProperty(jn)?O[jn]:Object.defineProperty(O,jn,{value:[]})[jn];for(;De.length<=X;)De.push(null);return(De[X]=De[X]||[]).push(I),O}}return s&&(f.prototype=Object.create(s.prototype)),f.prototype.ngMetadataName=n,f.annotationCls=f,f})}class ns{constructor(r,s){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=Xe({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Ol=new ns("AnalyzeForEntryComponents");function Ls(n,r){void 0===r&&(r=n);for(let s=0;s<n.length;s++){let c=n[s];Array.isArray(c)?(r===n&&(r=n.slice(0,s)),Ls(c,r)):r!==n&&r.push(c)}return r}function Cs(n,r){n.forEach(s=>Array.isArray(s)?Cs(s,r):r(s))}function Eu(n,r,s){r>=n.length?n.push(s):n.splice(r,0,s)}function Vs(n,r){return r>=n.length-1?n.pop():n.splice(r,1)[0]}function Ys(n,r){const s=[];for(let c=0;c<n;c++)s.push(r);return s}function Ci(n,r,s){let c=co(n,r);return c>=0?n[1|c]=s:(c=~c,function dn(n,r,s,c){let f=n.length;if(f==r)n.push(s,c);else if(1===f)n.push(c,n[0]),n[0]=s;else{for(f--,n.push(n[f-1],n[f]);f>r;)n[f]=n[f-2],f--;n[r]=s,n[r+1]=c}}(n,c,r,s)),c}function Da(n,r){const s=co(n,r);if(s>=0)return n[1|s]}function co(n,r){return function ol(n,r,s){let c=0,f=n.length>>s;for(;f!==c;){const m=c+(f-c>>1),I=n[m<<s];if(r===I)return m<<s;I>r?f=m:c=m+1}return~(f<<s)}(n,r,1)}const oe={},xe="__NG_DI_FLAG__",it="ngTempTokenPath",Lt=/\n/gm,lr="__source",tr=ae({provide:String,useValue:ae});let Fr;function ur(n){const r=Fr;return Fr=n,r}function xs(n,r=jt.Default){if(void 0===Fr)throw new Oe(203,"");return null===Fr?cr(n,void 0,r):Fr.get(n,r&jt.Optional?null:void 0,r)}function ti(n,r=jt.Default){return(function Hr(){return ir}()||xs)(te(n),r)}const ea=ti;function Sa(n){const r=[];for(let s=0;s<n.length;s++){const c=te(n[s]);if(Array.isArray(c)){if(0===c.length)throw new Oe(900,"");let f,m=jt.Default;for(let I=0;I<c.length;I++){const x=c[I],O=Pr(x);"number"==typeof O?-1===O?f=x.token:m|=O:f=x}r.push(ti(f,m))}else r.push(ti(c))}return r}function Eo(n,r){return n[xe]=r,n.prototype[xe]=r,n}function Pr(n){return n[xe]}const Aa=Eo(ro("Inject",n=>({token:n})),-1),ll=Eo(ro("Optional"),8),ha=Eo(ro("SkipSelf"),4);class kc{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function qa(n){return n instanceof kc?n.changingThisBreaksApplicationSecurity:n}const tu=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,$s=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var ss=(()=>((ss=ss||{})[ss.NONE=0]="NONE",ss[ss.HTML=1]="HTML",ss[ss.STYLE=2]="STYLE",ss[ss.SCRIPT=3]="SCRIPT",ss[ss.URL=4]="URL",ss[ss.RESOURCE_URL=5]="RESOURCE_URL",ss))();function Zu(n){const r=function hl(){const n=E();return n&&n[12]}();return r?r.sanitize(ss.URL,n)||"":function qu(n,r){const s=function Td(n){return n instanceof kc&&n.getTypeName()||null}(n);if(null!=s&&s!==r){if("ResourceURL"===s&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${s} (see https://g.co/ng/security#xss)`)}return s===r}(n,"URL")?qa(n):function dl(n){return(n=String(n)).match(tu)||n.match($s)?n:"unsafe:"+n}(Pe(n))}const pl="__ngContext__";function fo(n,r){n[pl]=r}function Ju(n){const r=function gl(n){return n[pl]||null}(n);return r?Array.isArray(r)?r:r.lView:null}function zc(n){return n.ngOriginalError}function Od(n,...r){n.error(...r)}class so{constructor(){this._console=console}handleError(r){const s=this._findOriginalError(r),c=function Mu(n){return n&&n.ngErrorLogger||Od}(r);c(this._console,"ERROR",r),s&&c(this._console,"ORIGINAL ERROR",s)}_findOriginalError(r){let s=r&&zc(r);for(;s&&zc(s);)s=zc(s);return s||null}}const kd=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Vn))();function y(n){return n instanceof Function?n():n}var xt=(()=>((xt=xt||{})[xt.Important=1]="Important",xt[xt.DashCase=2]="DashCase",xt))();function un(n,r){return undefined(n,r)}function os(n){const r=n[3];return tt(r)?r[3]:r}function Bl(n){return zo(n[13])}function oc(n){return zo(n[4])}function zo(n){for(;null!==n&&!tt(n);)n=n[4];return n}function $l(n,r,s,c,f){if(null!=c){let m,I=!1;tt(c)?m=c:He(c)&&(I=!0,c=c[0]);const x=$(c);0===n&&null!==s?null==f?Ru(r,s,x):_l(r,s,x,f||null,!0):1===n&&null!==s?_l(r,s,x,f||null,!0):2===n?function $d(n,r,s){const c=Fd(n,r);c&&function Ou(n,r,s,c){wr(n)?n.removeChild(r,s,c):r.removeChild(s)}(n,c,r,s)}(r,x,I):3===n&&r.destroyNode(x),null!=m&&function yf(n,r,s,c,f){const m=s[7];m!==$(s)&&$l(r,n,c,m,f);for(let x=10;x<s.length;x++){const O=s[x];vl(O[1],O,n,r,c,m)}}(r,n,m,s,f)}}function lc(n,r,s){if(wr(n))return n.createElement(r,s);{const c=null!==s?function zs(n){const r=n.toLowerCase();return"svg"===r?"http://www.w3.org/2000/svg":"math"===r?"http://www.w3.org/1998/MathML/":null}(s):null;return null===c?n.createElement(r):n.createElementNS(c,r)}}function uc(n,r){const s=n[9],c=s.indexOf(r),f=r[3];1024&r[2]&&(r[2]&=-1025,rs(f,-1)),s.splice(c,1)}function bh(n,r){if(n.length<=10)return;const s=10+r,c=n[s];if(c){const f=c[17];null!==f&&f!==n&&uc(f,c),r>0&&(n[s-1][4]=c[4]);const m=Vs(n,10+r);!function ff(n,r){vl(n,r,r[11],2,null,null),r[0]=null,r[6]=null}(c[1],c);const I=m[Q];null!==I&&I.detachView(m[1]),c[3]=null,c[4]=null,c[2]&=-129}return c}function wh(n,r){if(!(256&r[2])){const s=r[11];wr(s)&&s.destroyNode&&vl(n,r,s,3,null,null),function gg(n){let r=n[13];if(!r)return Ih(n[1],n);for(;r;){let s=null;if(He(r))s=r[13];else{const c=r[10];c&&(s=c)}if(!s){for(;r&&!r[4]&&r!==n;)He(r)&&Ih(r[1],r),r=r[3];null===r&&(r=n),He(r)&&Ih(r[1],r),s=r&&r[4]}r=s}}(r)}}function Ih(n,r){if(!(256&r[2])){r[2]&=-129,r[2]|=256,function cc(n,r){let s;if(null!=n&&null!=(s=n.destroyHooks))for(let c=0;c<s.length;c+=2){const f=r[s[c]];if(!(f instanceof Jo)){const m=s[c+1];if(Array.isArray(m))for(let I=0;I<m.length;I+=2){const x=f[m[I]],O=m[I+1];try{O.call(x)}finally{}}else try{m.call(f)}finally{}}}}(n,r),function Pt(n,r){const s=n.cleanup,c=r[7];let f=-1;if(null!==s)for(let m=0;m<s.length-1;m+=2)if("string"==typeof s[m]){const I=s[m+1],x="function"==typeof I?I(r):$(r[I]),O=c[f=s[m+2]],Y=s[m+3];"boolean"==typeof Y?x.removeEventListener(s[m],O,Y):Y>=0?c[f=Y]():c[f=-Y].unsubscribe(),m+=2}else{const I=c[f=s[m+1]];s[m].call(I)}if(null!==c){for(let m=f+1;m<c.length;m++)c[m]();r[7]=null}}(n,r),1===r[1].type&&wr(r[11])&&r[11].destroy();const s=r[17];if(null!==s&&tt(r[3])){s!==r[3]&&uc(s,r);const c=r[Q];null!==c&&c.detachView(n)}}}function Ka(n,r,s){return function Ch(n,r,s){let c=r;for(;null!==c&&40&c.type;)c=(r=c).parent;if(null===c)return s[0];if(2&c.flags){const f=n.data[c.directiveStart].encapsulation;if(f===kn.None||f===kn.Emulated)return null}return Ft(c,s)}(n,r.parent,s)}function _l(n,r,s,c,f){wr(n)?n.insertBefore(r,s,c,f):r.insertBefore(s,c,f)}function Ru(n,r,s){wr(n)?n.appendChild(r,s):r.appendChild(s)}function ap(n,r,s,c,f){null!==c?_l(n,r,s,c,f):Ru(n,r,s)}function Fd(n,r){return wr(n)?n.parentNode(r):r.parentNode}function mf(n,r,s){return Ld(n,r,s)}let Ld=function Ks(n,r,s){return 40&n.type?Ft(n,s):null};function Io(n,r,s,c){const f=Ka(n,c,r),m=r[11],x=mf(c.parent||r[6],c,r);if(null!=f)if(Array.isArray(s))for(let O=0;O<s.length;O++)ap(m,f,s[O],x,!1);else ap(m,f,s,x,!1)}function Bd(n,r){if(null!==r){const s=r.type;if(3&s)return Ft(r,n);if(4&s)return dc(-1,n[r.index]);if(8&s){const c=r.child;if(null!==c)return Bd(n,c);{const f=n[r.index];return tt(f)?dc(-1,f):$(f)}}if(32&s)return un(r,n)()||$(n[r.index]);{const c=Dh(n,r);return null!==c?Array.isArray(c)?c[0]:Bd(os(n[16]),c):Bd(n,r.next)}}return null}function Dh(n,r){return null!==r?n[16][6].projection[r.projection]:null}function dc(n,r){const s=10+n+1;if(s<r.length){const c=r[s],f=c[1].firstChild;if(null!==f)return Bd(c,f)}return r[7]}function ga(n,r,s,c,f,m,I){for(;null!=s;){const x=c[s.index],O=s.type;if(I&&0===r&&(x&&fo($(x),c),s.flags|=4),64!=(64&s.flags))if(8&O)ga(n,r,s.child,c,f,m,!1),$l(r,n,f,x,m);else if(32&O){const Y=un(s,c);let X;for(;X=Y();)$l(r,n,f,X,m);$l(r,n,f,x,m)}else 16&O?fc(n,r,c,s,f,m):$l(r,n,f,x,m);s=I?s.projectionNext:s.next}}function vl(n,r,s,c,f,m){ga(s,c,n.firstChild,r,f,m,!1)}function fc(n,r,s,c,f,m){const I=s[16],O=I[6].projection[c.projection];if(Array.isArray(O))for(let Y=0;Y<O.length;Y++)$l(r,n,f,O[Y],m);else ga(n,r,O,I[3],f,m,!0)}function Zc(n,r,s){wr(n)?n.setAttribute(r,"style",s):r.style.cssText=s}function Qc(n,r,s){wr(n)?""===s?n.removeAttribute(r,"class"):n.setAttribute(r,"class",s):r.className=s}function lp(n,r,s){let c=n.length;for(;;){const f=n.indexOf(r,s);if(-1===f)return f;if(0===f||n.charCodeAt(f-1)<=32){const m=r.length;if(f+m===c||n.charCodeAt(f+m)<=32)return f}s=f+1}}const Ud="ng-template";function _f(n,r,s){let c=0;for(;c<n.length;){let f=n[c++];if(s&&"class"===f){if(f=n[c],-1!==lp(f.toLowerCase(),r,0))return!0}else if(1===f){for(;c<n.length&&"string"==typeof(f=n[c++]);)if(f.toLowerCase()===r)return!0;return!1}}return!1}function pc(n){return 4===n.type&&n.value!==Ud}function gc(n,r,s){return r===(4!==n.type||s?n.value:Ud)}function up(n,r,s){let c=4;const f=n.attrs||[],m=function mc(n){for(let r=0;r<n.length;r++)if(no(n[r]))return r;return n.length}(f);let I=!1;for(let x=0;x<r.length;x++){const O=r[x];if("number"!=typeof O){if(!I)if(4&c){if(c=2|1&c,""!==O&&!gc(n,O,s)||""===O&&1===r.length){if(Na(c))return!1;I=!0}}else{const Y=8&c?O:r[++x];if(8&c&&null!==n.attrs){if(!_f(n.attrs,Y,s)){if(Na(c))return!1;I=!0}continue}const De=ma(8&c?"class":O,f,pc(n),s);if(-1===De){if(Na(c))return!1;I=!0;continue}if(""!==Y){let Ke;Ke=De>m?"":f[De+1].toLowerCase();const yt=8&c?Ke:null;if(yt&&-1!==lp(yt,Y,0)||2&c&&Y!==Ke){if(Na(c))return!1;I=!0}}}}else{if(!I&&!Na(c)&&!Na(O))return!1;if(I&&Na(O))continue;I=!1,c=O|1&c}}return Na(c)||I}function Na(n){return 0==(1&n)}function ma(n,r,s,c){if(null===r)return-1;let f=0;if(c||!s){let m=!1;for(;f<r.length;){const I=r[f];if(I===n)return f;if(3===I||6===I)m=!0;else{if(1===I||2===I){let x=r[++f];for(;"string"==typeof x;)x=r[++f];continue}if(4===I)break;if(0===I){f+=4;continue}}f+=m?1:2}return-1}return function po(n,r){let s=n.indexOf(4);if(s>-1)for(s++;s<n.length;){const c=n[s];if("number"==typeof c)return-1;if(c===r)return s;s++}return-1}(r,n)}function jd(n,r,s=!1){for(let c=0;c<r.length;c++)if(up(n,r[c],s))return!0;return!1}function ka(n,r){e:for(let s=0;s<r.length;s++){const c=r[s];if(n.length===c.length){for(let f=0;f<n.length;f++)if(n[f]!==c[f])continue e;return!0}}return!1}function Th(n,r){return n?":not("+r.trim()+")":r}function cp(n){let r=n[0],s=1,c=2,f="",m=!1;for(;s<n.length;){let I=n[s];if("string"==typeof I)if(2&c){const x=n[++s];f+="["+I+(x.length>0?'="'+x+'"':"")+"]"}else 8&c?f+="."+I:4&c&&(f+=" "+I);else""!==f&&!Na(I)&&(r+=Th(m,f),f=""),c=I,m=m||!Na(c);s++}return""!==f&&(r+=Th(m,f)),r}const Ar={};function hp(n){Hd(F(),E(),hr()+n,bs())}function Hd(n,r,s,c){if(!c)if(3==(3&r[2])){const m=n.preOrderCheckHooks;null!==m&&qi(r,m,s)}else{const m=n.preOrderHooks;null!==m&&la(r,m,0,s)}pr(s)}function _c(n,r){return n<<17|r<<2}function ya(n){return n>>17&32767}function vc(n){return 2|n}function qo(n){return(131068&n)>>2}function Ec(n,r){return-131069&n|r<<2}function El(n){return 1|n}function Ph(n,r){const s=n.contentQueries;if(null!==s)for(let c=0;c<s.length;c+=2){const f=s[c],m=s[c+1];if(-1!==m){const I=n.data[m];Sl(f),I.contentQueries(2,r[m],m)}}}function zd(n,r,s,c,f,m,I,x,O,Y){const X=r.blueprint.slice();return X[0]=f,X[2]=140|c,yo(X),X[3]=X[15]=n,X[8]=s,X[10]=I||n&&n[10],X[11]=x||n&&n[11],X[12]=O||n&&n[12]||null,X[9]=Y||n&&n[9]||null,X[6]=m,X[16]=2==r.type?n[16]:X,X}function td(n,r,s,c,f){let m=n.data[r];if(null===m)m=function Af(n,r,s,c,f){const m=Kt(),I=Jr(),O=n.data[r]=function wp(n,r,s,c,f,m){return{type:s,index:c,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,I?m:m&&m.parent,s,r,c,f);return null===n.firstChild&&(n.firstChild=O),null!==m&&(I?null==m.child&&null!==O.parent&&(m.child=O):null===m.next&&(m.next=O)),O}(n,r,s,c,f),function ba(){return On.lFrame.inI18n}()&&(m.flags|=64);else if(64&m.type){m.type=s,m.value=c,m.attrs=f;const I=function En(){const n=On.lFrame,r=n.currentTNode;return n.isParent?r:r.parent}();m.injectorIndex=null===I?-1:I.injectorIndex}return Nn(m,!0),m}function Fu(n,r,s,c){if(0===s)return-1;const f=r.length;for(let m=0;m<s;m++)r.push(c),n.blueprint.push(c),n.data.push(null);return f}function Wd(n,r,s){sa(r);try{const c=n.viewQuery;null!==c&&Cn(1,c,s);const f=n.template;null!==f&&Ep(n,r,f,1,s),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Ph(n,r),n.staticViewQueries&&Cn(2,n.viewQuery,s);const m=n.components;null!==m&&function vp(n,r){for(let s=0;s<r.length;s++)p(n,r[s])}(r,m)}catch(c){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),c}finally{r[2]&=-5,aa()}}function uu(n,r,s,c){const f=r[2];if(256==(256&f))return;sa(r);const m=bs();try{yo(r),function ia(n){return On.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==s&&Ep(n,r,s,2,c);const I=3==(3&f);if(!m)if(I){const Y=n.preOrderCheckHooks;null!==Y&&qi(r,Y,null)}else{const Y=n.preOrderHooks;null!==Y&&la(r,Y,0,null),Yi(r,0)}if(function h(n){for(let r=Bl(n);null!==r;r=oc(r)){if(!r[2])continue;const s=r[9];for(let c=0;c<s.length;c++){const f=s[c],m=f[3];0==(1024&f[2])&&rs(m,1),f[2]|=1024}}}(r),function Sp(n){for(let r=Bl(n);null!==r;r=oc(r))for(let s=10;s<r.length;s++){const c=r[s],f=c[1];fi(c)&&uu(f,c,f.template,c[8])}}(r),null!==n.contentQueries&&Ph(n,r),!m)if(I){const Y=n.contentCheckHooks;null!==Y&&qi(r,Y)}else{const Y=n.contentHooks;null!==Y&&la(r,Y,1),Yi(r,1)}!function ed(n,r){const s=n.hostBindingOpCodes;if(null!==s)try{for(let c=0;c<s.length;c++){const f=s[c];if(f<0)pr(~f);else{const m=f,I=s[++c],x=s[++c];Ui(I,m),x(2,r[m])}}}finally{pr(-1)}}(n,r);const x=n.components;null!==x&&function Nh(n,r){for(let s=0;s<r.length;s++)l(n,r[s])}(r,x);const O=n.viewQuery;if(null!==O&&Cn(2,O,c),!m)if(I){const Y=n.viewCheckHooks;null!==Y&&qi(r,Y)}else{const Y=n.viewHooks;null!==Y&&la(r,Y,2),Yi(r,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),m||(r[2]&=-73),1024&r[2]&&(r[2]&=-1025,rs(r[3],-1))}finally{aa()}}function Dg(n,r,s,c){const f=r[10],m=!bs(),I=_r(r);try{m&&!I&&f.begin&&f.begin(),I&&Wd(n,r,c),uu(n,r,s,c)}finally{m&&!I&&f.end&&f.end()}}function Ep(n,r,s,c,f){const m=hr(),I=2&c;try{pr(-1),I&&r.length>20&&Hd(n,r,20,bs()),s(c,f)}finally{pr(m)}}function kh(n,r,s){if(bt(r)){const f=r.directiveEnd;for(let m=r.directiveStart;m<f;m++){const I=n.data[m];I.contentQueries&&I.contentQueries(1,s[m],m)}}}function oo(n,r,s){!ie()||(function Zd(n,r,s,c){const f=s.directiveStart,m=s.directiveEnd;n.firstCreatePass||Ia(s,r),fo(c,r);const I=s.initialInputs;for(let x=f;x<m;x++){const O=n.data[x],Y=Rt(O);Y&&Xd(r,s,O);const X=V(r,n,x,s);fo(X,r),null!==I&&Ff(0,x-f,X,O,0,I),Y&&(or(s.index,r)[8]=X)}}(n,r,s,Ft(s,r)),128==(128&s.flags)&&function Qd(n,r,s){const c=s.directiveStart,f=s.directiveEnd,I=s.index,x=function Tl(){return On.lFrame.currentDirectiveIndex}();try{pr(I);for(let O=c;O<f;O++){const Y=n.data[O],X=r[O];La(O),(null!==Y.hostBindings||0!==Y.hostVars||null!==Y.hostAttrs)&&Uh(Y,X)}}finally{pr(-1),La(x)}}(n,r,s))}function Hl(n,r,s=Ft){const c=r.localNames;if(null!==c){let f=r.index+1;for(let m=0;m<c.length;m+=2){const I=c[m+1],x=-1===I?s(r,n):n[I];n[f++]=x}}}function Co(n){const r=n.tView;return null===r||r.incompleteFirstPass?n.tView=Yo(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):r}function Yo(n,r,s,c,f,m,I,x,O,Y){const X=20+c,De=X+f,Ke=function qd(n,r){const s=[];for(let c=0;c<r;c++)s.push(c<n?null:Ar);return s}(X,De),yt="function"==typeof Y?Y():Y;return Ke[1]={type:n,blueprint:Ke,template:s,queries:null,viewQuery:x,declTNode:r,data:Ke.slice().fill(null,X),bindingStartIndex:X,expandoStartIndex:De,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof I?I():I,firstChild:null,schemas:O,consts:yt,incompleteFirstPass:!1}}function xf(n,r,s,c){const f=go(r);null===s?f.push(c):(f.push(s),n.firstCreatePass&&cu(n).push(c,f.length-1))}function Lh(n,r,s){for(let c in n)if(n.hasOwnProperty(c)){const f=n[c];(s=null===s?{}:s).hasOwnProperty(c)?s[c].push(r,f):s[c]=[r,f]}return s}function Rf(n,r,s,c){let f=!1;if(ie()){const m=function Dp(n,r,s){const c=n.directiveRegistry;let f=null;if(c)for(let m=0;m<c.length;m++){const I=c[m];jd(s,I.selectors,!1)&&(f||(f=[]),ks(Ia(s,r),n,I.type),Rt(I)?(Nf(n,s),f.unshift(I)):f.push(I))}return f}(n,r,s),I=null===c?null:{"":-1};if(null!==m){f=!0,kf(s,n.data.length,m.length);for(let X=0;X<m.length;X++){const De=m[X];De.providersResolver&&De.providersResolver(De)}let x=!1,O=!1,Y=Fu(n,r,m.length,null);for(let X=0;X<m.length;X++){const De=m[X];s.mergedAttrs=_o(s.mergedAttrs,De.hostAttrs),Tp(n,s,r,Y,De),Ag(Y,De,I),null!==De.contentQueries&&(s.flags|=8),(null!==De.hostBindings||null!==De.hostAttrs||0!==De.hostVars)&&(s.flags|=128);const Ke=De.type.prototype;!x&&(Ke.ngOnChanges||Ke.ngOnInit||Ke.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(s.index),x=!0),!O&&(Ke.ngOnChanges||Ke.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(s.index),O=!0),Y++}!function Vh(n,r){const c=r.directiveEnd,f=n.data,m=r.attrs,I=[];let x=null,O=null;for(let Y=r.directiveStart;Y<c;Y++){const X=f[Y],De=X.inputs,Ke=null===m||pc(r)?null:jh(De,m);I.push(Ke),x=Lh(De,Y,x),O=Lh(X.outputs,Y,O)}null!==x&&(x.hasOwnProperty("class")&&(r.flags|=16),x.hasOwnProperty("style")&&(r.flags|=32)),r.initialInputs=I,r.inputs=x,r.outputs=O}(n,s)}I&&function Sg(n,r,s){if(r){const c=n.localNames=[];for(let f=0;f<r.length;f+=2){const m=s[r[f+1]];if(null==m)throw new Oe(-301,!1);c.push(r[f],m)}}}(s,c,I)}return s.mergedAttrs=_o(s.mergedAttrs,s.attrs),f}function Of(n,r,s,c,f,m){const I=m.hostBindings;if(I){let x=n.hostBindingOpCodes;null===x&&(x=n.hostBindingOpCodes=[]);const O=~r.index;(function Pf(n){let r=n.length;for(;r>0;){const s=n[--r];if("number"==typeof s&&s<0)return s}return 0})(x)!=O&&x.push(O),x.push(c,f,I)}}function Uh(n,r){null!==n.hostBindings&&n.hostBindings(1,r)}function Nf(n,r){r.flags|=2,(n.components||(n.components=[])).push(r.index)}function Ag(n,r,s){if(s){if(r.exportAs)for(let c=0;c<r.exportAs.length;c++)s[r.exportAs[c]]=n;Rt(r)&&(s[""]=n)}}function kf(n,r,s){n.flags|=1,n.directiveStart=r,n.directiveEnd=r+s,n.providerIndexes=r}function Tp(n,r,s,c,f){n.data[c]=f;const m=f.factory||(f.factory=xi(f.type)),I=new Jo(m,Rt(f),null);n.blueprint[c]=I,s[c]=I,Of(n,r,0,c,Fu(n,s,f.hostVars,Ar),f)}function Xd(n,r,s){const c=Ft(r,n),f=Co(s),m=n[10],I=M(n,zd(n,f,null,s.onPush?64:16,c,r,m,m.createRenderer(c,s),null,null));n[r.index]=I}function Qa(n,r,s,c,f,m){const I=Ft(n,r);!function Lu(n,r,s,c,f,m,I){if(null==m)wr(n)?n.removeAttribute(r,f,s):r.removeAttribute(f);else{const x=null==I?Pe(m):I(m,c||"",f);wr(n)?n.setAttribute(r,f,x,s):s?r.setAttributeNS(s,f,x):r.setAttribute(f,x)}}(r[11],I,m,n.value,s,c,f)}function Ff(n,r,s,c,f,m){const I=m[r];if(null!==I){const x=c.setInput;for(let O=0;O<I.length;){const Y=I[O++],X=I[O++],De=I[O++];null!==x?c.setInput(s,De,Y,X):s[X]=De}}}function jh(n,r){let s=null,c=0;for(;c<r.length;){const f=r[c];if(0!==f)if(5!==f){if("number"==typeof f)break;n.hasOwnProperty(f)&&(null===s&&(s=[]),s.push(f,n[f],r[c+1])),c+=2}else c+=2;else c+=4}return s}function Gh(n,r,s,c){return new Array(n,!0,!1,r,null,0,c,s,null,null)}function l(n,r){const s=or(r,n);if(fi(s)){const c=s[1];80&s[2]?uu(c,s,c.template,s[8]):s[5]>0&&a(s)}}function a(n){for(let c=Bl(n);null!==c;c=oc(c))for(let f=10;f<c.length;f++){const m=c[f];if(1024&m[2]){const I=m[1];uu(I,m,I.template,m[8])}else m[5]>0&&a(m)}const s=n[1].components;if(null!==s)for(let c=0;c<s.length;c++){const f=or(s[c],n);fi(f)&&f[5]>0&&a(f)}}function p(n,r){const s=or(r,n),c=s[1];(function b(n,r){for(let s=r.length;s<n.blueprint.length;s++)r.push(n.blueprint[s])})(c,s),Wd(c,s,s[8])}function M(n,r){return n[13]?n[14][4]=r:n[13]=r,n[14]=r,r}function U(n){for(;n;){n[2]|=64;const r=os(n);if(pn(n)&&!r)return n;n=r}return null}function Be(n,r,s){const c=r[10];c.begin&&c.begin();try{uu(n,r,n.template,s)}catch(f){throw Cc(r,f),f}finally{c.end&&c.end()}}function It(n){!function be(n){for(let r=0;r<n.components.length;r++){const s=n.components[r],c=Ju(s),f=c[1];Dg(f,c,f.template,s)}}(n[8])}function Cn(n,r,s){Sl(0),r(n,s)}const Hi=(()=>Promise.resolve(null))();function go(n){return n[7]||(n[7]=[])}function cu(n){return n.cleanup||(n.cleanup=[])}function Cc(n,r){const s=n[9],c=s?s.get(so,null):null;c&&c.handleError(r)}function zh(n,r,s,c,f){for(let m=0;m<s.length;){const I=s[m++],x=s[m++],O=r[I],Y=n.data[I];null!==Y.setInput?Y.setInput(O,f,c,x):O[x]=f}}function Dc(n,r,s){const c=mt(r,n);!function ac(n,r,s){wr(n)?n.setValue(r,s):r.textContent=s}(n[11],c,s)}function Wh(n,r,s){let c=s?n.styles:null,f=s?n.classes:null,m=0;if(null!==r)for(let I=0;I<r.length;I++){const x=r[I];"number"==typeof x?m=x:1==m?f=ye(f,x):2==m&&(c=ye(c,x+": "+r[++I]+";"))}s?n.styles=c:n.stylesWithoutHost=c,s?n.classes=f:n.classesWithoutHost=f}const Lf=new ns("INJECTOR",-1);class Mg{get(r,s=oe){if(s===oe){const c=new Error(`NullInjectorError: No provider for ${we(r)}!`);throw c.name="NullInjectorError",c}return s}}const Vf=new ns("Set Injector scope."),Jd={},Rg={};let nd;function Tc(){return void 0===nd&&(nd=new Mg),nd}function Ap(n,r=null,s=null,c){const f=eh(n,r,s,c);return f._resolveInjectorDefTypes(),f}function eh(n,r=null,s=null,c){return new qh(n,s,r||Tc(),c)}class qh{constructor(r,s,c,f=null){this.parent=c,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const m=[];s&&Cs(s,x=>this.processProvider(x,r,s)),Cs([r],x=>this.processInjectorType(x,[],m)),this.records.set(Lf,rd(void 0,this));const I=this.records.get(Vf);this.scope=null!=I?I.value:null,this.source=f||("object"==typeof r?null:we(r))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(r=>r.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(r,s=oe,c=jt.Default){this.assertNotDestroyed();const f=ur(this),m=Jn(void 0);try{if(!(c&jt.SkipSelf)){let x=this.records.get(r);if(void 0===x){const O=function u_(n){return"function"==typeof n||"object"==typeof n&&n instanceof ns}(r)&&Zt(r);x=O&&this.injectableDefInScope(O)?rd(xp(r),Jd):null,this.records.set(r,x)}if(null!=x)return this.hydrate(r,x)}return(c&jt.Self?Tc():this.parent).get(r,s=c&jt.Optional&&s===oe?null:s)}catch(I){if("NullInjectorError"===I.name){if((I[it]=I[it]||[]).unshift(we(r)),f)throw I;return function bo(n,r,s,c){const f=n[it];throw r[lr]&&f.unshift(r[lr]),n.message=function za(n,r,s,c=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let f=we(r);if(Array.isArray(r))f=r.map(we).join(" -> ");else if("object"==typeof r){let m=[];for(let I in r)if(r.hasOwnProperty(I)){let x=r[I];m.push(I+":"+("string"==typeof x?JSON.stringify(x):we(x)))}f=`{${m.join(", ")}}`}return`${s}${c?"("+c+")":""}[${f}]: ${n.replace(Lt,"\n  ")}`}("\n"+n.message,f,s,c),n.ngTokenPath=f,n[it]=null,n}(I,r,"R3InjectorError",this.source)}throw I}finally{Jn(m),ur(f)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(r=>this.get(r))}toString(){const r=[];return this.records.forEach((c,f)=>r.push(we(f))),`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Oe(205,!1)}processInjectorType(r,s,c){if(!(r=te(r)))return!1;let f=tn(r);const m=null==f&&r.ngModule||void 0,I=void 0===m?r:m,x=-1!==c.indexOf(I);if(void 0!==m&&(f=tn(m)),null==f)return!1;if(null!=f.imports&&!x){let X;c.push(I);try{Cs(f.imports,De=>{this.processInjectorType(De,s,c)&&(void 0===X&&(X=[]),X.push(De))})}finally{}if(void 0!==X)for(let De=0;De<X.length;De++){const{ngModule:Ke,providers:yt}=X[De];Cs(yt,Vt=>this.processProvider(Vt,Ke,yt||wn))}}this.injectorDefTypes.add(I);const O=xi(I)||(()=>new I);this.records.set(I,rd(O,Jd));const Y=f.providers;if(null!=Y&&!x){const X=r;Cs(Y,De=>this.processProvider(De,X,Y))}return void 0!==m&&void 0!==r.providers}processProvider(r,s,c){let f=Kh(r=te(r))?r:te(r&&r.provide);const m=function a_(n,r,s){return Mp(n)?rd(void 0,n.useValue):rd(Wm(n),Jd)}(r);if(Kh(r)||!0!==r.multi)this.records.get(f);else{let I=this.records.get(f);I||(I=rd(void 0,Jd,!0),I.factory=()=>Sa(I.multi),this.records.set(f,I)),f=r,I.multi.push(r)}this.records.set(f,m)}hydrate(r,s){return s.value===Jd&&(s.value=Rg,s.value=s.factory()),"object"==typeof s.value&&s.value&&function kg(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(s.value)&&this.onDestroy.add(s.value),s.value}injectableDefInScope(r){if(!r.providedIn)return!1;const s=te(r.providedIn);return"string"==typeof s?"any"===s||s===this.scope:this.injectorDefTypes.has(s)}}function xp(n){const r=Zt(n),s=null!==r?r.factory:xi(n);if(null!==s)return s;if(n instanceof ns)throw new Oe(204,!1);if(n instanceof Function)return function Yh(n){const r=n.length;if(r>0)throw Ys(r,"?"),new Oe(204,!1);const s=function An(n){const r=n&&(n[mr]||n[Kn]);if(r){const s=function ln(n){if(n.hasOwnProperty("name"))return n.name;const r=(""+n).match(/^function\s*([^\s(]+)/);return null===r?"":r[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${s}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${s}" class.`),r}return null}(n);return null!==s?()=>s.factory(n):()=>new n}(n);throw new Oe(204,!1)}function Wm(n,r,s){let c;if(Kh(n)){const f=te(n);return xi(f)||xp(f)}if(Mp(n))c=()=>te(n.useValue);else if(function Pg(n){return!(!n||!n.useFactory)}(n))c=()=>n.useFactory(...Sa(n.deps||[]));else if(function Og(n){return!(!n||!n.useExisting)}(n))c=()=>ti(te(n.useExisting));else{const f=te(n&&(n.useClass||n.provide));if(!function Ng(n){return!!n.deps}(n))return xi(f)||xp(f);c=()=>new f(...Sa(n.deps))}return c}function rd(n,r,s=!1){return{factory:n,value:r,multi:s?[]:void 0}}function Mp(n){return null!==n&&"object"==typeof n&&tr in n}function Kh(n){return"function"==typeof n}let Gl=(()=>{class n{static create(s,c){var f;if(Array.isArray(s))return Ap({name:""},c,s,"");{const m=null!==(f=s.name)&&void 0!==f?f:"";return Ap({name:m},s.parent,s.providers,m)}}}return n.THROW_IF_NOT_FOUND=oe,n.NULL=new Mg,n.\u0275prov=Xe({token:n,providedIn:"any",factory:()=>ti(Lf)}),n.__NG_ELEMENT_ID__=-1,n})();function Gg(n,r){ar(Ju(n)[1],dt())}function Fp(n){let r=function th(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),s=!0;const c=[n];for(;r;){let f;if(Rt(n))f=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new Oe(903,"");f=r.\u0275dir}if(f){if(s){c.push(f);const I=n;I.inputs=Wg(n.inputs),I.declaredInputs=Wg(n.declaredInputs),I.outputs=Wg(n.outputs);const x=f.hostBindings;x&&Yg(n,x);const O=f.viewQuery,Y=f.contentQueries;if(O&&qg(n,O),Y&&Sc(n,Y),Ie(n.inputs,f.inputs),Ie(n.declaredInputs,f.declaredInputs),Ie(n.outputs,f.outputs),Rt(f)&&f.data.animation){const X=n.data;X.animation=(X.animation||[]).concat(f.data.animation)}}const m=f.features;if(m)for(let I=0;I<m.length;I++){const x=m[I];x&&x.ngInherit&&x(n),x===Fp&&(s=!1)}}r=Object.getPrototypeOf(r)}!function zg(n){let r=0,s=null;for(let c=n.length-1;c>=0;c--){const f=n[c];f.hostVars=r+=f.hostVars,f.hostAttrs=_o(f.hostAttrs,s=_o(s,f.hostAttrs))}}(c)}function Wg(n){return n===Nr?{}:n===wn?[]:n}function qg(n,r){const s=n.viewQuery;n.viewQuery=s?(c,f)=>{r(c,f),s(c,f)}:r}function Sc(n,r){const s=n.contentQueries;n.contentQueries=s?(c,f,m)=>{r(c,f,m),s(c,f,m)}:r}function Yg(n,r){const s=n.hostBindings;n.hostBindings=s?(c,f)=>{r(c,f),s(c,f)}:r}let Lp=null;function id(){if(!Lp){const n=Vn.Symbol;if(n&&n.iterator)Lp=n.iterator;else{const r=Object.getOwnPropertyNames(Map.prototype);for(let s=0;s<r.length;++s){const c=r[s];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(Lp=c)}}}return Lp}function nh(n){return!!Qg(n)&&(Array.isArray(n)||!(n instanceof Map)&&id()in n)}function Qg(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Ko(n,r,s){return!Object.is(n[r],s)&&(n[r]=s,!0)}function Bf(n,r,s,c){const f=E();return Ko(f,Qo(),r)&&(F(),Qa(pi(),f,n,r,s,c)),Bf}function ad(n,r,s,c,f,m){const x=function sd(n,r,s,c){const f=Ko(n,r,s);return Ko(n,r+1,c)||f}(n,function Wi(){return On.lFrame.bindingIndex}(),s,f);return Ws(2),x?r+Pe(s)+c+Pe(f)+m:Ar}function $p(n,r,s,c,f,m,I,x){const O=E(),Y=F(),X=n+20,De=Y.firstCreatePass?function tm(n,r,s,c,f,m,I,x,O){const Y=r.consts,X=td(r,n,4,I||null,ui(Y,x));Rf(r,s,X,ui(Y,O)),ar(r,X);const De=X.tViews=Yo(2,X,c,f,m,r.directiveRegistry,r.pipeRegistry,null,r.schemas,Y);return null!==r.queries&&(r.queries.template(r,X),De.queries=r.queries.embeddedTView(X)),X}(X,Y,O,r,s,c,f,m,I):Y.data[X];Nn(De,!1);const Ke=O[11].createComment("");Io(Y,O,Ke,De),fo(Ke,O),M(O,O[X]=Gh(Ke,O,Ke,De)),Nt(De)&&oo(Y,O,De),null!=I&&Hl(O,De,x)}function Gp(n,r=jt.Default){const s=E();return null===s?ti(n,r):cn(dt(),s,te(n),r)}function mo(){throw new Error("invalid")}function zp(n,r,s){const c=E();return Ko(c,Qo(),r)&&function No(n,r,s,c,f,m,I,x){const O=Ft(r,s);let X,Y=r.inputs;!x&&null!=Y&&(X=Y[c])?(zh(n,s,X,c,f),At(r)&&function Bh(n,r){const s=or(r,n);16&s[2]||(s[2]|=64)}(s,r.index)):3&r.type&&(c=function Yd(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(c),f=null!=I?I(f,r.value||"",c):f,wr(m)?m.setProperty(O,c,f):rl(c)||(O.setProperty?O.setProperty(c,f):O[c]=f))}(F(),pi(),c,n,r,c[11],s,!1),zp}function hm(n,r,s,c,f){const I=f?"class":"style";zh(n,s,r.inputs[I],I,c)}function Wf(n,r,s,c){const f=E(),m=F(),I=20+n,x=f[11],O=f[I]=lc(x,r,function Yl(){return On.lFrame.currentNamespace}()),Y=m.firstCreatePass?function I_(n,r,s,c,f,m,I){const x=r.consts,Y=td(r,n,2,f,ui(x,m));return Rf(r,s,Y,ui(x,I)),null!==Y.attrs&&Wh(Y,Y.attrs,!1),null!==Y.mergedAttrs&&Wh(Y,Y.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,Y),Y}(I,m,f,0,r,s,c):m.data[I];Nn(Y,!0);const X=Y.mergedAttrs;null!==X&&Ml(x,O,X);const De=Y.classes;null!==De&&Qc(x,O,De);const Ke=Y.styles;return null!==Ke&&Zc(x,O,Ke),64!=(64&Y.flags)&&Io(m,f,O,Y),0===function G(){return On.lFrame.elementDepthCount}()&&fo(O,f),function k(){On.lFrame.elementDepthCount++}(),Nt(Y)&&(oo(m,f,Y),kh(m,Y,f)),null!==c&&Hl(f,Y),Wf}function Wp(){let n=dt();Jr()?ci():(n=n.parent,Nn(n,!1));const r=n;!function P(){On.lFrame.elementDepthCount--}();const s=F();return s.firstCreatePass&&(ar(s,n),bt(n)&&s.queries.elementEnd(n)),null!=r.classesWithoutHost&&function Kl(n){return 0!=(16&n.flags)}(r)&&hm(s,r,E(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function wa(n){return 0!=(32&n.flags)}(r)&&hm(s,r,E(),r.stylesWithoutHost,!1),Wp}function fm(n,r,s,c){return Wf(n,r,s,c),Wp(),fm}function fy(n,r,s){const c=E(),f=F(),m=n+20,I=f.firstCreatePass?function C_(n,r,s,c,f){const m=r.consts,I=ui(m,c),x=td(r,n,8,"ng-container",I);return null!==I&&Wh(x,I,!0),Rf(r,s,x,ui(m,f)),null!==r.queries&&r.queries.elementStart(r,x),x}(m,f,c,r,s):f.data[m];Nn(I,!0);const x=c[m]=c[11].createComment("");return Io(f,c,x,I),fo(x,c),Nt(I)&&(oo(f,c,I),kh(f,I,c)),null!=s&&Hl(c,I),fy}function pm(){let n=dt();const r=F();return Jr()?ci():(n=n.parent,Nn(n,!1)),r.firstCreatePass&&(ar(r,n),bt(n)&&r.queries.elementEnd(n)),pm}function gm(n,r,s){return fy(n,r,s),pm(),gm}function mm(){return E()}function hu(n){return!!n&&"function"==typeof n.then}function D_(n){return!!n&&"function"==typeof n.subscribe}const fu=D_;function Ac(n,r,s,c){const f=E(),m=F(),I=dt();return function py(n,r,s,c,f,m,I,x){const O=Nt(c),X=n.firstCreatePass&&cu(n),De=r[8],Ke=go(r);let yt=!0;if(3&c.type||x){const bn=Ft(c,r),Hn=x?x(bn):bn,Ht=Ke.length,vr=x?Si=>x($(Si[c.index])):c.index;if(wr(s)){let Si=null;if(!x&&O&&(Si=function T_(n,r,s,c){const f=n.cleanup;if(null!=f)for(let m=0;m<f.length-1;m+=2){const I=f[m];if(I===s&&f[m+1]===c){const x=r[7],O=f[m+2];return x.length>O?x[O]:null}"string"==typeof I&&(m+=2)}return null}(n,r,f,c.index)),null!==Si)(Si.__ngLastListenerFn__||Si).__ngNextListenerFn__=m,Si.__ngLastListenerFn__=m,yt=!1;else{m=qp(c,r,De,m,!1);const ds=s.listen(Hn,f,m);Ke.push(m,ds),X&&X.push(f,vr,Ht,Ht+1)}}else m=qp(c,r,De,m,!0),Hn.addEventListener(f,m,I),Ke.push(m),X&&X.push(f,vr,Ht,I)}else m=qp(c,r,De,m,!1);const Vt=c.outputs;let an;if(yt&&null!==Vt&&(an=Vt[f])){const bn=an.length;if(bn)for(let Hn=0;Hn<bn;Hn+=2){const yu=r[an[Hn]][an[Hn+1]].subscribe(m),rp=Ke.length;Ke.push(m,yu),X&&X.push(f,c.index,rp,-(rp+1))}}}(m,f,f[11],I,n,r,!!s,c),Ac}function ym(n,r,s,c){try{return!1!==s(c)}catch(f){return Cc(n,f),!1}}function qp(n,r,s,c,f){return function m(I){if(I===Function)return c;const x=2&n.flags?or(n.index,r):r;0==(32&r[2])&&U(x);let O=ym(r,0,c,I),Y=m.__ngNextListenerFn__;for(;Y;)O=ym(r,0,Y,I)&&O,Y=Y.__ngNextListenerFn__;return f&&!1===O&&(I.preventDefault(),I.returnValue=!1),O}}function Yf(n=1){return function nl(n){return(On.lFrame.contextLView=function kr(n,r){for(;n>0;)r=r[15],n--;return r}(n,On.lFrame.contextLView))[8]}(n)}function S_(n,r){let s=null;const c=function Pu(n){const r=n.attrs;if(null!=r){const s=r.indexOf(5);if(0==(1&s))return r[s+1]}return null}(n);for(let f=0;f<r.length;f++){const m=r[f];if("*"!==m){if(null===c?jd(n,m,!0):ka(c,m))return f}else s=f}return s}function cd(n){const r=E()[16][6];if(!r.projection){const c=r.projection=Ys(n?n.length:1,null),f=c.slice();let m=r.child;for(;null!==m;){const I=n?S_(m,n):0;null!==I&&(f[I]?f[I].projectionNext=m:c[I]=m,f[I]=m),m=m.next}}}function Kf(n,r=0,s){const c=E(),f=F(),m=td(f,20+n,16,null,s||null);null===m.projection&&(m.projection=r),ci(),64!=(64&m.flags)&&function hc(n,r,s){fc(r[11],0,r,s,Ka(n,s,r),mf(s.parent||r[6],s,r))}(f,c,m)}function Xp(n,r,s,c,f){const m=n[s+1],I=null===r;let x=c?ya(m):qo(m),O=!1;for(;0!==x&&(!1===O||I);){const X=n[x+1];x_(n[x],r)&&(O=!0,n[x+1]=c?El(X):vc(X)),x=c?ya(X):qo(X)}O&&(n[s+1]=c?vc(m):El(m))}function x_(n,r){return null===n||null==r||(Array.isArray(n)?n[1]:n)===r||!(!Array.isArray(n)||"string"!=typeof r)&&co(n,r)>=0}function bm(n,r){return function pu(n,r,s,c){const f=E(),m=F(),I=Ws(2);m.firstUpdatePass&&function Dy(n,r,s,c){const f=n.data;if(null===f[s+1]){const m=f[hr()],I=function Cy(n,r){return r>=n.expandoStartIndex}(n,s);(function pd(n,r){return 0!=(n.flags&(r?16:32))})(m,c)&&null===r&&!I&&(r=!1),r=function Ty(n,r,s,c){const f=function el(n){const r=On.lFrame.currentDirectiveIndex;return-1===r?null:n[r]}(n);let m=c?r.residualClasses:r.residualStyles;if(null===f)0===(c?r.classBindings:r.styleBindings)&&(s=nf(s=eg(null,n,r,s,c),r.attrs,c),m=null);else{const I=r.directiveStylingLast;if(-1===I||n[I]!==f)if(s=eg(f,n,r,s,c),null===m){let O=function O_(n,r,s){const c=s?r.classBindings:r.styleBindings;if(0!==qo(c))return n[ya(c)]}(n,r,c);void 0!==O&&Array.isArray(O)&&(O=eg(null,n,r,O[1],c),O=nf(O,r.attrs,c),function P_(n,r,s,c){n[ya(s?r.classBindings:r.styleBindings)]=c}(n,r,c,O))}else m=function Sy(n,r,s){let c;const f=r.directiveEnd;for(let m=1+r.directiveStylingLast;m<f;m++)c=nf(c,n[m].hostAttrs,s);return nf(c,r.attrs,s)}(n,r,c)}return void 0!==m&&(c?r.residualClasses=m:r.residualStyles=m),s}(f,m,r,c),function _y(n,r,s,c,f,m){let I=m?r.classBindings:r.styleBindings,x=ya(I),O=qo(I);n[c]=s;let X,Y=!1;if(Array.isArray(s)){const De=s;X=De[1],(null===X||co(De,X)>0)&&(Y=!0)}else X=s;if(f)if(0!==O){const Ke=ya(n[x+1]);n[c+1]=_c(Ke,x),0!==Ke&&(n[Ke+1]=Ec(n[Ke+1],c)),n[x+1]=function Po(n,r){return 131071&n|r<<17}(n[x+1],c)}else n[c+1]=_c(x,0),0!==x&&(n[x+1]=Ec(n[x+1],c)),x=c;else n[c+1]=_c(O,0),0===x?x=c:n[O+1]=Ec(n[O+1],c),O=c;Y&&(n[c+1]=vc(n[c+1])),Xp(n,X,c,!0),Xp(n,X,c,!1),function vm(n,r,s,c,f){const m=f?n.residualClasses:n.residualStyles;null!=m&&"string"==typeof r&&co(m,r)>=0&&(s[c+1]=El(s[c+1]))}(r,X,n,c,m),I=_c(x,O),m?r.classBindings=I:r.styleBindings=I}(f,m,r,s,I,c)}}(m,n,I,c),r!==Ar&&Ko(f,I,r)&&function xy(n,r,s,c,f,m,I,x){if(!(3&r.type))return;const O=n.data,Y=O[x+1];gu(function Sh(n){return 1==(1&n)}(Y)?wm(O,r,s,f,qo(Y),I):void 0)||(gu(m)||function vf(n){return 2==(2&n)}(Y)&&(m=wm(O,null,s,f,x,I)),function Kc(n,r,s,c,f){const m=wr(n);if(r)f?m?n.addClass(s,c):s.classList.add(c):m?n.removeClass(s,c):s.classList.remove(c);else{let I=-1===c.indexOf("-")?void 0:xt.DashCase;if(null==f)m?n.removeStyle(s,c,I):s.style.removeProperty(c);else{const x="string"==typeof f&&f.endsWith("!important");x&&(f=f.slice(0,-10),I|=xt.Important),m?n.setStyle(s,c,f,I):s.style.setProperty(c,f,x?"important":"")}}}(c,I,mt(hr(),s),f,m))}(m,m.data[hr()],f,f[11],n,f[I+1]=function N_(n,r){return null==n||("string"==typeof r?n+=r:"object"==typeof n&&(n=we(qa(n)))),n}(r,s),c,I)}(n,r,null,!0),bm}function eg(n,r,s,c,f){let m=null;const I=s.directiveEnd;let x=s.directiveStylingLast;for(-1===x?x=s.directiveStart:x++;x<I&&(m=r[x],c=nf(c,m.hostAttrs,f),m!==n);)x++;return null!==n&&(s.directiveStylingLast=x),c}function nf(n,r,s){const c=s?1:2;let f=-1;if(null!==r)for(let m=0;m<r.length;m++){const I=r[m];"number"==typeof I?f=I:f===c&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Ci(n,I,!!s||r[++m]))}return void 0===n?null:n}function wm(n,r,s,c,f,m){const I=null===r;let x;for(;f>0;){const O=n[f],Y=Array.isArray(O),X=Y?O[1]:O,De=null===X;let Ke=s[f+1];Ke===Ar&&(Ke=De?wn:void 0);let yt=De?Da(Ke,c):X===c?Ke:void 0;if(Y&&!gu(yt)&&(yt=Da(O,c)),gu(yt)&&(x=yt,I))return x;const Vt=n[f+1];f=I?ya(Vt):qo(Vt)}if(null!==r){let O=m?r.residualClasses:r.residualStyles;null!=O&&(x=Da(O,c))}return x}function gu(n){return void 0!==n}function My(n,r=""){const s=E(),c=F(),f=n+20,m=c.firstCreatePass?td(c,f,1,r,null):c.data[f],I=s[f]=function ou(n,r){return wr(n)?n.createText(r):n.createTextNode(r)}(s[11],r);Io(c,s,I,m),Nn(m,!1)}function Im(n){return rg("",n,""),Im}function rg(n,r,s){const c=E(),f=function od(n,r,s,c){return Ko(n,Qo(),s)?r+Pe(s)+c:Ar}(c,n,r,s);return f!==Ar&&Dc(c,hr(),f),rg}function Cm(n,r,s,c,f){const m=E(),I=ad(m,n,r,s,c,f);return I!==Ar&&Dc(m,hr(),I),Cm}const md=void 0;var ep=["en",[["a","p"],["AM","PM"],md],[["AM","PM"],md,md],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],md,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],md,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",md,"{1} 'at' {0}",md],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Uy(n){const s=Math.floor(Math.abs(n)),c=n.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===c?1:5}];let Hu={};function Pm(n){const r=function G_(n){return n.toLowerCase().replace(/_/g,"-")}(n);let s=yd(r);if(s)return s;const c=r.split("-")[0];if(s=yd(c),s)return s;if("en"===c)return ep;throw new Error(`Missing locale data for the locale "${n}".`)}function lh(n){return Pm(n)[rr.PluralCase]}function yd(n){return n in Hu||(Hu[n]=Vn.ng&&Vn.ng.common&&Vn.ng.common.locales&&Vn.ng.common.locales[n]),Hu[n]}var rr=(()=>((rr=rr||{})[rr.LocaleId=0]="LocaleId",rr[rr.DayPeriodsFormat=1]="DayPeriodsFormat",rr[rr.DayPeriodsStandalone=2]="DayPeriodsStandalone",rr[rr.DaysFormat=3]="DaysFormat",rr[rr.DaysStandalone=4]="DaysStandalone",rr[rr.MonthsFormat=5]="MonthsFormat",rr[rr.MonthsStandalone=6]="MonthsStandalone",rr[rr.Eras=7]="Eras",rr[rr.FirstDayOfWeek=8]="FirstDayOfWeek",rr[rr.WeekendRange=9]="WeekendRange",rr[rr.DateFormat=10]="DateFormat",rr[rr.TimeFormat=11]="TimeFormat",rr[rr.DateTimeFormat=12]="DateTimeFormat",rr[rr.NumberSymbols=13]="NumberSymbols",rr[rr.NumberFormats=14]="NumberFormats",rr[rr.CurrencyCode=15]="CurrencyCode",rr[rr.CurrencySymbol=16]="CurrencySymbol",rr[rr.CurrencyName=17]="CurrencyName",rr[rr.Currencies=18]="Currencies",rr[rr.Directionality=19]="Directionality",rr[rr.PluralCase=20]="PluralCase",rr[rr.ExtraData=21]="ExtraData",rr))();const mu="en-US";let ag=mu;function J_(n,r,s,c,f){if(n=te(n),Array.isArray(n))for(let m=0;m<n.length;m++)J_(n[m],r,s,c,f);else{const m=F(),I=E();let x=Kh(n)?n:te(n.provide),O=Wm(n);const Y=dt(),X=1048575&Y.providerIndexes,De=Y.directiveStart,Ke=Y.providerIndexes>>20;if(Kh(n)||!n.multi){const yt=new Jo(O,f,Gp),Vt=tv(x,r,f?X:X+Ke,De);-1===Vt?(ks(Ia(Y,I),m,x),ev(m,n,r.length),r.push(x),Y.directiveStart++,Y.directiveEnd++,f&&(Y.providerIndexes+=1048576),s.push(yt),I.push(yt)):(s[Vt]=yt,I[Vt]=yt)}else{const yt=tv(x,r,X+Ke,De),Vt=tv(x,r,X,X+Ke),an=yt>=0&&s[yt],bn=Vt>=0&&s[Vt];if(f&&!bn||!f&&!an){ks(Ia(Y,I),m,x);const Hn=function sb(n,r,s,c,f){const m=new Jo(n,s,Gp);return m.multi=[],m.index=r,m.componentProviders=0,h0(m,f,c&&!s),m}(f?ib:rb,s.length,f,c,O);!f&&bn&&(s[Vt].providerFactory=Hn),ev(m,n,r.length,0),r.push(x),Y.directiveStart++,Y.directiveEnd++,f&&(Y.providerIndexes+=1048576),s.push(Hn),I.push(Hn)}else ev(m,n,yt>-1?yt:Vt,h0(s[f?Vt:yt],O,!f&&c));!f&&c&&bn&&s[Vt].componentProviders++}}}function ev(n,r,s,c){const f=Kh(r),m=function l_(n){return!!n.useClass}(r);if(f||m){const O=(m?te(r.useClass):r).prototype.ngOnDestroy;if(O){const Y=n.destroyHooks||(n.destroyHooks=[]);if(!f&&r.multi){const X=Y.indexOf(s);-1===X?Y.push(s,[c,O]):Y[X+1].push(c,O)}else Y.push(s,O)}}}function h0(n,r,s){return s&&n.componentProviders++,n.multi.push(r)-1}function tv(n,r,s,c){for(let f=s;f<c;f++)if(r[f]===n)return f;return-1}function rb(n,r,s,c){return nv(this.multi,[])}function ib(n,r,s,c){const f=this.multi;let m;if(this.providerFactory){const I=this.providerFactory.componentProviders,x=V(s,s[1],this.providerFactory.index,c);m=x.slice(0,I),nv(f,m);for(let O=I;O<x.length;O++)m.push(x[O])}else m=[],nv(f,m);return m}function nv(n,r){for(let s=0;s<n.length;s++)r.push((0,n[s])());return r}function f0(n,r=[]){return s=>{s.providersResolver=(c,f)=>function nb(n,r,s){const c=F();if(c.firstCreatePass){const f=Rt(n);J_(s,c.data,c.blueprint,f,!0),J_(r,c.data,c.blueprint,f,!1)}}(c,f?f(n):n,r)}}class p0{}class lb{resolveComponentFactory(r){throw function ab(n){const r=Error(`No component factory found for ${we(n)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=n,r}(r)}}let Qy=(()=>{class n{}return n.NULL=new lb,n})();function ub(){return dg(dt(),E())}function dg(n,r){return new Fm(Ft(n,r))}let Fm=(()=>{class n{constructor(s){this.nativeElement=s}}return n.__NG_ELEMENT_ID__=ub,n})();function cb(n){return n instanceof Fm?n.nativeElement:n}class m0{}let db=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function fb(){const n=E(),s=or(dt().index,n);return function hb(n){return n[11]}(He(s)?s:n)}(),n})(),pb=(()=>{class n{}return n.\u0275prov=Xe({token:n,providedIn:"root",factory:()=>null}),n})();class y0{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const _0=new y0("13.2.7"),rv={};function Xy(n,r,s,c,f=!1){for(;null!==s;){const m=r[s.index];if(null!==m&&c.push($(m)),tt(m))for(let x=10;x<m.length;x++){const O=m[x],Y=O[1].firstChild;null!==Y&&Xy(O[1],O,Y,c)}const I=s.type;if(8&I)Xy(n,r,s.child,c);else if(32&I){const x=un(s,r);let O;for(;O=x();)c.push(O)}else if(16&I){const x=Dh(r,s);if(Array.isArray(x))c.push(...x);else{const O=os(r[16]);Xy(O[1],O,x,c,!0)}}s=f?s.projectionNext:s.next}return c}class Lm{constructor(r,s){this._lView=r,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const r=this._lView,s=r[1];return Xy(s,r,s.firstChild,[])}get context(){return this._lView[8]}set context(r){this._lView[8]=r}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[3];if(tt(r)){const s=r[8],c=s?s.indexOf(this):-1;c>-1&&(bh(r,c),Vs(s,c))}this._attachedToViewContainer=!1}wh(this._lView[1],this._lView)}onDestroy(r){xf(this._lView[1],this._lView,null,r)}markForCheck(){U(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Be(this._lView[1],this._lView,this.context)}checkNoChanges(){!function wt(n,r,s){ts(!0);try{Be(n,r,s)}finally{ts(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Oe(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function pf(n,r){vl(n,r,r[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new Oe(902,"");this._appRef=r}}class gb extends Lm{constructor(r){super(r),this._view=r}detectChanges(){It(this._view)}checkNoChanges(){!function Bt(n){ts(!0);try{It(n)}finally{ts(!1)}}(this._view)}get context(){return null}}class v0 extends Qy{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const s=Bn(r);return new iv(s,this.ngModule)}}function E0(n){const r=[];for(let s in n)n.hasOwnProperty(s)&&r.push({propName:n[s],templateName:s});return r}class iv extends p0{constructor(r,s){super(),this.componentDef=r,this.ngModule=s,this.componentType=r.type,this.selector=function yc(n){return n.map(cp).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!s}get inputs(){return E0(this.componentDef.inputs)}get outputs(){return E0(this.componentDef.outputs)}create(r,s,c,f){const m=(f=f||this.ngModule)?function yb(n,r){return{get:(s,c,f)=>{const m=n.get(s,rv,f);return m!==rv||c===rv?m:r.get(s,c,f)}}}(r,f.injector):r,I=m.get(m0,B),x=m.get(pb,null),O=I.createRenderer(null,this.componentDef),Y=this.componentDef.selectors[0][0]||"div",X=c?function Fh(n,r,s){if(wr(n))return n.selectRootElement(r,s===kn.ShadowDom);let c="string"==typeof r?n.querySelector(r):r;return c.textContent="",c}(O,c,this.componentDef.encapsulation):lc(I.createRenderer(null,this.componentDef),Y,function mb(n){const r=n.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(Y)),De=this.componentDef.onPush?576:528,Ke=function kp(n,r){return{components:[],scheduler:n||kd,clean:Hi,playerHandler:r||null,flags:0}}(),yt=Yo(0,null,null,1,0,null,null,null,null,null),Vt=zd(null,yt,Ke,De,null,null,I,O,x,m);let an,bn;sa(Vt);try{const Hn=function Np(n,r,s,c,f,m){const I=s[1];s[20]=n;const O=td(I,20,2,"#host",null),Y=O.mergedAttrs=r.hostAttrs;null!==Y&&(Wh(O,Y,!0),null!==n&&(Ml(f,n,Y),null!==O.classes&&Qc(f,n,O.classes),null!==O.styles&&Zc(f,n,O.styles)));const X=c.createRenderer(n,r),De=zd(s,Co(r),null,r.onPush?64:16,s[20],O,c,X,m||null,null);return I.firstCreatePass&&(ks(Ia(O,s),I,r.type),Nf(I,O),kf(O,s.length,1)),M(s,De),s[20]=De}(X,this.componentDef,Vt,I,O);if(X)if(c)Ml(O,X,["ng-version",_0.full]);else{const{attrs:Ht,classes:vr}=function dp(n){const r=[],s=[];let c=1,f=2;for(;c<n.length;){let m=n[c];if("string"==typeof m)2===f?""!==m&&r.push(m,n[++c]):8===f&&s.push(m);else{if(!Na(f))break;f=m}c++}return{attrs:r,classes:s}}(this.componentDef.selectors[0]);Ht&&Ml(O,X,Ht),vr&&vr.length>0&&Qc(O,X,vr.join(" "))}if(bn=zr(yt,20),void 0!==s){const Ht=bn.projection=[];for(let vr=0;vr<this.ngContentSelectors.length;vr++){const Si=s[vr];Ht.push(null!=Si?Array.from(Si):null)}}an=function Xm(n,r,s,c,f){const m=s[1],I=function Tg(n,r,s){const c=dt();n.firstCreatePass&&(s.providersResolver&&s.providersResolver(s),Tp(n,c,r,Fu(n,r,1,null),s));const f=V(r,n,c.directiveStart,c);fo(f,r);const m=Ft(c,r);return m&&fo(m,r),f}(m,s,r);if(c.components.push(I),n[8]=I,f&&f.forEach(O=>O(I,r)),r.contentQueries){const O=dt();r.contentQueries(1,I,O.directiveStart)}const x=dt();return!m.firstCreatePass||null===r.hostBindings&&null===r.hostAttrs||(pr(x.index),Of(s[1],x,0,x.directiveStart,x.directiveEnd,r),Uh(r,I)),I}(Hn,this.componentDef,Vt,Ke,[Gg]),Wd(yt,Vt,null)}finally{aa()}return new vb(this.componentType,an,dg(bn,Vt),Vt,bn)}}class vb extends class ob{}{constructor(r,s,c,f,m){super(),this.location=c,this._rootLView=f,this._tNode=m,this.instance=s,this.hostView=this.changeDetectorRef=new gb(f),this.componentType=r}get injector(){return new $e(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}class hg{}class b0{}const fg=new Map;class C0 extends hg{constructor(r,s){super(),this._parent=s,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new v0(this);const c=br(r);this._bootstrapComponents=y(c.bootstrap),this._r3Injector=eh(r,s,[{provide:hg,useValue:this},{provide:Qy,useValue:this.componentFactoryResolver}],we(r)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(r)}get(r,s=Gl.THROW_IF_NOT_FOUND,c=jt.Default){return r===Gl||r===hg||r===Lf?this:this._r3Injector.get(r,s,c)}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class sv extends b0{constructor(r){super(),this.moduleType=r,null!==br(r)&&function bb(n){const r=new Set;!function s(c){const f=br(c,!0),m=f.id;null!==m&&(function w0(n,r,s){if(r&&r!==s)throw new Error(`Duplicate module registered for ${n} - ${we(r)} vs ${we(r.name)}`)}(m,fg.get(m),c),fg.set(m,c));const I=y(f.imports);for(const x of I)r.has(x)||(r.add(x),s(x))}(n)}(r)}create(r){return new C0(this.moduleType,r)}}function ov(n){return r=>{setTimeout(n,void 0,r)}}const _d=class Bb extends u.xQ{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,s,c){var f,m,I;let x=r,O=s||(()=>null),Y=c;if(r&&"object"==typeof r){const De=r;x=null===(f=De.next)||void 0===f?void 0:f.bind(De),O=null===(m=De.error)||void 0===m?void 0:m.bind(De),Y=null===(I=De.complete)||void 0===I?void 0:I.bind(De)}this.__isAsync&&(O=ov(O),x&&(x=ov(x)),Y&&(Y=ov(Y)));const X=super.subscribe({next:x,error:O,complete:Y});return r instanceof re.w&&r.add(X),X}};function $b(){return this._results[id()]()}class av{constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const s=id(),c=av.prototype;c[s]||(c[s]=$b)}get changes(){return this._changes||(this._changes=new _d)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,s){return this._results.reduce(r,s)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,s){const c=this;c.dirty=!1;const f=Ls(r);(this._changesDetected=!function sl(n,r,s){if(n.length!==r.length)return!1;for(let c=0;c<n.length;c++){let f=n[c],m=r[c];if(s&&(f=s(f),m=s(m)),m!==f)return!1}return!0}(c._results,f,s))&&(c._results=f,c.length=f.length,c.last=f[this.length-1],c.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let $m=(()=>{class n{}return n.__NG_ELEMENT_ID__=Hb,n})();const Ub=$m,jb=class extends Ub{constructor(r,s,c){super(),this._declarationLView=r,this._declarationTContainer=s,this.elementRef=c}createEmbeddedView(r){const s=this._declarationTContainer.tViews,c=zd(this._declarationLView,s,r,16,null,s.declTNode,null,null,null,null);c[17]=this._declarationLView[this._declarationTContainer.index];const m=this._declarationLView[Q];return null!==m&&(c[Q]=m.createEmbeddedView(s)),Wd(s,c,r),new Lm(c)}};function Hb(){return Jy(dt(),E())}function Jy(n,r){return 4&n.type?new jb(r,n,dg(n,r)):null}let e_=(()=>{class n{}return n.__NG_ELEMENT_ID__=Gb,n})();function Gb(){return O0(dt(),E())}const zb=e_,M0=class extends zb{constructor(r,s,c){super(),this._lContainer=r,this._hostTNode=s,this._hostLView=c}get element(){return dg(this._hostTNode,this._hostLView)}get injector(){return new $e(this._hostTNode,this._hostLView)}get parentInjector(){const r=As(this._hostTNode,this._hostLView);if(Ua(r)){const s=Fi(r,this._hostLView),c=di(r);return new $e(s[1].data[c+8],s)}return new $e(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const s=R0(this._lContainer);return null!==s&&s[r]||null}get length(){return this._lContainer.length-10}createEmbeddedView(r,s,c){const f=r.createEmbeddedView(s||{});return this.insert(f,c),f}createComponent(r,s,c,f,m){const I=r&&!function vi(n){return"function"==typeof n}(r);let x;if(I)x=s;else{const De=s||{};x=De.index,c=De.injector,f=De.projectableNodes,m=De.ngModuleRef}const O=I?r:new iv(Bn(r)),Y=c||this.parentInjector;if(!m&&null==O.ngModule){const Ke=(I?Y:this.parentInjector).get(hg,null);Ke&&(m=Ke)}const X=O.create(Y,f,void 0,m);return this.insert(X.hostView,x),X}insert(r,s){const c=r._lView,f=c[1];if(function Xr(n){return tt(n[3])}(c)){const X=this.indexOf(r);if(-1!==X)this.detach(X);else{const De=c[3],Ke=new M0(De,De[6],De[3]);Ke.detach(Ke.indexOf(r))}}const m=this._adjustIndex(s),I=this._lContainer;!function sp(n,r,s,c){const f=10+c,m=s.length;c>0&&(s[f-1][4]=r),c<m-10?(r[4]=s[f],Eu(s,10+c,r)):(s.push(r),r[4]=null),r[3]=s;const I=r[17];null!==I&&s!==I&&function op(n,r){const s=n[9];r[16]!==r[3][3][16]&&(n[2]=!0),null===s?n[9]=[r]:s.push(r)}(I,r);const x=r[Q];null!==x&&x.insertView(n),r[2]|=128}(f,c,I,m);const x=dc(m,I),O=c[11],Y=Fd(O,I[7]);return null!==Y&&function Yc(n,r,s,c,f,m){c[0]=f,c[6]=r,vl(n,c,s,1,f,m)}(f,I[6],O,c,Y,x),r.attachToViewContainerRef(),Eu(lv(I),m,r),r}move(r,s){return this.insert(r,s)}indexOf(r){const s=R0(this._lContainer);return null!==s?s.indexOf(r):-1}remove(r){const s=this._adjustIndex(r,-1),c=bh(this._lContainer,s);c&&(Vs(lv(this._lContainer),s),wh(c[1],c))}detach(r){const s=this._adjustIndex(r,-1),c=bh(this._lContainer,s);return c&&null!=Vs(lv(this._lContainer),s)?new Lm(c):null}_adjustIndex(r,s=0){return null==r?this.length+s:r}};function R0(n){return n[8]}function lv(n){return n[8]||(n[8]=[])}function O0(n,r){let s;const c=r[n.index];if(tt(c))s=c;else{let f;if(8&n.type)f=$(c);else{const m=r[11];f=m.createComment("");const I=Ft(n,r);_l(m,Fd(m,I),f,function gf(n,r){return wr(n)?n.nextSibling(r):r.nextSibling}(m,I),!1)}r[n.index]=s=Gh(c,r,f,n),M(r,s)}return new M0(s,n,r)}class uv{constructor(r){this.queryList=r,this.matches=null}clone(){return new uv(this.queryList)}setDirty(){this.queryList.setDirty()}}class cv{constructor(r=[]){this.queries=r}createEmbeddedView(r){const s=r.queries;if(null!==s){const c=null!==r.contentQueries?r.contentQueries[0]:s.length,f=[];for(let m=0;m<c;m++){const I=s.getByIndex(m);f.push(this.queries[I.indexInDeclarationView].clone())}return new cv(f)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let s=0;s<this.queries.length;s++)null!==U0(r,s).matches&&this.queries[s].setDirty()}}class P0{constructor(r,s,c=null){this.predicate=r,this.flags=s,this.read=c}}class dv{constructor(r=[]){this.queries=r}elementStart(r,s){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(r,s)}elementEnd(r){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(r)}embeddedTView(r){let s=null;for(let c=0;c<this.length;c++){const f=null!==s?s.length:0,m=this.getByIndex(c).embeddedTView(r,f);m&&(m.indexInDeclarationView=c,null!==s?s.push(m):s=[m])}return null!==s?new dv(s):null}template(r,s){for(let c=0;c<this.queries.length;c++)this.queries[c].template(r,s)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class hv{constructor(r,s=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(r,s){this.isApplyingToNode(s)&&this.matchTNode(r,s)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,s){this.elementStart(r,s)}embeddedTView(r,s){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,s),new hv(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let c=r.parent;for(;null!==c&&8&c.type&&c.index!==s;)c=c.parent;return s===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(r,s){const c=this.metadata.predicate;if(Array.isArray(c))for(let f=0;f<c.length;f++){const m=c[f];this.matchTNodeWithReadOption(r,s,Yb(s,m)),this.matchTNodeWithReadOption(r,s,D(s,r,m,!1,!1))}else c===$m?4&s.type&&this.matchTNodeWithReadOption(r,s,-1):this.matchTNodeWithReadOption(r,s,D(s,r,c,!1,!1))}matchTNodeWithReadOption(r,s,c){if(null!==c){const f=this.metadata.read;if(null!==f)if(f===Fm||f===e_||f===$m&&4&s.type)this.addMatch(s.index,-2);else{const m=D(s,r,f,!1,!1);null!==m&&this.addMatch(s.index,m)}else this.addMatch(s.index,c)}}addMatch(r,s){null===this.matches?this.matches=[r,s]:this.matches.push(r,s)}}function Yb(n,r){const s=n.localNames;if(null!==s)for(let c=0;c<s.length;c+=2)if(s[c]===r)return s[c+1];return null}function Zb(n,r,s,c){return-1===s?function Kb(n,r){return 11&n.type?dg(n,r):4&n.type?Jy(n,r):null}(r,n):-2===s?function Qb(n,r,s){return s===Fm?dg(r,n):s===$m?Jy(r,n):s===e_?O0(r,n):void 0}(n,r,c):V(n,n[1],s,r)}function N0(n,r,s,c){const f=r[Q].queries[c];if(null===f.matches){const m=n.data,I=s.matches,x=[];for(let O=0;O<I.length;O+=2){const Y=I[O];x.push(Y<0?null:Zb(r,m[Y],I[O+1],s.metadata.read))}f.matches=x}return f.matches}function fv(n,r,s,c){const f=n.queries.getByIndex(s),m=f.matches;if(null!==m){const I=N0(n,r,f,s);for(let x=0;x<m.length;x+=2){const O=m[x];if(O>0)c.push(I[x/2]);else{const Y=m[x+1],X=r[-O];for(let De=10;De<X.length;De++){const Ke=X[De];Ke[17]===Ke[3]&&fv(Ke[1],Ke,Y,c)}if(null!==X[9]){const De=X[9];for(let Ke=0;Ke<De.length;Ke++){const yt=De[Ke];fv(yt[1],yt,Y,c)}}}}}return c}function k0(n){const r=E(),s=F(),c=Va();Sl(c+1);const f=U0(s,c);if(n.dirty&&_r(r)===(2==(2&f.metadata.flags))){if(null===f.matches)n.reset([]);else{const m=f.crossesNgTemplate?fv(s,r,c,[]):N0(s,r,f,c);n.reset(m,cb),n.notifyOnChanges()}return!0}return!1}function F0(n,r,s){const c=F();c.firstCreatePass&&($0(c,new P0(n,r,s),-1),2==(2&r)&&(c.staticViewQueries=!0)),B0(c,E(),r)}function L0(n,r,s,c){const f=F();if(f.firstCreatePass){const m=dt();$0(f,new P0(r,s,c),m.index),function Jb(n,r){const s=n.contentQueries||(n.contentQueries=[]);r!==(s.length?s[s.length-1]:-1)&&s.push(n.queries.length-1,r)}(f,n),2==(2&s)&&(f.staticContentQueries=!0)}B0(f,E(),s)}function V0(){return function Xb(n,r){return n[Q].queries[r].queryList}(E(),Va())}function B0(n,r,s){const c=new av(4==(4&s));xf(n,r,c,c.destroy),null===r[Q]&&(r[Q]=new cv),r[Q].queries.push(new uv(c))}function $0(n,r,s){null===n.queries&&(n.queries=new dv),n.queries.track(new hv(r,s))}function U0(n,r){return n.queries.getByIndex(r)}function r_(...n){}const iE=new ns("Application Initializer");let vv=(()=>{class n{constructor(s){this.appInits=s,this.resolve=r_,this.reject=r_,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,f)=>{this.resolve=c,this.reject=f})}runInitializers(){if(this.initialized)return;const s=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const m=this.appInits[f]();if(hu(m))s.push(m);else if(fu(m)){const I=new Promise((x,O)=>{m.subscribe({complete:x,error:O})});s.push(I)}}Promise.all(s).then(()=>{c()}).catch(f=>{this.reject(f)}),0===s.length&&c(),this.initialized=!0}}return n.\u0275fac=function(s){return new(s||n)(ti(iE,8))},n.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const sE=new ns("AppId",{providedIn:"root",factory:function oE(){return`${Ev()}${Ev()}${Ev()}`}});function Ev(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const aE=new ns("Platform Initializer"),lE=new ns("Platform ID"),uE=new ns("appBootstrapListener");let cE=(()=>{class n{log(s){console.log(s)}warn(s){console.warn(s)}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=Xe({token:n,factory:n.\u0275fac}),n})();const bv=new ns("LocaleId",{providedIn:"root",factory:()=>ea(bv,jt.Optional|jt.SkipSelf)||function yw(){return"undefined"!=typeof $localize&&$localize.locale||mu}()}),_w=new ns("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class vw{constructor(r,s){this.ngModuleFactory=r,this.componentFactories=s}}let Ew=(()=>{class n{compileModuleSync(s){return new sv(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const c=this.compileModuleSync(s),m=y(br(s).declarations).reduce((I,x)=>{const O=Bn(x);return O&&I.push(new iv(O)),I},[]);return new vw(c,m)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const ww=(()=>Promise.resolve(0))();function wv(n){"undefined"==typeof Zone?ww.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class xc{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new _d(!1),this.onMicrotaskEmpty=new _d(!1),this.onStable=new _d(!1),this.onError=new _d(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!c&&s,f.shouldCoalesceRunChangeDetection=c,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function Iw(){let n=Vn.requestAnimationFrame,r=Vn.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&r){const s=n[Zone.__symbol__("OriginalDelegate")];s&&(n=s);const c=r[Zone.__symbol__("OriginalDelegate")];c&&(r=c)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function Tw(n){const r=()=>{!function Dw(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Vn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Cv(n),n.isCheckStableRunning=!0,Iv(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Cv(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,c,f,m,I,x)=>{try{return dE(n),s.invokeTask(f,m,I,x)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||n.shouldCoalesceRunChangeDetection)&&r(),hE(n)}},onInvoke:(s,c,f,m,I,x,O)=>{try{return dE(n),s.invoke(f,m,I,x,O)}finally{n.shouldCoalesceRunChangeDetection&&r(),hE(n)}},onHasTask:(s,c,f,m)=>{s.hasTask(f,m),c===f&&("microTask"==m.change?(n._hasPendingMicrotasks=m.microTask,Cv(n),Iv(n)):"macroTask"==m.change&&(n.hasPendingMacrotasks=m.macroTask))},onHandleError:(s,c,f,m)=>(s.handleError(f,m),n.runOutsideAngular(()=>n.onError.emit(m)),!1)})}(f)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!xc.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(xc.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(r,s,c){return this._inner.run(r,s,c)}runTask(r,s,c,f){const m=this._inner,I=m.scheduleEventTask("NgZoneEvent: "+f,r,Cw,r_,r_);try{return m.runTask(I,s,c)}finally{m.cancelTask(I)}}runGuarded(r,s,c){return this._inner.runGuarded(r,s,c)}runOutsideAngular(r){return this._outer.run(r)}}const Cw={};function Iv(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Cv(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function dE(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function hE(n){n._nesting--,Iv(n)}class Sw{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new _d,this.onMicrotaskEmpty=new _d,this.onStable=new _d,this.onError=new _d}run(r,s,c){return r.apply(s,c)}runGuarded(r,s,c){return r.apply(s,c)}runOutsideAngular(r){return r()}runTask(r,s,c,f){return r.apply(s,c)}}let fE=(()=>{class n{constructor(s){this._ngZone=s,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{xc.assertNotInAngularZone(),wv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())wv(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb(this._didWork)}this._didWork=!1});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(s)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,c,f){let m=-1;c&&c>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(I=>I.timeoutId!==m),s(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:s,timeoutId:m,updateCb:f})}whenStable(s,c,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,c,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(s,c,f){return[]}}return n.\u0275fac=function(s){return new(s||n)(ti(xc))},n.\u0275prov=Xe({token:n,factory:n.\u0275fac}),n})(),pE=(()=>{class n{constructor(){this._applications=new Map,Dv.addToWindow(this)}registerApplication(s,c){this._applications.set(s,c)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,c=!0){return Dv.findTestabilityInTree(this,s,c)}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=Xe({token:n,factory:n.\u0275fac}),n})();class Aw{addToWindow(r){}findTestabilityInTree(r,s,c){return null}}function xw(n){Dv=n}let Mc,Dv=new Aw;const gE=new ns("AllowMultipleToken");class Ow{constructor(r,s){this.name=r,this.token=s}}function mE(n,r,s=[]){const c=`Platform: ${r}`,f=new ns(c);return(m=[])=>{let I=yE();if(!I||I.injector.get(gE,!1))if(n)n(s.concat(m).concat({provide:f,useValue:!0}));else{const x=s.concat(m).concat({provide:f,useValue:!0},{provide:Vf,useValue:"platform"});!function Pw(n){if(Mc&&!Mc.destroyed&&!Mc.injector.get(gE,!1))throw new Oe(400,"");Mc=n.get(_E);const r=n.get(aE,null);r&&r.forEach(s=>s())}(Gl.create({providers:x,name:c}))}return function Nw(n){const r=yE();if(!r)throw new Oe(401,"");return r}()}}function yE(){return Mc&&!Mc.destroyed?Mc:null}let _E=(()=>{class n{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,c){const x=function kw(n,r){let s;return s="noop"===n?new Sw:("zone.js"===n?void 0:n)||new xc({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==r?void 0:r.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==r?void 0:r.ngZoneRunCoalescing)}),s}(c?c.ngZone:void 0,{ngZoneEventCoalescing:c&&c.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:c&&c.ngZoneRunCoalescing||!1}),O=[{provide:xc,useValue:x}];return x.run(()=>{const Y=Gl.create({providers:O,parent:this.injector,name:s.moduleType.name}),X=s.create(Y),De=X.injector.get(so,null);if(!De)throw new Oe(402,"");return x.runOutsideAngular(()=>{const Ke=x.onError.subscribe({next:yt=>{De.handleError(yt)}});X.onDestroy(()=>{Sv(this._modules,X),Ke.unsubscribe()})}),function Fw(n,r,s){try{const c=s();return hu(c)?c.catch(f=>{throw r.runOutsideAngular(()=>n.handleError(f)),f}):c}catch(c){throw r.runOutsideAngular(()=>n.handleError(c)),c}}(De,x,()=>{const Ke=X.injector.get(vv);return Ke.runInitializers(),Ke.donePromise.then(()=>(function lg(n){st(n,"Expected localeId to be defined"),"string"==typeof n&&(ag=n.toLowerCase().replace(/_/g,"-"))}(X.injector.get(bv,mu)||mu),this._moduleDoBootstrap(X),X))})})}bootstrapModule(s,c=[]){const f=vE({},c);return function Mw(n,r,s){const c=new sv(s);return Promise.resolve(c)}(0,0,s).then(m=>this.bootstrapModuleFactory(m,f))}_moduleDoBootstrap(s){const c=s.injector.get(Tv);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(f=>c.bootstrap(f));else{if(!s.instance.ngDoBootstrap)throw new Oe(403,"");s.instance.ngDoBootstrap(c)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Oe(404,"");this._modules.slice().forEach(s=>s.destroy()),this._destroyListeners.forEach(s=>s()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(s){return new(s||n)(ti(Gl))},n.\u0275prov=Xe({token:n,factory:n.\u0275fac}),n})();function vE(n,r){return Array.isArray(r)?r.reduce(vE,n):Object.assign(Object.assign({},n),r)}let Tv=(()=>{class n{constructor(s,c,f,m,I){this._zone=s,this._injector=c,this._exceptionHandler=f,this._componentFactoryResolver=m,this._initStatus=I,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const x=new Z.y(Y=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{Y.next(this._stable),Y.complete()})}),O=new Z.y(Y=>{let X;this._zone.runOutsideAngular(()=>{X=this._zone.onStable.subscribe(()=>{xc.assertNotInAngularZone(),wv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,Y.next(!0))})})});const De=this._zone.onUnstable.subscribe(()=>{xc.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{Y.next(!1)}))});return()=>{X.unsubscribe(),De.unsubscribe()}});this.isStable=(0,Ne.T)(x,O.pipe((0,Se.B)()))}bootstrap(s,c){if(!this._initStatus.done)throw new Oe(405,"");let f;f=s instanceof p0?s:this._componentFactoryResolver.resolveComponentFactory(s),this.componentTypes.push(f.componentType);const m=function Rw(n){return n.isBoundToModule}(f)?void 0:this._injector.get(hg),x=f.create(Gl.NULL,[],c||f.selector,m),O=x.location.nativeElement,Y=x.injector.get(fE,null),X=Y&&x.injector.get(pE);return Y&&X&&X.registerApplication(O,Y),x.onDestroy(()=>{this.detachView(x.hostView),Sv(this.components,x),X&&X.unregisterApplication(O)}),this._loadComponent(x),x}tick(){if(this._runningTick)throw new Oe(101,"");try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(s))}finally{this._runningTick=!1}}attachView(s){const c=s;this._views.push(c),c.attachToAppRef(this)}detachView(s){const c=s;Sv(this._views,c),c.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s),this._injector.get(uE,[]).concat(this._bootstrapListeners).forEach(f=>f(s))}ngOnDestroy(){this._views.slice().forEach(s=>s.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(s){return new(s||n)(ti(xc),ti(Gl),ti(so),ti(Qy),ti(vv))},n.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Sv(n,r){const s=n.indexOf(r);s>-1&&n.splice(s,1)}let bE=!0,wE=!1;function Vw(){return wE=!0,bE}function Bw(){if(wE)throw new Error("Cannot enable prod mode after platform setup.");bE=!1}let $w=(()=>{class n{}return n.__NG_ELEMENT_ID__=Uw,n})();function Uw(n){return function jw(n,r,s){if(At(n)&&!s){const c=or(n.index,r);return new Lm(c,c)}return 47&n.type?new Lm(r[16],r):null}(dt(),E(),16==(16&n))}class TE{constructor(){}supports(r){return nh(r)}create(r){return new Yw(r)}}const qw=(n,r)=>r;class Yw{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||qw}forEachItem(r){let s;for(s=this._itHead;null!==s;s=s._next)r(s)}forEachOperation(r){let s=this._itHead,c=this._removalsHead,f=0,m=null;for(;s||c;){const I=!c||s&&s.currentIndex<AE(c,f,m)?s:c,x=AE(I,f,m),O=I.currentIndex;if(I===c)f--,c=c._nextRemoved;else if(s=s._next,null==I.previousIndex)f++;else{m||(m=[]);const Y=x-f,X=O-f;if(Y!=X){for(let Ke=0;Ke<Y;Ke++){const yt=Ke<m.length?m[Ke]:m[Ke]=0,Vt=yt+Ke;X<=Vt&&Vt<Y&&(m[Ke]=yt+1)}m[I.previousIndex]=X-Y}}x!==O&&r(I,x,O)}}forEachPreviousItem(r){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachMovedItem(r){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}forEachIdentityChange(r){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)r(s)}diff(r){if(null==r&&(r=[]),!nh(r))throw new Oe(900,"");return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let f,m,I,s=this._itHead,c=!1;if(Array.isArray(r)){this.length=r.length;for(let x=0;x<this.length;x++)m=r[x],I=this._trackByFn(x,m),null!==s&&Object.is(s.trackById,I)?(c&&(s=this._verifyReinsertion(s,m,I,x)),Object.is(s.item,m)||this._addIdentityChange(s,m)):(s=this._mismatch(s,m,I,x),c=!0),s=s._next}else f=0,function Zg(n,r){if(Array.isArray(n))for(let s=0;s<n.length;s++)r(n[s]);else{const s=n[id()]();let c;for(;!(c=s.next()).done;)r(c.value)}}(r,x=>{I=this._trackByFn(f,x),null!==s&&Object.is(s.trackById,I)?(c&&(s=this._verifyReinsertion(s,x,I,f)),Object.is(s.item,x)||this._addIdentityChange(s,x)):(s=this._mismatch(s,x,I,f),c=!0),s=s._next,f++}),this.length=f;return this._truncate(s),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,s,c,f){let m;return null===r?m=this._itTail:(m=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._reinsertAfter(r,m,f)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(c,f))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._moveAfter(r,m,f)):r=this._addAfter(new Kw(s,c),m,f),r}_verifyReinsertion(r,s,c,f){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==m?r=this._reinsertAfter(m,r._prev,f):r.currentIndex!=f&&(r.currentIndex=f,this._addToMoves(r,f)),r}_truncate(r){for(;null!==r;){const s=r._next;this._addToRemovals(this._unlink(r)),r=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,s,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const f=r._prevRemoved,m=r._nextRemoved;return null===f?this._removalsHead=m:f._nextRemoved=m,null===m?this._removalsTail=f:m._prevRemoved=f,this._insertAfter(r,s,c),this._addToMoves(r,c),r}_moveAfter(r,s,c){return this._unlink(r),this._insertAfter(r,s,c),this._addToMoves(r,c),r}_addAfter(r,s,c){return this._insertAfter(r,s,c),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,s,c){const f=null===s?this._itHead:s._next;return r._next=f,r._prev=s,null===f?this._itTail=r:f._prev=r,null===s?this._itHead=r:s._next=r,null===this._linkedRecords&&(this._linkedRecords=new SE),this._linkedRecords.put(r),r.currentIndex=c,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const s=r._prev,c=r._next;return null===s?this._itHead=c:s._next=c,null===c?this._itTail=s:c._prev=s,r}_addToMoves(r,s){return r.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new SE),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,s){return r.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class Kw{constructor(r,s){this.item=r,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Zw{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,s){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===s||s<=c.currentIndex)&&Object.is(c.trackById,r))return c;return null}remove(r){const s=r._prevDup,c=r._nextDup;return null===s?this._head=c:s._nextDup=c,null===c?this._tail=s:c._prevDup=s,null===this._head}}class SE{constructor(){this.map=new Map}put(r){const s=r.trackById;let c=this.map.get(s);c||(c=new Zw,this.map.set(s,c)),c.add(r)}get(r,s){const f=this.map.get(r);return f?f.get(r,s):null}remove(r){const s=r.trackById;return this.map.get(s).remove(r)&&this.map.delete(s),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function AE(n,r,s){const c=n.previousIndex;if(null===c)return c;let f=0;return s&&c<s.length&&(f=s[c]),c+r+f}class xE{constructor(){}supports(r){return r instanceof Map||Qg(r)}create(){return new Qw}}class Qw{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let s;for(s=this._mapHead;null!==s;s=s._next)r(s)}forEachPreviousItem(r){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)r(s)}forEachChangedItem(r){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}diff(r){if(r){if(!(r instanceof Map||Qg(r)))throw new Oe(900,"")}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(r,(c,f)=>{if(s&&s.key===f)this._maybeAddToChanges(s,c),this._appendAfter=s,s=s._next;else{const m=this._getOrCreateRecordForKey(f,c);s=this._insertBeforeOrAppend(s,m)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let c=s;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,s){if(r){const c=r._prev;return s._next=r,s._prev=c,r._prev=s,c&&(c._next=s),r===this._mapHead&&(this._mapHead=s),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(r,s){if(this._records.has(r)){const f=this._records.get(r);this._maybeAddToChanges(f,s);const m=f._prev,I=f._next;return m&&(m._next=I),I&&(I._prev=m),f._next=null,f._prev=null,f}const c=new Xw(r);return this._records.set(r,c),c.currentValue=s,this._addToAdditions(c),c}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,s){Object.is(s,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=s,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,s){r instanceof Map?r.forEach(s):Object.keys(r).forEach(c=>s(r[c],c))}}class Xw{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function ME(){return new Ov([new TE])}let Ov=(()=>{class n{constructor(s){this.factories=s}static create(s,c){if(null!=c){const f=c.factories.slice();s=s.concat(f)}return new n(s)}static extend(s){return{provide:n,useFactory:c=>n.create(s,c||ME()),deps:[[n,new ha,new ll]]}}find(s){const c=this.factories.find(f=>f.supports(s));if(null!=c)return c;throw new Oe(901,"")}}return n.\u0275prov=Xe({token:n,providedIn:"root",factory:ME}),n})();function RE(){return new Pv([new xE])}let Pv=(()=>{class n{constructor(s){this.factories=s}static create(s,c){if(c){const f=c.factories.slice();s=s.concat(f)}return new n(s)}static extend(s){return{provide:n,useFactory:c=>n.create(s,c||RE()),deps:[[n,new ha,new ll]]}}find(s){const c=this.factories.find(m=>m.supports(s));if(c)return c;throw new Oe(901,"")}}return n.\u0275prov=Xe({token:n,providedIn:"root",factory:RE}),n})();const tI=mE(null,"core",[{provide:lE,useValue:"unknown"},{provide:_E,deps:[Gl]},{provide:pE,deps:[]},{provide:cE,deps:[]}]);let nI=(()=>{class n{constructor(s){}}return n.\u0275fac=function(s){return new(s||n)(ti(Tv))},n.\u0275mod=ut({type:n}),n.\u0275inj=ft({}),n})()},4182:(Jt,ct,j)=>{"use strict";j.d(ct,{u5:()=>ui,JU:()=>te,a5:()=>Yn,JJ:()=>cr,On:()=>xn});var u=j(5e3),re=j(9808),Z=j(2916),Ne=j(6688),Se=j(4850),ae=j(7830),Ie=j(5254);function ye(G,k){return new Z.y(P=>{const ie=G.length;if(0===ie)return void P.complete();const v=new Array(ie);let L=0,E=0;for(let F=0;F<ie;F++){const ue=(0,Ie.D)(G[F]);let dt=!1;P.add(ue.subscribe({next:Kt=>{dt||(dt=!0,E++),v[F]=Kt},error:Kt=>P.error(Kt),complete:()=>{L++,(L===ie||!dt)&&(E===ie&&P.next(k?k.reduce((Kt,En,Nn)=>(Kt[En]=v[Nn],Kt),{}):v),P.complete())}}))}})}let de=(()=>{class G{constructor(P,ie){this._renderer=P,this._elementRef=ie,this.onChange=v=>{},this.onTouched=()=>{}}setProperty(P,ie){this._renderer.setProperty(this._elementRef.nativeElement,P,ie)}registerOnTouched(P){this.onTouched=P}registerOnChange(P){this.onChange=P}setDisabledState(P){this.setProperty("disabled",P)}}return G.\u0275fac=function(P){return new(P||G)(u.Y36(u.Qsj),u.Y36(u.SBq))},G.\u0275dir=u.lG2({type:G}),G})(),me=(()=>{class G extends de{}return G.\u0275fac=function(){let k;return function(ie){return(k||(k=u.n5z(G)))(ie||G)}}(),G.\u0275dir=u.lG2({type:G,features:[u.qOj]}),G})();const te=new u.OlP("NgValueAccessor"),Oe={provide:te,useExisting:(0,u.Gpc)(()=>ke),multi:!0},Pe=new u.OlP("CompositionEventMode");let ke=(()=>{class G extends de{constructor(P,ie,v){super(P,ie),this._compositionMode=v,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function _e(){const G=(0,re.q)()?(0,re.q)().getUserAgent():"";return/android (\d+)/.test(G.toLowerCase())}())}writeValue(P){this.setProperty("value",null==P?"":P)}_handleInput(P){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(P)}_compositionStart(){this._composing=!0}_compositionEnd(P){this._composing=!1,this._compositionMode&&this.onChange(P)}}return G.\u0275fac=function(P){return new(P||G)(u.Y36(u.Qsj),u.Y36(u.SBq),u.Y36(Pe,8))},G.\u0275dir=u.lG2({type:G,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(P,ie){1&P&&u.NdJ("input",function(L){return ie._handleInput(L.target.value)})("blur",function(){return ie.onTouched()})("compositionstart",function(){return ie._compositionStart()})("compositionend",function(L){return ie._compositionEnd(L.target.value)})},features:[u._Bn([Oe]),u.qOj]}),G})();const ot=new u.OlP("NgValidators"),Le=new u.OlP("NgAsyncValidators");function Xt(G){return null!=G}function pt(G){const k=(0,u.QGY)(G)?(0,Ie.D)(G):G;return(0,u.CqO)(k),k}function st(G){let k={};return G.forEach(P=>{k=null!=P?Object.assign(Object.assign({},k),P):k}),0===Object.keys(k).length?null:k}function Qe(G,k){return k.map(P=>P(G))}function at(G){return G.map(k=>function nt(G){return!G.validate}(k)?k:P=>k.validate(P))}function Xe(G){return null!=G?function Re(G){if(!G)return null;const k=G.filter(Xt);return 0==k.length?null:function(P){return st(Qe(P,k))}}(at(G)):null}function ft(G){return null!=G?function Tt(G){if(!G)return null;const k=G.filter(Xt);return 0==k.length?null:function(P){return function we(...G){if(1===G.length){const k=G[0];if((0,Ne.k)(k))return ye(k,null);if((0,ae.K)(k)&&Object.getPrototypeOf(k)===Object.prototype){const P=Object.keys(k);return ye(P.map(ie=>k[ie]),P)}}if("function"==typeof G[G.length-1]){const k=G.pop();return ye(G=1===G.length&&(0,Ne.k)(G[0])?G[0]:G,null).pipe((0,Se.U)(P=>k(...P)))}return ye(G,null)}(Qe(P,k).map(pt)).pipe((0,Se.U)(st))}}(at(G)):null}function Zt(G,k){return null===G?[k]:Array.isArray(G)?[...G,k]:[G,k]}function ln(G){return G?Array.isArray(G)?G:[G]:[]}function tn(G,k){return Array.isArray(G)?G.includes(k):G===k}function mr(G,k){const P=ln(k);return ln(G).forEach(v=>{tn(P,v)||P.push(v)}),P}function xr(G,k){return ln(k).filter(P=>!tn(G,P))}class Kn{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(k){this._rawValidators=k||[],this._composedValidatorFn=Xe(this._rawValidators)}_setAsyncValidators(k){this._rawAsyncValidators=k||[],this._composedAsyncValidatorFn=ft(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(k){this._onDestroyCallbacks.push(k)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(k=>k()),this._onDestroyCallbacks=[]}reset(k){this.control&&this.control.reset(k)}hasError(k,P){return!!this.control&&this.control.hasError(k,P)}getError(k,P){return this.control?this.control.getError(k,P):null}}class Yn extends Kn{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class jt extends Kn{get formDirective(){return null}get path(){return null}}let cr=(()=>{class G extends class ir{constructor(k){this._cd=k}is(k){var P,ie,v;return"submitted"===k?!!(null===(P=this._cd)||void 0===P?void 0:P.submitted):!!(null===(v=null===(ie=this._cd)||void 0===ie?void 0:ie.control)||void 0===v?void 0:v[k])}}{constructor(P){super(P)}}return G.\u0275fac=function(P){return new(P||G)(u.Y36(Yn,2))},G.\u0275dir=u.lG2({type:G,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(P,ie){2&P&&u.ekj("ng-untouched",ie.is("untouched"))("ng-touched",ie.is("touched"))("ng-pristine",ie.is("pristine"))("ng-dirty",ie.is("dirty"))("ng-valid",ie.is("valid"))("ng-invalid",ie.is("invalid"))("ng-pending",ie.is("pending"))},features:[u.qOj]}),G})();function kt(G,k){(function Rn(G,k){const P=function gn(G){return G._rawValidators}(G);null!==k.validator?G.setValidators(Zt(P,k.validator)):"function"==typeof P&&G.setValidators([P]);const ie=function An(G){return G._rawAsyncValidators}(G);null!==k.asyncValidator?G.setAsyncValidators(Zt(ie,k.asyncValidator)):"function"==typeof ie&&G.setAsyncValidators([ie]);const v=()=>G.updateValueAndValidity();yn(k._rawValidators,v),yn(k._rawAsyncValidators,v)})(G,k),k.valueAccessor.writeValue(G.value),function Ce(G,k){k.valueAccessor.registerOnChange(P=>{G._pendingValue=P,G._pendingChange=!0,G._pendingDirty=!0,"change"===G.updateOn&&Et(G,k)})}(G,k),function ut(G,k){const P=(ie,v)=>{k.valueAccessor.writeValue(ie),v&&k.viewToModelUpdate(ie)};G.registerOnChange(P),k._registerOnDestroy(()=>{G._unregisterOnChange(P)})}(G,k),function je(G,k){k.valueAccessor.registerOnTouched(()=>{G._pendingTouched=!0,"blur"===G.updateOn&&G._pendingChange&&Et(G,k),"submit"!==G.updateOn&&G.markAsTouched()})}(G,k),function _n(G,k){if(k.valueAccessor.setDisabledState){const P=ie=>{k.valueAccessor.setDisabledState(ie)};G.registerOnDisabledChange(P),k._registerOnDestroy(()=>{G._unregisterOnDisabledChange(P)})}}(G,k)}function yn(G,k){G.forEach(P=>{P.registerOnValidatorChange&&P.registerOnValidatorChange(k)})}function Et(G,k){G._pendingDirty&&G.markAsDirty(),G.setValue(G._pendingValue,{emitModelToViewChange:!1}),k.viewToModelUpdate(G._pendingValue),G._pendingChange=!1}function Li(G,k){const P=G.indexOf(k);P>-1&&G.splice(P,1)}const Or="VALID",bi="INVALID",Vr="PENDING",Mt="DISABLED";function sr(G){return(yi(G)?G.validators:G)||null}function yr(G){return Array.isArray(G)?Xe(G):G||null}function Kr(G,k){return(yi(k)?k.asyncValidators:G)||null}function Gr(G){return Array.isArray(G)?ft(G):G||null}function yi(G){return null!=G&&!Array.isArray(G)&&"object"==typeof G}const Br=G=>G instanceof Tr;function Ln(G){return(G=>G instanceof Ni)(G)?G.value:G.getRawValue()}function Zi(G,k){const P=Br(G),ie=G.controls;if(!(P?Object.keys(ie):ie).length)throw new u.vHH(1e3,"");if(!ie[k])throw new u.vHH(1001,"")}function Qi(G,k){Br(G),G._forEachChild((ie,v)=>{if(void 0===k[v])throw new u.vHH(1002,"")})}class Pi{constructor(k,P){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=k,this._rawAsyncValidators=P,this._composedValidatorFn=yr(this._rawValidators),this._composedAsyncValidatorFn=Gr(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(k){this._rawValidators=this._composedValidatorFn=k}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(k){this._rawAsyncValidators=this._composedAsyncValidatorFn=k}get parent(){return this._parent}get valid(){return this.status===Or}get invalid(){return this.status===bi}get pending(){return this.status==Vr}get disabled(){return this.status===Mt}get enabled(){return this.status!==Mt}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(k){this._rawValidators=k,this._composedValidatorFn=yr(k)}setAsyncValidators(k){this._rawAsyncValidators=k,this._composedAsyncValidatorFn=Gr(k)}addValidators(k){this.setValidators(mr(k,this._rawValidators))}addAsyncValidators(k){this.setAsyncValidators(mr(k,this._rawAsyncValidators))}removeValidators(k){this.setValidators(xr(k,this._rawValidators))}removeAsyncValidators(k){this.setAsyncValidators(xr(k,this._rawAsyncValidators))}hasValidator(k){return tn(this._rawValidators,k)}hasAsyncValidator(k){return tn(this._rawAsyncValidators,k)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(k={}){this.touched=!0,this._parent&&!k.onlySelf&&this._parent.markAsTouched(k)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(k=>k.markAllAsTouched())}markAsUntouched(k={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(P=>{P.markAsUntouched({onlySelf:!0})}),this._parent&&!k.onlySelf&&this._parent._updateTouched(k)}markAsDirty(k={}){this.pristine=!1,this._parent&&!k.onlySelf&&this._parent.markAsDirty(k)}markAsPristine(k={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(P=>{P.markAsPristine({onlySelf:!0})}),this._parent&&!k.onlySelf&&this._parent._updatePristine(k)}markAsPending(k={}){this.status=Vr,!1!==k.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!k.onlySelf&&this._parent.markAsPending(k)}disable(k={}){const P=this._parentMarkedDirty(k.onlySelf);this.status=Mt,this.errors=null,this._forEachChild(ie=>{ie.disable(Object.assign(Object.assign({},k),{onlySelf:!0}))}),this._updateValue(),!1!==k.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},k),{skipPristineCheck:P})),this._onDisabledChange.forEach(ie=>ie(!0))}enable(k={}){const P=this._parentMarkedDirty(k.onlySelf);this.status=Or,this._forEachChild(ie=>{ie.enable(Object.assign(Object.assign({},k),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:k.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},k),{skipPristineCheck:P})),this._onDisabledChange.forEach(ie=>ie(!1))}_updateAncestors(k){this._parent&&!k.onlySelf&&(this._parent.updateValueAndValidity(k),k.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(k){this._parent=k}updateValueAndValidity(k={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Or||this.status===Vr)&&this._runAsyncValidator(k.emitEvent)),!1!==k.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!k.onlySelf&&this._parent.updateValueAndValidity(k)}_updateTreeValidity(k={emitEvent:!0}){this._forEachChild(P=>P._updateTreeValidity(k)),this.updateValueAndValidity({onlySelf:!0,emitEvent:k.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Mt:Or}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(k){if(this.asyncValidator){this.status=Vr,this._hasOwnPendingAsyncValidator=!0;const P=pt(this.asyncValidator(this));this._asyncValidationSubscription=P.subscribe(ie=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(ie,{emitEvent:k})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(k,P={}){this.errors=k,this._updateControlsErrors(!1!==P.emitEvent)}get(k){return function mn(G,k,P){if(null==k||(Array.isArray(k)||(k=k.split(P)),Array.isArray(k)&&0===k.length))return null;let ie=G;return k.forEach(v=>{ie=Br(ie)?ie.controls.hasOwnProperty(v)?ie.controls[v]:null:(G=>G instanceof Bi)(ie)&&ie.at(v)||null}),ie}(this,k,".")}getError(k,P){const ie=P?this.get(P):this;return ie&&ie.errors?ie.errors[k]:null}hasError(k,P){return!!this.getError(k,P)}get root(){let k=this;for(;k._parent;)k=k._parent;return k}_updateControlsErrors(k){this.status=this._calculateStatus(),k&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(k)}_initObservables(){this.valueChanges=new u.vpe,this.statusChanges=new u.vpe}_calculateStatus(){return this._allControlsDisabled()?Mt:this.errors?bi:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Vr)?Vr:this._anyControlsHaveStatus(bi)?bi:Or}_anyControlsHaveStatus(k){return this._anyControls(P=>P.status===k)}_anyControlsDirty(){return this._anyControls(k=>k.dirty)}_anyControlsTouched(){return this._anyControls(k=>k.touched)}_updatePristine(k={}){this.pristine=!this._anyControlsDirty(),this._parent&&!k.onlySelf&&this._parent._updatePristine(k)}_updateTouched(k={}){this.touched=this._anyControlsTouched(),this._parent&&!k.onlySelf&&this._parent._updateTouched(k)}_isBoxedValue(k){return"object"==typeof k&&null!==k&&2===Object.keys(k).length&&"value"in k&&"disabled"in k}_registerOnCollectionChange(k){this._onCollectionChange=k}_setUpdateStrategy(k){yi(k)&&null!=k.updateOn&&(this._updateOn=k.updateOn)}_parentMarkedDirty(k){return!k&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Ni extends Pi{constructor(k=null,P,ie){super(sr(P),Kr(ie,P)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(k),this._setUpdateStrategy(P),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),yi(P)&&P.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(k)?k.value:k)}setValue(k,P={}){this.value=this._pendingValue=k,this._onChange.length&&!1!==P.emitModelToViewChange&&this._onChange.forEach(ie=>ie(this.value,!1!==P.emitViewToModelChange)),this.updateValueAndValidity(P)}patchValue(k,P={}){this.setValue(k,P)}reset(k=this.defaultValue,P={}){this._applyFormState(k),this.markAsPristine(P),this.markAsUntouched(P),this.setValue(this.value,P),this._pendingChange=!1}_updateValue(){}_anyControls(k){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(k){this._onChange.push(k)}_unregisterOnChange(k){Li(this._onChange,k)}registerOnDisabledChange(k){this._onDisabledChange.push(k)}_unregisterOnDisabledChange(k){Li(this._onDisabledChange,k)}_forEachChild(k){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(k){this._isBoxedValue(k)?(this.value=this._pendingValue=k.value,k.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=k}}class Tr extends Pi{constructor(k,P,ie){super(sr(P),Kr(ie,P)),this.controls=k,this._initObservables(),this._setUpdateStrategy(P),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(k,P){return this.controls[k]?this.controls[k]:(this.controls[k]=P,P.setParent(this),P._registerOnCollectionChange(this._onCollectionChange),P)}addControl(k,P,ie={}){this.registerControl(k,P),this.updateValueAndValidity({emitEvent:ie.emitEvent}),this._onCollectionChange()}removeControl(k,P={}){this.controls[k]&&this.controls[k]._registerOnCollectionChange(()=>{}),delete this.controls[k],this.updateValueAndValidity({emitEvent:P.emitEvent}),this._onCollectionChange()}setControl(k,P,ie={}){this.controls[k]&&this.controls[k]._registerOnCollectionChange(()=>{}),delete this.controls[k],P&&this.registerControl(k,P),this.updateValueAndValidity({emitEvent:ie.emitEvent}),this._onCollectionChange()}contains(k){return this.controls.hasOwnProperty(k)&&this.controls[k].enabled}setValue(k,P={}){Qi(this,k),Object.keys(k).forEach(ie=>{Zi(this,ie),this.controls[ie].setValue(k[ie],{onlySelf:!0,emitEvent:P.emitEvent})}),this.updateValueAndValidity(P)}patchValue(k,P={}){null!=k&&(Object.keys(k).forEach(ie=>{this.controls[ie]&&this.controls[ie].patchValue(k[ie],{onlySelf:!0,emitEvent:P.emitEvent})}),this.updateValueAndValidity(P))}reset(k={},P={}){this._forEachChild((ie,v)=>{ie.reset(k[v],{onlySelf:!0,emitEvent:P.emitEvent})}),this._updatePristine(P),this._updateTouched(P),this.updateValueAndValidity(P)}getRawValue(){return this._reduceChildren({},(k,P,ie)=>(k[ie]=Ln(P),k))}_syncPendingControls(){let k=this._reduceChildren(!1,(P,ie)=>!!ie._syncPendingControls()||P);return k&&this.updateValueAndValidity({onlySelf:!0}),k}_forEachChild(k){Object.keys(this.controls).forEach(P=>{const ie=this.controls[P];ie&&k(ie,P)})}_setUpControls(){this._forEachChild(k=>{k.setParent(this),k._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(k){for(const P of Object.keys(this.controls)){const ie=this.controls[P];if(this.contains(P)&&k(ie))return!0}return!1}_reduceValue(){return this._reduceChildren({},(k,P,ie)=>((P.enabled||this.disabled)&&(k[ie]=P.value),k))}_reduceChildren(k,P){let ie=k;return this._forEachChild((v,L)=>{ie=P(ie,v,L)}),ie}_allControlsDisabled(){for(const k of Object.keys(this.controls))if(this.controls[k].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class Bi extends Pi{constructor(k,P,ie){super(sr(P),Kr(ie,P)),this.controls=k,this._initObservables(),this._setUpdateStrategy(P),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(k){return this.controls[k]}push(k,P={}){this.controls.push(k),this._registerControl(k),this.updateValueAndValidity({emitEvent:P.emitEvent}),this._onCollectionChange()}insert(k,P,ie={}){this.controls.splice(k,0,P),this._registerControl(P),this.updateValueAndValidity({emitEvent:ie.emitEvent})}removeAt(k,P={}){this.controls[k]&&this.controls[k]._registerOnCollectionChange(()=>{}),this.controls.splice(k,1),this.updateValueAndValidity({emitEvent:P.emitEvent})}setControl(k,P,ie={}){this.controls[k]&&this.controls[k]._registerOnCollectionChange(()=>{}),this.controls.splice(k,1),P&&(this.controls.splice(k,0,P),this._registerControl(P)),this.updateValueAndValidity({emitEvent:ie.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(k,P={}){Qi(this,k),k.forEach((ie,v)=>{Zi(this,v),this.at(v).setValue(ie,{onlySelf:!0,emitEvent:P.emitEvent})}),this.updateValueAndValidity(P)}patchValue(k,P={}){null!=k&&(k.forEach((ie,v)=>{this.at(v)&&this.at(v).patchValue(ie,{onlySelf:!0,emitEvent:P.emitEvent})}),this.updateValueAndValidity(P))}reset(k=[],P={}){this._forEachChild((ie,v)=>{ie.reset(k[v],{onlySelf:!0,emitEvent:P.emitEvent})}),this._updatePristine(P),this._updateTouched(P),this.updateValueAndValidity(P)}getRawValue(){return this.controls.map(k=>Ln(k))}clear(k={}){this.controls.length<1||(this._forEachChild(P=>P._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:k.emitEvent}))}_syncPendingControls(){let k=this.controls.reduce((P,ie)=>!!ie._syncPendingControls()||P,!1);return k&&this.updateValueAndValidity({onlySelf:!0}),k}_forEachChild(k){this.controls.forEach((P,ie)=>{k(P,ie)})}_updateValue(){this.value=this.controls.filter(k=>k.enabled||this.disabled).map(k=>k.value)}_anyControls(k){return this.controls.some(P=>P.enabled&&k(P))}_setUpControls(){this._forEachChild(k=>this._registerControl(k))}_allControlsDisabled(){for(const k of this.controls)if(k.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(k){k.setParent(this),k._registerOnCollectionChange(this._onCollectionChange)}}const Rt={provide:Yn,useExisting:(0,u.Gpc)(()=>xn)},pn=(()=>Promise.resolve(null))();let xn=(()=>{class G extends Yn{constructor(P,ie,v,L,E){super(),this._changeDetectorRef=E,this.control=new Ni,this._registered=!1,this.update=new u.vpe,this._parent=P,this._setValidators(ie),this._setAsyncValidators(v),this.valueAccessor=function Fn(G,k){if(!k)return null;let P,ie,v;return Array.isArray(k),k.forEach(L=>{L.constructor===ke?P=L:function br(G){return Object.getPrototypeOf(G.constructor)===me}(L)?ie=L:v=L}),v||ie||P||null}(0,L)}ngOnChanges(P){if(this._checkForErrors(),!this._registered||"name"in P){if(this._registered&&(this._checkName(),this.formDirective)){const ie=P.name.previousValue;this.formDirective.removeControl({name:ie,path:this._getPath(ie)})}this._setUpControl()}"isDisabled"in P&&this._updateDisabled(P),function Un(G,k){if(!G.hasOwnProperty("model"))return!1;const P=G.model;return!!P.isFirstChange()||!Object.is(k,P.currentValue)}(P,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(P){this.viewModel=P,this.update.emit(P)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){kt(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(P){pn.then(()=>{var ie;this.control.setValue(P,{emitViewToModelChange:!1}),null===(ie=this._changeDetectorRef)||void 0===ie||ie.markForCheck()})}_updateDisabled(P){const ie=P.isDisabled.currentValue,v=""===ie||ie&&"false"!==ie;pn.then(()=>{var L;v&&!this.control.disabled?this.control.disable():!v&&this.control.disabled&&this.control.enable(),null===(L=this._changeDetectorRef)||void 0===L||L.markForCheck()})}_getPath(P){return this._parent?function nn(G,k){return[...k.path,G]}(P,this._parent):[P]}}return G.\u0275fac=function(P){return new(P||G)(u.Y36(jt,9),u.Y36(ot,10),u.Y36(Le,10),u.Y36(te,10),u.Y36(u.sBO,8))},G.\u0275dir=u.lG2({type:G,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[u._Bn([Rt]),u.qOj,u.TTD]}),G})(),We=(()=>{class G{}return G.\u0275fac=function(P){return new(P||G)},G.\u0275mod=u.oAB({type:G}),G.\u0275inj=u.cJS({}),G})(),Xr=(()=>{class G{}return G.\u0275fac=function(P){return new(P||G)},G.\u0275mod=u.oAB({type:G}),G.\u0275inj=u.cJS({imports:[[We]]}),G})(),ui=(()=>{class G{}return G.\u0275fac=function(P){return new(P||G)},G.\u0275mod=u.oAB({type:G}),G.\u0275inj=u.cJS({imports:[Xr]}),G})()},8186:(Jt,ct,j)=>{"use strict";j.d(ct,{gz:()=>Rt,y6:()=>wr,OD:()=>jt,eC:()=>Pn,wm:()=>_o,wN:()=>Yl,F0:()=>ji,rH:()=>wa,Bz:()=>hi,Hx:()=>bi});var u=j(5e3),re=j(2866),Z=j(6688),Ne=j(826),Se=j(448),ae=j(3009);const Ie={};class ye{constructor(S){this.resultSelector=S}call(S,D){return D.subscribe(new de(S,this.resultSelector))}}class de extends Ne.L{constructor(S,D){super(S),this.resultSelector=D,this.active=0,this.values=[],this.observables=[]}_next(S){this.values.push(Ie),this.observables.push(S)}_complete(){const S=this.observables,D=S.length;if(0===D)this.destination.complete();else{this.active=D,this.toRespond=D;for(let V=0;V<D;V++)this.add((0,Se.D)(this,S[V],void 0,V))}}notifyComplete(S){0==(this.active-=1)&&this.destination.complete()}notifyNext(S,D,V){const W=this.values,Ae=this.toRespond?W[V]===Ie?--this.toRespond:this.toRespond:0;W[V]=D,0===Ae&&(this.resultSelector?this._tryResultSelector(W):this.destination.next(W.slice()))}_tryResultSelector(S){let D;try{D=this.resultSelector.apply(this,S)}catch(V){return void this.destination.error(V)}this.destination.next(D)}}var me=j(2916),te=j(5254),he=j(8896);function Ue(T){return new me.y(S=>{let D;try{D=T()}catch(W){return void S.error(W)}return(D?(0,te.D)(D):(0,he.c)()).subscribe(S)})}var Oe=j(1086),_e=j(591),Pe=j(1737),ke=j(4450),ht=j(1221),ve=j(1762),ot=j(8929),Le=j(1177);function rt(T){return function(D){const V=new _t(T),W=D.lift(V);return V.caught=W}}class _t{constructor(S){this.selector=S}call(S,D){return D.subscribe(new St(S,this.selector,this.caught))}}class St extends Le.Ds{constructor(S,D,V){super(S),this.selector=D,this.caught=V}error(S){if(!this.isStopped){let D;try{D=this.selector(S,this.caught)}catch(se){return void super.error(se)}this._unsubscribeAndRecycle();const V=new Le.IY(this);this.add(V);const W=(0,Le.ft)(D,V);W!==V&&this.add(W)}}}var qe=j(1709);function pe(T,S){return(0,qe.zg)(T,S,1)}var Ve=j(2198),Ee=j(3489),Te=j(4231);function Je(T){return function(D){return 0===T?(0,he.c)():D.lift(new Ze(T))}}class Ze{constructor(S){if(this.total=S,this.total<0)throw new Te.W}call(S,D){return D.subscribe(new Ut(S,this.total))}}class Ut extends Ee.L{constructor(S,D){super(S),this.total=D,this.ring=new Array,this.count=0}_next(S){const D=this.ring,V=this.total,W=this.count++;D.length<V?D.push(S):D[W%V]=S}_complete(){const S=this.destination;let D=this.count;if(D>0){const V=this.count>=this.total?this.total:this.count,W=this.ring;for(let se=0;se<V;se++){const Ae=D++%V;S.next(W[Ae])}}S.complete()}}var Xt=j(4907),pt=j(7314),st=j(5379),nt=j(2654);class Re{constructor(S){this.callback=S}call(S,D){return D.subscribe(new Xe(S,this.callback))}}class Xe extends Ee.L{constructor(S,D){super(S),this.add(new nt.w(D))}}var Tt=j(4850),ft=j(7545),Zt=j(2986),gn=j(1059),An=j(2014),ln=j(7224),tn=j(2868),mr=j(4327),xr=j(9146),Kn=j(9808);class Yn{constructor(S,D){this.id=S,this.url=D}}class jt extends Yn{constructor(S,D,V="imperative",W=null){super(S,D),this.navigationTrigger=V,this.restoredState=W}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ir extends Yn{constructor(S,D,V){super(S,D),this.urlAfterRedirects=V}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Hr extends Yn{constructor(S,D,V){super(S,D),this.reason=V}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Jn extends Yn{constructor(S,D,V){super(S,D),this.error=V}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class cr extends Yn{constructor(S,D,V,W){super(S,D),this.urlAfterRedirects=V,this.state=W}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ur extends Yn{constructor(S,D,V,W){super(S,D),this.urlAfterRedirects=V,this.state=W}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class on extends Yn{constructor(S,D,V,W,se){super(S,D),this.urlAfterRedirects=V,this.state=W,this.shouldActivate=se}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class qr extends Yn{constructor(S,D,V,W){super(S,D),this.urlAfterRedirects=V,this.state=W}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Gt extends Yn{constructor(S,D,V,W){super(S,D),this.urlAfterRedirects=V,this.state=W}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ni{constructor(S){this.route=S}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class kn{constructor(S){this.route=S}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class hn{constructor(S){this.snapshot=S}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Dn{constructor(S){this.snapshot=S}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class jr{constructor(S){this.snapshot=S}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Oi{constructor(S){this.snapshot=S}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Vn{constructor(S,D,V){this.routerEvent=S,this.position=D,this.anchor=V}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Pn="primary";class ai{constructor(S){this.params=S||{}}has(S){return Object.prototype.hasOwnProperty.call(this.params,S)}get(S){if(this.has(S)){const D=this.params[S];return Array.isArray(D)?D[0]:D}return null}getAll(S){if(this.has(S)){const D=this.params[S];return Array.isArray(D)?D:[D]}return[]}get keys(){return Object.keys(this.params)}}function Nr(T){return new ai(T)}const wn="ngNavigationCancelingError";function li(T){const S=Error("NavigationCancelingError: "+T);return S[wn]=!0,S}function nn(T,S,D){const V=D.path.split("/");if(V.length>T.length||"full"===D.pathMatch&&(S.hasChildren()||V.length<T.length))return null;const W={};for(let se=0;se<V.length;se++){const Ae=V[se],$e=T[se];if(Ae.startsWith(":"))W[Ae.substring(1)]=$e;else if(Ae!==$e.path)return null}return{consumed:T.slice(0,V.length),posParams:W}}function en(T,S){const D=T?Object.keys(T):void 0,V=S?Object.keys(S):void 0;if(!D||!V||D.length!=V.length)return!1;let W;for(let se=0;se<D.length;se++)if(W=D[se],!yn(T[W],S[W]))return!1;return!0}function yn(T,S){if(Array.isArray(T)&&Array.isArray(S)){if(T.length!==S.length)return!1;const D=[...T].sort(),V=[...S].sort();return D.every((W,se)=>V[se]===W)}return T===S}function _n(T){return Array.prototype.concat.apply([],T)}function Rn(T){return T.length>0?T[T.length-1]:null}function Ce(T,S){for(const D in T)T.hasOwnProperty(D)&&S(T[D],D)}function je(T){return(0,u.CqO)(T)?T:(0,u.QGY)(T)?(0,te.D)(Promise.resolve(T)):(0,Oe.of)(T)}const ut={exact:function Yr(T,S,D){if(!Mr(T.segments,S.segments)||!br(T.segments,S.segments,D)||T.numberOfChildren!==S.numberOfChildren)return!1;for(const V in S.children)if(!T.children[V]||!Yr(T.children[V],S.children[V],D))return!1;return!0},subset:Er},qt={exact:function Qn(T,S){return en(T,S)},subset:function Bn(T,S){return Object.keys(S).length<=Object.keys(T).length&&Object.keys(S).every(D=>yn(T[D],S[D]))},ignored:()=>!0};function In(T,S,D){return ut[D.paths](T.root,S.root,D.matrixParams)&&qt[D.queryParams](T.queryParams,S.queryParams)&&!("exact"===D.fragment&&T.fragment!==S.fragment)}function Er(T,S,D){return Un(T,S,S.segments,D)}function Un(T,S,D,V){if(T.segments.length>D.length){const W=T.segments.slice(0,D.length);return!(!Mr(W,D)||S.hasChildren()||!br(W,D,V))}if(T.segments.length===D.length){if(!Mr(T.segments,D)||!br(T.segments,D,V))return!1;for(const W in S.children)if(!T.children[W]||!Er(T.children[W],S.children[W],V))return!1;return!0}{const W=D.slice(0,T.segments.length),se=D.slice(T.segments.length);return!!(Mr(T.segments,W)&&br(T.segments,W,V)&&T.children[Pn])&&Un(T.children[Pn],S,se,V)}}function br(T,S,D){return S.every((V,W)=>qt[D](T[W].parameters,V.parameters))}class Rr{constructor(S,D,V){this.root=S,this.queryParams=D,this.fragment=V}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Nr(this.queryParams)),this._queryParamMap}toString(){return Mt.serialize(this)}}class Fn{constructor(S,D){this.segments=S,this.children=D,this.parent=null,Ce(D,(V,W)=>V.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return mn(this)}}class Li{constructor(S,D){this.path=S,this.parameters=D}get parameterMap(){return this._parameterMap||(this._parameterMap=Nr(this.parameters)),this._parameterMap}toString(){return Vi(this)}}function Mr(T,S){return T.length===S.length&&T.every((D,V)=>D.path===S[V].path)}class bi{}class Vr{parse(S){const D=new Q(S);return new Rr(D.parseRootSegment(),D.parseQueryParams(),D.parseFragment())}serialize(S){const D=`/${sr(S.root,!0)}`,V=function Zi(T){const S=Object.keys(T).map(D=>{const V=T[D];return Array.isArray(V)?V.map(W=>`${Kr(D)}=${Kr(W)}`).join("&"):`${Kr(D)}=${Kr(V)}`}).filter(D=>!!D);return S.length?`?${S.join("&")}`:""}(S.queryParams);return`${D}${V}${"string"==typeof S.fragment?`#${function Gr(T){return encodeURI(T)}(S.fragment)}`:""}`}}const Mt=new Vr;function mn(T){return T.segments.map(S=>Vi(S)).join("/")}function sr(T,S){if(!T.hasChildren())return mn(T);if(S){const D=T.children[Pn]?sr(T.children[Pn],!1):"",V=[];return Ce(T.children,(W,se)=>{se!==Pn&&V.push(`${se}:${sr(W,!1)}`)}),V.length>0?`${D}(${V.join("//")})`:D}{const D=function Or(T,S){let D=[];return Ce(T.children,(V,W)=>{W===Pn&&(D=D.concat(S(V,W)))}),Ce(T.children,(V,W)=>{W!==Pn&&(D=D.concat(S(V,W)))}),D}(T,(V,W)=>W===Pn?[sr(T.children[Pn],!1)]:[`${W}:${sr(V,!1)}`]);return 1===Object.keys(T.children).length&&null!=T.children[Pn]?`${mn(T)}/${D[0]}`:`${mn(T)}/(${D.join("//")})`}}function yr(T){return encodeURIComponent(T).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Kr(T){return yr(T).replace(/%3B/gi,";")}function yi(T){return yr(T).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function dr(T){return decodeURIComponent(T)}function Br(T){return dr(T.replace(/\+/g,"%20"))}function Vi(T){return`${yi(T.path)}${function Ln(T){return Object.keys(T).map(S=>`;${yi(S)}=${yi(T[S])}`).join("")}(T.parameters)}`}const Qi=/^[^\/()?;=#]+/;function Pi(T){const S=T.match(Qi);return S?S[0]:""}const Ni=/^[^=?&#]+/,Bi=/^[^&#]+/;class Q{constructor(S){this.url=S,this.remaining=S}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Fn([],{}):new Fn([],this.parseChildren())}parseQueryParams(){const S={};if(this.consumeOptional("?"))do{this.parseQueryParam(S)}while(this.consumeOptional("&"));return S}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const S=[];for(this.peekStartsWith("(")||S.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),S.push(this.parseSegment());let D={};this.peekStartsWith("/(")&&(this.capture("/"),D=this.parseParens(!0));let V={};return this.peekStartsWith("(")&&(V=this.parseParens(!1)),(S.length>0||Object.keys(D).length>0)&&(V[Pn]=new Fn(S,D)),V}parseSegment(){const S=Pi(this.remaining);if(""===S&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(S),new Li(dr(S),this.parseMatrixParams())}parseMatrixParams(){const S={};for(;this.consumeOptional(";");)this.parseParam(S);return S}parseParam(S){const D=Pi(this.remaining);if(!D)return;this.capture(D);let V="";if(this.consumeOptional("=")){const W=Pi(this.remaining);W&&(V=W,this.capture(V))}S[dr(D)]=dr(V)}parseQueryParam(S){const D=function Tr(T){const S=T.match(Ni);return S?S[0]:""}(this.remaining);if(!D)return;this.capture(D);let V="";if(this.consumeOptional("=")){const Ae=function Ai(T){const S=T.match(Bi);return S?S[0]:""}(this.remaining);Ae&&(V=Ae,this.capture(V))}const W=Br(D),se=Br(V);if(S.hasOwnProperty(W)){let Ae=S[W];Array.isArray(Ae)||(Ae=[Ae],S[W]=Ae),Ae.push(se)}else S[W]=se}parseParens(S){const D={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const V=Pi(this.remaining),W=this.remaining[V.length];if("/"!==W&&")"!==W&&";"!==W)throw new Error(`Cannot parse url '${this.url}'`);let se;V.indexOf(":")>-1?(se=V.substr(0,V.indexOf(":")),this.capture(se),this.capture(":")):S&&(se=Pn);const Ae=this.parseChildren();D[se]=1===Object.keys(Ae).length?Ae[Pn]:new Fn([],Ae),this.consumeOptional("//")}return D}peekStartsWith(S){return this.remaining.startsWith(S)}consumeOptional(S){return!!this.peekStartsWith(S)&&(this.remaining=this.remaining.substring(S.length),!0)}capture(S){if(!this.consumeOptional(S))throw new Error(`Expected "${S}".`)}}class ge{constructor(S){this._root=S}get root(){return this._root.value}parent(S){const D=this.pathFromRoot(S);return D.length>1?D[D.length-2]:null}children(S){const D=le(S,this._root);return D?D.children.map(V=>V.value):[]}firstChild(S){const D=le(S,this._root);return D&&D.children.length>0?D.children[0].value:null}siblings(S){const D=H(S,this._root);return D.length<2?[]:D[D.length-2].children.map(W=>W.value).filter(W=>W!==S)}pathFromRoot(S){return H(S,this._root).map(D=>D.value)}}function le(T,S){if(T===S.value)return S;for(const D of S.children){const V=le(T,D);if(V)return V}return null}function H(T,S){if(T===S.value)return[S];for(const D of S.children){const V=H(T,D);if(V.length)return V.unshift(S),V}return[]}class He{constructor(S,D){this.value=S,this.children=D}toString(){return`TreeNode(${this.value})`}}function tt(T){const S={};return T&&T.children.forEach(D=>S[D.value.outlet]=D),S}class bt extends ge{constructor(S,D){super(S),this.snapshot=D,ri(this,S)}toString(){return this.snapshot.toString()}}function At(T,S){const D=function Nt(T,S){const Ae=new Tn([],{},{},"",{},Pn,S,null,T.root,-1,{});return new zn("",new He(Ae,[]))}(T,S),V=new _e.X([new Li("",{})]),W=new _e.X({}),se=new _e.X({}),Ae=new _e.X({}),$e=new _e.X(""),gt=new Rt(V,W,Ae,$e,se,Pn,S,D.root);return gt.snapshot=D.root,new bt(new He(gt,[]),D)}class Rt{constructor(S,D,V,W,se,Ae,$e,gt){this.url=S,this.params=D,this.queryParams=V,this.fragment=W,this.data=se,this.outlet=Ae,this.component=$e,this._futureSnapshot=gt}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Tt.U)(S=>Nr(S)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Tt.U)(S=>Nr(S)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function pn(T,S="emptyOnly"){const D=T.pathFromRoot;let V=0;if("always"!==S)for(V=D.length-1;V>=1;){const W=D[V],se=D[V-1];if(W.routeConfig&&""===W.routeConfig.path)V--;else{if(se.component)break;V--}}return function xn(T){return T.reduce((S,D)=>({params:Object.assign(Object.assign({},S.params),D.params),data:Object.assign(Object.assign({},S.data),D.data),resolve:Object.assign(Object.assign({},S.resolve),D._resolvedData)}),{params:{},data:{},resolve:{}})}(D.slice(V))}class Tn{constructor(S,D,V,W,se,Ae,$e,gt,vn,Dr,fn){this.url=S,this.params=D,this.queryParams=V,this.fragment=W,this.data=se,this.outlet=Ae,this.component=$e,this.routeConfig=gt,this._urlSegment=vn,this._lastPathIndex=Dr,this._resolve=fn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Nr(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Nr(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(V=>V.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class zn extends ge{constructor(S,D){super(D),this.url=S,ri(this,D)}toString(){return Xi(this._root)}}function ri(T,S){S.value._routerState=T,S.children.forEach(D=>ri(T,D))}function Xi(T){const S=T.children.length>0?` { ${T.children.map(Xi).join(", ")} } `:"";return`${T.value}${S}`}function ze(T){if(T.snapshot){const S=T.snapshot,D=T._futureSnapshot;T.snapshot=D,en(S.queryParams,D.queryParams)||T.queryParams.next(D.queryParams),S.fragment!==D.fragment&&T.fragment.next(D.fragment),en(S.params,D.params)||T.params.next(D.params),function kt(T,S){if(T.length!==S.length)return!1;for(let D=0;D<T.length;++D)if(!en(T[D],S[D]))return!1;return!0}(S.url,D.url)||T.url.next(D.url),en(S.data,D.data)||T.data.next(D.data)}else T.snapshot=T._futureSnapshot,T.data.next(T._futureSnapshot.data)}function We(T,S){const D=en(T.params,S.params)&&function as(T,S){return Mr(T,S)&&T.every((D,V)=>en(D.parameters,S[V].parameters))}(T.url,S.url);return D&&!(!T.parent!=!S.parent)&&(!T.parent||We(T.parent,S.parent))}function Ot(T,S,D){if(D&&T.shouldReuseRoute(S.value,D.value.snapshot)){const V=D.value;V._futureSnapshot=S.value;const W=function zt(T,S,D){return S.children.map(V=>{for(const W of D.children)if(T.shouldReuseRoute(V.value,W.value.snapshot))return Ot(T,V,W);return Ot(T,V)})}(T,S,D);return new He(V,W)}{if(T.shouldAttach(S.value)){const se=T.retrieve(S.value);if(null!==se){const Ae=se.route;return Ae.value._futureSnapshot=S.value,Ae.children=S.children.map($e=>Ot(T,$e)),Ae}}const V=function rn(T){return new Rt(new _e.X(T.url),new _e.X(T.params),new _e.X(T.queryParams),new _e.X(T.fragment),new _e.X(T.data),T.outlet,T.component,T)}(S.value),W=S.children.map(se=>Ot(T,se));return new He(V,W)}}function ii(T){return"object"==typeof T&&null!=T&&!T.outlets&&!T.segmentPath}function Xn(T){return"object"==typeof T&&null!=T&&T.outlets}function Zr(T,S,D,V,W){let se={};if(V&&Ce(V,($e,gt)=>{se[gt]=Array.isArray($e)?$e.map(vn=>`${vn}`):`${$e}`}),T===S)return new Rr(D,se,W);const Ae=Ji(T,S,D);return new Rr(Ae,se,W)}function Ji(T,S,D){const V={};return Ce(T.children,(W,se)=>{V[se]=W===S?D:Ji(W,S,D)}),new Fn(T.segments,V)}class hs{constructor(S,D,V){if(this.isAbsolute=S,this.numberOfDoubleDots=D,this.commands=V,S&&V.length>0&&ii(V[0]))throw new Error("Root segment cannot have matrix parameters");const W=V.find(Xn);if(W&&W!==Rn(V))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ki{constructor(S,D,V){this.segmentGroup=S,this.processChildren=D,this.index=V}}function xi(T,S,D){if(T||(T=new Fn([],{})),0===T.segments.length&&T.hasChildren())return us(T,S,D);const V=function vs(T,S,D){let V=0,W=S;const se={match:!1,pathIndex:0,commandIndex:0};for(;W<T.segments.length;){if(V>=D.length)return se;const Ae=T.segments[W],$e=D[V];if(Xn($e))break;const gt=`${$e}`,vn=V<D.length-1?D[V+1]:null;if(W>0&&void 0===gt)break;if(gt&&vn&&"object"==typeof vn&&void 0===vn.outlets){if(!Gs(gt,vn,Ae))return se;V+=2}else{if(!Gs(gt,{},Ae))return se;V++}W++}return{match:!0,pathIndex:W,commandIndex:V}}(T,S,D),W=D.slice(V.commandIndex);if(V.match&&V.pathIndex<T.segments.length){const se=new Fn(T.segments.slice(0,V.pathIndex),{});return se.children[Pn]=new Fn(T.segments.slice(V.pathIndex),T.children),us(se,0,W)}return V.match&&0===W.length?new Fn(T.segments,{}):V.match&&!T.hasChildren()?si(T,S,D):V.match?us(T,0,W):si(T,S,D)}function us(T,S,D){if(0===D.length)return new Fn(T.segments,{});{const V=function Hs(T){return Xn(T[0])?T[0].outlets:{[Pn]:T}}(D),W={};return Ce(V,(se,Ae)=>{"string"==typeof se&&(se=[se]),null!==se&&(W[Ae]=xi(T.children[Ae],S,se))}),Ce(T.children,(se,Ae)=>{void 0===V[Ae]&&(W[Ae]=se)}),new Fn(T.segments,W)}}function si(T,S,D){const V=T.segments.slice(0,S);let W=0;for(;W<D.length;){const se=D[W];if(Xn(se)){const gt=uo(se.outlets);return new Fn(V,gt)}if(0===W&&ii(D[0])){V.push(new Li(T.segments[S].path,Zo(D[0]))),W++;continue}const Ae=Xn(se)?se.outlets[Pn]:`${se}`,$e=W<D.length-1?D[W+1]:null;Ae&&$e&&ii($e)?(V.push(new Li(Ae,Zo($e))),W+=2):(V.push(new Li(Ae,{})),W++)}return new Fn(V,{})}function uo(T){const S={};return Ce(T,(D,V)=>{"string"==typeof D&&(D=[D]),null!==D&&(S[V]=si(new Fn([],{}),0,D))}),S}function Zo(T){const S={};return Ce(T,(D,V)=>S[V]=`${D}`),S}function Gs(T,S,D){return T==D.path&&en(S,D.parameters)}class es{constructor(S,D,V,W){this.routeReuseStrategy=S,this.futureState=D,this.currState=V,this.forwardEvent=W}activate(S){const D=this.futureState._root,V=this.currState?this.currState._root:null;this.deactivateChildRoutes(D,V,S),ze(this.futureState.root),this.activateChildRoutes(D,V,S)}deactivateChildRoutes(S,D,V){const W=tt(D);S.children.forEach(se=>{const Ae=se.value.outlet;this.deactivateRoutes(se,W[Ae],V),delete W[Ae]}),Ce(W,(se,Ae)=>{this.deactivateRouteAndItsChildren(se,V)})}deactivateRoutes(S,D,V){const W=S.value,se=D?D.value:null;if(W===se)if(W.component){const Ae=V.getContext(W.outlet);Ae&&this.deactivateChildRoutes(S,D,Ae.children)}else this.deactivateChildRoutes(S,D,V);else se&&this.deactivateRouteAndItsChildren(D,V)}deactivateRouteAndItsChildren(S,D){S.value.component&&this.routeReuseStrategy.shouldDetach(S.value.snapshot)?this.detachAndStoreRouteSubtree(S,D):this.deactivateRouteAndOutlet(S,D)}detachAndStoreRouteSubtree(S,D){const V=D.getContext(S.value.outlet),W=V&&S.value.component?V.children:D,se=tt(S);for(const Ae of Object.keys(se))this.deactivateRouteAndItsChildren(se[Ae],W);if(V&&V.outlet){const Ae=V.outlet.detach(),$e=V.children.onOutletDeactivated();this.routeReuseStrategy.store(S.value.snapshot,{componentRef:Ae,route:S,contexts:$e})}}deactivateRouteAndOutlet(S,D){const V=D.getContext(S.value.outlet),W=V&&S.value.component?V.children:D,se=tt(S);for(const Ae of Object.keys(se))this.deactivateRouteAndItsChildren(se[Ae],W);V&&V.outlet&&(V.outlet.deactivate(),V.children.onOutletDeactivated(),V.attachRef=null,V.resolver=null,V.route=null)}activateChildRoutes(S,D,V){const W=tt(D);S.children.forEach(se=>{this.activateRoutes(se,W[se.value.outlet],V),this.forwardEvent(new Oi(se.value.snapshot))}),S.children.length&&this.forwardEvent(new Dn(S.value.snapshot))}activateRoutes(S,D,V){const W=S.value,se=D?D.value:null;if(ze(W),W===se)if(W.component){const Ae=V.getOrCreateContext(W.outlet);this.activateChildRoutes(S,D,Ae.children)}else this.activateChildRoutes(S,D,V);else if(W.component){const Ae=V.getOrCreateContext(W.outlet);if(this.routeReuseStrategy.shouldAttach(W.snapshot)){const $e=this.routeReuseStrategy.retrieve(W.snapshot);this.routeReuseStrategy.store(W.snapshot,null),Ae.children.onOutletReAttached($e.contexts),Ae.attachRef=$e.componentRef,Ae.route=$e.route.value,Ae.outlet&&Ae.outlet.attach($e.componentRef,$e.route.value),ze($e.route.value),this.activateChildRoutes(S,null,Ae.children)}else{const $e=function Do(T){for(let S=T.parent;S;S=S.parent){const D=S.routeConfig;if(D&&D._loadedConfig)return D._loadedConfig;if(D&&D.component)return null}return null}(W.snapshot),gt=$e?$e.module.componentFactoryResolver:null;Ae.attachRef=null,Ae.route=W,Ae.resolver=gt,Ae.outlet&&Ae.outlet.activateWith(W,gt),this.activateChildRoutes(S,null,Ae.children)}}else this.activateChildRoutes(S,null,V)}}class $i{constructor(S,D){this.routes=S,this.module=D}}function $r(T){return"function"==typeof T}function Ps(T){return T instanceof Rr}const Ei=Symbol("INITIAL_VALUE");function Es(){return(0,ft.w)(T=>function we(...T){let S,D;return(0,re.K)(T[T.length-1])&&(D=T.pop()),"function"==typeof T[T.length-1]&&(S=T.pop()),1===T.length&&(0,Z.k)(T[0])&&(T=T[0]),(0,ae.n)(T,D).lift(new ye(S))}(T.map(S=>S.pipe((0,Zt.q)(1),(0,gn.O)(Ei)))).pipe((0,An.R)((S,D)=>{let V=!1;return D.reduce((W,se,Ae)=>W!==Ei?W:(se===Ei&&(V=!0),V||!1!==se&&Ae!==D.length-1&&!Ps(se)?W:se),S)},Ei),(0,Ve.h)(S=>S!==Ei),(0,Tt.U)(S=>Ps(S)?S:!0===S),(0,Zt.q)(1)))}class Fo{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new wr,this.attachRef=null}}class wr{constructor(){this.contexts=new Map}onChildOutletCreated(S,D){const V=this.getOrCreateContext(S);V.outlet=D,this.contexts.set(S,V)}onChildOutletDestroyed(S){const D=this.getContext(S);D&&(D.outlet=null,D.attachRef=null)}onOutletDeactivated(){const S=this.contexts;return this.contexts=new Map,S}onOutletReAttached(S){this.contexts=S}getOrCreateContext(S){let D=this.getContext(S);return D||(D=new Fo,this.contexts.set(S,D)),D}getContext(S){return this.contexts.get(S)||null}}let B=(()=>{class T{constructor(D,V,W,se,Ae){this.parentContexts=D,this.location=V,this.resolver=W,this.changeDetector=Ae,this.activated=null,this._activatedRoute=null,this.activateEvents=new u.vpe,this.deactivateEvents=new u.vpe,this.attachEvents=new u.vpe,this.detachEvents=new u.vpe,this.name=se||Pn,D.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const D=this.parentContexts.getContext(this.name);D&&D.route&&(D.attachRef?this.attach(D.attachRef,D.route):this.activateWith(D.route,D.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const D=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(D.instance),D}attach(D,V){this.activated=D,this._activatedRoute=V,this.location.insert(D.hostView),this.attachEvents.emit(D.instance)}deactivate(){if(this.activated){const D=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(D)}}activateWith(D,V){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=D;const Ae=(V=V||this.resolver).resolveComponentFactory(D._futureSnapshot.routeConfig.component),$e=this.parentContexts.getOrCreateContext(this.name).children,gt=new ee(D,$e,this.location.injector);this.activated=this.location.createComponent(Ae,this.location.length,gt),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return T.\u0275fac=function(D){return new(D||T)(u.Y36(wr),u.Y36(u.s_b),u.Y36(u._Vd),u.$8M("name"),u.Y36(u.sBO))},T.\u0275dir=u.lG2({type:T,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),T})();class ee{constructor(S,D,V){this.route=S,this.childContexts=D,this.parent=V}get(S,D){return S===Rt?this.route:S===wr?this.childContexts:this.parent.get(S,D)}}let $=(()=>{class T{}return T.\u0275fac=function(D){return new(D||T)},T.\u0275cmp=u.Xpm({type:T,selectors:[["ng-component"]],decls:1,vars:0,template:function(D,V){1&D&&u._UZ(0,"router-outlet")},directives:[B],encapsulation:2}),T})();function ce(T,S=""){for(let D=0;D<T.length;D++){const V=T[D];Ge(V,mt(S,V))}}function Ge(T,S){T.children&&ce(T.children,S)}function mt(T,S){return S?T||S.path?T&&!S.path?`${T}/`:!T&&S.path?S.path:`${T}/${S.path}`:"":T}function Ft(T){const S=T.children&&T.children.map(Ft),D=S?Object.assign(Object.assign({},T),{children:S}):Object.assign({},T);return!D.component&&(S||D.loadChildren)&&D.outlet&&D.outlet!==Pn&&(D.component=$),D}function Yt(T){return T.outlet||Pn}function zr(T,S){const D=T.filter(V=>Yt(V)===S);return D.push(...T.filter(V=>Yt(V)!==S)),D}const Ir={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function or(T,S,D){var V;if(""===S.path)return"full"===S.pathMatch&&(T.hasChildren()||D.length>0)?Object.assign({},Ir):{matched:!0,consumedSegments:[],remainingSegments:D,parameters:{},positionalParamSegments:{}};const se=(S.matcher||nn)(D,T,S);if(!se)return Object.assign({},Ir);const Ae={};Ce(se.posParams,(gt,vn)=>{Ae[vn]=gt.path});const $e=se.consumed.length>0?Object.assign(Object.assign({},Ae),se.consumed[se.consumed.length-1].parameters):Ae;return{matched:!0,consumedSegments:se.consumed,remainingSegments:D.slice(se.consumed.length),parameters:$e,positionalParamSegments:null!==(V=se.posParams)&&void 0!==V?V:{}}}function _r(T,S,D,V,W="corrected"){if(D.length>0&&function ui(T,S,D){return D.some(V=>rs(T,S,V)&&Yt(V)!==Pn)}(T,D,V)){const Ae=new Fn(S,function Xr(T,S,D,V){const W={};W[Pn]=V,V._sourceSegment=T,V._segmentIndexShift=S.length;for(const se of D)if(""===se.path&&Yt(se)!==Pn){const Ae=new Fn([],{});Ae._sourceSegment=T,Ae._segmentIndexShift=S.length,W[Yt(se)]=Ae}return W}(T,S,V,new Fn(D,T.children)));return Ae._sourceSegment=T,Ae._segmentIndexShift=S.length,{segmentGroup:Ae,slicedSegments:[]}}if(0===D.length&&function yo(T,S,D){return D.some(V=>rs(T,S,V))}(T,D,V)){const Ae=new Fn(T.segments,function fi(T,S,D,V,W,se){const Ae={};for(const $e of V)if(rs(T,D,$e)&&!W[Yt($e)]){const gt=new Fn([],{});gt._sourceSegment=T,gt._segmentIndexShift="legacy"===se?T.segments.length:S.length,Ae[Yt($e)]=gt}return Object.assign(Object.assign({},W),Ae)}(T,S,D,V,T.children,W));return Ae._sourceSegment=T,Ae._segmentIndexShift=S.length,{segmentGroup:Ae,slicedSegments:D}}const se=new Fn(T.segments,T.children);return se._sourceSegment=T,se._segmentIndexShift=S.length,{segmentGroup:se,slicedSegments:D}}function rs(T,S,D){return(!(T.hasChildren()||S.length>0)||"full"!==D.pathMatch)&&""===D.path}function On(T,S,D,V){return!!(Yt(T)===V||V!==Pn&&rs(S,D,T))&&("**"===T.path||or(S,T,D).matched)}function fs(T,S,D){return 0===S.length&&!T.children[D]}class G{constructor(S){this.segmentGroup=S||null}}class k{constructor(S){this.urlTree=S}}function P(T){return(0,Pe._)(new G(T))}function ie(T){return(0,Pe._)(new k(T))}class F{constructor(S,D,V,W,se){this.configLoader=D,this.urlSerializer=V,this.urlTree=W,this.config=se,this.allowRedirects=!0,this.ngModule=S.get(u.h0i)}apply(){const S=_r(this.urlTree.root,[],[],this.config).segmentGroup,D=new Fn(S.segments,S.children);return this.expandSegmentGroup(this.ngModule,this.config,D,Pn).pipe((0,Tt.U)(se=>this.createUrlTree(dt(se),this.urlTree.queryParams,this.urlTree.fragment))).pipe(rt(se=>{if(se instanceof k)return this.allowRedirects=!1,this.match(se.urlTree);throw se instanceof G?this.noMatchError(se):se}))}match(S){return this.expandSegmentGroup(this.ngModule,this.config,S.root,Pn).pipe((0,Tt.U)(W=>this.createUrlTree(dt(W),S.queryParams,S.fragment))).pipe(rt(W=>{throw W instanceof G?this.noMatchError(W):W}))}noMatchError(S){return new Error(`Cannot match any routes. URL Segment: '${S.segmentGroup}'`)}createUrlTree(S,D,V){const W=S.segments.length>0?new Fn([],{[Pn]:S}):S;return new Rr(W,D,V)}expandSegmentGroup(S,D,V,W){return 0===V.segments.length&&V.hasChildren()?this.expandChildren(S,D,V).pipe((0,Tt.U)(se=>new Fn([],se))):this.expandSegment(S,V,D,V.segments,W,!0)}expandChildren(S,D,V){const W=[];for(const se of Object.keys(V.children))"primary"===se?W.unshift(se):W.push(se);return(0,te.D)(W).pipe(pe(se=>{const Ae=V.children[se],$e=zr(D,se);return this.expandSegmentGroup(S,$e,Ae,se).pipe((0,Tt.U)(gt=>({segment:gt,outlet:se})))}),(0,An.R)((se,Ae)=>(se[Ae.outlet]=Ae.segment,se),{}),function Qe(T,S){const D=arguments.length>=2;return V=>V.pipe(T?(0,Ve.h)((W,se)=>T(W,se,V)):st.y,Je(1),D?(0,pt.d)(S):(0,Xt.T)(()=>new ke.K))}())}expandSegment(S,D,V,W,se,Ae){return(0,te.D)(V).pipe(pe($e=>this.expandSegmentAgainstRoute(S,D,V,$e,W,se,Ae).pipe(rt(vn=>{if(vn instanceof G)return(0,Oe.of)(null);throw vn}))),(0,ln.P)($e=>!!$e),rt(($e,gt)=>{if($e instanceof ke.K||"EmptyError"===$e.name)return fs(D,W,se)?(0,Oe.of)(new Fn([],{})):P(D);throw $e}))}expandSegmentAgainstRoute(S,D,V,W,se,Ae,$e){return On(W,D,se,Ae)?void 0===W.redirectTo?this.matchSegmentAgainstRoute(S,D,W,se,Ae):$e&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(S,D,V,W,se,Ae):P(D):P(D)}expandSegmentAgainstRouteUsingRedirect(S,D,V,W,se,Ae){return"**"===W.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(S,V,W,Ae):this.expandRegularSegmentAgainstRouteUsingRedirect(S,D,V,W,se,Ae)}expandWildCardWithParamsAgainstRouteUsingRedirect(S,D,V,W){const se=this.applyRedirectCommands([],V.redirectTo,{});return V.redirectTo.startsWith("/")?ie(se):this.lineralizeSegments(V,se).pipe((0,qe.zg)(Ae=>{const $e=new Fn(Ae,{});return this.expandSegment(S,$e,D,Ae,W,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(S,D,V,W,se,Ae){const{matched:$e,consumedSegments:gt,remainingSegments:vn,positionalParamSegments:Dr}=or(D,W,se);if(!$e)return P(D);const fn=this.applyRedirectCommands(gt,W.redirectTo,Dr);return W.redirectTo.startsWith("/")?ie(fn):this.lineralizeSegments(W,fn).pipe((0,qe.zg)(jn=>this.expandSegment(S,D,V,jn.concat(vn),Ae,!1)))}matchSegmentAgainstRoute(S,D,V,W,se){if("**"===V.path)return V.loadChildren?(V._loadedConfig?(0,Oe.of)(V._loadedConfig):this.configLoader.load(S.injector,V)).pipe((0,Tt.U)(fn=>(V._loadedConfig=fn,new Fn(W,{})))):(0,Oe.of)(new Fn(W,{}));const{matched:Ae,consumedSegments:$e,remainingSegments:gt}=or(D,V,W);return Ae?this.getChildConfig(S,V,W).pipe((0,qe.zg)(Dr=>{const fn=Dr.module,jn=Dr.routes,{segmentGroup:Cr,slicedSegments:fr}=_r(D,$e,gt,jn),Fs=new Fn(Cr.segments,Cr.children);if(0===fr.length&&Fs.hasChildren())return this.expandChildren(fn,jn,Fs).pipe((0,Tt.U)(ns=>new Fn($e,ns)));if(0===jn.length&&0===fr.length)return(0,Oe.of)(new Fn($e,{}));const ro=Yt(V)===se;return this.expandSegment(fn,Fs,jn,fr,ro?Pn:se,!0).pipe((0,Tt.U)(qn=>new Fn($e.concat(qn.segments),qn.children)))})):P(D)}getChildConfig(S,D,V){return D.children?(0,Oe.of)(new $i(D.children,S)):D.loadChildren?void 0!==D._loadedConfig?(0,Oe.of)(D._loadedConfig):this.runCanLoadGuards(S.injector,D,V).pipe((0,qe.zg)(W=>W?this.configLoader.load(S.injector,D).pipe((0,Tt.U)(se=>(D._loadedConfig=se,se))):function L(T){return(0,Pe._)(li(`Cannot load children because the guard of the route "path: '${T.path}'" returned false`))}(D))):(0,Oe.of)(new $i([],S))}runCanLoadGuards(S,D,V){const W=D.canLoad;if(!W||0===W.length)return(0,Oe.of)(!0);const se=W.map(Ae=>{const $e=S.get(Ae);let gt;if(function Ns(T){return T&&$r(T.canLoad)}($e))gt=$e.canLoad(D,V);else{if(!$r($e))throw new Error("Invalid CanLoad guard");gt=$e(D,V)}return je(gt)});return(0,Oe.of)(se).pipe(Es(),(0,tn.b)(Ae=>{if(!Ps(Ae))return;const $e=li(`Redirecting to "${this.urlSerializer.serialize(Ae)}"`);throw $e.url=Ae,$e}),(0,Tt.U)(Ae=>!0===Ae))}lineralizeSegments(S,D){let V=[],W=D.root;for(;;){if(V=V.concat(W.segments),0===W.numberOfChildren)return(0,Oe.of)(V);if(W.numberOfChildren>1||!W.children[Pn])return(0,Pe._)(new Error(`Only absolute redirects can have named outlets. redirectTo: '${S.redirectTo}'`));W=W.children[Pn]}}applyRedirectCommands(S,D,V){return this.applyRedirectCreatreUrlTree(D,this.urlSerializer.parse(D),S,V)}applyRedirectCreatreUrlTree(S,D,V,W){const se=this.createSegmentGroup(S,D.root,V,W);return new Rr(se,this.createQueryParams(D.queryParams,this.urlTree.queryParams),D.fragment)}createQueryParams(S,D){const V={};return Ce(S,(W,se)=>{if("string"==typeof W&&W.startsWith(":")){const $e=W.substring(1);V[se]=D[$e]}else V[se]=W}),V}createSegmentGroup(S,D,V,W){const se=this.createSegments(S,D.segments,V,W);let Ae={};return Ce(D.children,($e,gt)=>{Ae[gt]=this.createSegmentGroup(S,$e,V,W)}),new Fn(se,Ae)}createSegments(S,D,V,W){return D.map(se=>se.path.startsWith(":")?this.findPosParam(S,se,W):this.findOrReturn(se,V))}findPosParam(S,D,V){const W=V[D.path.substring(1)];if(!W)throw new Error(`Cannot redirect to '${S}'. Cannot find '${D.path}'.`);return W}findOrReturn(S,D){let V=0;for(const W of D){if(W.path===S.path)return D.splice(V),W;V++}return S}}function dt(T){const S={};for(const V of Object.keys(T.children)){const se=dt(T.children[V]);(se.segments.length>0||se.hasChildren())&&(S[V]=se)}return function ue(T){if(1===T.numberOfChildren&&T.children[Pn]){const S=T.children[Pn];return new Fn(T.segments.concat(S.segments),S.children)}return T}(new Fn(T.segments,S))}class En{constructor(S){this.path=S,this.route=this.path[this.path.length-1]}}class Nn{constructor(S,D){this.component=S,this.route=D}}function Jr(T,S,D){const V=T._root;return bs(V,S?S._root:null,D,[V.value])}function wi(T,S,D){const V=function eo(T){if(!T)return null;for(let S=T.parent;S;S=S.parent){const D=S.routeConfig;if(D&&D._loadedConfig)return D._loadedConfig}return null}(S);return(V?V.module.injector:D).get(T)}function bs(T,S,D,V,W={canDeactivateChecks:[],canActivateChecks:[]}){const se=tt(S);return T.children.forEach(Ae=>{(function ts(T,S,D,V,W={canDeactivateChecks:[],canActivateChecks:[]}){const se=T.value,Ae=S?S.value:null,$e=D?D.getContext(T.value.outlet):null;if(Ae&&se.routeConfig===Ae.routeConfig){const gt=function ei(T,S,D){if("function"==typeof D)return D(T,S);switch(D){case"pathParamsChange":return!Mr(T.url,S.url);case"pathParamsOrQueryParamsChange":return!Mr(T.url,S.url)||!en(T.queryParams,S.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!We(T,S)||!en(T.queryParams,S.queryParams);default:return!We(T,S)}}(Ae,se,se.routeConfig.runGuardsAndResolvers);gt?W.canActivateChecks.push(new En(V)):(se.data=Ae.data,se._resolvedData=Ae._resolvedData),bs(T,S,se.component?$e?$e.children:null:D,V,W),gt&&$e&&$e.outlet&&$e.outlet.isActivated&&W.canDeactivateChecks.push(new Nn($e.outlet.component,Ae))}else Ae&&Wi(S,$e,W),W.canActivateChecks.push(new En(V)),bs(T,null,se.component?$e?$e.children:null:D,V,W)})(Ae,se[Ae.value.outlet],D,V.concat([Ae.value]),W),delete se[Ae.value.outlet]}),Ce(se,(Ae,$e)=>Wi(Ae,D.getContext($e),W)),W}function Wi(T,S,D){const V=tt(T),W=T.value;Ce(V,(se,Ae)=>{Wi(se,W.component?S?S.children.getContext(Ae):null:S,D)}),D.canDeactivateChecks.push(new Nn(W.component&&S&&S.outlet&&S.outlet.isActivated?S.outlet.component:null,W))}class el{}function Va(T){return new me.y(S=>S.error(T))}class tl{constructor(S,D,V,W,se,Ae){this.rootComponentType=S,this.config=D,this.urlTree=V,this.url=W,this.paramsInheritanceStrategy=se,this.relativeLinkResolution=Ae}recognize(){const S=_r(this.urlTree.root,[],[],this.config.filter(Ae=>void 0===Ae.redirectTo),this.relativeLinkResolution).segmentGroup,D=this.processSegmentGroup(this.config,S,Pn);if(null===D)return null;const V=new Tn([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Pn,this.rootComponentType,null,this.urlTree.root,-1,{}),W=new He(V,D),se=new zn(this.url,W);return this.inheritParamsAndData(se._root),se}inheritParamsAndData(S){const D=S.value,V=pn(D,this.paramsInheritanceStrategy);D.params=Object.freeze(V.params),D.data=Object.freeze(V.data),S.children.forEach(W=>this.inheritParamsAndData(W))}processSegmentGroup(S,D,V){return 0===D.segments.length&&D.hasChildren()?this.processChildren(S,D):this.processSegment(S,D,D.segments,V)}processChildren(S,D){const V=[];for(const se of Object.keys(D.children)){const Ae=D.children[se],$e=zr(S,se),gt=this.processSegmentGroup($e,Ae,se);if(null===gt)return null;V.push(...gt)}const W=Lo(V);return function Ba(T){T.sort((S,D)=>S.value.outlet===Pn?-1:D.value.outlet===Pn?1:S.value.outlet.localeCompare(D.value.outlet))}(W),W}processSegment(S,D,V,W){for(const se of S){const Ae=this.processSegmentAgainstRoute(se,D,V,W);if(null!==Ae)return Ae}return fs(D,V,W)?[]:null}processSegmentAgainstRoute(S,D,V,W){if(S.redirectTo||!On(S,D,V,W))return null;let se,Ae=[],$e=[];if("**"===S.path){const Cr=V.length>0?Rn(V).parameters:{};se=new Tn(V,Cr,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,nl(S),Yt(S),S.component,S,oa(D),aa(D)+V.length,kr(S))}else{const Cr=or(D,S,V);if(!Cr.matched)return null;Ae=Cr.consumedSegments,$e=Cr.remainingSegments,se=new Tn(Ae,Cr.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,nl(S),Yt(S),S.component,S,oa(D),aa(D)+Ae.length,kr(S))}const gt=function sa(T){return T.children?T.children:T.loadChildren?T._loadedConfig.routes:[]}(S),{segmentGroup:vn,slicedSegments:Dr}=_r(D,Ae,$e,gt.filter(Cr=>void 0===Cr.redirectTo),this.relativeLinkResolution);if(0===Dr.length&&vn.hasChildren()){const Cr=this.processChildren(gt,vn);return null===Cr?null:[new He(se,Cr)]}if(0===gt.length&&0===Dr.length)return[new He(se,[])];const fn=Yt(S)===W,jn=this.processSegment(gt,vn,Dr,fn?Pn:W);return null===jn?null:[new He(se,jn)]}}function $a(T){const S=T.value.routeConfig;return S&&""===S.path&&void 0===S.redirectTo}function Lo(T){const S=[],D=new Set;for(const V of T){if(!$a(V)){S.push(V);continue}const W=S.find(se=>V.value.routeConfig===se.value.routeConfig);void 0!==W?(W.children.push(...V.children),D.add(W)):S.push(V)}for(const V of D){const W=Lo(V.children);S.push(new He(V.value,W))}return S.filter(V=>!D.has(V))}function oa(T){let S=T;for(;S._sourceSegment;)S=S._sourceSegment;return S}function aa(T){let S=T,D=S._segmentIndexShift?S._segmentIndexShift:0;for(;S._sourceSegment;)S=S._sourceSegment,D+=S._segmentIndexShift?S._segmentIndexShift:0;return D-1}function nl(T){return T.data||{}}function kr(T){return T.resolve||{}}function Al(T){return[...Object.keys(T),...Object.getOwnPropertySymbols(T)]}function Xo(T){return(0,ft.w)(S=>{const D=T(S);return D?(0,te.D)(D).pipe((0,Tt.U)(()=>S)):(0,Oe.of)(S)})}class Yl{}class ar extends class gi{shouldDetach(S){return!1}store(S,D){}shouldAttach(S){return!1}retrieve(S){return null}shouldReuseRoute(S,D){return S.routeConfig===D.routeConfig}}{}const qi=new u.OlP("ROUTES");class la{constructor(S,D,V,W){this.injector=S,this.compiler=D,this.onLoadStartListener=V,this.onLoadEndListener=W}load(S,D){if(D._loader$)return D._loader$;this.onLoadStartListener&&this.onLoadStartListener(D);const W=this.loadModuleFactory(D.loadChildren).pipe((0,Tt.U)(se=>{this.onLoadEndListener&&this.onLoadEndListener(D);const Ae=se.create(S);return new $i(_n(Ae.injector.get(qi,void 0,u.XFs.Self|u.XFs.Optional)).map(Ft),Ae)}),rt(se=>{throw D._loader$=void 0,se}));return D._loader$=new ve.c(W,()=>new ot.xQ).pipe((0,mr.x)()),D._loader$}loadModuleFactory(S){return je(S()).pipe((0,qe.zg)(D=>D instanceof u.YKP?(0,Oe.of)(D):(0,te.D)(this.compiler.compileModuleAsync(D))))}}class qs{shouldProcessUrl(S){return!0}extract(S){return S}merge(S,D){return S}}function xl(T){throw T}function So(T,S,D){return S.parse("/")}function Jo(T,S){return(0,Oe.of)(null)}const Vo={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ao={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ji=(()=>{class T{constructor(D,V,W,se,Ae,$e,gt){this.rootComponentType=D,this.urlSerializer=V,this.rootContexts=W,this.location=se,this.config=gt,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ot.xQ,this.errorHandler=xl,this.malformedUriErrorHandler=So,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Jo,afterPreactivation:Jo},this.urlHandlingStrategy=new qs,this.routeReuseStrategy=new ar,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=Ae.get(u.h0i),this.console=Ae.get(u.c2e);const fn=Ae.get(u.R0b);this.isNgZoneEnabled=fn instanceof u.R0b&&u.R0b.isInAngularZone(),this.resetConfig(gt),this.currentUrlTree=function Et(){return new Rr(new Fn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new la(Ae,$e,jn=>this.triggerEvent(new ni(jn)),jn=>this.triggerEvent(new kn(jn))),this.routerState=At(this.currentUrlTree,this.rootComponentType),this.transitions=new _e.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var D;return null===(D=this.location.getState())||void 0===D?void 0:D.\u0275routerPageId}setupNavigations(D){const V=this.events;return D.pipe((0,Ve.h)(W=>0!==W.id),(0,Tt.U)(W=>Object.assign(Object.assign({},W),{extractedUrl:this.urlHandlingStrategy.extract(W.rawUrl)})),(0,ft.w)(W=>{let se=!1,Ae=!1;return(0,Oe.of)(W).pipe((0,tn.b)($e=>{this.currentNavigation={id:$e.id,initialUrl:$e.currentRawUrl,extractedUrl:$e.extractedUrl,trigger:$e.source,extras:$e.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,ft.w)($e=>{const gt=this.browserUrlTree.toString(),vn=!this.navigated||$e.extractedUrl.toString()!==gt||gt!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||vn)&&this.urlHandlingStrategy.shouldProcessUrl($e.rawUrl))return Kl($e.source)&&(this.browserUrlTree=$e.extractedUrl),(0,Oe.of)($e).pipe((0,ft.w)(fn=>{const jn=this.transitions.getValue();return V.next(new jt(fn.id,this.serializeUrl(fn.extractedUrl),fn.source,fn.restoredState)),jn!==this.transitions.getValue()?he.E:Promise.resolve(fn)}),function Kt(T,S,D,V){return(0,ft.w)(W=>function E(T,S,D,V,W){return new F(T,S,D,V,W).apply()}(T,S,D,W.extractedUrl,V).pipe((0,Tt.U)(se=>Object.assign(Object.assign({},W),{urlAfterRedirects:se}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,tn.b)(fn=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:fn.urlAfterRedirects})}),function hr(T,S,D,V,W){return(0,qe.zg)(se=>function Sl(T,S,D,V,W="emptyOnly",se="legacy"){try{const Ae=new tl(T,S,D,V,W,se).recognize();return null===Ae?Va(new el):(0,Oe.of)(Ae)}catch(Ae){return Va(Ae)}}(T,S,se.urlAfterRedirects,D(se.urlAfterRedirects),V,W).pipe((0,Tt.U)(Ae=>Object.assign(Object.assign({},se),{targetSnapshot:Ae}))))}(this.rootComponentType,this.config,fn=>this.serializeUrl(fn),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,tn.b)(fn=>{if("eager"===this.urlUpdateStrategy){if(!fn.extras.skipLocationChange){const Cr=this.urlHandlingStrategy.merge(fn.urlAfterRedirects,fn.rawUrl);this.setBrowserUrl(Cr,fn)}this.browserUrlTree=fn.urlAfterRedirects}const jn=new cr(fn.id,this.serializeUrl(fn.extractedUrl),this.serializeUrl(fn.urlAfterRedirects),fn.targetSnapshot);V.next(jn)}));if(vn&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:jn,extractedUrl:Cr,source:fr,restoredState:Fs,extras:ro}=$e,Ii=new jt(jn,this.serializeUrl(Cr),fr,Fs);V.next(Ii);const qn=At(Cr,this.rootComponentType).snapshot;return(0,Oe.of)(Object.assign(Object.assign({},$e),{targetSnapshot:qn,urlAfterRedirects:Cr,extras:Object.assign(Object.assign({},ro),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=$e.rawUrl,$e.resolve(null),he.E}),Xo($e=>{const{targetSnapshot:gt,id:vn,extractedUrl:Dr,rawUrl:fn,extras:{skipLocationChange:jn,replaceUrl:Cr}}=$e;return this.hooks.beforePreactivation(gt,{navigationId:vn,appliedUrlTree:Dr,rawUrlTree:fn,skipLocationChange:!!jn,replaceUrl:!!Cr})}),(0,tn.b)($e=>{const gt=new Ur($e.id,this.serializeUrl($e.extractedUrl),this.serializeUrl($e.urlAfterRedirects),$e.targetSnapshot);this.triggerEvent(gt)}),(0,Tt.U)($e=>Object.assign(Object.assign({},$e),{guards:Jr($e.targetSnapshot,$e.currentSnapshot,this.rootContexts)})),function ia(T,S){return(0,qe.zg)(D=>{const{targetSnapshot:V,currentSnapshot:W,guards:{canActivateChecks:se,canDeactivateChecks:Ae}}=D;return 0===Ae.length&&0===se.length?(0,Oe.of)(Object.assign(Object.assign({},D),{guardsResult:!0})):function Qo(T,S,D,V){return(0,te.D)(T).pipe((0,qe.zg)(W=>function La(T,S,D,V,W){const se=S&&S.routeConfig?S.routeConfig.canDeactivate:null;if(!se||0===se.length)return(0,Oe.of)(!0);const Ae=se.map($e=>{const gt=wi($e,S,W);let vn;if(function Ss(T){return T&&$r(T.canDeactivate)}(gt))vn=je(gt.canDeactivate(T,S,D,V));else{if(!$r(gt))throw new Error("Invalid CanDeactivate guard");vn=je(gt(T,S,D,V))}return vn.pipe((0,ln.P)())});return(0,Oe.of)(Ae).pipe(Es())}(W.component,W.route,D,S,V)),(0,ln.P)(W=>!0!==W,!0))}(Ae,V,W,T).pipe((0,qe.zg)($e=>$e&&function Qr(T){return"boolean"==typeof T}($e)?function Ws(T,S,D,V){return(0,te.D)(S).pipe(pe(W=>(0,ht.z)(function Fa(T,S){return null!==T&&S&&S(new hn(T)),(0,Oe.of)(!0)}(W.route.parent,V),function ba(T,S){return null!==T&&S&&S(new jr(T)),(0,Oe.of)(!0)}(W.route,V),function Tl(T,S,D){const V=S[S.length-1],se=S.slice(0,S.length-1).reverse().map(Ae=>function ci(T){const S=T.routeConfig?T.routeConfig.canActivateChild:null;return S&&0!==S.length?{node:T,guards:S}:null}(Ae)).filter(Ae=>null!==Ae).map(Ae=>Ue(()=>{const $e=Ae.guards.map(gt=>{const vn=wi(gt,Ae.node,D);let Dr;if(function zs(T){return T&&$r(T.canActivateChild)}(vn))Dr=je(vn.canActivateChild(V,T));else{if(!$r(vn))throw new Error("Invalid CanActivateChild guard");Dr=je(vn(V,T))}return Dr.pipe((0,ln.P)())});return(0,Oe.of)($e).pipe(Es())}));return(0,Oe.of)(se).pipe(Es())}(T,W.path,D),function Ui(T,S,D){const V=S.routeConfig?S.routeConfig.canActivate:null;if(!V||0===V.length)return(0,Oe.of)(!0);const W=V.map(se=>Ue(()=>{const Ae=wi(se,S,D);let $e;if(function cs(T){return T&&$r(T.canActivate)}(Ae))$e=je(Ae.canActivate(S,T));else{if(!$r(Ae))throw new Error("Invalid CanActivate guard");$e=je(Ae(S,T))}return $e.pipe((0,ln.P)())}));return(0,Oe.of)(W).pipe(Es())}(T,W.route,D))),(0,ln.P)(W=>!0!==W,!0))}(V,se,T,S):(0,Oe.of)($e)),(0,Tt.U)($e=>Object.assign(Object.assign({},D),{guardsResult:$e})))})}(this.ngModule.injector,$e=>this.triggerEvent($e)),(0,tn.b)($e=>{if(Ps($e.guardsResult)){const vn=li(`Redirecting to "${this.serializeUrl($e.guardsResult)}"`);throw vn.url=$e.guardsResult,vn}const gt=new on($e.id,this.serializeUrl($e.extractedUrl),this.serializeUrl($e.urlAfterRedirects),$e.targetSnapshot,!!$e.guardsResult);this.triggerEvent(gt)}),(0,Ve.h)($e=>!!$e.guardsResult||(this.restoreHistory($e),this.cancelNavigationTransition($e,""),!1)),Xo($e=>{if($e.guards.canActivateChecks.length)return(0,Oe.of)($e).pipe((0,tn.b)(gt=>{const vn=new qr(gt.id,this.serializeUrl(gt.extractedUrl),this.serializeUrl(gt.urlAfterRedirects),gt.targetSnapshot);this.triggerEvent(vn)}),(0,ft.w)(gt=>{let vn=!1;return(0,Oe.of)(gt).pipe(function pr(T,S){return(0,qe.zg)(D=>{const{targetSnapshot:V,guards:{canActivateChecks:W}}=D;if(!W.length)return(0,Oe.of)(D);let se=0;return(0,te.D)(W).pipe(pe(Ae=>function pi(T,S,D,V){return function _i(T,S,D,V){const W=Al(T);if(0===W.length)return(0,Oe.of)({});const se={};return(0,te.D)(W).pipe((0,qe.zg)(Ae=>function _u(T,S,D,V){const W=wi(T,S,V);return je(W.resolve?W.resolve(S,D):W(S,D))}(T[Ae],S,D,V).pipe((0,tn.b)($e=>{se[Ae]=$e}))),Je(1),(0,qe.zg)(()=>Al(se).length===W.length?(0,Oe.of)(se):he.E))}(T._resolve,T,S,V).pipe((0,Tt.U)(se=>(T._resolvedData=se,T.data=Object.assign(Object.assign({},T.data),pn(T,D).resolve),null)))}(Ae.route,V,T,S)),(0,tn.b)(()=>se++),Je(1),(0,qe.zg)(Ae=>se===W.length?(0,Oe.of)(D):he.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,tn.b)({next:()=>vn=!0,complete:()=>{vn||(this.restoreHistory(gt),this.cancelNavigationTransition(gt,"At least one route resolver didn't emit any value."))}}))}),(0,tn.b)(gt=>{const vn=new Gt(gt.id,this.serializeUrl(gt.extractedUrl),this.serializeUrl(gt.urlAfterRedirects),gt.targetSnapshot);this.triggerEvent(vn)}))}),Xo($e=>{const{targetSnapshot:gt,id:vn,extractedUrl:Dr,rawUrl:fn,extras:{skipLocationChange:jn,replaceUrl:Cr}}=$e;return this.hooks.afterPreactivation(gt,{navigationId:vn,appliedUrlTree:Dr,rawUrlTree:fn,skipLocationChange:!!jn,replaceUrl:!!Cr})}),(0,Tt.U)($e=>{const gt=function lt(T,S,D){const V=Ot(T,S._root,D?D._root:void 0);return new bt(V,S)}(this.routeReuseStrategy,$e.targetSnapshot,$e.currentRouterState);return Object.assign(Object.assign({},$e),{targetRouterState:gt})}),(0,tn.b)($e=>{this.currentUrlTree=$e.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge($e.urlAfterRedirects,$e.rawUrl),this.routerState=$e.targetRouterState,"deferred"===this.urlUpdateStrategy&&($e.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,$e),this.browserUrlTree=$e.urlAfterRedirects)}),((T,S,D)=>(0,Tt.U)(V=>(new es(S,V.targetRouterState,V.currentRouterState,D).activate(T),V)))(this.rootContexts,this.routeReuseStrategy,$e=>this.triggerEvent($e)),(0,tn.b)({next(){se=!0},complete(){se=!0}}),function at(T){return S=>S.lift(new Re(T))}(()=>{var $e;se||Ae||this.cancelNavigationTransition(W,`Navigation ID ${W.id} is not equal to the current navigation id ${this.navigationId}`),(null===($e=this.currentNavigation)||void 0===$e?void 0:$e.id)===W.id&&(this.currentNavigation=null)}),rt($e=>{if(Ae=!0,function er(T){return T&&T[wn]}($e)){const gt=Ps($e.url);gt||(this.navigated=!0,this.restoreHistory(W,!0));const vn=new Hr(W.id,this.serializeUrl(W.extractedUrl),$e.message);V.next(vn),gt?setTimeout(()=>{const Dr=this.urlHandlingStrategy.merge($e.url,this.rawUrlTree),fn={skipLocationChange:W.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Kl(W.source)};this.scheduleNavigation(Dr,"imperative",null,fn,{resolve:W.resolve,reject:W.reject,promise:W.promise})},0):W.resolve(!1)}else{this.restoreHistory(W,!0);const gt=new Jn(W.id,this.serializeUrl(W.extractedUrl),$e);V.next(gt);try{W.resolve(this.errorHandler($e))}catch(vn){W.reject(vn)}}return he.E}))}))}resetRootComponentType(D){this.rootComponentType=D,this.routerState.root.component=this.rootComponentType}setTransition(D){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),D))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(D=>{const V="popstate"===D.type?"popstate":"hashchange";"popstate"===V&&setTimeout(()=>{var W;const se={replaceUrl:!0},Ae=(null===(W=D.state)||void 0===W?void 0:W.navigationId)?D.state:null;if(Ae){const gt=Object.assign({},Ae);delete gt.navigationId,delete gt.\u0275routerPageId,0!==Object.keys(gt).length&&(se.state=gt)}const $e=this.parseUrl(D.url);this.scheduleNavigation($e,V,Ae,se)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(D){this.events.next(D)}resetConfig(D){ce(D),this.config=D.map(Ft),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(D,V={}){const{relativeTo:W,queryParams:se,fragment:Ae,queryParamsHandling:$e,preserveFragment:gt}=V,vn=W||this.routerState.root,Dr=gt?this.currentUrlTree.fragment:Ae;let fn=null;switch($e){case"merge":fn=Object.assign(Object.assign({},this.currentUrlTree.queryParams),se);break;case"preserve":fn=this.currentUrlTree.queryParams;break;default:fn=se||null}return null!==fn&&(fn=this.removeEmptyProps(fn)),function Sr(T,S,D,V,W){if(0===D.length)return Zr(S.root,S.root,S.root,V,W);const se=function Js(T){if("string"==typeof T[0]&&1===T.length&&"/"===T[0])return new hs(!0,0,T);let S=0,D=!1;const V=T.reduce((W,se,Ae)=>{if("object"==typeof se&&null!=se){if(se.outlets){const $e={};return Ce(se.outlets,(gt,vn)=>{$e[vn]="string"==typeof gt?gt.split("/"):gt}),[...W,{outlets:$e}]}if(se.segmentPath)return[...W,se.segmentPath]}return"string"!=typeof se?[...W,se]:0===Ae?(se.split("/").forEach(($e,gt)=>{0==gt&&"."===$e||(0==gt&&""===$e?D=!0:".."===$e?S++:""!=$e&&W.push($e))}),W):[...W,se]},[]);return new hs(D,S,V)}(D);if(se.toRoot())return Zr(S.root,S.root,new Fn([],{}),V,W);const Ae=function zi(T,S,D){if(T.isAbsolute)return new ki(S.root,!0,0);if(-1===D.snapshot._lastPathIndex){const se=D.snapshot._urlSegment;return new ki(se,se===S.root,0)}const V=ii(T.commands[0])?0:1;return function ls(T,S,D){let V=T,W=S,se=D;for(;se>W;){if(se-=W,V=V.parent,!V)throw new Error("Invalid number of '../'");W=V.segments.length}return new ki(V,!1,W-se)}(D.snapshot._urlSegment,D.snapshot._lastPathIndex+V,T.numberOfDoubleDots)}(se,S,T),$e=Ae.processChildren?us(Ae.segmentGroup,Ae.index,se.commands):xi(Ae.segmentGroup,Ae.index,se.commands);return Zr(S.root,Ae.segmentGroup,$e,V,W)}(vn,this.currentUrlTree,D,fn,null!=Dr?Dr:null)}navigateByUrl(D,V={skipLocationChange:!1}){const W=Ps(D)?D:this.parseUrl(D),se=this.urlHandlingStrategy.merge(W,this.rawUrlTree);return this.scheduleNavigation(se,"imperative",null,V)}navigate(D,V={skipLocationChange:!1}){return function ua(T){for(let S=0;S<T.length;S++){const D=T[S];if(null==D)throw new Error(`The requested path contains ${D} segment at index ${S}`)}}(D),this.navigateByUrl(this.createUrlTree(D,V),V)}serializeUrl(D){return this.urlSerializer.serialize(D)}parseUrl(D){let V;try{V=this.urlSerializer.parse(D)}catch(W){V=this.malformedUriErrorHandler(W,this.urlSerializer,D)}return V}isActive(D,V){let W;if(W=!0===V?Object.assign({},Vo):!1===V?Object.assign({},Ao):V,Ps(D))return In(this.currentUrlTree,D,W);const se=this.parseUrl(D);return In(this.currentUrlTree,se,W)}removeEmptyProps(D){return Object.keys(D).reduce((V,W)=>{const se=D[W];return null!=se&&(V[W]=se),V},{})}processNavigations(){this.navigations.subscribe(D=>{this.navigated=!0,this.lastSuccessfulId=D.id,this.currentPageId=D.targetPageId,this.events.next(new ir(D.id,this.serializeUrl(D.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,D.resolve(!0)},D=>{this.console.warn(`Unhandled Navigation Error: ${D}`)})}scheduleNavigation(D,V,W,se,Ae){var $e,gt;if(this.disposed)return Promise.resolve(!1);let vn,Dr,fn;Ae?(vn=Ae.resolve,Dr=Ae.reject,fn=Ae.promise):fn=new Promise((fr,Fs)=>{vn=fr,Dr=Fs});const jn=++this.navigationId;let Cr;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(W=this.location.getState()),Cr=W&&W.\u0275routerPageId?W.\u0275routerPageId:se.replaceUrl||se.skipLocationChange?null!==($e=this.browserPageId)&&void 0!==$e?$e:0:(null!==(gt=this.browserPageId)&&void 0!==gt?gt:0)+1):Cr=0,this.setTransition({id:jn,targetPageId:Cr,source:V,restoredState:W,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:D,extras:se,resolve:vn,reject:Dr,promise:fn,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),fn.catch(fr=>Promise.reject(fr))}setBrowserUrl(D,V){const W=this.urlSerializer.serialize(D),se=Object.assign(Object.assign({},V.extras.state),this.generateNgRouterState(V.id,V.targetPageId));this.location.isCurrentPathEqualTo(W)||V.extras.replaceUrl?this.location.replaceState(W,"",se):this.location.go(W,"",se)}restoreHistory(D,V=!1){var W,se;if("computed"===this.canceledNavigationResolution){const Ae=this.currentPageId-D.targetPageId;"popstate"!==D.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(W=this.currentNavigation)||void 0===W?void 0:W.finalUrl)||0===Ae?this.currentUrlTree===(null===(se=this.currentNavigation)||void 0===se?void 0:se.finalUrl)&&0===Ae&&(this.resetState(D),this.browserUrlTree=D.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(Ae)}else"replace"===this.canceledNavigationResolution&&(V&&this.resetState(D),this.resetUrlToCurrentUrlTree())}resetState(D){this.routerState=D.currentRouterState,this.currentUrlTree=D.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,D.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(D,V){const W=new Hr(D.id,this.serializeUrl(D.extractedUrl),V);this.triggerEvent(W),D.resolve(!1)}generateNgRouterState(D,V){return"computed"===this.canceledNavigationResolution?{navigationId:D,\u0275routerPageId:V}:{navigationId:D}}}return T.\u0275fac=function(D){u.$Z()},T.\u0275prov=u.Yz7({token:T,factory:T.\u0275fac}),T})();function Kl(T){return"imperative"!==T}let wa=(()=>{class T{constructor(D,V,W,se,Ae){this.router=D,this.route=V,this.tabIndexAttribute=W,this.renderer=se,this.el=Ae,this.commands=null,this.onChanges=new ot.xQ,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(D){if(null!=this.tabIndexAttribute)return;const V=this.renderer,W=this.el.nativeElement;null!==D?V.setAttribute(W,"tabindex",D):V.removeAttribute(W,"tabindex")}ngOnChanges(D){this.onChanges.next(this)}set routerLink(D){null!=D?(this.commands=Array.isArray(D)?D:[D],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const D={skipLocationChange:is(this.skipLocationChange),replaceUrl:is(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,D),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:is(this.preserveFragment)})}}return T.\u0275fac=function(D){return new(D||T)(u.Y36(ji),u.Y36(Rt),u.$8M("tabindex"),u.Y36(u.Qsj),u.Y36(u.SBq))},T.\u0275dir=u.lG2({type:T,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(D,V){1&D&&u.NdJ("click",function(){return V.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[u.TTD]}),T})();function is(T){return""===T||!!T}class rl{}class _o{preload(S,D){return D().pipe(rt(()=>(0,Oe.of)(null)))}}class gr{preload(S,D){return(0,Oe.of)(null)}}let Ua=(()=>{class T{constructor(D,V,W,se){this.router=D,this.injector=W,this.preloadingStrategy=se,this.loader=new la(W,V,gt=>D.triggerEvent(new ni(gt)),gt=>D.triggerEvent(new kn(gt)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,Ve.h)(D=>D instanceof ir),pe(()=>this.preload())).subscribe(()=>{})}preload(){const D=this.injector.get(u.h0i);return this.processRoutes(D,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(D,V){const W=[];for(const se of V)if(se.loadChildren&&!se.canLoad&&se._loadedConfig){const Ae=se._loadedConfig;W.push(this.processRoutes(Ae.module,Ae.routes))}else se.loadChildren&&!se.canLoad?W.push(this.preloadConfig(D,se)):se.children&&W.push(this.processRoutes(D,se.children));return(0,te.D)(W).pipe((0,xr.J)(),(0,Tt.U)(se=>{}))}preloadConfig(D,V){return this.preloadingStrategy.preload(V,()=>(V._loadedConfig?(0,Oe.of)(V._loadedConfig):this.loader.load(D.injector,V)).pipe((0,qe.zg)(se=>(V._loadedConfig=se,this.processRoutes(se.module,se.routes)))))}}return T.\u0275fac=function(D){return new(D||T)(u.LFG(ji),u.LFG(u.Sil),u.LFG(u.zs3),u.LFG(rl))},T.\u0275prov=u.Yz7({token:T,factory:T.\u0275fac}),T})(),di=(()=>{class T{constructor(D,V,W={}){this.router=D,this.viewportScroller=V,this.options=W,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},W.scrollPositionRestoration=W.scrollPositionRestoration||"disabled",W.anchorScrolling=W.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(D=>{D instanceof jt?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=D.navigationTrigger,this.restoredId=D.restoredState?D.restoredState.navigationId:0):D instanceof ir&&(this.lastId=D.id,this.scheduleScrollEvent(D,this.router.parseUrl(D.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(D=>{D instanceof Vn&&(D.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(D.position):D.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(D.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(D,V){this.router.triggerEvent(new Vn(D,"popstate"===this.lastSource?this.store[this.restoredId]:null,V))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return T.\u0275fac=function(D){u.$Z()},T.\u0275prov=u.Yz7({token:T,factory:T.\u0275fac}),T})();const Fi=new u.OlP("ROUTER_CONFIGURATION"),xo=new u.OlP("ROUTER_FORROOT_GUARD"),ws=[Kn.Ye,{provide:bi,useClass:Vr},{provide:ji,useFactory:function Wt(T,S,D,V,W,se,Ae={},$e,gt){const vn=new ji(null,T,S,D,V,W,_n(se));return $e&&(vn.urlHandlingStrategy=$e),gt&&(vn.routeReuseStrategy=gt),function Mi(T,S){T.errorHandler&&(S.errorHandler=T.errorHandler),T.malformedUriErrorHandler&&(S.malformedUriErrorHandler=T.malformedUriErrorHandler),T.onSameUrlNavigation&&(S.onSameUrlNavigation=T.onSameUrlNavigation),T.paramsInheritanceStrategy&&(S.paramsInheritanceStrategy=T.paramsInheritanceStrategy),T.relativeLinkResolution&&(S.relativeLinkResolution=T.relativeLinkResolution),T.urlUpdateStrategy&&(S.urlUpdateStrategy=T.urlUpdateStrategy),T.canceledNavigationResolution&&(S.canceledNavigationResolution=T.canceledNavigationResolution)}(Ae,vn),Ae.enableTracing&&vn.events.subscribe(Dr=>{var fn,jn;null===(fn=console.group)||void 0===fn||fn.call(console,`Router Event: ${Dr.constructor.name}`),console.log(Dr.toString()),console.log(Dr),null===(jn=console.groupEnd)||void 0===jn||jn.call(console)}),vn},deps:[bi,wr,Kn.Ye,u.zs3,u.Sil,qi,Fi,[class Yi{},new u.FiY],[Yl,new u.FiY]]},wr,{provide:Rt,useFactory:function As(T){return T.routerState.root},deps:[ji]},Ua,gr,_o,{provide:Fi,useValue:{enableTracing:!1}}];function Gu(){return new u.PXZ("Router",ji)}let hi=(()=>{class T{constructor(D,V){}static forRoot(D,V){return{ngModule:T,providers:[ws,Ia(D),{provide:xo,useFactory:$o,deps:[[ji,new u.FiY,new u.tp0]]},{provide:Fi,useValue:V||{}},{provide:Kn.S$,useFactory:Bo,deps:[Kn.lw,[new u.tBr(Kn.mr),new u.FiY],Fi]},{provide:di,useFactory:ca,deps:[ji,Kn.EM,Fi]},{provide:rl,useExisting:V&&V.preloadingStrategy?V.preloadingStrategy:gr},{provide:u.PXZ,multi:!0,useFactory:Gu},[ks,{provide:u.ip1,multi:!0,useFactory:Sn,deps:[ks]},{provide:Rl,useFactory:Wn,deps:[ks]},{provide:u.tb,multi:!0,useExisting:Rl}]]}}static forChild(D){return{ngModule:T,providers:[Ia(D)]}}}return T.\u0275fac=function(D){return new(D||T)(u.LFG(xo,8),u.LFG(ji,8))},T.\u0275mod=u.oAB({type:T}),T.\u0275inj=u.cJS({}),T})();function ca(T,S,D){return D.scrollOffset&&S.setOffset(D.scrollOffset),new di(T,S,D)}function Bo(T,S,D={}){return D.useHash?new Kn.Do(T,S):new Kn.b0(T,S)}function $o(T){return"guarded"}function Ia(T){return[{provide:u.deG,multi:!0,useValue:T},{provide:qi,multi:!0,useValue:T}]}let ks=(()=>{class T{constructor(D){this.injector=D,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new ot.xQ}appInitializer(){return this.injector.get(Kn.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let V=null;const W=new Promise($e=>V=$e),se=this.injector.get(ji),Ae=this.injector.get(Fi);return"disabled"===Ae.initialNavigation?(se.setUpLocationChangeListener(),V(!0)):"enabled"===Ae.initialNavigation||"enabledBlocking"===Ae.initialNavigation?(se.hooks.afterPreactivation=()=>this.initNavigation?(0,Oe.of)(null):(this.initNavigation=!0,V(!0),this.resultOfPreactivationDone),se.initialNavigation()):V(!0),W})}bootstrapListener(D){const V=this.injector.get(Fi),W=this.injector.get(Ua),se=this.injector.get(di),Ae=this.injector.get(ji),$e=this.injector.get(u.z2F);D===$e.components[0]&&(("enabledNonBlocking"===V.initialNavigation||void 0===V.initialNavigation)&&Ae.initialNavigation(),W.setUpPreloading(),se.init(),Ae.resetRootComponentType($e.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return T.\u0275fac=function(D){return new(D||T)(u.LFG(u.zs3))},T.\u0275prov=u.Yz7({token:T,factory:T.\u0275fac}),T})();function Sn(T){return T.appInitializer.bind(T)}function Wn(T){return T.bootstrapListener.bind(T)}const Rl=new u.OlP("Router Initializer")},3942:(Jt,ct,j)=>{"use strict";j.d(ct,{Z:()=>Oe});var u=j(2090),re=j(4859),Z=j(9681),Ne=j(1877);class Se{constructor(Pe,ke){this._delegate=Pe,this.firebase=ke,(0,Z._addComponent)(Pe,new re.wA("app-compat",()=>this,"PUBLIC")),this.container=Pe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Pe){this._delegate.automaticDataCollectionEnabled=Pe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Pe=>{this._delegate.checkDestroyed(),Pe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,Z.deleteApp)(this._delegate)))}_getService(Pe,ke=Z._DEFAULT_ENTRY_NAME){var ht;this._delegate.checkDestroyed();const ve=this._delegate.container.getProvider(Pe);return!ve.isInitialized()&&"EXPLICIT"===(null===(ht=ve.getComponent())||void 0===ht?void 0:ht.instantiationMode)&&ve.initialize(),ve.getImmediate({identifier:ke})}_removeServiceInstance(Pe,ke=Z._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Pe).clearInstance(ke)}_addComponent(Pe){(0,Z._addComponent)(this._delegate,Pe)}_addOrOverwriteComponent(Pe){(0,Z._addOrOverwriteComponent)(this._delegate,Pe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ie=new u.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),de=function ye(){const _e=function we(_e){const Pe={},ke={__esModule:!0,initializeApp:function ot(St,qe={}){const pe=Z.initializeApp(St,qe);if((0,u.r3)(Pe,pe.name))return Pe[pe.name];const Ve=new _e(pe,ke);return Pe[pe.name]=Ve,Ve},app:ve,registerVersion:Z.registerVersion,setLogLevel:Z.setLogLevel,onLog:Z.onLog,apps:null,SDK_VERSION:Z.SDK_VERSION,INTERNAL:{registerComponent:function rt(St){const qe=St.name,pe=qe.replace("-compat","");if(Z._registerComponent(St)&&"PUBLIC"===St.type){const Ve=(Ee=ve())=>{if("function"!=typeof Ee[pe])throw Ie.create("invalid-app-argument",{appName:qe});return Ee[pe]()};void 0!==St.serviceProps&&(0,u.ZB)(Ve,St.serviceProps),ke[pe]=Ve,_e.prototype[pe]=function(...Ee){return this._getService.bind(this,qe).apply(this,St.multipleInstances?Ee:[])}}return"PUBLIC"===St.type?ke[pe]:null},removeApp:function ht(St){delete Pe[St]},useAsService:function _t(St,qe){return"serverAuth"===qe?null:qe},modularAPIs:Z}};function ve(St){if(!(0,u.r3)(Pe,St=St||Z._DEFAULT_ENTRY_NAME))throw Ie.create("no-app",{appName:St});return Pe[St]}return ke.default=ke,Object.defineProperty(ke,"apps",{get:function Le(){return Object.keys(Pe).map(St=>Pe[St])}}),ve.App=_e,ke}(Se);return _e.INTERNAL=Object.assign(Object.assign({},_e.INTERNAL),{createFirebaseNamespace:ye,extendNamespace:function Pe(ke){(0,u.ZB)(_e,ke)},createSubscribe:u.ne,ErrorFactory:u.LL,deepExtend:u.ZB}),_e}(),me=new Ne.Yd("@firebase/app-compat");if((0,u.jU)()&&void 0!==self.firebase){me.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const _e=self.firebase.SDK_VERSION;_e&&_e.indexOf("LITE")>=0&&me.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Oe=de;!function Ue(_e){(0,Z.registerVersion)("@firebase/app-compat","0.1.21",_e)}()},9681:(Jt,ct,j)=>{"use strict";j.r(ct),j.d(ct,{FirebaseError:()=>Ne.ZR,SDK_VERSION:()=>tn,_DEFAULT_ENTRY_NAME:()=>pt,_addComponent:()=>at,_addOrOverwriteComponent:()=>Re,_apps:()=>Qe,_clearComponents:()=>Zt,_components:()=>nt,_getProvider:()=>Tt,_registerComponent:()=>Xe,_removeServiceInstance:()=>ft,deleteApp:()=>Yn,getApp:()=>xr,getApps:()=>Kn,initializeApp:()=>mr,onLog:()=>Hr,registerVersion:()=>ir,setLogLevel:()=>Jn});var u=j(5861),re=j(4859),Z=j(1877),Ne=j(2090);class Se{constructor(kt){this.container=kt}getPlatformInfoString(){return this.container.getProviders().map(en=>{if(function ae(nn){const kt=nn.getComponent();return"VERSION"===(null==kt?void 0:kt.type)}(en)){const yn=en.getImmediate();return`${yn.library}/${yn.version}`}return null}).filter(en=>en).join(" ")}}const Ie="@firebase/app",ye=new Z.Yd("@firebase/app"),pt="[DEFAULT]",st={[Ie]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Qe=new Map,nt=new Map;function at(nn,kt){try{nn.container.addComponent(kt)}catch(en){ye.debug(`Component ${kt.name} failed to register with FirebaseApp ${nn.name}`,en)}}function Re(nn,kt){nn.container.addOrOverwriteComponent(kt)}function Xe(nn){const kt=nn.name;if(nt.has(kt))return ye.debug(`There were multiple attempts to register component ${kt}.`),!1;nt.set(kt,nn);for(const en of Qe.values())at(en,nn);return!0}function Tt(nn,kt){const en=nn.container.getProvider("heartbeat").getImmediate({optional:!0});return en&&en.triggerHeartbeat(),nn.container.getProvider(kt)}function ft(nn,kt,en=pt){Tt(nn,kt).clearInstance(en)}function Zt(){nt.clear()}const An=new Ne.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class ln{constructor(kt,en,yn){this._isDeleted=!1,this._options=Object.assign({},kt),this._config=Object.assign({},en),this._name=en.name,this._automaticDataCollectionEnabled=en.automaticDataCollectionEnabled,this._container=yn,this.container.addComponent(new re.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(kt){this.checkDestroyed(),this._automaticDataCollectionEnabled=kt}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(kt){this._isDeleted=kt}checkDestroyed(){if(this.isDeleted)throw An.create("app-deleted",{appName:this._name})}}const tn="9.6.10";function mr(nn,kt={}){"object"!=typeof kt&&(kt={name:kt});const en=Object.assign({name:pt,automaticDataCollectionEnabled:!1},kt),yn=en.name;if("string"!=typeof yn||!yn)throw An.create("bad-app-name",{appName:String(yn)});const _n=Qe.get(yn);if(_n){if((0,Ne.vZ)(nn,_n.options)&&(0,Ne.vZ)(en,_n.config))return _n;throw An.create("duplicate-app",{appName:yn})}const Rn=new re.H0(yn);for(const Ce of nt.values())Rn.addComponent(Ce);const Fe=new ln(nn,en,Rn);return Qe.set(yn,Fe),Fe}function xr(nn=pt){const kt=Qe.get(nn);if(!kt)throw An.create("no-app",{appName:nn});return kt}function Kn(){return Array.from(Qe.values())}function Yn(nn){return jt.apply(this,arguments)}function jt(){return(jt=(0,u.Z)(function*(nn){const kt=nn.name;Qe.has(kt)&&(Qe.delete(kt),yield Promise.all(nn.container.getProviders().map(en=>en.delete())),nn.isDeleted=!0)})).apply(this,arguments)}function ir(nn,kt,en){var yn;let _n=null!==(yn=st[nn])&&void 0!==yn?yn:nn;en&&(_n+=`-${en}`);const Rn=_n.match(/\s|\//),Fe=kt.match(/\s|\//);if(Rn||Fe){const Ce=[`Unable to register library "${_n}" with version "${kt}":`];return Rn&&Ce.push(`library name "${_n}" contains illegal characters (whitespace or "/")`),Rn&&Fe&&Ce.push("and"),Fe&&Ce.push(`version name "${kt}" contains illegal characters (whitespace or "/")`),void ye.warn(Ce.join(" "))}Xe(new re.wA(`${_n}-version`,()=>({library:_n,version:kt}),"VERSION"))}function Hr(nn,kt){if(null!==nn&&"function"!=typeof nn)throw An.create("invalid-log-argument");(0,Z.Am)(nn,kt)}function Jn(nn){(0,Z.Ub)(nn)}const on="firebase-heartbeat-store";let qr=null;function Gt(){return qr||(qr=(0,Ne.X3)("firebase-heartbeat-database",1,(nn,kt)=>{0===kt&&nn.createObjectStore(on)}).catch(nn=>{throw An.create("storage-open",{originalErrorMessage:nn.message})})),qr}function kn(){return(kn=(0,u.Z)(function*(nn){try{return(yield Gt()).transaction(on).objectStore(on).get(jr(nn))}catch(kt){throw An.create("storage-get",{originalErrorMessage:kt.message})}})).apply(this,arguments)}function hn(nn,kt){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,u.Z)(function*(nn,kt){try{const yn=(yield Gt()).transaction(on,"readwrite");return yield yn.objectStore(on).put(kt,jr(nn)),yn.complete}catch(en){throw An.create("storage-set",{originalErrorMessage:en.message})}})).apply(this,arguments)}function jr(nn){return`${nn.name}!${nn.options.appId}`}class Pn{constructor(kt){this.container=kt,this._heartbeatsCache=null;const en=this.container.getProvider("app").getImmediate();this._storage=new wn(en),this._heartbeatsCachePromise=this._storage.read().then(yn=>(this._heartbeatsCache=yn,yn))}triggerHeartbeat(){var kt=this;return(0,u.Z)(function*(){const yn=kt.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),_n=ai();if(null===kt._heartbeatsCache&&(kt._heartbeatsCache=yield kt._heartbeatsCachePromise),kt._heartbeatsCache.lastSentHeartbeatDate!==_n&&!kt._heartbeatsCache.heartbeats.some(Rn=>Rn.date===_n))return kt._heartbeatsCache.heartbeats.push({date:_n,agent:yn}),kt._heartbeatsCache.heartbeats=kt._heartbeatsCache.heartbeats.filter(Rn=>{const Fe=new Date(Rn.date).valueOf();return Date.now()-Fe<=2592e6}),kt._storage.overwrite(kt._heartbeatsCache)})()}getHeartbeatsHeader(){var kt=this;return(0,u.Z)(function*(){if(null===kt._heartbeatsCache&&(yield kt._heartbeatsCachePromise),null===kt._heartbeatsCache||0===kt._heartbeatsCache.heartbeats.length)return"";const en=ai(),{heartbeatsToSend:yn,unsentEntries:_n}=function Nr(nn,kt=1024){const en=[];let yn=nn.slice();for(const _n of nn){const Rn=en.find(Fe=>Fe.agent===_n.agent);if(Rn){if(Rn.dates.push(_n.date),li(en)>kt){Rn.dates.pop();break}}else if(en.push({agent:_n.agent,dates:[_n.date]}),li(en)>kt){en.pop();break}yn=yn.slice(1)}return{heartbeatsToSend:en,unsentEntries:yn}}(kt._heartbeatsCache.heartbeats),Rn=(0,Ne.L)(JSON.stringify({version:2,heartbeats:yn}));return kt._heartbeatsCache.lastSentHeartbeatDate=en,_n.length>0?(kt._heartbeatsCache.heartbeats=_n,yield kt._storage.overwrite(kt._heartbeatsCache)):(kt._heartbeatsCache.heartbeats=[],kt._storage.overwrite(kt._heartbeatsCache)),Rn})()}}function ai(){return(new Date).toISOString().substring(0,10)}class wn{constructor(kt){this.app=kt,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,u.Z)(function*(){return!!(0,Ne.hl)()&&(0,Ne.eu)().then(()=>!0).catch(()=>!1)})()}read(){var kt=this;return(0,u.Z)(function*(){return(yield kt._canUseIndexedDBPromise)&&(yield function ni(nn){return kn.apply(this,arguments)}(kt.app))||{heartbeats:[]}})()}overwrite(kt){var en=this;return(0,u.Z)(function*(){var yn;if(yield en._canUseIndexedDBPromise){const Rn=yield en.read();return hn(en.app,{lastSentHeartbeatDate:null!==(yn=kt.lastSentHeartbeatDate)&&void 0!==yn?yn:Rn.lastSentHeartbeatDate,heartbeats:kt.heartbeats})}})()}add(kt){var en=this;return(0,u.Z)(function*(){var yn;if(yield en._canUseIndexedDBPromise){const Rn=yield en.read();return hn(en.app,{lastSentHeartbeatDate:null!==(yn=kt.lastSentHeartbeatDate)&&void 0!==yn?yn:Rn.lastSentHeartbeatDate,heartbeats:[...Rn.heartbeats,...kt.heartbeats]})}})()}}function li(nn){return(0,Ne.L)(JSON.stringify({version:2,heartbeats:nn})).length}!function er(nn){Xe(new re.wA("platform-logger",kt=>new Se(kt),"PRIVATE")),Xe(new re.wA("heartbeat",kt=>new Pn(kt),"PRIVATE")),ir(Ie,"0.7.20",nn),ir(Ie,"0.7.20","esm2017"),ir("fire-js","")}("")},4859:(Jt,ct,j)=>{"use strict";j.d(ct,{wA:()=>Z,H0:()=>we,zt:()=>Se});var u=j(5861),re=j(2090);class Z{constructor(de,me,te){this.name=de,this.instanceFactory=me,this.type=te,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(de){return this.instantiationMode=de,this}setMultipleInstances(de){return this.multipleInstances=de,this}setServiceProps(de){return this.serviceProps=de,this}setInstanceCreatedCallback(de){return this.onInstanceCreated=de,this}}const Ne="[DEFAULT]";class Se{constructor(de,me){this.name=de,this.container=me,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(de){const me=this.normalizeInstanceIdentifier(de);if(!this.instancesDeferred.has(me)){const te=new re.BH;if(this.instancesDeferred.set(me,te),this.isInitialized(me)||this.shouldAutoInitialize())try{const he=this.getOrInitializeService({instanceIdentifier:me});he&&te.resolve(he)}catch(he){}}return this.instancesDeferred.get(me).promise}getImmediate(de){var me;const te=this.normalizeInstanceIdentifier(null==de?void 0:de.identifier),he=null!==(me=null==de?void 0:de.optional)&&void 0!==me&&me;if(!this.isInitialized(te)&&!this.shouldAutoInitialize()){if(he)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:te})}catch(Ue){if(he)return null;throw Ue}}getComponent(){return this.component}setComponent(de){if(de.name!==this.name)throw Error(`Mismatching Component ${de.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=de,this.shouldAutoInitialize()){if(function Ie(ye){return"EAGER"===ye.instantiationMode}(de))try{this.getOrInitializeService({instanceIdentifier:Ne})}catch(me){}for(const[me,te]of this.instancesDeferred.entries()){const he=this.normalizeInstanceIdentifier(me);try{const Ue=this.getOrInitializeService({instanceIdentifier:he});te.resolve(Ue)}catch(Ue){}}}}clearInstance(de=Ne){this.instancesDeferred.delete(de),this.instancesOptions.delete(de),this.instances.delete(de)}delete(){var de=this;return(0,u.Z)(function*(){const me=Array.from(de.instances.values());yield Promise.all([...me.filter(te=>"INTERNAL"in te).map(te=>te.INTERNAL.delete()),...me.filter(te=>"_delete"in te).map(te=>te._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(de=Ne){return this.instances.has(de)}getOptions(de=Ne){return this.instancesOptions.get(de)||{}}initialize(de={}){const{options:me={}}=de,te=this.normalizeInstanceIdentifier(de.instanceIdentifier);if(this.isInitialized(te))throw Error(`${this.name}(${te}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const he=this.getOrInitializeService({instanceIdentifier:te,options:me});for(const[Ue,Oe]of this.instancesDeferred.entries())te===this.normalizeInstanceIdentifier(Ue)&&Oe.resolve(he);return he}onInit(de,me){var te;const he=this.normalizeInstanceIdentifier(me),Ue=null!==(te=this.onInitCallbacks.get(he))&&void 0!==te?te:new Set;Ue.add(de),this.onInitCallbacks.set(he,Ue);const Oe=this.instances.get(he);return Oe&&de(Oe,he),()=>{Ue.delete(de)}}invokeOnInitCallbacks(de,me){const te=this.onInitCallbacks.get(me);if(te)for(const he of te)try{he(de,me)}catch(Ue){}}getOrInitializeService({instanceIdentifier:de,options:me={}}){let te=this.instances.get(de);if(!te&&this.component&&(te=this.component.instanceFactory(this.container,{instanceIdentifier:(ye=de,ye===Ne?void 0:ye),options:me}),this.instances.set(de,te),this.instancesOptions.set(de,me),this.invokeOnInitCallbacks(te,de),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,de,te)}catch(he){}var ye;return te||null}normalizeInstanceIdentifier(de=Ne){return this.component?this.component.multipleInstances?de:Ne:de}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class we{constructor(de){this.name=de,this.providers=new Map}addComponent(de){const me=this.getProvider(de.name);if(me.isComponentSet())throw new Error(`Component ${de.name} has already been registered with ${this.name}`);me.setComponent(de)}addOrOverwriteComponent(de){this.getProvider(de.name).isComponentSet()&&this.providers.delete(de.name),this.addComponent(de)}getProvider(de){if(this.providers.has(de))return this.providers.get(de);const me=new Se(de,this);return this.providers.set(de,me),me}getProviders(){return Array.from(this.providers.values())}}},1877:(Jt,ct,j)=>{"use strict";j.d(ct,{in:()=>re,Yd:()=>Ie,Ub:()=>we,Am:()=>ye});const u=[];var re=(()=>{return(de=re||(re={}))[de.DEBUG=0]="DEBUG",de[de.VERBOSE=1]="VERBOSE",de[de.INFO=2]="INFO",de[de.WARN=3]="WARN",de[de.ERROR=4]="ERROR",de[de.SILENT=5]="SILENT",re;var de})();const Z={debug:re.DEBUG,verbose:re.VERBOSE,info:re.INFO,warn:re.WARN,error:re.ERROR,silent:re.SILENT},Ne=re.INFO,Se={[re.DEBUG]:"log",[re.VERBOSE]:"log",[re.INFO]:"info",[re.WARN]:"warn",[re.ERROR]:"error"},ae=(de,me,...te)=>{if(me<de.logLevel)return;const he=(new Date).toISOString(),Ue=Se[me];if(!Ue)throw new Error(`Attempted to log a message with an invalid logType (value: ${me})`);console[Ue](`[${he}]  ${de.name}:`,...te)};class Ie{constructor(me){this.name=me,this._logLevel=Ne,this._logHandler=ae,this._userLogHandler=null,u.push(this)}get logLevel(){return this._logLevel}set logLevel(me){if(!(me in re))throw new TypeError(`Invalid value "${me}" assigned to \`logLevel\``);this._logLevel=me}setLogLevel(me){this._logLevel="string"==typeof me?Z[me]:me}get logHandler(){return this._logHandler}set logHandler(me){if("function"!=typeof me)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=me}get userLogHandler(){return this._userLogHandler}set userLogHandler(me){this._userLogHandler=me}debug(...me){this._userLogHandler&&this._userLogHandler(this,re.DEBUG,...me),this._logHandler(this,re.DEBUG,...me)}log(...me){this._userLogHandler&&this._userLogHandler(this,re.VERBOSE,...me),this._logHandler(this,re.VERBOSE,...me)}info(...me){this._userLogHandler&&this._userLogHandler(this,re.INFO,...me),this._logHandler(this,re.INFO,...me)}warn(...me){this._userLogHandler&&this._userLogHandler(this,re.WARN,...me),this._logHandler(this,re.WARN,...me)}error(...me){this._userLogHandler&&this._userLogHandler(this,re.ERROR,...me),this._logHandler(this,re.ERROR,...me)}}function we(de){u.forEach(me=>{me.setLogLevel(de)})}function ye(de,me){for(const te of u){let he=null;me&&me.level&&(he=Z[me.level]),te.userLogHandler=null===de?null:(Ue,Oe,..._e)=>{const Pe=_e.map(ke=>{if(null==ke)return null;if("string"==typeof ke)return ke;if("number"==typeof ke||"boolean"==typeof ke)return ke.toString();if(ke instanceof Error)return ke.message;try{return JSON.stringify(ke)}catch(ht){return null}}).filter(ke=>ke).join(" ");Oe>=(null!=he?he:Ue.logLevel)&&de({level:re[Oe].toLowerCase(),message:Pe,args:_e,type:Ue.name})}}}},5861:(Jt,ct,j)=>{"use strict";function u(Z,Ne,Se,ae,Ie,we,ye){try{var de=Z[we](ye),me=de.value}catch(te){return void Se(te)}de.done?Ne(me):Promise.resolve(me).then(ae,Ie)}function re(Z){return function(){var Ne=this,Se=arguments;return new Promise(function(ae,Ie){var we=Z.apply(Ne,Se);function ye(me){u(we,ae,Ie,ye,de,"next",me)}function de(me){u(we,ae,Ie,ye,de,"throw",me)}ye(void 0)})}}j.d(ct,{Z:()=>re})}},Jt=>{Jt(Jt.s=2646)}]);